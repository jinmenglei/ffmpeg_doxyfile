<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/ilbcdec.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ilbcdec.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ilbcdec_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2013, The WebRTC project authors. All rights reserved.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Redistribution and use in source and binary forms, with or without</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modification, are permitted provided that the following conditions are</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * met:</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *   * Redistributions of source code must retain the above copyright</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *     notice, this list of conditions and the following disclaimer.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *   * Redistributions in binary form must reproduce the above copyright</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *     notice, this list of conditions and the following disclaimer in</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *     the documentation and/or other materials provided with the</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *     distribution.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *   * Neither the name of Google nor the names of its contributors may</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *     be used to endorse or promote products derived from this software</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *     without specific prior written permission.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="get__bits_8h.html">get_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ilbcdata_8h.html">ilbcdata.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a2b3f7293a5ad6762785329041eba0c10">   38</a></span>&#160;<span class="preprocessor">#define LPC_N_20MS            1</span></div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a1cb863b0efcf1c4e88ede6e0f753fbe7">   39</a></span>&#160;<span class="preprocessor">#define LPC_N_30MS            2</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a9fc666d444bbd274dd41d82d00505dfe">   40</a></span>&#160;<span class="preprocessor">#define LPC_N_MAX             2</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ab418f35382239badf6ea78735fde7ec7">   41</a></span>&#160;<span class="preprocessor">#define LSF_NSPLIT            3</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#define NASUB_MAX             4</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">   43</a></span>&#160;<span class="preprocessor">#define LPC_FILTERORDER       10</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#define NSUB_MAX              6</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">   45</a></span>&#160;<span class="preprocessor">#define SUBL                  40</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#af8f127d959b3a0ce01d1e4783a9dd906">   47</a></span>&#160;<span class="preprocessor">#define ST_MEM_L_TBL          85</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#aab0cabe18c7a7f8bcfae1afe1e115b7f">   48</a></span>&#160;<span class="preprocessor">#define MEM_LF_TBL            147</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#define STATE_SHORT_LEN_20MS  57</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#define STATE_SHORT_LEN_30MS  58</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#define BLOCKL_MAX            240</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">   53</a></span>&#160;<span class="preprocessor">#define CB_MEML               147</span></div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">   54</a></span>&#160;<span class="preprocessor">#define CB_NSTAGES            3</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">   55</a></span>&#160;<span class="preprocessor">#define CB_HALFFILTERLEN      4</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a29e4b8356f0f2066fc68131d95686367">   56</a></span>&#160;<span class="preprocessor">#define CB_FILTERLEN          8</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#aa9f326b6e732839ccb073c5da50e449c">   58</a></span>&#160;<span class="preprocessor">#define ENH_NBLOCKS_TOT 8</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a23fc83b93e0b51255af196f961aac28d">   59</a></span>&#160;<span class="preprocessor">#define ENH_BLOCKL     80</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a95272a815d96cefb63f242b354f645ab">   60</a></span>&#160;<span class="preprocessor">#define ENH_BUFL     (ENH_NBLOCKS_TOT)*ENH_BLOCKL</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a4d848aef68ba502e1bf3b609cd3aa772">   61</a></span>&#160;<span class="preprocessor">#define ENH_BUFL_FILTEROVERHEAD  3</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a2df51c730f969eb62df06cbb4fdd83fd">   62</a></span>&#160;<span class="preprocessor">#define BLOCKL_MAX      240</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#af6abb078d0e7f5134a8c965e70c5993d">   63</a></span>&#160;<span class="preprocessor">#define NSUB_20MS         4</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a815826c0b293968546de09fce7af0d7f">   64</a></span>&#160;<span class="preprocessor">#define NSUB_30MS         6</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a76bacf5a00aae6ca21da4d5bba32c42a">   65</a></span>&#160;<span class="preprocessor">#define NSUB_MAX          6</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a5be08af05b1df9dd737718af87bcb2c8">   66</a></span>&#160;<span class="preprocessor">#define NASUB_20MS        2</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a2679687b6ce6c8112be6f57dfdc116d5">   67</a></span>&#160;<span class="preprocessor">#define NASUB_30MS        4</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ab7bb40d6146357e514716c92f2933d76">   68</a></span>&#160;<span class="preprocessor">#define NASUB_MAX         4</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a245be810ed0fe30aebb4d8a44130c2fa">   69</a></span>&#160;<span class="preprocessor">#define STATE_LEN        80</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a747cd6cbb7b71f5ce052edaf3f48aa01">   70</a></span>&#160;<span class="preprocessor">#define STATE_SHORT_LEN_30MS  58</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a469c7299ecaeab7c42efcf100edfc096">   71</a></span>&#160;<span class="preprocessor">#define STATE_SHORT_LEN_20MS  57</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">   73</a></span>&#160;<span class="preprocessor">#define SPL_MUL_16_16(a, b) ((int32_t) (((int16_t)(a)) * ((int16_t)(b))))</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">   74</a></span>&#160;<span class="preprocessor">#define SPL_MUL_16_16_RSFT(a, b, c) (SPL_MUL_16_16(a, b) &gt;&gt; (c))</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html">   76</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_i_l_b_c_frame.html">ILBCFrame</a> {</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#a18bd3e53a73e87f20c6308beb5fbf1e3">   77</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#a18bd3e53a73e87f20c6308beb5fbf1e3">lsf</a>[<a class="code" href="ilbcdec_8c.html#ab418f35382239badf6ea78735fde7ec7">LSF_NSPLIT</a>*<a class="code" href="ilbcdec_8c.html#a9fc666d444bbd274dd41d82d00505dfe">LPC_N_MAX</a>];</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">   78</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">cb_index</a>[<a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>*(<a class="code" href="ilbcdec_8c.html#ab7bb40d6146357e514716c92f2933d76">NASUB_MAX</a> + 1)];</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">   79</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">gain_index</a>[<a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>*(<a class="code" href="ilbcdec_8c.html#ab7bb40d6146357e514716c92f2933d76">NASUB_MAX</a> + 1)];</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#a63bdd6e911474d951773f8bff2e424f6">   80</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#a63bdd6e911474d951773f8bff2e424f6">ifm</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#a29bcff5b56c75b3d3bcacb3e91ef9287">   81</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#a29bcff5b56c75b3d3bcacb3e91ef9287">state_first</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#a38733b4052ced468ff16ec24f03d8ecb">   82</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#a38733b4052ced468ff16ec24f03d8ecb">idx</a>[<a class="code" href="ilbcdec_8c.html#a747cd6cbb7b71f5ce052edaf3f48aa01">STATE_SHORT_LEN_30MS</a>];</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#abd8cd709857c6dfa42ce57d46a1166c6">   83</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#abd8cd709857c6dfa42ce57d46a1166c6">firstbits</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">   84</a></span>&#160;    int16_t  <a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ada7b5892bd48655a99e707edcbc32a44">   85</a></span>&#160;} <a class="code" href="ilbcdec_8c.html#ada7b5892bd48655a99e707edcbc32a44">ILBCFrame</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html">   87</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> {</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a36f97931d4c861ec3f1942741c77c584">   88</a></span>&#160;    <a class="code" href="struct_a_v_class.html">AVClass</a>         *<span class="keyword">class</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a69b7e359fa10ea322644b4026e85c39e">   89</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a69b7e359fa10ea322644b4026e85c39e">enhancer</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a89698c2ccbaf574480f21c13fa7bbf7c">   91</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a89698c2ccbaf574480f21c13fa7bbf7c">mode</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#af5d84c0cacc09392860ab7731169d9bf">   92</a></span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a>    <a class="code" href="struct_i_l_b_c_context.html#af5d84c0cacc09392860ab7731169d9bf">gb</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a80025d8c1d3f006411ccf74e8cd67d79">   93</a></span>&#160;    <a class="code" href="struct_i_l_b_c_frame.html">ILBCFrame</a>        <a class="code" href="struct_i_l_b_c_context.html#a80025d8c1d3f006411ccf74e8cd67d79">frame</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a94188118585e4c5f6f068836643c4cdc">   95</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a94188118585e4c5f6f068836643c4cdc">prev_enh_pl</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a0fd579e74a548e5509e9cc4cc6d993d4">   96</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a0fd579e74a548e5509e9cc4cc6d993d4">consPLICount</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a207a75e681d575f5b43eb9a1f7398110">   97</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a207a75e681d575f5b43eb9a1f7398110">last_lag</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#acc782bc054234243ee1cb77329c1aa57">   98</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#acc782bc054234243ee1cb77329c1aa57">state_short_len</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a279852770f38c588259c1d6e0cdaec06">   99</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a279852770f38c588259c1d6e0cdaec06">lpc_n</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#ad1efe5d14f4944890debd7c26205c16b">  100</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#ad1efe5d14f4944890debd7c26205c16b">nasub</a>;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#ab8e5a86ac5a483d6dd5eed6f0a092dc1">  101</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#ab8e5a86ac5a483d6dd5eed6f0a092dc1">nsub</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a67886a114bbe5560f014c1357967560a">  102</a></span>&#160;    <span class="keywordtype">int</span>              <a class="code" href="struct_i_l_b_c_context.html#a67886a114bbe5560f014c1357967560a">block_samples</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#abcefc4149c1fbf4f3e0fde5748aa6007">  103</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#abcefc4149c1fbf4f3e0fde5748aa6007">no_of_words</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a347f26c7987ace8d5b78ed47564f5c2b">  104</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a347f26c7987ace8d5b78ed47564f5c2b">no_of_bytes</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a79e330b3c141afdedf2d73383fae8375">  105</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a79e330b3c141afdedf2d73383fae8375">lsfdeq</a>[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>*<a class="code" href="ilbcdec_8c.html#a9fc666d444bbd274dd41d82d00505dfe">LPC_N_MAX</a>];</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a41cde7c84114b84286ab737a4bc1d8ae">  106</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a41cde7c84114b84286ab737a4bc1d8ae">lsfold</a>[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a033757a7a91022f248f49924dc914343">  107</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a033757a7a91022f248f49924dc914343">syntMem</a>[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#ae7b6a5d0bd13c1fd8530cad999420a5d">  108</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#ae7b6a5d0bd13c1fd8530cad999420a5d">lsfdeqold</a>[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#aa4dbfe8518fae853e1066aee76dece19">  109</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#aa4dbfe8518fae853e1066aee76dece19">weightdenum</a>[(<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1) * <a class="code" href="ilbcdec_8c.html#a76bacf5a00aae6ca21da4d5bba32c42a">NSUB_MAX</a>];</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a98385d678d5d8d51381a94ad87b083ab">  110</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a98385d678d5d8d51381a94ad87b083ab">syntdenum</a>[<a class="code" href="ilbcdec_8c.html#a76bacf5a00aae6ca21da4d5bba32c42a">NSUB_MAX</a> * (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1)];</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a18ac59f714ced248b84497f1c1da29b4">  111</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a18ac59f714ced248b84497f1c1da29b4">old_syntdenum</a>[<a class="code" href="ilbcdec_8c.html#a76bacf5a00aae6ca21da4d5bba32c42a">NSUB_MAX</a> * (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1)];</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a3a46e43a6ab9f26dd6739d022512e01f">  112</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a3a46e43a6ab9f26dd6739d022512e01f">enh_buf</a>[<a class="code" href="ilbcdec_8c.html#a95272a815d96cefb63f242b354f645ab">ENH_BUFL</a>+<a class="code" href="ilbcdec_8c.html#a4d848aef68ba502e1bf3b609cd3aa772">ENH_BUFL_FILTEROVERHEAD</a>];</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#ae93919a6371ef9cb61770edf09414f46">  113</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#ae93919a6371ef9cb61770edf09414f46">enh_period</a>[<a class="code" href="ilbcdec_8c.html#aa9f326b6e732839ccb073c5da50e449c">ENH_NBLOCKS_TOT</a>];</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a36c4eb866a9e2d517fc4c42e631190a4">  114</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a36c4eb866a9e2d517fc4c42e631190a4">prevResidual</a>[<a class="code" href="ilbcdec_8c.html#a76bacf5a00aae6ca21da4d5bba32c42a">NSUB_MAX</a>*<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>];</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a78c7dd7e728ec4d1d4132dcd7ebb5c4a">  115</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a78c7dd7e728ec4d1d4132dcd7ebb5c4a">decresidual</a>[<a class="code" href="ilbcdec_8c.html#a2df51c730f969eb62df06cbb4fdd83fd">BLOCKL_MAX</a>];</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#ae993823e967104dbe484501165f8c8fc">  116</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#ae993823e967104dbe484501165f8c8fc">plc_residual</a>[<a class="code" href="ilbcdec_8c.html#a2df51c730f969eb62df06cbb4fdd83fd">BLOCKL_MAX</a> + <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a0f472d5086d57c0143e6c1b53db6b940">  117</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a0f472d5086d57c0143e6c1b53db6b940">seed</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#aa1b725354128925ac717256d34c46221">  118</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#aa1b725354128925ac717256d34c46221">prevPLI</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a5be5d7e2d6dfd6da2183526cdebfb538">  119</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a5be5d7e2d6dfd6da2183526cdebfb538">prevScale</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a2dbca56c298956087405970f4a731494">  120</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a2dbca56c298956087405970f4a731494">prevLag</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a75280c5af04388fac330d56b0d3dda92">  121</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a75280c5af04388fac330d56b0d3dda92">per_square</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#aba3ff2d674f6c850be0ad3b75511d080">  122</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#aba3ff2d674f6c850be0ad3b75511d080">prev_lpc</a>[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1];</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#ae2d4b43f738b5e49699f5c4d55629fb0">  123</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#ae2d4b43f738b5e49699f5c4d55629fb0">plc_lpc</a>[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1];</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a047f23cf71a67d7d9979a0976fd8638b">  124</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a047f23cf71a67d7d9979a0976fd8638b">hpimemx</a>[2];</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="struct_i_l_b_c_context.html#a91453685641c026b3d48cc175f3cc776">  125</a></span>&#160;    int16_t          <a class="code" href="struct_i_l_b_c_context.html#a91453685641c026b3d48cc175f3cc776">hpimemy</a>[4];</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a833f08ac569362030405a62d892cd0df">  126</a></span>&#160;} <a class="code" href="ilbcdec_8c.html#a833f08ac569362030405a62d892cd0df">ILBCContext</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#afedc0e8a4e4f13aecb75260c6968b4ac">  128</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ilbcdec_8c.html#afedc0e8a4e4f13aecb75260c6968b4ac">unpack_frame</a>(<a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="struct_i_l_b_c_frame.html">ILBCFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;lsf[0] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;lsf[1] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;lsf[2] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 20) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;start          = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;state_first    = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;ifm            = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[0]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6) &lt;&lt; 1;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[0]  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 3;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[1]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[3]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7) &lt;&lt; 1;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[3]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 4;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[4]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[6]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 4;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;lsf[3]         = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;lsf[4]         = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;lsf[5]         = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;start          = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;state_first    = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;ifm            = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[0]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) &lt;&lt; 3;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[0]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 4;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[1]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[3]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6) &lt;&lt; 2;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[3]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 4;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[4]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 48; j++)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[j] = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 20) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">for</span> (; j &lt; 57; j++)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[j] = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[1] |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[3] |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 2;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[4] |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[6] |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[7]  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 2;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">for</span> (; j &lt; 58; j++)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[j] = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[0]    |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 1;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[0]  |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[1]  |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[3]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 1;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[6]     = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 7;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[6]    |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6) &lt;&lt; 1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[9]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7) &lt;&lt; 1;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[12]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3) &lt;&lt; 5;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[12]   |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) &lt;&lt; 1;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[3]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 2;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[4]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 1;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[6]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 3;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[7]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2) &lt;&lt; 2;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[9]   = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 4;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[10]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[12]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 4;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[13]  = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 3;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; 56; j++)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[j] |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 20) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[56]        |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[0]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[1]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[2]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6) &lt;&lt; 1;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[2]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[0]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[1]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[2]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[3]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[4]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6) &lt;&lt; 1;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[4]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[5]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[6]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[7]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[8]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[3]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[4]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[5]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[6]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[7]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[8]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[56]        |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;idx[57]        |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[0]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[1]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[2]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) &lt;&lt; 3;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[2]    |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[0]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[1]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[2]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[3]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[4]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) &lt;&lt; 3;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[4]    |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[5]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[6]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[7]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5) &lt;&lt; 3;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[7]    |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[8]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[9]    |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[10]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4) &lt;&lt; 4;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[10]   |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[11]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[12]   |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[13]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3) &lt;&lt; 5;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[13]   |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;cb_index[14]    = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[3]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[4]  |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[5]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[6]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[7]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[8]   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[9]  |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[10] |= <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) &lt;&lt; 2;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[10] |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[11]  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[12] |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[13] |= <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;gain_index[14]  = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#aecf053dbfaf151531c1c04d9ba5815c0">  268</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#aecf053dbfaf151531c1c04d9ba5815c0">index_conv</a>(int16_t *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">for</span> (k = 4; k &lt; 6; k++) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[k] &gt;= 44 &amp;&amp; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[k] &lt; 108) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[k] += 64;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[k] &gt;= 108 &amp;&amp; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[k] &lt; 128) {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[k] += 128;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a4f52da82c03c84df718c45fb4fc27d54">  281</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a4f52da82c03c84df718c45fb4fc27d54">lsf_dequantization</a>(int16_t *lsfdeq, int16_t *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, int16_t lpc_n)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = 0, cb_pos = 0;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ilbcdec_8c.html#ab418f35382239badf6ea78735fde7ec7">LSF_NSPLIT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]; j++) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            lsfdeq[<a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> + j] = <a class="code" href="ilbcdata_8h.html#a94bee96d5817037bddc8fd5987d7203e">lsf_codebook</a>[cb_pos + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + j];</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>    += <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        cb_pos += <a class="code" href="ilbcdata_8h.html#af1cb72941ba7d36763093868731d7eb9">lsf_size_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">if</span> (lpc_n &gt; 1) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = 0;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        cb_pos = 0;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ilbcdec_8c.html#ab418f35382239badf6ea78735fde7ec7">LSF_NSPLIT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]; j++) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                lsfdeq[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> + j] = <a class="code" href="ilbcdata_8h.html#a94bee96d5817037bddc8fd5987d7203e">lsf_codebook</a>[cb_pos +</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                    <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[<a class="code" href="ilbcdec_8c.html#ab418f35382239badf6ea78735fde7ec7">LSF_NSPLIT</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + j];</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>    += <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            cb_pos += <a class="code" href="ilbcdata_8h.html#af1cb72941ba7d36763093868731d7eb9">lsf_size_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a57b54a23f0e10f6406818f712ed392f0">  309</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a57b54a23f0e10f6406818f712ed392f0">lsf_check_stability</a>(int16_t *lsf, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#a70b5e28b5bc3d1b63a7435c5fe50b837">dim</a>, <span class="keywordtype">int</span> nb_vectors)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; 2; n++) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 0; m &lt; nb_vectors; m++) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; <a class="code" href="vorbis__enc__data_8h.html#a70b5e28b5bc3d1b63a7435c5fe50b837">dim</a> - 1; k++) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = m * <a class="code" href="vorbis__enc__data_8h.html#a70b5e28b5bc3d1b63a7435c5fe50b837">dim</a> + k;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="keywordflow">if</span> ((lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] - lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &lt; 319) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    <span class="keywordflow">if</span> (lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] &lt; lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                        lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] = lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                        lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     = lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] - 160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                        lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]     -= 160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                        lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] += 160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = av_clip(lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], 82, 25723);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a75d6345063335cb100c3672cd0fb9e69">  332</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a75d6345063335cb100c3672cd0fb9e69">lsf_interpolate</a>(int16_t *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, int16_t *in1,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                            int16_t *in2, int16_t coef,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                            <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">int</span> invcoef = 16384 - coef, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (coef * in1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + invcoef * in2[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 8192) &gt;&gt; 14;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ae50a02312762a47772c64939a42064a2">  342</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#ae50a02312762a47772c64939a42064a2">lsf2lsp</a>(int16_t *lsf, int16_t *lsp, <span class="keywordtype">int</span> order)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    int16_t <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>, freq;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> tmp;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, k;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; order; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        freq = (lsf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * 20861) &gt;&gt; 15;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="comment">/* 20861: 1.0/(2.0*PI) in Q17 */</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">           Upper 8 bits give the index k and</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">           Lower 8 bits give the difference, which needs</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">           to be approximated linearly</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        k = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(freq &gt;&gt; 8, 63);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = freq &amp; 0xFF;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">/* Calculate linear approximation */</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        tmp = <a class="code" href="ilbcdata_8h.html#af1436c05fe6b1f7733b5cfa38278ef9c">cos_derivative_tbl</a>[k] * <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        lsp[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ilbcdata_8h.html#a58de63ccac850e23bd5461bdcc3c1126">cos_tbl</a>[k] + (tmp &gt;&gt; 12);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a9e29b4d976663d35f65f31ae591bebf9">  365</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a9e29b4d976663d35f65f31ae591bebf9">get_lsp_poly</a>(int16_t *lsp, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    int16_t high, low;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k, l;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> tmp;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[0] = 16777216;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[1] = lsp[0] * -1024;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2, k = 2, l = 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt;= 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++, k += 2) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l] = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l - 2];</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">for</span> (j = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>; j &gt; 1; j--, l--) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            high = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l - 1] &gt;&gt; 16;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            low = (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l - 1] - (high * (1 &lt;&lt; 16))) &gt;&gt; 1;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            tmp = ((high * lsp[k]) * 4) + (((low * lsp[k]) &gt;&gt; 15) * 4);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l] += <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l - 2];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l] -= (unsigned)tmp;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[l] -= lsp[k] * (1 &lt;&lt; 10);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        l += <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ab794423fb4dab440f3bbcd19cadcd9ff">  392</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#ab794423fb4dab440f3bbcd19cadcd9ff">lsf2poly</a>(int16_t *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, int16_t *lsf)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[2][6];</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    int16_t lsp[10];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> tmp;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="ilbcdec_8c.html#ae50a02312762a47772c64939a42064a2">lsf2lsp</a>(lsf, lsp, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="ilbcdec_8c.html#a9e29b4d976663d35f65f31ae591bebf9">get_lsp_poly</a>(&amp;lsp[0], <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[0]);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="ilbcdec_8c.html#a9e29b4d976663d35f65f31ae591bebf9">get_lsp_poly</a>(&amp;lsp[1], <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[1]);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += (unsigned)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -= (unsigned)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1];</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>[0] = 4096;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 5; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        tmp = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[0][6 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + (unsigned)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[1][6 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 4096;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>[6 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = tmp &gt;&gt; 13;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        tmp = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[0][6 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - (unsigned)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>[1][6 - <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 4096;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>[5 + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = tmp &gt;&gt; 13;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a0e96262ee2149aebb2e77c8f859e8039">  419</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a0e96262ee2149aebb2e77c8f859e8039">lsp_interpolate2polydec</a>(int16_t *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, int16_t *lsf1,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                   int16_t *lsf2, <span class="keywordtype">int</span> coef, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    int16_t lsftmp[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="ilbcdec_8c.html#a75d6345063335cb100c3672cd0fb9e69">lsf_interpolate</a>(lsftmp, lsf1, lsf2, coef, length);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="ilbcdec_8c.html#ab794423fb4dab440f3bbcd19cadcd9ff">lsf2poly</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, lsftmp);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a75a38dea7e6e76445dc971522cb18102">  428</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a75a38dea7e6e76445dc971522cb18102">bw_expand</a>(int16_t *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> int16_t *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <span class="keyword">const</span> int16_t *coef, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;{</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[0] = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[0];</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (coef[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 16384) &gt;&gt; 15;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a6181d4f3a92b6aed63994130de756f13">  437</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a6181d4f3a92b6aed63994130de756f13">lsp_interpolate</a>(int16_t *syntdenum, int16_t *weightdenum,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                            int16_t *lsfdeq, int16_t length,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                            <a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    int16_t lp[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1], *lsfdeq2;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, lp_length;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    lsfdeq2 = lsfdeq + length;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    lp_length = length + 1;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 30) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="ilbcdec_8c.html#a0e96262ee2149aebb2e77c8f859e8039">lsp_interpolate2polydec</a>(lp, (*s).lsfdeqold, lsfdeq, <a class="code" href="ilbcdata_8h.html#ac62ff60b3293d8fcd18d31629b0ab5a8">lsf_weight_30ms</a>[0], length);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        memcpy(syntdenum, lp, lp_length * 2);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="ilbcdec_8c.html#a75a38dea7e6e76445dc971522cb18102">bw_expand</a>(weightdenum, lp, <a class="code" href="ilbcdata_8h.html#a7be30426e8711073abc55387be742c24">kLpcChirpSyntDenum</a>, lp_length);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = lp_length;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <a class="code" href="ilbcdec_8c.html#a0e96262ee2149aebb2e77c8f859e8039">lsp_interpolate2polydec</a>(lp, lsfdeq, lsfdeq2,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                                 <a class="code" href="ilbcdata_8h.html#ac62ff60b3293d8fcd18d31629b0ab5a8">lsf_weight_30ms</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                                 length);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            memcpy(syntdenum + <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, lp, lp_length * 2);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <a class="code" href="ilbcdec_8c.html#a75a38dea7e6e76445dc971522cb18102">bw_expand</a>(weightdenum + <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, lp, <a class="code" href="ilbcdata_8h.html#a7be30426e8711073abc55387be742c24">kLpcChirpSyntDenum</a>, lp_length);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> += lp_length;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <a class="code" href="ilbcdec_8c.html#a0e96262ee2149aebb2e77c8f859e8039">lsp_interpolate2polydec</a>(lp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsfdeqold, lsfdeq,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                    <a class="code" href="ilbcdata_8h.html#a0bb9c464332aeaca079e4e5a618a11e0">lsf_weight_20ms</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], length);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            memcpy(syntdenum + <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, lp, lp_length * 2);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <a class="code" href="ilbcdec_8c.html#a75a38dea7e6e76445dc971522cb18102">bw_expand</a>(weightdenum + <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>, lp, <a class="code" href="ilbcdata_8h.html#a7be30426e8711073abc55387be742c24">kLpcChirpSyntDenum</a>, lp_length);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> += lp_length;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 30) {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsfdeqold, lsfdeq2, length * 2);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsfdeqold, lsfdeq, length * 2);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a9e6fa2718b54eeb085e90597343ebbc7">  479</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a9e6fa2718b54eeb085e90597343ebbc7">filter_mafq12</a>(int16_t *in_ptr, int16_t *out_ptr,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                          int16_t *<a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>, int16_t B_length,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                          int16_t length)</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">int</span> o, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keyword">const</span> int16_t *b_ptr = &amp;<a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>[0];</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keyword">const</span> int16_t *x_ptr = &amp;in_ptr[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        o = 0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; B_length; j++)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            o += b_ptr[j] * *x_ptr--;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        o = av_clip(o, -134217728, 134215679);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        out_ptr[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = ((o + 2048) &gt;&gt; 12);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#aa530bdee48e0846015c8107a33dcf8d4">  499</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#aa530bdee48e0846015c8107a33dcf8d4">filter_arfq12</a>(<span class="keyword">const</span> int16_t *data_in,</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                          int16_t *data_out,</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                          <span class="keyword">const</span> int16_t *<a class="code" href="dctref_8c.html#a0658ae9bad1daa7c7665c126215b57f3">coefficients</a>,</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                          <span class="keywordtype">int</span> coefficients_length,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                          <span class="keywordtype">int</span> data_length)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; data_length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a> = 0, sum = 0;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">for</span> (j = coefficients_length - 1; j &gt; 0; j--) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            sum += (unsigned)(<a class="code" href="dctref_8c.html#a0658ae9bad1daa7c7665c126215b57f3">coefficients</a>[j] * data_out[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - j]);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a> = <a class="code" href="dctref_8c.html#a0658ae9bad1daa7c7665c126215b57f3">coefficients</a>[0] * data_in[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - (unsigned)sum;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a> = av_clip(<a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a>, -134217728, 134215679);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        data_out[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a> + 2048) &gt;&gt; 12;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a3c03aaf740a0a854f6838b201608d2f6">  521</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a3c03aaf740a0a854f6838b201608d2f6">state_construct</a>(int16_t ifm, int16_t *idx,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                           int16_t *synt_denum, int16_t *Out_fix,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                           int16_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    int16_t maxVal;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    int16_t *tmp1, *tmp2, *tmp3;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="comment">/* Stack based */</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    int16_t numerator[1 + <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    int16_t sampleValVec[2 * <a class="code" href="ilbcdec_8c.html#a747cd6cbb7b71f5ce052edaf3f48aa01">STATE_SHORT_LEN_30MS</a> + <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    int16_t sampleMaVec[2 * <a class="code" href="ilbcdec_8c.html#a747cd6cbb7b71f5ce052edaf3f48aa01">STATE_SHORT_LEN_30MS</a> + <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    int16_t *sampleVal = &amp;sampleValVec[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    int16_t *sampleMa = &amp;sampleMaVec[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    int16_t *sampleAr = &amp;sampleValVec[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">/* initialization of coefficients */</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">for</span> (k = 0; k &lt; <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1; k++) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        numerator[k] = synt_denum[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> - k];</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">/* decoding of the maximum value */</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    maxVal = <a class="code" href="ilbcdata_8h.html#a167c6e6d578f9521f65d7456334dcecb">frg_quant_mod</a>[ifm];</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">/* decoding of the sample values */</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    tmp1 = sampleVal;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    tmp2 = &amp;idx[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1];</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">if</span> (ifm &lt; 37) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; k++) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="comment">/*the shifting is due to the Q13 in sq4_fixQ13[i], also the adding of 2097152 (= 0.5 &lt;&lt; 22)</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">               maxVal is in Q8 and result is in Q(-1) */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            (*tmp1) = (int16_t) ((<a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(maxVal, <a class="code" href="ilbcdata_8h.html#a2b7d16dd7528f0f6a22f3786e754d774">ilbc_state</a>[(*tmp2)]) + 2097152) &gt;&gt; 22);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            tmp1++;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            tmp2--;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ifm &lt; 59) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; k++) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            <span class="comment">/*the shifting is due to the Q13 in sq4_fixQ13[i], also the adding of 262144 (= 0.5 &lt;&lt; 19)</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">               maxVal is in Q5 and result is in Q(-1) */</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            (*tmp1) = (int16_t) ((<a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(maxVal, <a class="code" href="ilbcdata_8h.html#a2b7d16dd7528f0f6a22f3786e754d774">ilbc_state</a>[(*tmp2)]) + 262144) &gt;&gt; 19);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            tmp1++;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            tmp2--;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">for</span> (k = 0; k &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; k++) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="comment">/*the shifting is due to the Q13 in sq4_fixQ13[i], also the adding of 65536 (= 0.5 &lt;&lt; 17)</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">               maxVal is in Q3 and result is in Q(-1) */</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            (*tmp1) = (int16_t) ((<a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(maxVal, <a class="code" href="ilbcdata_8h.html#a2b7d16dd7528f0f6a22f3786e754d774">ilbc_state</a>[(*tmp2)]) + 65536) &gt;&gt; 17);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            tmp1++;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            tmp2--;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">/* Set the rest of the data to zero */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    memset(&amp;sampleVal[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>], 0, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> * 2);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">/* circular convolution with all-pass filter */</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="comment">/* Set the state to zero */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    memset(sampleValVec, 0, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> * 2);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">/* Run MA filter + AR filter */</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="ilbcdec_8c.html#a9e6fa2718b54eeb085e90597343ebbc7">filter_mafq12</a>(sampleVal, sampleMa, numerator, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    memset(&amp;sampleMa[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> + <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>], 0, (<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>) * 2);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="ilbcdec_8c.html#aa530bdee48e0846015c8107a33dcf8d4">filter_arfq12</a>(sampleMa, sampleAr, synt_denum, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1, 2 * <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    tmp1 = &amp;sampleAr[<a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1];</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    tmp2 = &amp;sampleAr[2 * <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 1];</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    tmp3 = Out_fix;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">for</span> (k = 0; k &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; k++) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        (*tmp3) = (*tmp1) + (*tmp2);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        tmp1--;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        tmp2--;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        tmp3++;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a91ed79f5bbc8fd210956b8f7e52cfc62">  600</a></span>&#160;<span class="keyword">static</span> int16_t <a class="code" href="ilbcdec_8c.html#a91ed79f5bbc8fd210956b8f7e52cfc62">gain_dequantization</a>(<span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <span class="keywordtype">int</span> max_in, <span class="keywordtype">int</span> stage)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    int16_t scale = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(1638, <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(max_in));</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> ((scale * <a class="code" href="ilbcdata_8h.html#aba3c79ab8b1dd9a47cc8d028ab0bd337">ilbc_gain</a>[stage][<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>]) + 8192) &gt;&gt; 14;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a3de6723747556c385ca683f3a5373cf7">  607</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a3de6723747556c385ca683f3a5373cf7">vector_rmultiplication</a>(int16_t *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> int16_t *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                                   <span class="keyword">const</span> int16_t *<a class="code" href="af__superequalizer_8c.html#aee608a3f1b53a55f3240954ef313065c">win</a>,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                                   <span class="keywordtype">int</span> length, <span class="keywordtype">int</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;{</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="af__superequalizer_8c.html#aee608a3f1b53a55f3240954ef313065c">win</a>[-<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &gt;&gt; <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a9eed97b76fb1e525cffd916701e1c805">  615</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a9eed97b76fb1e525cffd916701e1c805">vector_multiplication</a>(int16_t *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> int16_t *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                  <span class="keyword">const</span> int16_t *<a class="code" href="af__superequalizer_8c.html#aee608a3f1b53a55f3240954ef313065c">win</a>, <span class="keywordtype">int</span> length,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                  <span class="keywordtype">int</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="af__superequalizer_8c.html#aee608a3f1b53a55f3240954ef313065c">win</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &gt;&gt; <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a07e7eceeb81809d708cd550ee440bdc2">  623</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a07e7eceeb81809d708cd550ee440bdc2">add_vector_and_shift</a>(int16_t *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> int16_t *in1,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                 <span class="keyword">const</span> int16_t *in2, <span class="keywordtype">int</span> length,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                 <span class="keywordtype">int</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;{</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (in1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + in2[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &gt;&gt; <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a98b79ab424435032ce3a1f6430264bb5">  631</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a98b79ab424435032ce3a1f6430264bb5">create_augmented_vector</a>(<span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, int16_t *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>, int16_t *cbVec)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;{</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    int16_t cbVecTmp[4];</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordtype">int</span> interpolation_length = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(4, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    int16_t ilow = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> - interpolation_length;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    memcpy(cbVec, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> - <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> * 2);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="ilbcdec_8c.html#a9eed97b76fb1e525cffd916701e1c805">vector_multiplication</a>(&amp;cbVec[ilow], <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> - <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> - interpolation_length, <a class="code" href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a>, interpolation_length, 15);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="ilbcdec_8c.html#a3de6723747556c385ca683f3a5373cf7">vector_rmultiplication</a>(cbVecTmp, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> - interpolation_length, &amp;<a class="code" href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a>[interpolation_length - 1], interpolation_length, 15);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="ilbcdec_8c.html#a07e7eceeb81809d708cd550ee440bdc2">add_vector_and_shift</a>(&amp;cbVec[ilow], &amp;cbVec[ilow], cbVecTmp, interpolation_length, 0);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    memcpy(cbVec + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a> - <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> - <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) * <span class="keyword">sizeof</span>(*cbVec));</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;}</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160; </div>
<div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a445b847ad3b4bf6cc2ebfd1c6c37d587">  646</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a445b847ad3b4bf6cc2ebfd1c6c37d587">get_codebook</a>(int16_t * cbvec,   <span class="comment">/* (o) Constructed codebook vector */</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                     int16_t * mem,     <span class="comment">/* (i) Codebook buffer */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                     int16_t <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,     <span class="comment">/* (i) Codebook index */</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                     int16_t lMem,      <span class="comment">/* (i) Length of codebook buffer */</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                     int16_t cbveclen   <span class="comment">/* (i) Codebook vector length */</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;)</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;{</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    int16_t k, base_size;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    int16_t lag;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">/* Stack based */</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    int16_t tempbuff2[<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> + 5];</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">/* Determine size of codebook sections */</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    base_size = lMem - cbveclen + 1;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">if</span> (cbveclen == <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        base_size += cbveclen / 2;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">/* No filter -&gt; First codebook section */</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; lMem - cbveclen + 1) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="comment">/* first non-interpolated vectors */</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        k = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + cbveclen;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="comment">/* get vector */</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        memcpy(cbvec, mem + lMem - k, cbveclen * 2);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; base_size) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">/* Calculate lag */</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        k = (int16_t) <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(2, (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> - (lMem - cbveclen + 1))) + cbveclen;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        lag = k / 2;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <a class="code" href="ilbcdec_8c.html#a98b79ab424435032ce3a1f6430264bb5">create_augmented_vector</a>(lag, mem + lMem, cbvec);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        int16_t memIndTest;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="comment">/* first non-interpolated vectors */</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> - base_size &lt; lMem - cbveclen + 1) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <span class="comment">/* Set up filter memory, stuff zeros outside memory buffer */</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            memIndTest = lMem - (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> - base_size + cbveclen);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            memset(mem - <a class="code" href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">CB_HALFFILTERLEN</a>, 0, <a class="code" href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">CB_HALFFILTERLEN</a> * 2);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            memset(mem + lMem, 0, <a class="code" href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">CB_HALFFILTERLEN</a> * 2);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="comment">/* do filtering to get the codebook vector */</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            <a class="code" href="ilbcdec_8c.html#a9e6fa2718b54eeb085e90597343ebbc7">filter_mafq12</a>(&amp;mem[memIndTest + 4], cbvec, (int16_t *) <a class="code" href="ilbcdata_8h.html#a58933176c3d3c996d31595d076d792c0">kCbFiltersRev</a>, <a class="code" href="ilbcdec_8c.html#a29e4b8356f0f2066fc68131d95686367">CB_FILTERLEN</a>, cbveclen);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="comment">/* interpolated vectors */</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="comment">/* Stuff zeros outside memory buffer  */</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;            memIndTest = lMem - cbveclen - <a class="code" href="ilbcdec_8c.html#a29e4b8356f0f2066fc68131d95686367">CB_FILTERLEN</a>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            memset(mem + lMem, 0, <a class="code" href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">CB_HALFFILTERLEN</a> * 2);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="comment">/* do filtering */</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            <a class="code" href="ilbcdec_8c.html#a9e6fa2718b54eeb085e90597343ebbc7">filter_mafq12</a>(&amp;mem[memIndTest + 7], tempbuff2, (int16_t *) <a class="code" href="ilbcdata_8h.html#a58933176c3d3c996d31595d076d792c0">kCbFiltersRev</a>, <a class="code" href="ilbcdec_8c.html#a29e4b8356f0f2066fc68131d95686367">CB_FILTERLEN</a>, (int16_t) (cbveclen + 5));</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="comment">/* Calculate lag index */</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            lag = (cbveclen &lt;&lt; 1) - 20 + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> - base_size - lMem - 1;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <a class="code" href="ilbcdec_8c.html#a98b79ab424435032ce3a1f6430264bb5">create_augmented_vector</a>(lag, tempbuff2 + <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> + 5, cbvec);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">  715</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">construct_vector</a> (</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    int16_t *decvector,   <span class="comment">/* (o) Decoded vector */</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    int16_t *<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>,       <span class="comment">/* (i) Codebook indices */</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    int16_t *gain_index,  <span class="comment">/* (i) Gain quantization indices */</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    int16_t *mem,         <span class="comment">/* (i) Buffer for codevector construction */</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    int16_t lMem,         <span class="comment">/* (i) Length of buffer */</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    int16_t veclen)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    int16_t gain[<a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>];</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    int16_t cbvec0[<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>];</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    int16_t cbvec1[<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>];</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    int16_t cbvec2[<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>];</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordtype">unsigned</span> a32;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    int16_t *gainPtr;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">/* gain de-quantization */</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    gain[0] = <a class="code" href="ilbcdec_8c.html#a91ed79f5bbc8fd210956b8f7e52cfc62">gain_dequantization</a>(gain_index[0], 16384, 0);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    gain[1] = <a class="code" href="ilbcdec_8c.html#a91ed79f5bbc8fd210956b8f7e52cfc62">gain_dequantization</a>(gain_index[1], gain[0], 1);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    gain[2] = <a class="code" href="ilbcdec_8c.html#a91ed79f5bbc8fd210956b8f7e52cfc62">gain_dequantization</a>(gain_index[2], gain[1], 2);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">/* codebook vector construction and construction of total vector */</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">/* Stack based */</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="ilbcdec_8c.html#a445b847ad3b4bf6cc2ebfd1c6c37d587">get_codebook</a>(cbvec0, mem, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[0], lMem, veclen);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="ilbcdec_8c.html#a445b847ad3b4bf6cc2ebfd1c6c37d587">get_codebook</a>(cbvec1, mem, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[1], lMem, veclen);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="ilbcdec_8c.html#a445b847ad3b4bf6cc2ebfd1c6c37d587">get_codebook</a>(cbvec2, mem, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>[2], lMem, veclen);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    gainPtr = &amp;gain[0];</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; veclen; j++) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        a32 = <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(*gainPtr++, cbvec0[j]);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        a32 += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(*gainPtr++, cbvec1[j]);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        a32 += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(*gainPtr, cbvec2[j]);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        gainPtr -= 2;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        decvector[j] = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(a32 + 8192) &gt;&gt; 14;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    }</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">  754</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">reverse_memcpy</a>(int16_t *dest, int16_t *<a class="code" href="filter__design_8txt.html#a5235deffb07ad7b49c2b5fed063388e3">source</a>, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;{</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    int16_t* destPtr = dest;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    int16_t* sourcePtr = <a class="code" href="filter__design_8txt.html#a5235deffb07ad7b49c2b5fed063388e3">source</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">for</span> (j = 0; j &lt; length; j++)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        *destPtr-- = *sourcePtr++;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;}</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#aa3d88aebc496ad15fea98e10cb035696">  764</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#aa3d88aebc496ad15fea98e10cb035696">decode_residual</a>(<a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                            <a class="code" href="struct_i_l_b_c_frame.html">ILBCFrame</a> *encbits,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                            int16_t *decresidual,</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                            int16_t *syntdenum)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;{</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    int16_t meml_gotten, Nfor, Nback, <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>, start_pos;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    int16_t subcount, subframe;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    int16_t *reverseDecresidual = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;enh_buf;        <span class="comment">/* Reversed decoded data, used for decoding backwards in time (reuse memory in state) */</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    int16_t *memVec = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    int16_t *mem = &amp;memVec[<a class="code" href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">CB_HALFFILTERLEN</a>];   <span class="comment">/* Memory for codebook */</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = <a class="code" href="ilbcdec_8c.html#a245be810ed0fe30aebb4d8a44130c2fa">STATE_LEN</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#a29bcff5b56c75b3d3bcacb3e91ef9287">state_first</a> == 1) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        start_pos = (encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1) * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        start_pos = (encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1) * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> + <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">/* decode scalar part of start state */</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="ilbcdec_8c.html#a3c03aaf740a0a854f6838b201608d2f6">state_construct</a>(encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#a63bdd6e911474d951773f8bff2e424f6">ifm</a>, encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#a38733b4052ced468ff16ec24f03d8ecb">idx</a>, &amp;syntdenum[(encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1) * (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1)], &amp;decresidual[start_pos], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">if</span> (encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#a29bcff5b56c75b3d3bcacb3e91ef9287">state_first</a>) { <span class="comment">/* put adaptive part in the end */</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="comment">/* setup memory */</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        memset(mem, 0, (int16_t) (<a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len) * 2);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        memcpy(mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len, decresidual + start_pos, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len * 2);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="comment">/* construct decoded vector */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <a class="code" href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">construct_vector</a>(&amp;decresidual[start_pos + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len], encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">cb_index</a>, encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">gain_index</a>, mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#af8f127d959b3a0ce01d1e4783a9dd906">ST_MEM_L_TBL</a>, <a class="code" href="ilbcdec_8c.html#af8f127d959b3a0ce01d1e4783a9dd906">ST_MEM_L_TBL</a>, (int16_t) <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">/* put adaptive part in the beginning */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="comment">/* setup memory */</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        meml_gotten = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <a class="code" href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">reverse_memcpy</a>(mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - 1, decresidual + start_pos, meml_gotten);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        memset(mem, 0, (int16_t) (<a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - meml_gotten) * 2);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="comment">/* construct decoded vector */</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <a class="code" href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">construct_vector</a>(reverseDecresidual, encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">cb_index</a>, encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">gain_index</a>, mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#af8f127d959b3a0ce01d1e4783a9dd906">ST_MEM_L_TBL</a>, <a class="code" href="ilbcdec_8c.html#af8f127d959b3a0ce01d1e4783a9dd906">ST_MEM_L_TBL</a>, <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="comment">/* get decoded residual from reversed vector */</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <a class="code" href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">reverse_memcpy</a>(&amp;decresidual[start_pos - 1], reverseDecresidual, <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">/* counter for predicted subframes */</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    subcount = 1;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="comment">/* forward prediction of subframes */</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    Nfor = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub - encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span> (Nfor &gt; 0) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="comment">/* setup memory */</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        memset(mem, 0, (<a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#a245be810ed0fe30aebb4d8a44130c2fa">STATE_LEN</a>) * 2);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        memcpy(mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#a245be810ed0fe30aebb4d8a44130c2fa">STATE_LEN</a>, decresidual + (encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1) * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, <a class="code" href="ilbcdec_8c.html#a245be810ed0fe30aebb4d8a44130c2fa">STATE_LEN</a> * 2);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="comment">/* loop over subframes to encode */</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">for</span> (subframe = 0; subframe &lt; Nfor; subframe++) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            <span class="comment">/* construct decoded vector */</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <a class="code" href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">construct_vector</a>(&amp;decresidual[(encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> + 1 + subframe) * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>], encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">cb_index</a> + subcount * <a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>, encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">gain_index</a> + subcount * <a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>, mem, <a class="code" href="ilbcdec_8c.html#aab0cabe18c7a7f8bcfae1afe1e115b7f">MEM_LF_TBL</a>, <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            <span class="comment">/* update memory */</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            memmove(mem, mem + <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, (<a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>) * <span class="keyword">sizeof</span>(*mem));</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            memcpy(mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, &amp;decresidual[(encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> + 1 + subframe) * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>], <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> * 2);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            subcount++;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <span class="comment">/* backward prediction of subframes */</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    Nback = encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <span class="keywordflow">if</span> (Nback &gt; 0) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="comment">/* setup memory */</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        meml_gotten = <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub + 1 - encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <span class="keywordflow">if</span> (meml_gotten &gt; <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a>) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            meml_gotten = <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <a class="code" href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">reverse_memcpy</a>(mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - 1, decresidual + (encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">start</a> - 1) * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, meml_gotten);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        memset(mem, 0, (int16_t) (<a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - meml_gotten) * 2);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="comment">/* loop over subframes to decode */</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">for</span> (subframe = 0; subframe &lt; Nback; subframe++) {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            <span class="comment">/* construct decoded vector */</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            <a class="code" href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">construct_vector</a>(&amp;reverseDecresidual[subframe * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>], encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">cb_index</a> + subcount * <a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>,</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                        encbits-&gt;<a class="code" href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">gain_index</a> + subcount * <a class="code" href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a>, mem, <a class="code" href="ilbcdec_8c.html#aab0cabe18c7a7f8bcfae1afe1e115b7f">MEM_LF_TBL</a>, <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="comment">/* update memory */</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            memmove(mem, mem + <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, (<a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>) * <span class="keyword">sizeof</span>(*mem));</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            memcpy(mem + <a class="code" href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a> - <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, &amp;reverseDecresidual[subframe * <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>], <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> * 2);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            subcount++;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="comment">/* get decoded residual from reversed vector */</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <a class="code" href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">reverse_memcpy</a>(decresidual + <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> * Nback - 1, reverseDecresidual, <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a> * Nback);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a2095f8e4a9ece7fbad3056e9715e2969">  865</a></span>&#160;<span class="keyword">static</span> int16_t <a class="code" href="ilbcdec_8c.html#a2095f8e4a9ece7fbad3056e9715e2969">max_abs_value_w16</a>(<span class="keyword">const</span> int16_t* vector, <span class="keywordtype">int</span> length)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;{</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, absolute = 0, maximum = 0;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">if</span> (vector == <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || length &lt;= 0) {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        absolute = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(vector[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keywordflow">if</span> (absolute &gt; maximum)</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            maximum = absolute;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; </div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment">// Guard the case for abs(-32768).</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(maximum, INT16_MAX);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;}</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">  883</a></span>&#160;<span class="keyword">static</span> int16_t <a class="code" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a>(uint32_t n)</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    int16_t <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordflow">if</span> (0xFFFF0000 &amp; n) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = 16;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = 0;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (0x0000FF00 &amp; (n &gt;&gt; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)) <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> += 8;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keywordflow">if</span> (0x000000F0 &amp; (n &gt;&gt; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)) <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> += 4;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">if</span> (0x0000000C &amp; (n &gt;&gt; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)) <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> += 2;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (0x00000002 &amp; (n &gt;&gt; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)) <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> += 1;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (0x00000001 &amp; (n &gt;&gt; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)) <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> += 1;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">  902</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a>(<span class="keyword">const</span> int16_t *v1, <span class="keyword">const</span> int16_t *v2, <span class="keywordtype">int</span> length, <span class="keywordtype">int</span> scaling)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;{</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    int64_t sum = 0;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; length; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        sum += (v1[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * v2[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) &gt;&gt; scaling;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">return</span> av_clipl_int32(sum);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a50072b4e757b0e719dfe8450ba3dfbb0">  912</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a50072b4e757b0e719dfe8450ba3dfbb0">correlation</a>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *corr, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *ener, int16_t *<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>,</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                        int16_t lag, int16_t blen, int16_t srange, int16_t scale)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;{</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    int16_t *w16ptr;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    w16ptr = &amp;<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[blen - srange - lag];</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    *corr = <a class="code" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a>(&amp;<a class="code" href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a>[blen - srange], w16ptr, srange, scale);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    *ener = <a class="code" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a>(w16ptr, w16ptr, srange, scale);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">if</span> (*ener == 0) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        *corr = 0;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        *ener = 1;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">  928</a></span>&#160;<span class="preprocessor">#define SPL_SHIFT_W32(x, c) (((c) &gt;= 0) ? ((x) &lt;&lt; (c)) : ((x) &gt;&gt; (-(c))))</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">  930</a></span>&#160;<span class="keyword">static</span> int16_t <a class="code" href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">norm_w32</a>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>)</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;{</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> == 0) {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> &lt; 0) {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = ~<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__math.html#ga92d9a5e6b5e5aa746dca17c90142a82b">ff_clz</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#ac50086c3abfd55d130c40c54d083d4df">  941</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="ilbcdec_8c.html#ac50086c3abfd55d130c40c54d083d4df">div_w32_w16</a>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> num, int16_t den)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;{</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (den != 0)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="keywordflow">return</span> num / den;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="keywordflow">return</span> 0x7FFFFFFF;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;}</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a8d45bada061d700ccdc96be687fef450">  949</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#a8d45bada061d700ccdc96be687fef450">do_plc</a>(int16_t *plc_residual,      <span class="comment">/* (o) concealed residual */</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                   int16_t *plc_lpc,           <span class="comment">/* (o) concealed LP parameters */</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                   int16_t PLI,                <span class="comment">/* (i) packet loss indicator</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">                                                      0 - no PL, 1 = PL */</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                   int16_t *decresidual,       <span class="comment">/* (i) decoded residual */</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                   int16_t *lpc,               <span class="comment">/* (i) decoded LPC (only used for no PL) */</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                   int16_t inlag,              <span class="comment">/* (i) pitch lag */</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                   <a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)             <span class="comment">/* (i/o) decoder instance */</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;{</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    int16_t <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, pick;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> cross, ener, cross_comp, ener_comp = 0;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> measure, max_measure, energy;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    int16_t <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, cross_square_max, cross_square;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    int16_t j, lag, tmp1, tmp2, randlag;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    int16_t <a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a>, <a class="code" href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a>, shift3, shift_max;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    int16_t scale3;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    int16_t corrLen;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> tmpW32, tmp2W32;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    int16_t use_gain;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    int16_t tot_gain;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    int16_t max_perSquare;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    int16_t scale1, scale2;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    int16_t totscale;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> nom;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    int16_t denom;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    int16_t pitchfact;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    int16_t use_lag;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordtype">int</span> ind;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    int16_t randvec[<a class="code" href="ilbcdec_8c.html#a2df51c730f969eb62df06cbb4fdd83fd">BLOCKL_MAX</a>];</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">/* Packet Loss */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">if</span> (PLI == 1) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;consPLICount += 1;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        <span class="comment">/* if previous frame not lost,</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">           determine pitch pred. gain */</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevPLI != 1) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160; </div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <span class="comment">/* Maximum 60 samples are correlated, preserve as high accuracy</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">               as possible without getting overflow */</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="ilbcdec_8c.html#a2095f8e4a9ece7fbad3056e9715e2969">max_abs_value_w16</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            scale3 = (<a class="code" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) &lt;&lt; 1) - 25;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            <span class="keywordflow">if</span> (scale3 &lt; 0) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                scale3 = 0;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="comment">/* Store scale for use when interpolating between the</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">             * concealment and the received packet */</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevScale = scale3;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            <span class="comment">/* Search around the previous lag +/-3 to find the</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">               best pitch period */</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            lag = inlag - 3;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="comment">/* Guard against getting outside the frame */</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            corrLen = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(60, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples - (inlag + 3));</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <a class="code" href="ilbcdec_8c.html#a50072b4e757b0e719dfe8450ba3dfbb0">correlation</a>(&amp;cross, &amp;ener, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual, lag, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples, corrLen, scale3);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <span class="comment">/* Normalize and store cross^2 and the number of shifts */</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            shift_max = <a class="code" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a>(<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(cross)) - 15;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;            cross_square_max = (int16_t) <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(<a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross, -shift_max), <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross, -shift_max), 15);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            <span class="keywordflow">for</span> (j = inlag - 2; j &lt;= inlag + 3; j++) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <a class="code" href="ilbcdec_8c.html#a50072b4e757b0e719dfe8450ba3dfbb0">correlation</a>(&amp;cross_comp, &amp;ener_comp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual, j, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples, corrLen, scale3);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                <span class="comment">/* Use the criteria (corr*corr)/energy to compare if</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">                   this lag is better or not. To avoid the division,</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">                   do a cross multiplication */</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                <a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a> = <a class="code" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a>(<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(cross_comp)) - 15;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                cross_square = (int16_t) <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(<a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross_comp, -<a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a>), <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross_comp, -<a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a>), 15);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                <a class="code" href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a> = <a class="code" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a>(ener) - 15;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                measure = <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(<a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(ener, -<a class="code" href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a>), cross_square);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                shift3 = <a class="code" href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a>(ener_comp) - 15;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                max_measure = <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(<a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(ener_comp, -shift3), cross_square_max);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="comment">/* Calculate shift value, so that the two measures can</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">                   be put in the same Q domain */</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                <span class="keywordflow">if</span> (((shift_max &lt;&lt; 1) + shift3) &gt; ((<a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a> &lt;&lt; 1) + <a class="code" href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a>)) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                    tmp1 = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(31, (shift_max &lt;&lt; 1) + shift3 - (<a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a> &lt;&lt; 1) - <a class="code" href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                    tmp2 = 0;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                    tmp1 = 0;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                    tmp2 = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(31, (<a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a> &lt;&lt; 1) + <a class="code" href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a> - (shift_max &lt;&lt; 1) - shift3);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordflow">if</span> ((measure &gt;&gt; tmp1) &gt; (max_measure &gt;&gt; tmp2)) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                    <span class="comment">/* New lag is better =&gt; record lag, measure and domain */</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                    lag = j;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                    cross_square_max = cross_square;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                    cross = cross_comp;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                    shift_max = <a class="code" href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                    ener = ener_comp;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            <span class="comment">/* Calculate the periodicity for the lag with the maximum correlation.</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">               Definition of the periodicity:</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">               abs(corr(vec1, vec2))/(sqrt(energy(vec1))*sqrt(energy(vec2)))</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">               Work in the Square domain to simplify the calculations</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">               max_perSquare is less than 1 (in Q15)</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            tmp2W32 = <a class="code" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples - corrLen], &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples - corrLen], corrLen, scale3);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">if</span> ((tmp2W32 &gt; 0) &amp;&amp; (ener_comp &gt; 0)) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                <span class="comment">/* norm energies to int16_t, compute the product of the energies and</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">                   use the upper int16_t as the denominator */</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                scale1 = <a class="code" href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">norm_w32</a>(tmp2W32) - 16;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                tmp1 = <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(tmp2W32, scale1);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                scale2 = <a class="code" href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">norm_w32</a>(ener) - 16;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                tmp2 =  <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(ener, scale2);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                denom = <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(tmp1, tmp2, 16);    <span class="comment">/* denom in Q(scale1+scale2-16) */</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <span class="comment">/* Square the cross correlation and norm it such that max_perSquare</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">                   will be in Q15 after the division */</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                totscale = scale1 + scale2 - 1;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                tmp1 = <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross, (totscale &gt;&gt; 1));</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                tmp2 = <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross, totscale - (totscale &gt;&gt; 1));</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                nom = <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(tmp1, tmp2);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                max_perSquare = <a class="code" href="ilbcdec_8c.html#ac50086c3abfd55d130c40c54d083d4df">div_w32_w16</a>(nom, denom);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                max_perSquare = 0;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            }</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <span class="comment">/* previous frame lost, use recorded lag and gain */</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            lag = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevLag;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            max_perSquare = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;per_square;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="comment">/* Attenuate signal and scale down pitch pred gain if</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment">           several frames lost consecutively */</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        use_gain = 32767;       <span class="comment">/* 1.0 in Q15 */</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;consPLICount * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples &gt; 320) {</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            use_gain = 29491;   <span class="comment">/* 0.9 in Q15 */</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;consPLICount * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples &gt; 640) {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            use_gain = 22938;   <span class="comment">/* 0.7 in Q15 */</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;consPLICount * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples &gt; 960) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            use_gain = 16384;   <span class="comment">/* 0.5 in Q15 */</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;consPLICount * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples &gt; 1280) {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            use_gain = 0;       <span class="comment">/* 0.0 in Q15 */</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="comment">/* Compute mixing factor of picth repeatition and noise:</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">           for max_per&gt;0.7 set periodicity to 1.0</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">           0.4&lt;max_per&lt;0.7 set periodicity to (maxper-0.4)/0.7-0.4)</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">           max_per&lt;0.4 set periodicity to 0.0</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">if</span> (max_perSquare &gt; 7868) {     <span class="comment">/* periodicity &gt; 0.7  (0.7^4=0.2401 in Q15) */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            pitchfact = 32767;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (max_perSquare &gt; 839) {       <span class="comment">/* 0.4 &lt; periodicity &lt; 0.7 (0.4^4=0.0256 in Q15) */</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <span class="comment">/* find best index and interpolate from that */</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            ind = 5;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <span class="keywordflow">while</span> ((max_perSquare &lt; <a class="code" href="ilbcdata_8h.html#afefd148d53542965eb877df0e5e4e6c4">kPlcPerSqr</a>[ind]) &amp;&amp; (ind &gt; 0)) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                ind--;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            <span class="comment">/* pitch fact is approximated by first order */</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            tmpW32 = <a class="code" href="ilbcdata_8h.html#a4d3562afb5e412a47a5ac357be2f8192">kPlcPitchFact</a>[ind] + <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(<a class="code" href="ilbcdata_8h.html#a0a857797d8a2d52aea94c34ac252d49f">kPlcPfSlope</a>[ind], (max_perSquare - <a class="code" href="ilbcdata_8h.html#afefd148d53542965eb877df0e5e4e6c4">kPlcPerSqr</a>[ind]), 11);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            pitchfact = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(tmpW32, 32767); <span class="comment">/* guard against overflow */</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        } <span class="keywordflow">else</span> {                <span class="comment">/* periodicity &lt; 0.4 */</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            pitchfact = 0;</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        }</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;        <span class="comment">/* avoid repetition of same pitch cycle (buzzyness) */</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        use_lag = lag;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">if</span> (lag &lt; 80) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            use_lag = 2 * lag;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        }</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <span class="comment">/* compute concealed residual */</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        energy = 0;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;            <span class="comment">/* noise component -  52 &lt; randlagFIX &lt; 117 */</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;seed = <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;seed, 31821) + 13849;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            randlag = 53 + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;seed &amp; 63);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            pick = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - randlag;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="keywordflow">if</span> (pick &lt; 0) {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                randvec[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples + pick];</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                randvec[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual[pick];</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            <span class="comment">/* pitch repeatition component */</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            pick = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - use_lag;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            <span class="keywordflow">if</span> (pick &lt; 0) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples + pick];</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = plc_residual[pick];</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="comment">/* Attinuate total gain for each 10 ms */</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 80) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                tot_gain = use_gain;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 160) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                tot_gain = <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(31130, use_gain, 15);    <span class="comment">/* 0.95*use_gain */</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                tot_gain = <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(29491, use_gain, 15);    <span class="comment">/* 0.9*use_gain */</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="comment">/* mix noise and pitch repeatition */</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;            plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(tot_gain, (pitchfact * plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + (32767 - pitchfact) * randvec[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 16384) &gt;&gt; 15, 15);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; </div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;            <span class="comment">/* Shifting down the result one step extra to ensure that no overflow</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">               will occur */</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;            energy += <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevScale + 1));</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        }</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="comment">/* less than 30 dB, use only noise */</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span> (energy &lt; <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples * 900, -<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevScale - 1)) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            energy = 0;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                plc_residual[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = randvec[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;            }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;        }</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;        <span class="comment">/* use the old LPC */</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;        memcpy(plc_lpc, (*s).prev_lpc, (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1) * 2);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="comment">/* Update state in case there are multiple frame losses */</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevLag = lag;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;per_square = max_perSquare;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">/* no packet loss, copy input */</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        memcpy(plc_residual, decresidual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples * 2);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        memcpy(plc_lpc, lpc, (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1) * 2);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;consPLICount = 0;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">/* update state */</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevPLI = PLI;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lpc, plc_lpc, (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1) * 2);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prevResidual, plc_residual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples * 2);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;}</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a7c3435e4c1ce8c699e3a5b8f950045d1"> 1203</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ilbcdec_8c.html#a7c3435e4c1ce8c699e3a5b8f950045d1">xcorr_coeff</a>(int16_t *target, int16_t *regressor,</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                       int16_t subl, int16_t searchLen,</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                       int16_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, int16_t <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>)</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;{</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    int16_t maxlag;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    int16_t <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    int16_t <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    int16_t cross_corr_scale, energy_scale;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    int16_t cross_corr_sg_mod, cross_corr_sg_mod_max;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> cross_corr, energy;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    int16_t cross_corr_mod, energy_mod, enery_mod_max;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    int16_t *tp, *rp;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    int16_t *rp_beg, *rp_end;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    int16_t totscale, totscale_max;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    int16_t scalediff;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> new_crit, max_crit;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a>;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordtype">int</span> k;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="comment">/* Initializations, to make sure that the first one is selected */</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    cross_corr_sg_mod_max = 0;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    enery_mod_max = INT16_MAX;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    totscale_max = -500;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    maxlag = 0;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = 0;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">/* Find scale value and start position */</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a> == 1) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="ilbcdec_8c.html#a2095f8e4a9ece7fbad3056e9715e2969">max_abs_value_w16</a>(regressor, (int16_t) (subl + searchLen - 1));</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        rp_beg = regressor;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        rp_end = &amp;regressor[subl];</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    } <span class="keywordflow">else</span> {                    <span class="comment">/* step== -1 */</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="ilbcdec_8c.html#a2095f8e4a9ece7fbad3056e9715e2969">max_abs_value_w16</a>(&amp;regressor[-searchLen], (int16_t) (subl + searchLen - 1));</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        rp_beg = &amp;regressor[-1];</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        rp_end = &amp;regressor[subl - 1];</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    }</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">/* Introduce a scale factor on the energy in int32_t in</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="comment">       order to make sure that the calculation does not</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">       overflow */</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> &gt; 5000) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <a class="code" href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a> = 2;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a> = 0;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">/* Calculate the first energy, then do a +/- to get the other energies */</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    energy = <a class="code" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a>(regressor, regressor, subl, <a class="code" href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a>);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="keywordflow">for</span> (k = 0; k &lt; searchLen; k++) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        tp = target;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        rp = &amp;regressor[<a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>];</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        cross_corr = <a class="code" href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a>(tp, rp, subl, <a class="code" href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a>);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160; </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordflow">if</span> ((energy &gt; 0) &amp;&amp; (cross_corr &gt; 0)) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="comment">/* Put cross correlation and energy on 16 bit word */</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            cross_corr_scale = <a class="code" href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">norm_w32</a>(cross_corr) - 16;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            cross_corr_mod = (int16_t) <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(cross_corr, cross_corr_scale);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            energy_scale = <a class="code" href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">norm_w32</a>(energy) - 16;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            energy_mod = (int16_t) <a class="code" href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a>(energy, energy_scale);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            <span class="comment">/* Square cross correlation and store upper int16_t */</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            cross_corr_sg_mod = (int16_t) <a class="code" href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a>(cross_corr_mod, cross_corr_mod, 16);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <span class="comment">/* Calculate the total number of (dynamic) right shifts that have</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">               been performed on (cross_corr*cross_corr)/energy</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            totscale = energy_scale - (cross_corr_scale * 2);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <span class="comment">/* Calculate the shift difference in order to be able to compare the two</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">               (cross_corr*cross_corr)/energy in the same domain</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            scalediff = totscale - totscale_max;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            scalediff = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(scalediff, 31);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            scalediff = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(scalediff, -31);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="comment">/* Compute the cross multiplication between the old best criteria</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;<span class="comment">               and the new one to be able to compare them without using a</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">               division */</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;            <span class="keywordflow">if</span> (scalediff &lt; 0) {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                new_crit = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) cross_corr_sg_mod * enery_mod_max) &gt;&gt; (-scalediff);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                max_crit = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) cross_corr_sg_mod_max * energy_mod);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                new_crit = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) cross_corr_sg_mod * enery_mod_max);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                max_crit = ((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) cross_corr_sg_mod_max * energy_mod) &gt;&gt; scalediff;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            }</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            <span class="comment">/* Store the new lag value if the new criteria is larger</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">               than previous largest criteria */</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            <span class="keywordflow">if</span> (new_crit &gt; max_crit) {</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                cross_corr_sg_mod_max = cross_corr_sg_mod;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                enery_mod_max = energy_mod;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                totscale_max = totscale;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                maxlag = k;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;            }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <span class="comment">/* Do a +/- to get the next energy */</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        energy += (unsigned)<a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a> * ((*rp_end * *rp_end - *rp_beg * *rp_beg) &gt;&gt; <a class="code" href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a>);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        rp_beg += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        rp_end += <a class="code" href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a>;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">return</span> maxlag + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#afdf24e35d17051d90848231369abce9a"> 1315</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ilbcdec_8c.html#afdf24e35d17051d90848231369abce9a">hp_output</a>(int16_t *signal, <span class="keyword">const</span> int16_t *ba, int16_t *y,</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                      int16_t *x, int16_t <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;{</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> tmp;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; </div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        tmp = <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(y[1], ba[3]);     <span class="comment">/* (-a[1])*y[i-1] (low part) */</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        tmp += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(y[3], ba[4]);    <span class="comment">/* (-a[2])*y[i-2] (low part) */</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        tmp = (tmp &gt;&gt; 15);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;        tmp += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(y[0], ba[3]);    <span class="comment">/* (-a[1])*y[i-1] (high part) */</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        tmp += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(y[2], ba[4]);    <span class="comment">/* (-a[2])*y[i-2] (high part) */</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        tmp = (tmp * 2);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        tmp += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(signal[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], ba[0]);       <span class="comment">/* b[0]*x[0] */</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        tmp += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(x[0], ba[1]);    <span class="comment">/* b[1]*x[i-1] */</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        tmp += <a class="code" href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a>(x[1], ba[2]);    <span class="comment">/* b[2]*x[i-2] */</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160; </div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <span class="comment">/* Update state (input part) */</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        x[1] = x[0];</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        x[0] = signal[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="comment">/* Convert back to Q0 and multiply with 2 */</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        signal[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = av_clip_intp2(tmp + 1024, 26) &gt;&gt; 11;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="comment">/* Update state (filtered part) */</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;        y[2] = y[0];</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        y[3] = y[1];</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <span class="comment">/* upshift tmp by 3 with saturation */</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordflow">if</span> (tmp &gt; 268435455) {</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            tmp = INT32_MAX;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp &lt; -268435456) {</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            tmp = INT32_MIN;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            tmp = tmp * 8;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        y[0] = tmp &gt;&gt; 16;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        y[1] = (tmp - (y[0] * (1 &lt;&lt; 16))) &gt;&gt; 1;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#adb2286fc3916a543347b8e74f6917a3a"> 1357</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ilbcdec_8c.html#adb2286fc3916a543347b8e74f6917a3a">ilbc_decode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                             <span class="keywordtype">int</span> *got_frame_ptr, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;{</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>     = <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>     = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    int16_t *plc_data = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;plc_residual[<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>];</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb, buf, avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>)) &lt; 0)</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_i_l_b_c_frame.html">ILBCFrame</a>));</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ilbcdec_8c.html#afedc0e8a4e4f13aecb75260c6968b4ac">unpack_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>))</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = 0;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame.start &lt; 1 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame.start &gt; 5)</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = 0;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;        <a class="code" href="ilbcdec_8c.html#aecf053dbfaf151531c1c04d9ba5815c0">index_conv</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame.cb_index);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <a class="code" href="ilbcdec_8c.html#a4f52da82c03c84df718c45fb4fc27d54">lsf_dequantization</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsfdeq, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame.lsf, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lpc_n);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <a class="code" href="ilbcdec_8c.html#a57b54a23f0e10f6406818f712ed392f0">lsf_check_stability</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsfdeq, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lpc_n);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <a class="code" href="ilbcdec_8c.html#a6181d4f3a92b6aed63994130de756f13">lsp_interpolate</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntdenum, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;weightdenum,</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsfdeq, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <a class="code" href="ilbcdec_8c.html#aa3d88aebc496ad15fea98e10cb035696">decode_residual</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntdenum);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        <a class="code" href="ilbcdec_8c.html#a8d45bada061d700ccdc96be687fef450">do_plc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;plc_residual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;plc_lpc, 0,</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntdenum + (<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1) * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub - 1),</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_lag, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;plc_residual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples * 2);</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    }</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;enhancer) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="comment">/* TODO */</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        int16_t lag, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; </div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="comment">/* Find last lag (since the enhancer is not called to give this info) */</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 20) {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            lag = <a class="code" href="ilbcdec_8c.html#a7c3435e4c1ce8c699e3a5b8f950045d1">xcorr_coeff</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples-60], &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples-80],</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                              60, 80, 20, -1);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            lag = <a class="code" href="ilbcdec_8c.html#a7c3435e4c1ce8c699e3a5b8f950045d1">xcorr_coeff</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples-<a class="code" href="ilbcdec_8c.html#a23fc83b93e0b51255af196f961aac28d">ENH_BLOCKL</a>],</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                              &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples-<a class="code" href="ilbcdec_8c.html#a23fc83b93e0b51255af196f961aac28d">ENH_BLOCKL</a>-20],</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                              <a class="code" href="ilbcdec_8c.html#a23fc83b93e0b51255af196f961aac28d">ENH_BLOCKL</a>, 100, 20, -1);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        <span class="comment">/* Store lag (it is needed if next packet is lost) */</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_lag = lag;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        <span class="comment">/* copy data and run synthesis filter */</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        memcpy(plc_data, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;decresidual, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples * 2);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="comment">/* Set up the filter state */</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        memcpy(&amp;plc_data[-<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntMem, <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> * 2);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            <a class="code" href="ilbcdec_8c.html#aa530bdee48e0846015c8107a33dcf8d4">filter_arfq12</a>(plc_data+<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>*<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>, plc_data+<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>*<a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>,</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                                      <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntdenum + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>*(<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1),</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                                      <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1, <a class="code" href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a>);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;        }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <span class="comment">/* Save the filter state */</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntMem, &amp;plc_data[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples-<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a>], <a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> * 2);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160; </div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    memcpy(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0], plc_data, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples * 2);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <a class="code" href="ilbcdec_8c.html#afdf24e35d17051d90848231369abce9a">hp_output</a>((int16_t *)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0], <a class="code" href="ilbcdata_8h.html#a003eae992e8de18c34250c3d5897cd4b">hp_out_coeffs</a>,</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hpimemy, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hpimemx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;old_syntdenum, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;syntdenum, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub*(<a class="code" href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a> + 1) * 2);</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160; </div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_enh_pl = 0;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> == 0)</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_enh_pl = 1;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    *got_frame_ptr = 1;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">return</span> avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;}</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a82fd241c0d8252feface8b2b401d9458"> 1445</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="ilbcdec_8c.html#a82fd241c0d8252feface8b2b401d9458">ilbc_decode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <a class="code" href="struct_i_l_b_c_context.html">ILBCContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>  = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae56433cc80666ff63af59db4de5b5e45">block_align</a> == 38)</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode = 20;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae56433cc80666ff63af59db4de5b5e45">block_align</a> == 50)</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode = 30;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6b53fda85ad61baa345edbd96cb8a33c">bit_rate</a> &gt; 0)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6b53fda85ad61baa345edbd96cb8a33c">bit_rate</a> &lt;= 14000 ? 30 : 20;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>       = 1;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a> = <a class="code" href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>    = 8000;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>     = <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mode == 30) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples = 240;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub = <a class="code" href="ilbcdec_8c.html#a815826c0b293968546de09fce7af0d7f">NSUB_30MS</a>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nasub = <a class="code" href="ilbcdec_8c.html#a2679687b6ce6c8112be6f57dfdc116d5">NASUB_30MS</a>;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lpc_n = <a class="code" href="ilbcdec_8c.html#a1cb863b0efcf1c4e88ede6e0f753fbe7">LPC_N_30MS</a>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len = <a class="code" href="ilbcdec_8c.html#a747cd6cbb7b71f5ce052edaf3f48aa01">STATE_SHORT_LEN_30MS</a>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_samples = 160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nsub = <a class="code" href="ilbcdec_8c.html#af6abb078d0e7f5134a8c965e70c5993d">NSUB_20MS</a>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nasub = <a class="code" href="ilbcdec_8c.html#a5be08af05b1df9dd737718af87bcb2c8">NASUB_20MS</a>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lpc_n = <a class="code" href="ilbcdec_8c.html#a2b3f7293a5ad6762785329041eba0c10">LPC_N_20MS</a>;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;state_short_len = <a class="code" href="ilbcdec_8c.html#a469c7299ecaeab7c42efcf100edfc096">STATE_SHORT_LEN_20MS</a>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    }</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;}</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="ilbcdec_8c.html#a13fdeace85c845b314a284c2b7c42242"> 1480</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="ilbcdec_8c.html#a13fdeace85c845b314a284c2b7c42242">ff_ilbc_decoder</a> = {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>           = <span class="stringliteral">&quot;ilbc&quot;</span>,</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    .long_name      = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;iLBC (Internet Low Bitrate Codec)&quot;</span>),</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    .type           = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    .id             = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaeb2f1e1f975d68c286c52c197727456c">AV_CODEC_ID_ILBC</a>,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    .init           = <a class="code" href="ilbcdec_8c.html#a82fd241c0d8252feface8b2b401d9458">ilbc_decode_init</a>,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    .decode         = <a class="code" href="ilbcdec_8c.html#adb2286fc3916a543347b8e74f6917a3a">ilbc_decode_frame</a>,</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    .capabilities   = <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a>,</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    .priv_data_size = <span class="keyword">sizeof</span>(<a class="code" href="ilbcdec_8c.html#a833f08ac569362030405a62d892cd0df">ILBCContext</a>),</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="ailbcdata_8h_html_afefd148d53542965eb877df0e5e4e6c4"><div class="ttname"><a href="ilbcdata_8h.html#afefd148d53542965eb877df0e5e4e6c4">kPlcPerSqr</a></div><div class="ttdeci">static const int16_t kPlcPerSqr[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00053">ilbcdata.h:53</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_af5d84c0cacc09392860ab7731169d9bf"><div class="ttname"><a href="struct_i_l_b_c_context.html#af5d84c0cacc09392860ab7731169d9bf">ILBCContext::gb</a></div><div class="ttdeci">GetBitContext gb</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00092">ilbcdec.c:92</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a0d084aeceb71db437ea525ae49b2ccba"><div class="ttname"><a href="ilbcdata_8h.html#a0d084aeceb71db437ea525ae49b2ccba">lsf_dim_codebook</a></div><div class="ttdeci">static const uint8_t lsf_dim_codebook[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00038">ilbcdata.h:38</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_ae7b6a5d0bd13c1fd8530cad999420a5d"><div class="ttname"><a href="struct_i_l_b_c_context.html#ae7b6a5d0bd13c1fd8530cad999420a5d">ILBCContext::lsfdeqold</a></div><div class="ttdeci">int16_t lsfdeqold[LPC_FILTERORDER]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00108">ilbcdec.c:108</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6b53fda85ad61baa345edbd96cb8a33c"><div class="ttname"><a href="struct_a_v_codec_context.html#a6b53fda85ad61baa345edbd96cb8a33c">AVCodecContext::bit_rate</a></div><div class="ttdeci">int64_t bit_rate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00576">avcodec.h:576</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_aa9f326b6e732839ccb073c5da50e449c"><div class="ttname"><a href="ilbcdec_8c.html#aa9f326b6e732839ccb073c5da50e449c">ENH_NBLOCKS_TOT</a></div><div class="ttdeci">#define ENH_NBLOCKS_TOT</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00058">ilbcdec.c:58</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_ae993823e967104dbe484501165f8c8fc"><div class="ttname"><a href="struct_i_l_b_c_context.html#ae993823e967104dbe484501165f8c8fc">ILBCContext::plc_residual</a></div><div class="ttdeci">int16_t plc_residual[BLOCKL_MAX+LPC_FILTERORDER]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00116">ilbcdec.c:116</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a0fd579e74a548e5509e9cc4cc6d993d4"><div class="ttname"><a href="struct_i_l_b_c_context.html#a0fd579e74a548e5509e9cc4cc6d993d4">ILBCContext::consPLICount</a></div><div class="ttdeci">int consPLICount</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00096">ilbcdec.c:96</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html"><div class="ttname"><a href="struct_i_l_b_c_context.html">ILBCContext</a></div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00087">ilbcdec.c:87</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_a63bdd6e911474d951773f8bff2e424f6"><div class="ttname"><a href="struct_i_l_b_c_frame.html#a63bdd6e911474d951773f8bff2e424f6">ILBCFrame::ifm</a></div><div class="ttdeci">int16_t ifm</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00080">ilbcdec.c:80</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_aa3d88aebc496ad15fea98e10cb035696"><div class="ttname"><a href="ilbcdec_8c.html#aa3d88aebc496ad15fea98e10cb035696">decode_residual</a></div><div class="ttdeci">static void decode_residual(ILBCContext *s, ILBCFrame *encbits, int16_t *decresidual, int16_t *syntdenum)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00764">ilbcdec.c:764</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a347f26c7987ace8d5b78ed47564f5c2b"><div class="ttname"><a href="struct_i_l_b_c_context.html#a347f26c7987ace8d5b78ed47564f5c2b">ILBCContext::no_of_bytes</a></div><div class="ttdeci">int16_t no_of_bytes</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00104">ilbcdec.c:104</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ab418f35382239badf6ea78735fde7ec7"><div class="ttname"><a href="ilbcdec_8c.html#ab418f35382239badf6ea78735fde7ec7">LSF_NSPLIT</a></div><div class="ttdeci">#define LSF_NSPLIT</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00041">ilbcdec.c:41</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga53d6da2dcd56f5f87c7afd8b33fa15ba"><div class="ttname"><a href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_MONO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00090">channel_layout.h:90</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_aa4e1c6357e04ee6960702c705448a76a"><div class="ttname"><a href="filter__design_8txt.html#aa4e1c6357e04ee6960702c705448a76a">output</a></div><div class="ttdeci">filter_frame For filters that do not use the this method is called when a frame is pushed to the filter s input It can be called at any time except in a reentrant way If the input frame is enough to produce output</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00225">filter_design.txt:225</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_aa530bdee48e0846015c8107a33dcf8d4"><div class="ttname"><a href="ilbcdec_8c.html#aa530bdee48e0846015c8107a33dcf8d4">filter_arfq12</a></div><div class="ttdeci">static void filter_arfq12(const int16_t *data_in, int16_t *data_out, const int16_t *coefficients, int coefficients_length, int data_length)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00499">ilbcdec.c:499</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga92d9a5e6b5e5aa746dca17c90142a82b"><div class="ttname"><a href="group__lavu__math.html#ga92d9a5e6b5e5aa746dca17c90142a82b">ff_clz</a></div><div class="ttdeci">#define ff_clz</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00142">intmath.h:142</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a4f52da82c03c84df718c45fb4fc27d54"><div class="ttname"><a href="ilbcdec_8c.html#a4f52da82c03c84df718c45fb4fc27d54">lsf_dequantization</a></div><div class="ttdeci">static void lsf_dequantization(int16_t *lsfdeq, int16_t *index, int16_t lpc_n)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00281">ilbcdec.c:281</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_aecf053dbfaf151531c1c04d9ba5815c0"><div class="ttname"><a href="ilbcdec_8c.html#aecf053dbfaf151531c1c04d9ba5815c0">index_conv</a></div><div class="ttdeci">static void index_conv(int16_t *index)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00268">ilbcdec.c:268</a></div></div>
<div class="ttc" id="arate__distortion_8txt_html_a0e018beb061c7ac6d1f9121683a6f2c2"><div class="ttname"><a href="rate__distortion_8txt.html#a0e018beb061c7ac6d1f9121683a6f2c2">step</a></div><div class="ttdeci">trying all byte sequences megabyte in length and selecting the best looking sequence will yield cases to try But a word about which is also called distortion Distortion can be quantified by almost any quality measurement one chooses the sum of squared differences is used but more complex methods that consider psychovisual effects can be used as well It makes no difference in this discussion First step</div><div class="ttdef"><b>Definition:</b> <a href="rate__distortion_8txt_source.html#l00019">rate_distortion.txt:58</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_adb2286fc3916a543347b8e74f6917a3a"><div class="ttname"><a href="ilbcdec_8c.html#adb2286fc3916a543347b8e74f6917a3a">ilbc_decode_frame</a></div><div class="ttdeci">static int ilbc_decode_frame(AVCodecContext *avctx, void *data, int *got_frame_ptr, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l01357">ilbcdec.c:1357</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a5be5d7e2d6dfd6da2183526cdebfb538"><div class="ttname"><a href="struct_i_l_b_c_context.html#a5be5d7e2d6dfd6da2183526cdebfb538">ILBCContext::prevScale</a></div><div class="ttdeci">int16_t prevScale</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00119">ilbcdec.c:119</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ab7bb40d6146357e514716c92f2933d76"><div class="ttname"><a href="ilbcdec_8c.html#ab7bb40d6146357e514716c92f2933d76">NASUB_MAX</a></div><div class="ttdeci">#define NASUB_MAX</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00068">ilbcdec.c:68</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_afedc0e8a4e4f13aecb75260c6968b4ac"><div class="ttname"><a href="ilbcdec_8c.html#afedc0e8a4e4f13aecb75260c6968b4ac">unpack_frame</a></div><div class="ttdeci">static int unpack_frame(ILBCContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00128">ilbcdec.c:128</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_af1436c05fe6b1f7733b5cfa38278ef9c"><div class="ttname"><a href="ilbcdata_8h.html#af1436c05fe6b1f7733b5cfa38278ef9c">cos_derivative_tbl</a></div><div class="ttdeci">static const int16_t cos_derivative_tbl[64]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00078">ilbcdata.h:78</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a37592825684e2a847d2ff9b641e16137"><div class="ttname"><a href="ilbcdec_8c.html#a37592825684e2a847d2ff9b641e16137">CB_NSTAGES</a></div><div class="ttdeci">#define CB_NSTAGES</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00054">ilbcdec.c:54</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_aa1b725354128925ac717256d34c46221"><div class="ttname"><a href="struct_i_l_b_c_context.html#aa1b725354128925ac717256d34c46221">ILBCContext::prevPLI</a></div><div class="ttdeci">int16_t prevPLI</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00118">ilbcdec.c:118</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a18ac59f714ced248b84497f1c1da29b4"><div class="ttname"><a href="struct_i_l_b_c_context.html#a18ac59f714ced248b84497f1c1da29b4">ILBCContext::old_syntdenum</a></div><div class="ttdeci">int16_t old_syntdenum[NSUB_MAX *(LPC_FILTERORDER+1)]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00111">ilbcdec.c:111</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a6389678070860b08f6b2a55bc79aa6fb"><div class="ttname"><a href="ilbcdec_8c.html#a6389678070860b08f6b2a55bc79aa6fb">SUBL</a></div><div class="ttdeci">#define SUBL</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00045">ilbcdec.c:45</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_acc782bc054234243ee1cb77329c1aa57"><div class="ttname"><a href="struct_i_l_b_c_context.html#acc782bc054234243ee1cb77329c1aa57">ILBCContext::state_short_len</a></div><div class="ttdeci">int state_short_len</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00098">ilbcdec.c:98</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_ad1efe5d14f4944890debd7c26205c16b"><div class="ttname"><a href="struct_i_l_b_c_context.html#ad1efe5d14f4944890debd7c26205c16b">ILBCContext::nasub</a></div><div class="ttdeci">int16_t nasub</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00100">ilbcdec.c:100</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a5e2ae60e2ebf7c64e8a2cb6fb7b27440"><div class="ttname"><a href="ilbcdec_8c.html#a5e2ae60e2ebf7c64e8a2cb6fb7b27440">SPL_MUL_16_16</a></div><div class="ttdeci">#define SPL_MUL_16_16(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00073">ilbcdec.c:73</a></div></div>
<div class="ttc" id="aaf__superequalizer_8c_html_aee608a3f1b53a55f3240954ef313065c"><div class="ttname"><a href="af__superequalizer_8c.html#aee608a3f1b53a55f3240954ef313065c">win</a></div><div class="ttdeci">static float win(SuperEqualizerContext *s, float n, int N)</div><div class="ttdef"><b>Definition:</b> <a href="af__superequalizer_8c_source.html#l00119">af_superequalizer.c:119</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a245be810ed0fe30aebb4d8a44130c2fa"><div class="ttname"><a href="ilbcdec_8c.html#a245be810ed0fe30aebb4d8a44130c2fa">STATE_LEN</a></div><div class="ttdeci">#define STATE_LEN</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00069">ilbcdec.c:69</a></div></div>
<div class="ttc" id="aget__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00379">get_bits.h:379</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a033757a7a91022f248f49924dc914343"><div class="ttname"><a href="struct_i_l_b_c_context.html#a033757a7a91022f248f49924dc914343">ILBCContext::syntMem</a></div><div class="ttdeci">int16_t syntMem[LPC_FILTERORDER]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00107">ilbcdec.c:107</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ab6732731617c9ec5225b8e0c23d28e41"><div class="ttname"><a href="ilbcdec_8c.html#ab6732731617c9ec5225b8e0c23d28e41">SPL_SHIFT_W32</a></div><div class="ttdeci">#define SPL_SHIFT_W32(x, c)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00928">ilbcdec.c:928</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a5d40b967208b19cfa90d49243a00cad8"><div class="ttname"><a href="ilbcdec_8c.html#a5d40b967208b19cfa90d49243a00cad8">get_size_in_bits</a></div><div class="ttdeci">static int16_t get_size_in_bits(uint32_t n)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00883">ilbcdec.c:883</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a0f472d5086d57c0143e6c1b53db6b940"><div class="ttname"><a href="struct_i_l_b_c_context.html#a0f472d5086d57c0143e6c1b53db6b940">ILBCContext::seed</a></div><div class="ttdeci">int16_t seed</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00117">ilbcdec.c:117</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_aab0cabe18c7a7f8bcfae1afe1e115b7f"><div class="ttname"><a href="ilbcdec_8c.html#aab0cabe18c7a7f8bcfae1afe1e115b7f">MEM_LF_TBL</a></div><div class="ttdeci">#define MEM_LF_TBL</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00048">ilbcdec.c:48</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a3de6723747556c385ca683f3a5373cf7"><div class="ttname"><a href="ilbcdec_8c.html#a3de6723747556c385ca683f3a5373cf7">vector_rmultiplication</a></div><div class="ttdeci">static void vector_rmultiplication(int16_t *out, const int16_t *in, const int16_t *win, int length, int shift)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00607">ilbcdec.c:607</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a9eed97b76fb1e525cffd916701e1c805"><div class="ttname"><a href="ilbcdec_8c.html#a9eed97b76fb1e525cffd916701e1c805">vector_multiplication</a></div><div class="ttdeci">static void vector_multiplication(int16_t *out, const int16_t *in, const int16_t *win, int length, int shift)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00615">ilbcdec.c:615</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_acdb8eda34a7e81dbe963f208f40cd859"><div class="ttname"><a href="ilbcdec_8c.html#acdb8eda34a7e81dbe963f208f40cd859">construct_vector</a></div><div class="ttdeci">static void construct_vector(int16_t *decvector, int16_t *index, int16_t *gain_index, int16_t *mem, int16_t lMem, int16_t veclen)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00715">ilbcdec.c:715</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a79e330b3c141afdedf2d73383fae8375"><div class="ttname"><a href="struct_i_l_b_c_context.html#a79e330b3c141afdedf2d73383fae8375">ILBCContext::lsfdeq</a></div><div class="ttdeci">int16_t lsfdeq[LPC_FILTERORDER *LPC_N_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00105">ilbcdec.c:105</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a747cd6cbb7b71f5ce052edaf3f48aa01"><div class="ttname"><a href="ilbcdec_8c.html#a747cd6cbb7b71f5ce052edaf3f48aa01">STATE_SHORT_LEN_30MS</a></div><div class="ttdeci">#define STATE_SHORT_LEN_30MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00070">ilbcdec.c:70</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_ac82653e53fb78d44769ac49c6c8fc985"><div class="ttname"><a href="struct_i_l_b_c_frame.html#ac82653e53fb78d44769ac49c6c8fc985">ILBCFrame::start</a></div><div class="ttdeci">int16_t start</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00084">ilbcdec.c:84</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a3c03aaf740a0a854f6838b201608d2f6"><div class="ttname"><a href="ilbcdec_8c.html#a3c03aaf740a0a854f6838b201608d2f6">state_construct</a></div><div class="ttdeci">static void state_construct(int16_t ifm, int16_t *idx, int16_t *synt_denum, int16_t *Out_fix, int16_t len)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00521">ilbcdec.c:521</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a9e54e9e2ccf671c1f79867e19ce432e9"><div class="ttname"><a href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a></div><div class="ttdeci">static int init_get_bits8(GetBitContext *s, const uint8_t *buffer, int byte_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00677">get_bits.h:677</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a279852770f38c588259c1d6e0cdaec06"><div class="ttname"><a href="struct_i_l_b_c_context.html#a279852770f38c588259c1d6e0cdaec06">ILBCContext::lpc_n</a></div><div class="ttdeci">int lpc_n</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00099">ilbcdec.c:99</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a202e9efd43273ac4130b9c1a873c213f"><div class="ttname"><a href="ilbcdec_8c.html#a202e9efd43273ac4130b9c1a873c213f">scale_dot_product</a></div><div class="ttdeci">static int32_t scale_dot_product(const int16_t *v1, const int16_t *v2, int length, int scaling)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00902">ilbcdec.c:902</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ae0504cfb50fb30035824b36f1f013954"><div class="ttname"><a href="ilbcdec_8c.html#ae0504cfb50fb30035824b36f1f013954">SPL_MUL_16_16_RSFT</a></div><div class="ttdeci">#define SPL_MUL_16_16_RSFT(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00074">ilbcdec.c:74</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_ac62ff60b3293d8fcd18d31629b0ab5a8"><div class="ttname"><a href="ilbcdata_8h.html#ac62ff60b3293d8fcd18d31629b0ab5a8">lsf_weight_30ms</a></div><div class="ttdeci">static const int16_t lsf_weight_30ms[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00041">ilbcdata.h:41</a></div></div>
<div class="ttc" id="avp3data_8h_html_a46a6da6b1936191571fd30b2a749f38c"><div class="ttname"><a href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a></div><div class="ttdeci">uint8_t bits</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_ab8e5a86ac5a483d6dd5eed6f0a092dc1"><div class="ttname"><a href="struct_i_l_b_c_context.html#ab8e5a86ac5a483d6dd5eed6f0a092dc1">ILBCContext::nsub</a></div><div class="ttdeci">int16_t nsub</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00101">ilbcdec.c:101</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a41cde7c84114b84286ab737a4bc1d8ae"><div class="ttname"><a href="struct_i_l_b_c_context.html#a41cde7c84114b84286ab737a4bc1d8ae">ILBCContext::lsfold</a></div><div class="ttdeci">int16_t lsfold[LPC_FILTERORDER]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00106">ilbcdec.c:106</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_ab3c309b1f3363b896f6ac42b23dd33ba"><div class="ttname"><a href="struct_i_l_b_c_frame.html#ab3c309b1f3363b896f6ac42b23dd33ba">ILBCFrame::gain_index</a></div><div class="ttdeci">int16_t gain_index[CB_NSTAGES *(NASUB_MAX+1)]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00079">ilbcdec.c:79</a></div></div>
<div class="ttc" id="aget__bits_8h_html"><div class="ttname"><a href="get__bits_8h.html">get_bits.h</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a0a857797d8a2d52aea94c34ac252d49f"><div class="ttname"><a href="ilbcdata_8h.html#a0a857797d8a2d52aea94c34ac252d49f">kPlcPfSlope</a></div><div class="ttdeci">static const int16_t kPlcPfSlope[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00045">ilbcdata.h:45</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a98b79ab424435032ce3a1f6430264bb5"><div class="ttname"><a href="ilbcdec_8c.html#a98b79ab424435032ce3a1f6430264bb5">create_augmented_vector</a></div><div class="ttdeci">static void create_augmented_vector(int index, int16_t *buffer, int16_t *cbVec)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00631">ilbcdec.c:631</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a58de63ccac850e23bd5461bdcc3c1126"><div class="ttname"><a href="ilbcdata_8h.html#a58de63ccac850e23bd5461bdcc3c1126">cos_tbl</a></div><div class="ttdeci">static const int16_t cos_tbl[64]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00067">ilbcdata.h:67</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a7a6c014573ed2df75f3c547523fa747c"><div class="ttname"><a href="ilbcdec_8c.html#a7a6c014573ed2df75f3c547523fa747c">CB_HALFFILTERLEN</a></div><div class="ttdeci">#define CB_HALFFILTERLEN</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00055">ilbcdec.c:55</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a07e7eceeb81809d708cd550ee440bdc2"><div class="ttname"><a href="ilbcdec_8c.html#a07e7eceeb81809d708cd550ee440bdc2">add_vector_and_shift</a></div><div class="ttdeci">static void add_vector_and_shift(int16_t *out, const int16_t *in1, const int16_t *in2, int length, int shift)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00623">ilbcdec.c:623</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a2b3f7293a5ad6762785329041eba0c10"><div class="ttname"><a href="ilbcdec_8c.html#a2b3f7293a5ad6762785329041eba0c10">LPC_N_20MS</a></div><div class="ttdeci">#define LPC_N_20MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00038">ilbcdec.c:38</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae56433cc80666ff63af59db4de5b5e45"><div class="ttname"><a href="struct_a_v_codec_context.html#ae56433cc80666ff63af59db4de5b5e45">AVCodecContext::block_align</a></div><div class="ttdeci">int block_align</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01223">avcodec.h:1223</a></div></div>
<div class="ttc" id="adctref_8c_html_a0658ae9bad1daa7c7665c126215b57f3"><div class="ttname"><a href="dctref_8c.html#a0658ae9bad1daa7c7665c126215b57f3">coefficients</a></div><div class="ttdeci">static double coefficients[8 *8]</div><div class="ttdef"><b>Definition:</b> <a href="dctref_8c_source.html#l00035">dctref.c:35</a></div></div>
<div class="ttc" id="astruct_get_bit_context_html"><div class="ttname"><a href="struct_get_bit_context.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00061">get_bits.h:61</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a57b54a23f0e10f6406818f712ed392f0"><div class="ttname"><a href="ilbcdec_8c.html#a57b54a23f0e10f6406818f712ed392f0">lsf_check_stability</a></div><div class="ttdeci">static void lsf_check_stability(int16_t *lsf, int dim, int nb_vectors)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00309">ilbcdec.c:309</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a003eae992e8de18c34250c3d5897cd4b"><div class="ttname"><a href="ilbcdata_8h.html#a003eae992e8de18c34250c3d5897cd4b">hp_out_coeffs</a></div><div class="ttdeci">static const int16_t hp_out_coeffs[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00043">ilbcdata.h:43</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a505086b48eb34d53e47f60ac777204b9"><div class="ttname"><a href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a></div><div class="ttdeci">static unsigned int get_bits1(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00498">get_bits.h:498</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a78c7dd7e728ec4d1d4132dcd7ebb5c4a"><div class="ttname"><a href="struct_i_l_b_c_context.html#a78c7dd7e728ec4d1d4132dcd7ebb5c4a">ILBCContext::decresidual</a></div><div class="ttdeci">int16_t decresidual[BLOCKL_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00115">ilbcdec.c:115</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a13fdeace85c845b314a284c2b7c42242"><div class="ttname"><a href="ilbcdec_8c.html#a13fdeace85c845b314a284c2b7c42242">ff_ilbc_decoder</a></div><div class="ttdeci">AVCodec ff_ilbc_decoder</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l01480">ilbcdec.c:1480</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ac50086c3abfd55d130c40c54d083d4df"><div class="ttname"><a href="ilbcdec_8c.html#ac50086c3abfd55d130c40c54d083d4df">div_w32_w16</a></div><div class="ttdeci">static int32_t div_w32_w16(int32_t num, int16_t den)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00941">ilbcdec.c:941</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a2679687b6ce6c8112be6f57dfdc116d5"><div class="ttname"><a href="ilbcdec_8c.html#a2679687b6ce6c8112be6f57dfdc116d5">NASUB_30MS</a></div><div class="ttdeci">#define NASUB_30MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00067">ilbcdec.c:67</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a36c4eb866a9e2d517fc4c42e631190a4"><div class="ttname"><a href="struct_i_l_b_c_context.html#a36c4eb866a9e2d517fc4c42e631190a4">ILBCContext::prevResidual</a></div><div class="ttdeci">int16_t prevResidual[NSUB_MAX *SUBL]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00114">ilbcdec.c:114</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_af8f127d959b3a0ce01d1e4783a9dd906"><div class="ttname"><a href="ilbcdec_8c.html#af8f127d959b3a0ce01d1e4783a9dd906">ST_MEM_L_TBL</a></div><div class="ttdeci">#define ST_MEM_L_TBL</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00047">ilbcdec.c:47</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a50072b4e757b0e719dfe8450ba3dfbb0"><div class="ttname"><a href="ilbcdec_8c.html#a50072b4e757b0e719dfe8450ba3dfbb0">correlation</a></div><div class="ttdeci">static void correlation(int32_t *corr, int32_t *ener, int16_t *buffer, int16_t lag, int16_t blen, int16_t srange, int16_t scale)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00912">ilbcdec.c:912</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a2df51c730f969eb62df06cbb4fdd83fd"><div class="ttname"><a href="ilbcdec_8c.html#a2df51c730f969eb62df06cbb4fdd83fd">BLOCKL_MAX</a></div><div class="ttdeci">#define BLOCKL_MAX</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00062">ilbcdec.c:62</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_af1cb72941ba7d36763093868731d7eb9"><div class="ttname"><a href="ilbcdata_8h.html#af1cb72941ba7d36763093868731d7eb9">lsf_size_codebook</a></div><div class="ttdeci">static const uint8_t lsf_size_codebook[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00039">ilbcdata.h:39</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a5235deffb07ad7b49c2b5fed063388e3"><div class="ttname"><a href="filter__design_8txt.html#a5235deffb07ad7b49c2b5fed063388e3">source</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a source</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00255">filter_design.txt:255</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a833f08ac569362030405a62d892cd0df"><div class="ttname"><a href="ilbcdec_8c.html#a833f08ac569362030405a62d892cd0df">ILBCContext</a></div><div class="ttdeci">struct ILBCContext ILBCContext</div></div>
<div class="ttc" id="alibavcodec_2dxa_8c_html_acde17eaa5e84204c4303a35bbf3648f4"><div class="ttname"><a href="libavcodec_2dxa_8c.html#acde17eaa5e84204c4303a35bbf3648f4">shift1</a></div><div class="ttdeci">static const int shift1[6]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dxa_8c_source.html#l00050">dxa.c:50</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga5f35425595395c76cfa406c883f78aed"><div class="ttname"><a href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a></div><div class="ttdeci">#define AV_CODEC_CAP_DR1</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_aa4dbfe8518fae853e1066aee76dece19"><div class="ttname"><a href="struct_i_l_b_c_context.html#aa4dbfe8518fae853e1066aee76dece19">ILBCContext::weightdenum</a></div><div class="ttdeci">int16_t weightdenum[(LPC_FILTERORDER+1) *NSUB_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00109">ilbcdec.c:109</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a3a46e43a6ab9f26dd6739d022512e01f"><div class="ttname"><a href="struct_i_l_b_c_context.html#a3a46e43a6ab9f26dd6739d022512e01f">ILBCContext::enh_buf</a></div><div class="ttdeci">int16_t enh_buf[ENH_BUFL+ENH_BUFL_FILTEROVERHEAD]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00112">ilbcdec.c:112</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a58933176c3d3c996d31595d076d792c0"><div class="ttname"><a href="ilbcdata_8h.html#a58933176c3d3c996d31595d076d792c0">kCbFiltersRev</a></div><div class="ttdeci">static const int16_t kCbFiltersRev[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00049">ilbcdata.h:49</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ae50a02312762a47772c64939a42064a2"><div class="ttname"><a href="ilbcdec_8c.html#ae50a02312762a47772c64939a42064a2">lsf2lsp</a></div><div class="ttdeci">static void lsf2lsp(int16_t *lsf, int16_t *lsp, int order)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00342">ilbcdec.c:342</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a469c7299ecaeab7c42efcf100edfc096"><div class="ttname"><a href="ilbcdec_8c.html#a469c7299ecaeab7c42efcf100edfc096">STATE_SHORT_LEN_20MS</a></div><div class="ttdeci">#define STATE_SHORT_LEN_20MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00071">ilbcdec.c:71</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a91ed79f5bbc8fd210956b8f7e52cfc62"><div class="ttname"><a href="ilbcdec_8c.html#a91ed79f5bbc8fd210956b8f7e52cfc62">gain_dequantization</a></div><div class="ttdeci">static int16_t gain_dequantization(int index, int max_in, int stage)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00600">ilbcdec.c:600</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a2b7d16dd7528f0f6a22f3786e754d774"><div class="ttname"><a href="ilbcdata_8h.html#a2b7d16dd7528f0f6a22f3786e754d774">ilbc_state</a></div><div class="ttdeci">static const int16_t ilbc_state[8]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00221">ilbcdata.h:221</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a2dbca56c298956087405970f4a731494"><div class="ttname"><a href="struct_i_l_b_c_context.html#a2dbca56c298956087405970f4a731494">ILBCContext::prevLag</a></div><div class="ttdeci">int16_t prevLag</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00120">ilbcdec.c:120</a></div></div>
<div class="ttc" id="ailbcdata_8h_html"><div class="ttname"><a href="ilbcdata_8h.html">ilbcdata.h</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_aba3c79ab8b1dd9a47cc8d028ab0bd337"><div class="ttname"><a href="ilbcdata_8h.html#aba3c79ab8b1dd9a47cc8d028ab0bd337">ilbc_gain</a></div><div class="ttdeci">static const int16_t *const ilbc_gain[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00217">ilbcdata.h:217</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_af053f18edfa9e2cef7b1162c9a5953d8"><div class="ttname"><a href="ilbcdec_8c.html#af053f18edfa9e2cef7b1162c9a5953d8">norm_w32</a></div><div class="ttdeci">static int16_t norm_w32(int32_t a)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00930">ilbcdec.c:930</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a7be30426e8711073abc55387be742c24"><div class="ttname"><a href="ilbcdata_8h.html#a7be30426e8711073abc55387be742c24">kLpcChirpSyntDenum</a></div><div class="ttdeci">static const int16_t kLpcChirpSyntDenum[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00059">ilbcdata.h:59</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_a38733b4052ced468ff16ec24f03d8ecb"><div class="ttname"><a href="struct_i_l_b_c_frame.html#a38733b4052ced468ff16ec24f03d8ecb">ILBCFrame::idx</a></div><div class="ttdeci">int16_t idx[STATE_SHORT_LEN_30MS]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00082">ilbcdec.c:82</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_abcefc4149c1fbf4f3e0fde5748aa6007"><div class="ttname"><a href="struct_i_l_b_c_context.html#abcefc4149c1fbf4f3e0fde5748aa6007">ILBCContext::no_of_words</a></div><div class="ttdeci">int16_t no_of_words</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00103">ilbcdec.c:103</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a98385d678d5d8d51381a94ad87b083ab"><div class="ttname"><a href="struct_i_l_b_c_context.html#a98385d678d5d8d51381a94ad87b083ab">ILBCContext::syntdenum</a></div><div class="ttdeci">int16_t syntdenum[NSUB_MAX *(LPC_FILTERORDER+1)]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00110">ilbcdec.c:110</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a80025d8c1d3f006411ccf74e8cd67d79"><div class="ttname"><a href="struct_i_l_b_c_context.html#a80025d8c1d3f006411ccf74e8cd67d79">ILBCContext::frame</a></div><div class="ttdeci">ILBCFrame frame</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00093">ilbcdec.c:93</a></div></div>
<div class="ttc" id="alibavcodec_2dxa_8c_html_ae11ff7d40e3b101f9ea82455811a3abf"><div class="ttname"><a href="libavcodec_2dxa_8c.html#ae11ff7d40e3b101f9ea82455811a3abf">shift2</a></div><div class="ttdeci">static const int shift2[6]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2dxa_8c_source.html#l00051">dxa.c:51</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a76bacf5a00aae6ca21da4d5bba32c42a"><div class="ttname"><a href="ilbcdec_8c.html#a76bacf5a00aae6ca21da4d5bba32c42a">NSUB_MAX</a></div><div class="ttdeci">#define NSUB_MAX</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00065">ilbcdec.c:65</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\n&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00326">audio_convert.c:326</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a2095f8e4a9ece7fbad3056e9715e2969"><div class="ttname"><a href="ilbcdec_8c.html#a2095f8e4a9ece7fbad3056e9715e2969">max_abs_value_w16</a></div><div class="ttdeci">static int16_t max_abs_value_w16(const int16_t *vector, int length)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00865">ilbcdec.c:865</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a8d45bada061d700ccdc96be687fef450"><div class="ttname"><a href="ilbcdec_8c.html#a8d45bada061d700ccdc96be687fef450">do_plc</a></div><div class="ttdeci">static void do_plc(int16_t *plc_residual, int16_t *plc_lpc, int16_t PLI, int16_t *decresidual, int16_t *lpc, int16_t inlag, ILBCContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00949">ilbcdec.c:949</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a67886a114bbe5560f014c1357967560a"><div class="ttname"><a href="struct_i_l_b_c_context.html#a67886a114bbe5560f014c1357967560a">ILBCContext::block_samples</a></div><div class="ttdeci">int block_samples</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00102">ilbcdec.c:102</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a75d6345063335cb100c3672cd0fb9e69"><div class="ttname"><a href="ilbcdec_8c.html#a75d6345063335cb100c3672cd0fb9e69">lsf_interpolate</a></div><div class="ttdeci">static void lsf_interpolate(int16_t *out, int16_t *in1, int16_t *in2, int16_t coef, int size)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00332">ilbcdec.c:332</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a95272a815d96cefb63f242b354f645ab"><div class="ttname"><a href="ilbcdec_8c.html#a95272a815d96cefb63f242b354f645ab">ENH_BUFL</a></div><div class="ttdeci">#define ENH_BUFL</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00060">ilbcdec.c:60</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a75280c5af04388fac330d56b0d3dda92"><div class="ttname"><a href="struct_i_l_b_c_context.html#a75280c5af04388fac330d56b0d3dda92">ILBCContext::per_square</a></div><div class="ttdeci">int16_t per_square</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00121">ilbcdec.c:121</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_S16</div><div class="ttdoc">signed 16 bits</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00061">samplefmt.h:61</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a75a38dea7e6e76445dc971522cb18102"><div class="ttname"><a href="ilbcdec_8c.html#a75a38dea7e6e76445dc971522cb18102">bw_expand</a></div><div class="ttdeci">static void bw_expand(int16_t *out, const int16_t *in, const int16_t *coef, int length)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00428">ilbcdec.c:428</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a0e96262ee2149aebb2e77c8f859e8039"><div class="ttname"><a href="ilbcdec_8c.html#a0e96262ee2149aebb2e77c8f859e8039">lsp_interpolate2polydec</a></div><div class="ttdeci">static void lsp_interpolate2polydec(int16_t *a, int16_t *lsf1, int16_t *lsf2, int coef, int length)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00419">ilbcdec.c:419</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_a70b5e28b5bc3d1b63a7435c5fe50b837"><div class="ttname"><a href="vorbis__enc__data_8h.html#a70b5e28b5bc3d1b63a7435c5fe50b837">dim</a></div><div class="ttdeci">int dim</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00451">vorbis_enc_data.h:451</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a4d848aef68ba502e1bf3b609cd3aa772"><div class="ttname"><a href="ilbcdec_8c.html#a4d848aef68ba502e1bf3b609cd3aa772">ENH_BUFL_FILTEROVERHEAD</a></div><div class="ttdeci">#define ENH_BUFL_FILTEROVERHEAD</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00061">ilbcdec.c:61</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a445b847ad3b4bf6cc2ebfd1c6c37d587"><div class="ttname"><a href="ilbcdec_8c.html#a445b847ad3b4bf6cc2ebfd1c6c37d587">get_codebook</a></div><div class="ttdeci">static void get_codebook(int16_t *cbvec, int16_t *mem, int16_t index, int16_t lMem, int16_t cbveclen)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00646">ilbcdec.c:646</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html"><div class="ttname"><a href="struct_i_l_b_c_frame.html">ILBCFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00076">ilbcdec.c:76</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a46a005bb2d464d6d67c57c315c658c7f"><div class="ttname"><a href="ilbcdec_8c.html#a46a005bb2d464d6d67c57c315c658c7f">CB_MEML</a></div><div class="ttdeci">#define CB_MEML</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00053">ilbcdec.c:53</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aspdifenc_8c_html_addcb93d939ffa259ff1d9247bdd590fd"><div class="ttname"><a href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a></div><div class="ttdeci">unsigned int pos</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00410">spdifenc.c:410</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a89698c2ccbaf574480f21c13fa7bbf7c"><div class="ttname"><a href="struct_i_l_b_c_context.html#a89698c2ccbaf574480f21c13fa7bbf7c">ILBCContext::mode</a></div><div class="ttdeci">int mode</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00091">ilbcdec.c:91</a></div></div>
<div class="ttc" id="ahuffyuvdsp_8h_html_a111da81ae5883147168bbb8366377b10"><div class="ttname"><a href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a></div><div class="ttdeci">#define B</div><div class="ttdef"><b>Definition:</b> <a href="huffyuvdsp_8h_source.html#l00032">huffyuvdsp.h:32</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a82fd241c0d8252feface8b2b401d9458"><div class="ttname"><a href="ilbcdec_8c.html#a82fd241c0d8252feface8b2b401d9458">ilbc_decode_init</a></div><div class="ttdeci">static av_cold int ilbc_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l01445">ilbcdec.c:1445</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_afdf24e35d17051d90848231369abce9a"><div class="ttname"><a href="ilbcdec_8c.html#afdf24e35d17051d90848231369abce9a">hp_output</a></div><div class="ttdeci">static void hp_output(int16_t *signal, const int16_t *ba, int16_t *y, int16_t *x, int16_t len)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l01315">ilbcdec.c:1315</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a207a75e681d575f5b43eb9a1f7398110"><div class="ttname"><a href="struct_i_l_b_c_context.html#a207a75e681d575f5b43eb9a1f7398110">ILBCContext::last_lag</a></div><div class="ttdeci">int last_lag</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00097">ilbcdec.c:97</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a5f7c751c33bd24e05dc54feab512ca44"><div class="ttname"><a href="ilbcdec_8c.html#a5f7c751c33bd24e05dc54feab512ca44">reverse_memcpy</a></div><div class="ttdeci">static void reverse_memcpy(int16_t *dest, int16_t *source, int length)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00754">ilbcdec.c:754</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ab5bf43ceeffd5c440d539ae2ed025827"><div class="ttname"><a href="filter__design_8txt.html#ab5bf43ceeffd5c440d539ae2ed025827">buffer</a></div><div class="ttdeci">the frame and frame reference mechanism is intended to as much as expensive copies of that data while still allowing the filters to produce correct results The data is stored in buffers represented by AVFrame structures Several references can point to the same frame buffer</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00049">filter_design.txt:49</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ab794423fb4dab440f3bbcd19cadcd9ff"><div class="ttname"><a href="ilbcdec_8c.html#ab794423fb4dab440f3bbcd19cadcd9ff">lsf2poly</a></div><div class="ttdeci">static void lsf2poly(int16_t *a, int16_t *lsf)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00392">ilbcdec.c:392</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a73dfa4ca731736639e529761c8889800"><div class="ttname"><a href="ilbcdec_8c.html#a73dfa4ca731736639e529761c8889800">LPC_FILTERORDER</a></div><div class="ttdeci">#define LPC_FILTERORDER</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00043">ilbcdec.c:43</a></div></div>
<div class="ttc" id="aebur128_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00083">ebur128.h:83</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a1cb863b0efcf1c4e88ede6e0f753fbe7"><div class="ttname"><a href="ilbcdec_8c.html#a1cb863b0efcf1c4e88ede6e0f753fbe7">LPC_N_30MS</a></div><div class="ttdeci">#define LPC_N_30MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00039">ilbcdec.c:39</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a167c6e6d578f9521f65d7456334dcecb"><div class="ttname"><a href="ilbcdata_8h.html#a167c6e6d578f9521f65d7456334dcecb">frg_quant_mod</a></div><div class="ttdeci">static const int16_t frg_quant_mod[64]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00225">ilbcdata.h:225</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_ae2d4b43f738b5e49699f5c4d55629fb0"><div class="ttname"><a href="struct_i_l_b_c_context.html#ae2d4b43f738b5e49699f5c4d55629fb0">ILBCContext::plc_lpc</a></div><div class="ttdeci">int16_t plc_lpc[LPC_FILTERORDER+1]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00123">ilbcdec.c:123</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a9fc666d444bbd274dd41d82d00505dfe"><div class="ttname"><a href="ilbcdec_8c.html#a9fc666d444bbd274dd41d82d00505dfe">LPC_N_MAX</a></div><div class="ttdeci">#define LPC_N_MAX</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00040">ilbcdec.c:40</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a6181d4f3a92b6aed63994130de756f13"><div class="ttname"><a href="ilbcdec_8c.html#a6181d4f3a92b6aed63994130de756f13">lsp_interpolate</a></div><div class="ttdeci">static void lsp_interpolate(int16_t *syntdenum, int16_t *weightdenum, int16_t *lsfdeq, int16_t length, ILBCContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00437">ilbcdec.c:437</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a94bee96d5817037bddc8fd5987d7203e"><div class="ttname"><a href="ilbcdata_8h.html#a94bee96d5817037bddc8fd5987d7203e">lsf_codebook</a></div><div class="ttdeci">static const int16_t lsf_codebook[64 *3+128 *3+128 *4]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00089">ilbcdata.h:89</a></div></div>
<div class="ttc" id="asonic_8c_html_aee201839e95f7edeff51ad9c8e072bda"><div class="ttname"><a href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a></div><div class="ttdeci">static int shift(int a, int b)</div><div class="ttdef"><b>Definition:</b> <a href="sonic_8c_source.html#l00082">sonic.c:82</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_ada7b5892bd48655a99e707edcbc32a44"><div class="ttname"><a href="ilbcdec_8c.html#ada7b5892bd48655a99e707edcbc32a44">ILBCFrame</a></div><div class="ttdeci">struct ILBCFrame ILBCFrame</div></div>
<div class="ttc" id="ailbcdata_8h_html_a4d3562afb5e412a47a5ac357be2f8192"><div class="ttname"><a href="ilbcdata_8h.html#a4d3562afb5e412a47a5ac357be2f8192">kPlcPitchFact</a></div><div class="ttdeci">static const int16_t kPlcPitchFact[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00047">ilbcdata.h:47</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_af8d9ca293343382dacf35ad507aa177b"><div class="ttname"><a href="struct_i_l_b_c_frame.html#af8d9ca293343382dacf35ad507aa177b">ILBCFrame::cb_index</a></div><div class="ttdeci">int16_t cb_index[CB_NSTAGES *(NASUB_MAX+1)]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00078">ilbcdec.c:78</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_a18bd3e53a73e87f20c6308beb5fbf1e3"><div class="ttname"><a href="struct_i_l_b_c_frame.html#a18bd3e53a73e87f20c6308beb5fbf1e3">ILBCFrame::lsf</a></div><div class="ttdeci">int16_t lsf[LSF_NSPLIT *LPC_N_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00077">ilbcdec.c:77</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a047f23cf71a67d7d9979a0976fd8638b"><div class="ttname"><a href="struct_i_l_b_c_context.html#a047f23cf71a67d7d9979a0976fd8638b">ILBCContext::hpimemx</a></div><div class="ttdeci">int16_t hpimemx[2]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00124">ilbcdec.c:124</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="avf__palettegen_8c_html_a0fa5abf62b01f8a592bca729cb14390b"><div class="ttname"><a href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a></div><div class="ttdeci">static av_always_inline int diff(const uint32_t a, const uint32_t b)</div><div class="ttdef"><b>Definition:</b> <a href="vf__palettegen_8c_source.html#l00136">vf_palettegen.c:136</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a0bb9c464332aeaca079e4e5a618a11e0"><div class="ttname"><a href="ilbcdata_8h.html#a0bb9c464332aeaca079e4e5a618a11e0">lsf_weight_20ms</a></div><div class="ttdeci">static const int16_t lsf_weight_20ms[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00040">ilbcdata.h:40</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a545b8c1c045fcc34b81d3ca822620277"><div class="ttname"><a href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a></div><div class="ttdeci">static const int16_t alpha[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00055">ilbcdata.h:55</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaeb2f1e1f975d68c286c52c197727456c"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaeb2f1e1f975d68c286c52c197727456c">AV_CODEC_ID_ILBC</a></div><div class="ttdeci">@ AV_CODEC_ID_ILBC</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00477">codec_id.h:477</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a9e29b4d976663d35f65f31ae591bebf9"><div class="ttname"><a href="ilbcdec_8c.html#a9e29b4d976663d35f65f31ae591bebf9">get_lsp_poly</a></div><div class="ttdeci">static void get_lsp_poly(int16_t *lsp, int32_t *f)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00365">ilbcdec.c:365</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a9e6fa2718b54eeb085e90597343ebbc7"><div class="ttname"><a href="ilbcdec_8c.html#a9e6fa2718b54eeb085e90597343ebbc7">filter_mafq12</a></div><div class="ttdeci">static void filter_mafq12(int16_t *in_ptr, int16_t *out_ptr, int16_t *B, int16_t B_length, int16_t length)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00479">ilbcdec.c:479</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a23fc83b93e0b51255af196f961aac28d"><div class="ttname"><a href="ilbcdec_8c.html#a23fc83b93e0b51255af196f961aac28d">ENH_BLOCKL</a></div><div class="ttdeci">#define ENH_BLOCKL</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00059">ilbcdec.c:59</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_abd8cd709857c6dfa42ce57d46a1166c6"><div class="ttname"><a href="struct_i_l_b_c_frame.html#abd8cd709857c6dfa42ce57d46a1166c6">ILBCFrame::firstbits</a></div><div class="ttdeci">int16_t firstbits</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00083">ilbcdec.c:83</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a815826c0b293968546de09fce7af0d7f"><div class="ttname"><a href="ilbcdec_8c.html#a815826c0b293968546de09fce7af0d7f">NSUB_30MS</a></div><div class="ttdeci">#define NSUB_30MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00064">ilbcdec.c:64</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a29e4b8356f0f2066fc68131d95686367"><div class="ttname"><a href="ilbcdec_8c.html#a29e4b8356f0f2066fc68131d95686367">CB_FILTERLEN</a></div><div class="ttdeci">#define CB_FILTERLEN</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00056">ilbcdec.c:56</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a5be08af05b1df9dd737718af87bcb2c8"><div class="ttname"><a href="ilbcdec_8c.html#a5be08af05b1df9dd737718af87bcb2c8">NASUB_20MS</a></div><div class="ttdeci">#define NASUB_20MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00066">ilbcdec.c:66</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a69b7e359fa10ea322644b4026e85c39e"><div class="ttname"><a href="struct_i_l_b_c_context.html#a69b7e359fa10ea322644b4026e85c39e">ILBCContext::enhancer</a></div><div class="ttdeci">int enhancer</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00089">ilbcdec.c:89</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_af6abb078d0e7f5134a8c965e70c5993d"><div class="ttname"><a href="ilbcdec_8c.html#af6abb078d0e7f5134a8c965e70c5993d">NSUB_20MS</a></div><div class="ttdeci">#define NSUB_20MS</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00063">ilbcdec.c:63</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a91453685641c026b3d48cc175f3cc776"><div class="ttname"><a href="struct_i_l_b_c_context.html#a91453685641c026b3d48cc175f3cc776">ILBCContext::hpimemy</a></div><div class="ttdeci">int16_t hpimemy[4]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00125">ilbcdec.c:125</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="ailbcdec_8c_html_a7c3435e4c1ce8c699e3a5b8f950045d1"><div class="ttname"><a href="ilbcdec_8c.html#a7c3435e4c1ce8c699e3a5b8f950045d1">xcorr_coeff</a></div><div class="ttdeci">static int xcorr_coeff(int16_t *target, int16_t *regressor, int16_t subl, int16_t searchLen, int16_t offset, int16_t step)</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l01203">ilbcdec.c:1203</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_ae93919a6371ef9cb61770edf09414f46"><div class="ttname"><a href="struct_i_l_b_c_context.html#ae93919a6371ef9cb61770edf09414f46">ILBCContext::enh_period</a></div><div class="ttdeci">int16_t enh_period[ENH_NBLOCKS_TOT]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00113">ilbcdec.c:113</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_frame_html_a29bcff5b56c75b3d3bcacb3e91ef9287"><div class="ttname"><a href="struct_i_l_b_c_frame.html#a29bcff5b56c75b3d3bcacb3e91ef9287">ILBCFrame::state_first</a></div><div class="ttdeci">int16_t state_first</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00081">ilbcdec.c:81</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8ff0b000c463361e234af48d03aadfc0"><div class="ttname"><a href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">AVCodecContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdoc">samples per second</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01186">avcodec.h:1186</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_a94188118585e4c5f6f068836643c4cdc"><div class="ttname"><a href="struct_i_l_b_c_context.html#a94188118585e4c5f6f068836643c4cdc">ILBCContext::prev_enh_pl</a></div><div class="ttdeci">int prev_enh_pl</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00095">ilbcdec.c:95</a></div></div>
<div class="ttc" id="acamellia_8c_html_a0e0a78c25beeb4532e8ae02e99d3af11"><div class="ttname"><a href="camellia_8c.html#a0e0a78c25beeb4532e8ae02e99d3af11">shifts</a></div><div class="ttdeci">static const uint8_t shifts[2][12]</div><div class="ttdef"><b>Definition:</b> <a href="camellia_8c_source.html#l00174">camellia.c:174</a></div></div>
<div class="ttc" id="astruct_i_l_b_c_context_html_aba3ff2d674f6c850be0ad3b75511d080"><div class="ttname"><a href="struct_i_l_b_c_context.html#aba3ff2d674f6c850be0ad3b75511d080">ILBCContext::prev_lpc</a></div><div class="ttdeci">int16_t prev_lpc[LPC_FILTERORDER+1]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdec_8c_source.html#l00122">ilbcdec.c:122</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
