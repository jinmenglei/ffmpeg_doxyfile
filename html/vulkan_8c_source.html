<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavfilter/vulkan.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_e1bd69597e95623f2084619f16269321.html">libavfilter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">vulkan.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="vulkan_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="formats_8h.html">formats.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vulkan_8h.html">vulkan.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="glslang_8h.html">glslang.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/* Generic macro for creating contexts which need to keep their addresses</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * if another context is created. */</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="vulkan_8c.html#a44ef81a3b663845f5f88ecf1753431db">   25</a></span>&#160;<span class="preprocessor">#define FN_CREATING(ctx, type, shortname, array, num)                          \</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">static av_always_inline type *create_ ##shortname(ctx *dctx)                   \</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">{                                                                              \</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">    type **array, *sctx = av_mallocz(sizeof(*sctx));                           \</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">    if (!sctx)                                                                 \</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">        return NULL;                                                           \</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">                                                                               \</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">    array = av_realloc_array(dctx-&gt;array, sizeof(*dctx-&gt;array), dctx-&gt;num + 1);\</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">    if (!array) {                                                              \</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">        av_free(sctx);                                                         \</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">        return NULL;                                                           \</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">    }                                                                          \</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">                                                                               \</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">    dctx-&gt;array = array;                                                       \</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">    dctx-&gt;array[dctx-&gt;num++] = sctx;                                           \</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">                                                                               \</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">    return sctx;                                                               \</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">}</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a61f100015931450da7c2863d845fa2ae">   44</a></span>&#160;<span class="keyword">const</span> VkComponentMapping <a class="code" href="vulkan_8c.html#a61f100015931450da7c2863d845fa2ae">ff_comp_identity_map</a> = {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    .r = VK_COMPONENT_SWIZZLE_IDENTITY,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    .g = VK_COMPONENT_SWIZZLE_IDENTITY,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    .b = VK_COMPONENT_SWIZZLE_IDENTITY,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    .a = VK_COMPONENT_SWIZZLE_IDENTITY,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;};</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/* Converts return values to strings */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a21c706efea1ada918d12b36640bfe60e">   52</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(VkResult res)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#define CASE(VAL) case VAL: return #VAL</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">switch</span> (res) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_SUCCESS);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_NOT_READY);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_TIMEOUT);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_EVENT_SET);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_EVENT_RESET);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_INCOMPLETE);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_OUT_OF_HOST_MEMORY);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_OUT_OF_DEVICE_MEMORY);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_INITIALIZATION_FAILED);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_DEVICE_LOST);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_MEMORY_MAP_FAILED);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_LAYER_NOT_PRESENT);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_EXTENSION_NOT_PRESENT);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_FEATURE_NOT_PRESENT);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_INCOMPATIBLE_DRIVER);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_TOO_MANY_OBJECTS);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_FORMAT_NOT_SUPPORTED);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_FRAGMENTED_POOL);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_SURFACE_LOST_KHR);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_NATIVE_WINDOW_IN_USE_KHR);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_SUBOPTIMAL_KHR);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_OUT_OF_DATE_KHR);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_INCOMPATIBLE_DISPLAY_KHR);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_VALIDATION_FAILED_EXT);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_INVALID_SHADER_NV);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_OUT_OF_POOL_MEMORY);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_INVALID_EXTERNAL_HANDLE);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a>(VK_ERROR_NOT_PERMITTED_EXT);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown error&quot;</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#undef CASE</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="vulkan_8c.html#aabfe71abb7d35f80adda795f4f27632f">   89</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#aabfe71abb7d35f80adda795f4f27632f">vk_alloc_mem</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, VkMemoryRequirements *req,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                        VkMemoryPropertyFlagBits req_flags, <span class="keywordtype">void</span> *alloc_extension,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                        VkMemoryPropertyFlagBits *mem_flags, VkDeviceMemory *mem)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = -1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    VkPhysicalDeviceProperties props;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    VkPhysicalDeviceMemoryProperties mprops;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    VkMemoryAllocateInfo alloc_info = {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        .sType           = VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        .pNext           = alloc_extension,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    };</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    vkGetPhysicalDeviceProperties(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;phys_dev, &amp;props);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    vkGetPhysicalDeviceMemoryProperties(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;phys_dev, &amp;mprops);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">/* Align if we need to */</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (req_flags &amp; VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        req-&gt;size = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(req-&gt;size, props.limits.minMemoryMapAlignment);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    alloc_info.allocationSize = req-&gt;size;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">/* The vulkan spec requires memory types to be sorted in the &quot;optimal&quot;</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">     * order, so the first matching type we find will be the best/fastest one */</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mprops.memoryTypeCount; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="comment">/* The memory type must be supported by the requirements (bitfield) */</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">if</span> (!(req-&gt;memoryTypeBits &amp; (1 &lt;&lt; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="comment">/* The memory type flags must include our properties */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> ((mprops.memoryTypes[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].propertyFlags &amp; req_flags) != req_flags)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="comment">/* Found a suitable memory type */</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; 0) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;No memory type found for flags 0x%x\n&quot;</span>,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;               req_flags);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    alloc_info.memoryTypeIndex = <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkAllocateMemory(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;alloc_info,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, mem);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate memory: %s\n&quot;</span>,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    *mem_flags |= mprops.memoryTypes[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>].propertyFlags;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a1f745da476561c9a806960987cb5a32b">  150</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a1f745da476561c9a806960987cb5a32b">ff_vk_create_buf</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_buffer.html">FFVkBuffer</a> *buf, <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                     VkBufferUsageFlags <a class="code" href="floatimg__cmp_8c.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a>, VkMemoryPropertyFlagBits <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">int</span> use_ded_mem;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    VkBufferCreateInfo buf_spawn = {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        .sType       = VK_STRUCTURE_TYPE_BUFFER_CREATE_INFO,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        .pNext       = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        .usage       = <a class="code" href="floatimg__cmp_8c.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        .sharingMode = VK_SHARING_MODE_EXCLUSIVE,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        .size        = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="comment">/* Gets FFALIGNED during alloc if host visible</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                                but should be ok */</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    };</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    VkBufferMemoryRequirementsInfo2 req_desc = {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        .sType = VK_STRUCTURE_TYPE_BUFFER_MEMORY_REQUIREMENTS_INFO_2,</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    };</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    VkMemoryDedicatedAllocateInfo ded_alloc = {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        .sType = VK_STRUCTURE_TYPE_MEMORY_DEDICATED_ALLOCATE_INFO,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        .pNext = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    };</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    VkMemoryDedicatedRequirements ded_req = {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        .sType = VK_STRUCTURE_TYPE_MEMORY_DEDICATED_REQUIREMENTS,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    };</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    VkMemoryRequirements2 req = {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        .sType = VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        .pNext = &amp;ded_req,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    };</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateBuffer(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;buf_spawn, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">buf</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create buffer: %s\n&quot;</span>,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    req_desc.buffer = buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">buf</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    vkGetBufferMemoryRequirements2(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;req_desc, &amp;req);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">/* In case the implementation prefers/requires dedicated allocation */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    use_ded_mem = ded_req.prefersDedicatedAllocation |</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                  ded_req.requiresDedicatedAllocation;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">if</span> (use_ded_mem)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        ded_alloc.buffer = buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">buf</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    err = <a class="code" href="vulkan_8c.html#aabfe71abb7d35f80adda795f4f27632f">vk_alloc_mem</a>(avctx, &amp;req.memoryRequirements, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                       use_ded_mem ? &amp;ded_alloc : (<span class="keywordtype">void</span> *)ded_alloc.pNext,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                       &amp;buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a9b96446253585acb32bec45090614ad8">flags</a>, &amp;buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkBindBufferMemory(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">buf</a>, buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>, 0);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to bind memory to buffer: %s\n&quot;</span>,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a0d8cba544b0d2d266e68ffa4a77a012d">  215</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a0d8cba544b0d2d266e68ffa4a77a012d">ff_vk_map_buffers</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_buffer.html">FFVkBuffer</a> *buf, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *mem[],</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                      <span class="keywordtype">int</span> nb_buffers, <span class="keywordtype">int</span> invalidate)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    VkMappedMemoryRange *inval_list = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">int</span> inval_count = 0;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_buffers; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkMapMemory(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>, 0,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                          VK_WHOLE_SIZE, 0, (<span class="keywordtype">void</span> **)&amp;mem[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to map buffer memory: %s\n&quot;</span>,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                   <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (!invalidate)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_buffers; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keyword">const</span> VkMappedMemoryRange ival_buf = {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            .sType  = VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            .memory = buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            .size   = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        };</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; VK_MEMORY_PROPERTY_HOST_COHERENT_BIT)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        inval_list = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;scratch, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;scratch_size,</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                     (++inval_count)*<span class="keyword">sizeof</span>(*inval_list));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (!inval_list)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        inval_list[inval_count - 1] = ival_buf;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (inval_count) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkInvalidateMappedMemoryRanges(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, inval_count,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                             inval_list);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to invalidate memory: %s\n&quot;</span>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                   <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a00e2f72a33482e81ff7741ae598f0559">  264</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a00e2f72a33482e81ff7741ae598f0559">ff_vk_unmap_buffers</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_buffer.html">FFVkBuffer</a> *buf, <span class="keywordtype">int</span> nb_buffers,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;{</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    VkMappedMemoryRange *flush_list = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">int</span> flush_count = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_buffers; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keyword">const</span> VkMappedMemoryRange flush_buf = {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                .sType  = VK_STRUCTURE_TYPE_MAPPED_MEMORY_RANGE,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                .memory = buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                .size   = VK_WHOLE_SIZE,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            };</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">if</span> (buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; VK_MEMORY_PROPERTY_HOST_COHERENT_BIT)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            flush_list = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;scratch, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;scratch_size,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                         (++flush_count)*<span class="keyword">sizeof</span>(*flush_list));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">if</span> (!flush_list)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            flush_list[flush_count - 1] = flush_buf;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (flush_count) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkFlushMappedMemoryRanges(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, flush_count,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                        flush_list);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to flush memory: %s\n&quot;</span>,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                   <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            err = <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>; <span class="comment">/* We still want to try to unmap them */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_buffers; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        vkUnmapMemory(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="vulkan_8h.html#aa0a830f2090c6505f0fda1f16d21e385">  306</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#aa0a830f2090c6505f0fda1f16d21e385">ff_vk_free_buf</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_buffer.html">FFVkBuffer</a> *buf)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (!buf)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">buf</a> != VK_NULL_HANDLE)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        vkDestroyBuffer(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">buf</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a> != VK_NULL_HANDLE)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        vkFreeMemory(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, buf-&gt;<a class="code" href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">mem</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a33e0deb5a142debdb9df30428735d4bf">  318</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a33e0deb5a142debdb9df30428735d4bf">ff_vk_add_push_constant</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                            <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, VkShaderStageFlagBits stage)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    VkPushConstantRange *pc;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a> = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>, <span class="keyword">sizeof</span>(*pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>),</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                                       pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#af8f4535540f067c62fd2aa0805acbfb0">push_consts_num</a> + 1);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (!pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    pc = &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>[pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#af8f4535540f067c62fd2aa0805acbfb0">push_consts_num</a>++];</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    memset(pc, 0, <span class="keyword">sizeof</span>(*pc));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    pc-&gt;stageFlags = stage;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    pc-&gt;offset = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    pc-&gt;size = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<a class="code" href="vulkan_8c.html#a44ef81a3b663845f5f88ecf1753431db">FN_CREATING</a>(<a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a>, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a>, exec_ctx, exec_ctx, exec_ctx_num)</div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a72f44d60d2ce5a34abc29cfe177c924b">  339</a></span>&#160;<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a> <a class="code" href="vulkan_8c.html#a72f44d60d2ce5a34abc29cfe177c924b">ff_vk_create_exec_ctx</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> **<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;{</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;priv;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordtype">int</span> queue_family = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;queue_family_idx;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">int</span> nb_queues = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;queue_count;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    VkCommandPoolCreateInfo <a class="code" href="af__dynaudnorm_8c.html#a098e07c895cd144e457198846bf64a8f">cqueue_create</a> = {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        .sType              = VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO,</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        .flags              = VK_COMMAND_POOL_CREATE_RESET_COMMAND_BUFFER_BIT,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        .queueFamilyIndex   = queue_family,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    };</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    VkCommandBufferAllocateInfo cbuf_create = {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        .sType              = VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        .level              = VK_COMMAND_BUFFER_LEVEL_PRIMARY,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        .commandBufferCount = nb_queues,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    };</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    e = <a class="code" href="hwcontext__vulkan_8c.html#a8ec94342a3a8351bd61eacacd1dedf4b">create_exec_ctx</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (!e)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(nb_queues * <span class="keyword">sizeof</span>(*e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(nb_queues * <span class="keyword">sizeof</span>(*e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="comment">/* Create command pool */</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateCommandPool(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;<a class="code" href="af__dynaudnorm_8c.html#a098e07c895cd144e457198846bf64a8f">cqueue_create</a>,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#afcd096caf534c3f76f1b2bf4c6ce94ce">pool</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Command pool creation failure: %s\n&quot;</span>,</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    cbuf_create.commandPool = e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#afcd096caf534c3f76f1b2bf4c6ce94ce">pool</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">/* Allocate command buffer */</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkAllocateCommandBuffers(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;cbuf_create, e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Command buffer alloc failure: %s\n&quot;</span>,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_queues; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        vkGetDeviceQueue(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, queue_family, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a6729167da6605e9d5586c4162a1977ec">queue</a>);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = e;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a2524a96b984b8c06de93ba10d26e9dec">  400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx];</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a>; j++)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a>[j]);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a> = 0;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#ab9f8641d392e9aecc5173198dffdb68f">nb_frame_deps</a>; j++)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a4fce40e235b572999ade3e04b840bdaa">frame_deps</a>[j]);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#ab9f8641d392e9aecc5173198dffdb68f">nb_frame_deps</a> = 0;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a> = 0;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41099aba85dbbaac54576698b468a972">sem_sig_cnt</a> = 0;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a91407de17023c4e4c7c0bef190cbc7a5">  417</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a91407de17023c4e4c7c0bef190cbc7a5">ff_vk_start_exec_recording</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;{</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx];</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    VkCommandBufferBeginInfo cmd_start = {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        .sType = VK_STRUCTURE_TYPE_COMMAND_BUFFER_BEGIN_INFO,</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        .flags = VK_COMMAND_BUFFER_USAGE_ONE_TIME_SUBMIT_BIT,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    };</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">/* Create the fence and don&#39;t wait for it initially */</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (!q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        VkFenceCreateInfo fence_spawn = {</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            .sType = VK_STRUCTURE_TYPE_FENCE_CREATE_INFO,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        };</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateFence(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;fence_spawn, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc,</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                            &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to queue frame fence: %s\n&quot;</span>,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                   <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        vkWaitForFences(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, 1, &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>, VK_TRUE, UINT64_MAX);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        vkResetFences(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, 1, &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">/* Discard queue dependencies */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkBeginCommandBuffer(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx], &amp;cmd_start);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to start command recoding: %s\n&quot;</span>,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a7b4230dc2458cb6ebac08f225a25d169">  458</a></span>&#160;VkCommandBuffer <a class="code" href="vulkan_8c.html#a7b4230dc2458cb6ebac08f225a25d169">ff_vk_get_exec_buf</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;{</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">return</span> e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx];</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a15e4e744de76504f064ea987e4681c4b">  464</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a15e4e744de76504f064ea987e4681c4b">ff_vk_add_exec_dep</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                       <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, VkPipelineStageFlagBits in_wait_dst_flag)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> **dst;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="struct_a_v_vk_frame.html">AVVkFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = (<a class="code" href="struct_a_v_vk_frame.html">AVVkFrame</a> *)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx];</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *<a class="code" href="cbs__av1_8c.html#af78abe107efa96a4d10e344cf1ec5de4">fc</a> = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;hw_frames_ctx-&gt;data;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#a39de7029a33bc3271ae437de0a38c343">planes</a> = <a class="code" href="pixdesc_8c.html#a118df1d607abd7484f874b3d7ea8823a">av_pix_fmt_count_planes</a>(<a class="code" href="cbs__av1_8c.html#af78abe107efa96a4d10e344cf1ec5de4">fc</a>-&gt;sw_format);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="llviddspenc_8c.html#a39de7029a33bc3271ae437de0a38c343">planes</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a> = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a>, &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a5ffa8298f777146641927359d8c7173d">sem_wait_alloc</a>,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                      (e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a> + 1)*<span class="keyword">sizeof</span>(*e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a>));</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a>) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a> = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a>, &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#adff737a5202749315a93c4756223593d">sem_wait_dst_alloc</a>,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                          (e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a> + 1)*<span class="keyword">sizeof</span>(*e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a>));</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a>) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a> = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a>, &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a5efc23c57a335a655c027e2039273049">sem_sig_alloc</a>,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                     (e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41099aba85dbbaac54576698b468a972">sem_sig_cnt</a> + 1)*<span class="keyword">sizeof</span>(*e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a>));</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">if</span> (!e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a>) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a>[e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a>] = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;sem[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a>[e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a>] = in_wait_dst_flag;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a>++;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a>[e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41099aba85dbbaac54576698b468a972">sem_sig_cnt</a>] = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;sem[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41099aba85dbbaac54576698b468a972">sem_sig_cnt</a>++;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    dst = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(q-&gt;frame_deps, &amp;q-&gt;frame_deps_alloc_size,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                          (q-&gt;nb_frame_deps + 1) * <span class="keyword">sizeof</span>(*dst));</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (!dst) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    q-&gt;frame_deps = dst;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    q-&gt;frame_deps[q-&gt;nb_frame_deps] = <a class="code" href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (!q-&gt;frame_deps[q-&gt;nb_frame_deps]) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    q-&gt;nb_frame_deps++;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="vulkan_8h.html#ab222691b335dd7c71035aa77a2a093cd">  522</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#ab222691b335dd7c71035aa77a2a093cd">ff_vk_submit_exec_queue</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;{</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx];</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    VkSubmitInfo s_info = {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        .sType                = VK_STRUCTURE_TYPE_SUBMIT_INFO,</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        .commandBufferCount   = 1,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        .pCommandBuffers      = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx],</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        .pWaitSemaphores      = e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a>,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        .pWaitDstStageMask    = e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a>,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        .waitSemaphoreCount   = e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">sem_wait_cnt</a>,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        .pSignalSemaphores    = e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a>,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        .signalSemaphoreCount = e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41099aba85dbbaac54576698b468a972">sem_sig_cnt</a>,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    };</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkEndCommandBuffer(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx]);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to finish command buffer: %s\n&quot;</span>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkQueueSubmit(q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a6729167da6605e9d5586c4162a1977ec">queue</a>, 1, &amp;s_info, q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to submit command buffer: %s\n&quot;</span>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">/* Rotate queues */</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx + 1) % <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;queue_count;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a31f8ed693347b5814c6c73e187546858">  561</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a31f8ed693347b5814c6c73e187546858">ff_vk_add_dep_exec_ctx</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                           <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> **deps, <span class="keywordtype">int</span> nb_deps)</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;{</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> **dst;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx];</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (!deps || !nb_deps)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    dst = <a class="code" href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a>(q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a>, &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a743eecdf6ced716bd39acbbdb6a66d26">buf_deps_alloc_size</a>,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                          (q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a> + nb_deps) * <span class="keyword">sizeof</span>(*dst));</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!dst)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a> = dst;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_deps; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a>[q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a>] = deps[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <span class="keywordflow">if</span> (!q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a>[q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a>])</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="keywordflow">goto</span> err;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a>++;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;err:</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a>(avctx, e);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="vulkan_8h.html#abef36c3fbff9bf3912de107c5989f718">  592</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#abef36c3fbff9bf3912de107c5989f718">ff_vk_filter_query_formats</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> pixel_formats[] = {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0f77c711dcbc9a4acdea48b6b5bc50c7">AV_PIX_FMT_VULKAN</a>, <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    };</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="struct_a_v_filter_formats.html">AVFilterFormats</a> *<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a> = <a class="code" href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a>(pixel_formats);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a>(avctx, <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="vulkan_8c.html#ac239d39cace7bf535d83100b20e94748">  604</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#ac239d39cace7bf535d83100b20e94748">vulkan_filter_set_device</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx,</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                                    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *device)</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(device);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device = (<a class="code" href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a>*)<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref-&gt;data;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device-&gt;hwctx;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="vulkan_8c.html#ad82a824e0beff2914bdabcdfdc4b5698">  621</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#ad82a824e0beff2914bdabcdfdc4b5698">vulkan_filter_set_frames</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *<a class="code" href="filter__design_8txt.html#a5571b2d72652c6a3f51d31724ba36c78">frames</a>)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frames_ref);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frames_ref = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(<a class="code" href="filter__design_8txt.html#a5571b2d72652c6a3f51d31724ba36c78">frames</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frames_ref)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a4c45e48efd94906237853884f732cd10">  635</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a4c45e48efd94906237853884f732cd10">ff_vk_filter_config_input</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;dst;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *input_frames;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;hw_frames_ctx) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Vulkan filtering requires a &quot;</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;               <span class="stringliteral">&quot;hardware frames context on the input.\n&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">/* Extract the device and default output format from the first input. */</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#a6837bf4b3d70c0a2bd3122f9daadc0d4">inputs</a>[0] != <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>)</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    input_frames = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>*)<a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;hw_frames_ctx-&gt;data;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (input_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a045bc1713932804f6ceef170a5578e0e">format</a> != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0f77c711dcbc9a4acdea48b6b5bc50c7">AV_PIX_FMT_VULKAN</a>)</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    err = <a class="code" href="vulkan_8c.html#ac239d39cace7bf535d83100b20e94748">vulkan_filter_set_device</a>(avctx, input_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a2f3908bfadd569103b67ee4972ee7305">device_ref</a>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    err = <a class="code" href="vulkan_8c.html#ad82a824e0beff2914bdabcdfdc4b5698">vulkan_filter_set_frames</a>(avctx, <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;hw_frames_ctx);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">/* Default output parameters match input parameters. */</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;input_format = input_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a663a9aceca97aa7b2426c9aba6543e4a">sw_format</a>;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_format == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_format = input_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a663a9aceca97aa7b2426c9aba6543e4a">sw_format</a>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_width)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_width  = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;w;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_height)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_height = <a class="code" href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a>-&gt;h;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a161b8a08a873b0501d6fdc6a10900d71">  675</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a161b8a08a873b0501d6fdc6a10900d71">ff_vk_filter_config_output_inplace</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx = outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a4ed74bf972be6e87bd6281f29d35bef2">src</a>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">if</span> (!avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">hw_device_ctx</a>) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Vulkan filtering requires a &quot;</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                   <span class="stringliteral">&quot;Vulkan device.\n&quot;</span>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        err = <a class="code" href="vulkan_8c.html#ac239d39cace7bf535d83100b20e94748">vulkan_filter_set_device</a>(avctx, avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">hw_device_ctx</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frames_ref);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">if</span> (!outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a>)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_width;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_height;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;}</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a5539448a017f968f4b1e9fe427c68350">  705</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a5539448a017f968f4b1e9fe427c68350">ff_vk_filter_config_output</a>(<a class="code" href="struct_a_v_filter_link.html">AVFilterLink</a> *outlink)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx = outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a4ed74bf972be6e87bd6281f29d35bef2">src</a>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *output_frames_ref;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a> *output_frames;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">if</span> (!avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">hw_device_ctx</a>) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Vulkan filtering requires a &quot;</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                   <span class="stringliteral">&quot;Vulkan device.\n&quot;</span>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        err = <a class="code" href="vulkan_8c.html#ac239d39cace7bf535d83100b20e94748">vulkan_filter_set_device</a>(avctx, avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">hw_device_ctx</a>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    output_frames_ref = <a class="code" href="hwcontext_8c.html#ac45a7c039eb4e084b692f69ff5f2e217">av_hwframe_ctx_alloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (!output_frames_ref) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        err = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    output_frames = (<a class="code" href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a>*)output_frames_ref-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    output_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a045bc1713932804f6ceef170a5578e0e">format</a>    = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0f77c711dcbc9a4acdea48b6b5bc50c7">AV_PIX_FMT_VULKAN</a>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    output_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a663a9aceca97aa7b2426c9aba6543e4a">sw_format</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_format;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    output_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#a9e6f29d0f744930cdd0e8bdff8771520">width</a>     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_width;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    output_frames-&gt;<a class="code" href="struct_a_v_h_w_frames_context.html#ae61bbe1d8645a0c573085e29f1d0a58f">height</a>    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_height;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    err = <a class="code" href="hwcontext_8c.html#a66a7e1ebc7e459ce07d3de6639ac7e38">av_hwframe_ctx_init</a>(output_frames_ref);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">if</span> (err &lt; 0) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialise output &quot;</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;               <span class="stringliteral">&quot;frames: %d.\n&quot;</span>, err);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">hw_frames_ctx</a> = output_frames_ref;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">w</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_width;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    outlink-&gt;<a class="code" href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">h</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_height;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;output_frames_ref);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="vulkan_8h.html#ad6c4873e24f5f312c22c52230680c87c">  756</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#ad6c4873e24f5f312c22c52230680c87c">ff_vk_filter_init</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;output_format = <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="glslang_8cpp.html#aaefad04526f9add8246c63110dfb886a">glslang_init</a>())</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<a class="code" href="vulkan_8c.html#a44ef81a3b663845f5f88ecf1753431db">FN_CREATING</a>(<a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a>, VkSampler, sampler, samplers, samplers_num)</div>
<div class="line"><a name="l00769"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a0d7e96fbd2f2b3b26cfe10c72a336cf9">  769</a></span>&#160;VkSampler *<a class="code" href="vulkan_8c.html#a0d7e96fbd2f2b3b26cfe10c72a336cf9">ff_vk_init_sampler</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <span class="keywordtype">int</span> unnorm_coords,</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                              VkFilter <a class="code" href="af__earwax_8c.html#af168ba1108ec9a2931e0f8335202c228">filt</a>)</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;{</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;priv;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    VkSamplerCreateInfo sampler_info = {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        .sType = VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        .magFilter = <a class="code" href="af__earwax_8c.html#af168ba1108ec9a2931e0f8335202c228">filt</a>,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        .minFilter = sampler_info.magFilter,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        .mipmapMode = unnorm_coords ? VK_SAMPLER_MIPMAP_MODE_NEAREST :</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                                      VK_SAMPLER_MIPMAP_MODE_LINEAR,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        .addressModeU = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        .addressModeV = sampler_info.addressModeU,</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        .addressModeW = sampler_info.addressModeU,</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        .anisotropyEnable = VK_FALSE,</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        .compareOp = VK_COMPARE_OP_NEVER,</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        .borderColor = VK_BORDER_COLOR_FLOAT_TRANSPARENT_BLACK,</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        .unnormalizedCoordinates = unnorm_coords,</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    };</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    VkSampler *sampler = create_sampler(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">if</span> (!sampler)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateSampler(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;sampler_info,</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                          <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, sampler);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to init sampler: %s\n&quot;</span>,</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">return</span> sampler;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;}</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a95fe74aa2cbd8c16089f99a6fa49769b">  805</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a95fe74aa2cbd8c16089f99a6fa49769b">ff_vk_mt_is_np_rgb</a>(<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a>)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;{</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5110926011394bc4f6066145314a5330">AV_PIX_FMT_ABGR</a>   || <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7">AV_PIX_FMT_BGRA</a>   ||</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a7ffbd399b88a48196e3cba416eec4dac">AV_PIX_FMT_RGBA</a>   || <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a107eadfcfe8c9fc751289eeb7744a6d3">AV_PIX_FMT_RGB24</a>  ||</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5acc582ddd3f60d4cd3ddffb48116fb154">AV_PIX_FMT_BGR24</a>  || <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a8aa3ddf224cba014fb9eac404498046a">AV_PIX_FMT_RGB48</a>  ||</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a79f0cce2e796a9e51f75fea1695c9160">AV_PIX_FMT_RGBA64</a> || <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#ac006ecccd336ce7280ef0155568ebfb6">AV_PIX_FMT_RGB565</a> ||</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#ab0749a06130381634569b1cb479cab79">AV_PIX_FMT_BGR565</a> || <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0">AV_PIX_FMT_BGR0</a>   ||</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a698dbf894ce405d3775c6cf440debf65">AV_PIX_FMT_0BGR</a>   || <a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab9fcc01ba1689d75e4bc2080a347e1d0">AV_PIX_FMT_RGB0</a>)</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;}</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a250d983242a6c1f31a2bde307088b873">  817</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="vulkan_8c.html#a250d983242a6c1f31a2bde307088b873">ff_vk_shader_rep_fmt</a>(<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="kmsgrab_8c.html#ab482f514ab017799e2ac45d666537564">pixfmt</a>)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;{</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(<a class="code" href="kmsgrab_8c.html#ab482f514ab017799e2ac45d666537564">pixfmt</a>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> high = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;comp[0].depth &gt; 8;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">return</span> high ? <span class="stringliteral">&quot;rgba16f&quot;</span> : <span class="stringliteral">&quot;rgba8&quot;</span>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;}</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="struct_image_view_ctx.html">  824</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_image_view_ctx.html">ImageViewCtx</a> {</div>
<div class="line"><a name="l00825"></a><span class="lineno"><a class="line" href="struct_image_view_ctx.html#a18ea26c8a347f5a3190ff985817f17c7">  825</a></span>&#160;    VkImageView <a class="code" href="struct_image_view_ctx.html#a18ea26c8a347f5a3190ff985817f17c7">view</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="vulkan_8c.html#a9ace42ba96212f78fda5e1547beb1074">  826</a></span>&#160;} <a class="code" href="vulkan_8c.html#a9ace42ba96212f78fda5e1547beb1074">ImageViewCtx</a>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="vulkan_8c.html#adb48fb11bc3e2df0e99e62c375b89267">  828</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#adb48fb11bc3e2df0e99e62c375b89267">destroy_imageview</a>(<span class="keywordtype">void</span> *opaque, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;{</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = opaque;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="struct_image_view_ctx.html">ImageViewCtx</a> *iv = (<a class="code" href="struct_image_view_ctx.html">ImageViewCtx</a> *)<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    vkDestroyImageView(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, iv-&gt;<a class="code" href="struct_image_view_ctx.html#a18ea26c8a347f5a3190ff985817f17c7">view</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(iv);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="vulkan_8h.html#adfc9367c08ae8ecdce5298c4f1308dc0">  836</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#adfc9367c08ae8ecdce5298c4f1308dc0">ff_vk_create_imageview</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                           VkImageView *v, VkImage <a class="code" href="vf__colormatrix_8c.html#ad116363516b0293a59b40e02af04a018">img</a>, VkFormat fmt,</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                           <span class="keyword">const</span> VkComponentMapping <a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *buf;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    VkImageViewCreateInfo imgview_spawn = {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        .sType      = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO,</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        .pNext      = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        .image      = <a class="code" href="vf__colormatrix_8c.html#ad116363516b0293a59b40e02af04a018">img</a>,</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        .viewType   = VK_IMAGE_VIEW_TYPE_2D,</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        .format     = fmt,</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        .components = <a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        .subresourceRange = {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            .aspectMask     = VK_IMAGE_ASPECT_COLOR_BIT,</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            .baseMipLevel   = 0,</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            .levelCount     = 1,</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            .baseArrayLayer = 0,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            .layerCount     = 1,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        },</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    };</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="struct_image_view_ctx.html">ImageViewCtx</a> *iv = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*iv));</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateImageView(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;imgview_spawn,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, &amp;iv-&gt;<a class="code" href="struct_image_view_ctx.html#a18ea26c8a347f5a3190ff985817f17c7">view</a>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create imageview: %s\n&quot;</span>,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    buf = <a class="code" href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a>((<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)iv, <span class="keyword">sizeof</span>(*iv), <a class="code" href="vulkan_8c.html#adb48fb11bc3e2df0e99e62c375b89267">destroy_imageview</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (!buf) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <a class="code" href="vulkan_8c.html#adb48fb11bc3e2df0e99e62c375b89267">destroy_imageview</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)iv);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">/* Add to queue dependencies */</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    err = <a class="code" href="vulkan_8c.html#a31f8ed693347b5814c6c73e187546858">ff_vk_add_dep_exec_ctx</a>(avctx, e, &amp;buf, 1);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;buf);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    *v = iv-&gt;view;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<a class="code" href="vulkan_8c.html#a44ef81a3b663845f5f88ecf1753431db">FN_CREATING</a>(<a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a>, <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a>, shader, shaders, shaders_num)</div>
<div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a6abb4f9cdba77d2d73648cda0b6e15db">  888</a></span>&#160;<a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *<a class="code" href="vulkan_8c.html#a6abb4f9cdba77d2d73648cda0b6e15db">ff_vk_init_shader</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl,</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                               const <span class="keywordtype">char</span> *<a class="code" href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a>, VkShaderStageFlags stage)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;{</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *shd = create_shader(pl);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (!shd)</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a>(&amp;shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a9531c965c36eb8c8304e1b6fdfa1df20">src</a>, 0, <a class="code" href="bprint_8h.html#a01aefbce0615a828eae24135a9b35c45">AV_BPRINT_SIZE_UNLIMITED</a>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.sType = VK_STRUCTURE_TYPE_PIPELINE_SHADER_STAGE_CREATE_INFO;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.stage = stage;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a7896977a2c3e4007278bd220eb44484f">name</a> = <a class="code" href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a>;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <a class="code" href="vulkan_8h.html#a8ea2fb70286c613ec0790473ec6c4d6e">GLSLF</a>(0, #<a class="code" href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a> %<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>                                                  ,460);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="vulkan_8h.html#ab6f1c61dd4d32df3bb4850fd6c2454c4">GLSLC</a>(0, #define IS_WITHIN(v1, v2) ((v1.x &lt; v2.x) &amp;&amp; (v1.y &lt; v2.y))       );</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="vulkan_8h.html#ab6f1c61dd4d32df3bb4850fd6c2454c4">GLSLC</a>(0,                                                                  );</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> shd;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a31aba92136a217f24c10135a578c4e99">  909</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a31aba92136a217f24c10135a578c4e99">ff_vk_set_compute_shader_sizes</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *shd,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                                        <span class="keywordtype">int</span> local_size[3])</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">local_size</a>[0] = local_size[0];</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">local_size</a>[1] = local_size[1];</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">local_size</a>[2] = local_size[2];</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a9531c965c36eb8c8304e1b6fdfa1df20">src</a>, <span class="stringliteral">&quot;layout (local_size_x = %i, &quot;</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;               <span class="stringliteral">&quot;local_size_y = %i, local_size_z = %i) in;\n\n&quot;</span>,</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;               shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">local_size</a>[0], shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">local_size</a>[1], shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">local_size</a>[2]);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="vulkan_8c.html#aec2532dfa47690480ce7a8ff3d9a13b2">  921</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#aec2532dfa47690480ce7a8ff3d9a13b2">print_shader</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *shd, <span class="keywordtype">int</span> prio)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;{</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structline.html">line</a> = 0;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *p = shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a9531c965c36eb8c8304e1b6fdfa1df20">src</a>.str;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *start = p;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    AVBPrint buf;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <a class="code" href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a>(&amp;buf, 0, <a class="code" href="bprint_8h.html#a01aefbce0615a828eae24135a9b35c45">AV_BPRINT_SIZE_UNLIMITED</a>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160; </div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; strlen(p); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">if</span> (p[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] == <span class="charliteral">&#39;\n&#39;</span>) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;%i\t&quot;</span>, ++<a class="code" href="structline.html">line</a>);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <a class="code" href="bprint_8c.html#aa215ba46a975d996e483cf0b9dcc85e5">av_bprint_append_data</a>(&amp;buf, start, &amp;p[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - start + 1);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            start = &amp;p[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, prio, <span class="stringliteral">&quot;Shader %s: \n%s&quot;</span>, shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a7896977a2c3e4007278bd220eb44484f">name</a>, buf.str);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a>(&amp;buf, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a6f2f6b74edac2598d023978eb9d69b0d">  942</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a6f2f6b74edac2598d023978eb9d69b0d">ff_vk_compile_shader</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *shd,</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">char</span> *entrypoint)</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;{</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    VkShaderModuleCreateInfo shader_create;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="struct_g_l_slang_result.html">GLSlangResult</a> *res;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ff">GLSlangStage</a> emap[] = {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        [VK_SHADER_STAGE_VERTEX_BIT]   = <a class="code" href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ffa67ddd6e49f0cffbf01406801d84e1304">GLSLANG_VERTEX</a>,</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        [VK_SHADER_STAGE_FRAGMENT_BIT] = <a class="code" href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ffa9537fa5b58d0183d29fac1f273e5fdf4">GLSLANG_FRAGMENT</a>,</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        [VK_SHADER_STAGE_COMPUTE_BIT]  = <a class="code" href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ffa41cabf0620690cfdbd900b8f0e8a2deb">GLSLANG_COMPUTE</a>,</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    };</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.pName = entrypoint;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    res = <a class="code" href="glslang_8cpp.html#af748687fc8fe194b6a01da85756e3d73">glslang_compile</a>(shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a9531c965c36eb8c8304e1b6fdfa1df20">src</a>.str, emap[shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.stage]);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="keywordflow">if</span> (!res)</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">if</span> (res-&gt;<a class="code" href="struct_g_l_slang_result.html#a2b02ce02075f78f012f0238b75913dd1">rval</a>) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error compiling shader %s: %s!\n&quot;</span>,</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;               shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a7896977a2c3e4007278bd220eb44484f">name</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(res-&gt;<a class="code" href="struct_g_l_slang_result.html#a2b02ce02075f78f012f0238b75913dd1">rval</a>));</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="vulkan_8c.html#aec2532dfa47690480ce7a8ff3d9a13b2">print_shader</a>(avctx, shd, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        <span class="keywordflow">if</span> (res-&gt;<a class="code" href="struct_g_l_slang_result.html#a99e33855e76c732f74bae04ad8a74cad">error_msg</a>)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;%s&quot;</span>, res-&gt;<a class="code" href="struct_g_l_slang_result.html#a99e33855e76c732f74bae04ad8a74cad">error_msg</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(res-&gt;<a class="code" href="struct_g_l_slang_result.html#a99e33855e76c732f74bae04ad8a74cad">error_msg</a>);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="keywordflow">return</span> res-&gt;<a class="code" href="struct_g_l_slang_result.html#a2b02ce02075f78f012f0238b75913dd1">rval</a>;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <a class="code" href="vulkan_8c.html#aec2532dfa47690480ce7a8ff3d9a13b2">print_shader</a>(avctx, shd, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    shader_create.sType    = VK_STRUCTURE_TYPE_SHADER_MODULE_CREATE_INFO;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    shader_create.pNext    = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    shader_create.codeSize = res-&gt;<a class="code" href="struct_g_l_slang_result.html#a1fe2f13bd55f6e3924218e0e82c6fa58">size</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    shader_create.flags    = 0;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    shader_create.pCode    = res-&gt;<a class="code" href="struct_g_l_slang_result.html#a728cee2cfcc03fea9fcd3c5ac45c5e07">data</a>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateShaderModule(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;shader_create, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                               &amp;shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.module);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">/* Free the GLSlangResult struct */</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(res-&gt;<a class="code" href="struct_g_l_slang_result.html#a728cee2cfcc03fea9fcd3c5ac45c5e07">data</a>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(res);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create shader module: %s\n&quot;</span>,</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    }</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160; </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Shader %s linked! Size: %zu bytes\n&quot;</span>,</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;           shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a7896977a2c3e4007278bd220eb44484f">name</a>, shader_create.codeSize);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="structdescriptor__props.html">  999</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structdescriptor__props.html">descriptor_props</a> {</div>
<div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="structdescriptor__props.html#a8f9c3310954b4916b28c7d5cce8bb697"> 1000</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structdescriptor__props.html#a8f9c3310954b4916b28c7d5cce8bb697">struct_size</a>; <span class="comment">/* Size of the opaque which updates the descriptor */</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="structdescriptor__props.html#acb49941a84e9963853a31ad9ca5d7655"> 1001</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structdescriptor__props.html#acb49941a84e9963853a31ad9ca5d7655">type</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"><a class="line" href="structdescriptor__props.html#aad4c7c00018bd3627fe366c6b22af7ab"> 1002</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdescriptor__props.html#aad4c7c00018bd3627fe366c6b22af7ab">is_uniform</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"><a class="line" href="structdescriptor__props.html#a6f0c1c9c9251f16c052f300d5f9fcb00"> 1003</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdescriptor__props.html#a6f0c1c9c9251f16c052f300d5f9fcb00">mem_quali</a>;      <span class="comment">/* Can use a memory qualifier */</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"><a class="line" href="structdescriptor__props.html#a576a8c52dae72f498a3277758a510d01"> 1004</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdescriptor__props.html#a576a8c52dae72f498a3277758a510d01">dim_needed</a>;     <span class="comment">/* Must indicate dimension */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="structdescriptor__props.html#a2f90e7feb63c16ef74f9607abc0f3c10"> 1005</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structdescriptor__props.html#a2f90e7feb63c16ef74f9607abc0f3c10">buf_content</a>;    <span class="comment">/* Must indicate buffer contents */</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;} <a class="code" href="structdescriptor__props.html">descriptor_props</a>[] = {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    [VK_DESCRIPTOR_TYPE_SAMPLER]                = { <span class="keyword">sizeof</span>(VkDescriptorImageInfo),  <span class="stringliteral">&quot;sampler&quot;</span>,       1, 0, 0, 0, },</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    [VK_DESCRIPTOR_TYPE_SAMPLED_IMAGE]          = { <span class="keyword">sizeof</span>(VkDescriptorImageInfo),  <span class="stringliteral">&quot;texture&quot;</span>,       1, 0, 1, 0, },</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    [VK_DESCRIPTOR_TYPE_STORAGE_IMAGE]          = { <span class="keyword">sizeof</span>(VkDescriptorImageInfo),  <span class="stringliteral">&quot;image&quot;</span>,         1, 1, 1, 0, },</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    [VK_DESCRIPTOR_TYPE_INPUT_ATTACHMENT]       = { <span class="keyword">sizeof</span>(VkDescriptorImageInfo),  <span class="stringliteral">&quot;subpassInput&quot;</span>,  1, 0, 0, 0, },</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    [VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER] = { <span class="keyword">sizeof</span>(VkDescriptorImageInfo),  <span class="stringliteral">&quot;sampler&quot;</span>,       1, 0, 1, 0, },</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    [VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER]         = { <span class="keyword">sizeof</span>(VkDescriptorBufferInfo),  <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,           1, 0, 0, 1, },</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    [VK_DESCRIPTOR_TYPE_STORAGE_BUFFER]         = { <span class="keyword">sizeof</span>(VkDescriptorBufferInfo), <span class="stringliteral">&quot;buffer&quot;</span>,        0, 1, 0, 1, },</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    [VK_DESCRIPTOR_TYPE_UNIFORM_BUFFER_DYNAMIC] = { <span class="keyword">sizeof</span>(VkDescriptorBufferInfo),  <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,           1, 0, 0, 1, },</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    [VK_DESCRIPTOR_TYPE_STORAGE_BUFFER_DYNAMIC] = { <span class="keyword">sizeof</span>(VkDescriptorBufferInfo), <span class="stringliteral">&quot;buffer&quot;</span>,        0, 1, 0, 1, },</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    [VK_DESCRIPTOR_TYPE_UNIFORM_TEXEL_BUFFER]   = { <span class="keyword">sizeof</span>(VkBufferView),           <span class="stringliteral">&quot;samplerBuffer&quot;</span>, 1, 0, 0, 0, },</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    [VK_DESCRIPTOR_TYPE_STORAGE_TEXEL_BUFFER]   = { <span class="keyword">sizeof</span>(VkBufferView),           <span class="stringliteral">&quot;imageBuffer&quot;</span>,   1, 0, 0, 0, },</div>
<div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="vulkan_8c.html#a93f23bf318f10ae0bba3f3a73002fb63"> 1018</a></span>&#160;};</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a24a8fe4b47cc688eb9a4c3aac84efcfb"> 1020</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a24a8fe4b47cc688eb9a4c3aac84efcfb">ff_vk_add_descriptor_set</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl,</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                             <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *shd, <a class="code" href="struct_vulkan_descriptor_set_binding.html">VulkanDescriptorSetBinding</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>,</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                             <span class="keywordtype">int</span> num, <span class="keywordtype">int</span> only_print_to_shader)</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;{</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    VkDescriptorSetLayout *<a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">if</span> (only_print_to_shader)</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2tree_8c.html#a83a6fb2986b6c7b677f1e00b513e7a8e">print</a>;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a> = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>, <span class="keyword">sizeof</span>(*pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>),</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;                                       pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a> + 1);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">if</span> (!pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>)</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a> = &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>[pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a>];</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    memset(<a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>, 0, <span class="keyword">sizeof</span>(*<a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>));</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    { <span class="comment">/* Create descriptor set layout descriptions */</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        VkDescriptorSetLayoutCreateInfo desc_create_layout = { 0 };</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        VkDescriptorSetLayoutBinding *desc_binding;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        desc_binding = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*desc_binding)*num);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="keywordflow">if</span> (!desc_binding)</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            desc_binding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].binding            = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            desc_binding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].descriptorType     = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].type;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            desc_binding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].descriptorCount    = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].elems, 1);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            desc_binding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].stageFlags         = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].stages;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            desc_binding[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].pImmutableSamplers = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].samplers;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        }</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        desc_create_layout.sType = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_LAYOUT_CREATE_INFO;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        desc_create_layout.pBindings = desc_binding;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        desc_create_layout.bindingCount = num;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateDescriptorSetLayout(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;desc_create_layout,</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                                          <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, <a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(desc_binding);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to init descriptor set &quot;</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                   <span class="stringliteral">&quot;layout: %s\n&quot;</span>, <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        }</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    }</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    { <span class="comment">/* Pool each descriptor by type and update pool counts */</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8d211895d2797e074b017c7453af069d">pool_size_desc_num</a>; j++)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                <span class="keywordflow">if</span> (pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>[j].type == <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].type)</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="keywordflow">if</span> (j &gt;= pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8d211895d2797e074b017c7453af069d">pool_size_desc_num</a>) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a> = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>,</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                                                      <span class="keyword">sizeof</span>(*pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>),</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                                                      ++pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8d211895d2797e074b017c7453af069d">pool_size_desc_num</a>);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                <span class="keywordflow">if</span> (!pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>)</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                memset(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>[j], 0, <span class="keyword">sizeof</span>(VkDescriptorPoolSize));</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            }</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>[j].type             = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].type;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>[j].descriptorCount += <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].elems, 1);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        }</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    { <span class="comment">/* Create template creation struct */</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        VkDescriptorUpdateTemplateCreateInfo *dt;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        VkDescriptorUpdateTemplateEntry *des_entries;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="comment">/* Freed after descriptor set initialization */</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        des_entries = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(num*<span class="keyword">sizeof</span>(VkDescriptorUpdateTemplateEntry));</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        <span class="keywordflow">if</span> (!des_entries)</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            des_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].dstBinding      = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            des_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].descriptorType  = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].type;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            des_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].descriptorCount = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].elems, 1);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            des_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].dstArrayElement = 0;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            des_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].offset          = ((<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].updater) - (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *)<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            des_entries[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].stride          = <a class="code" href="structdescriptor__props.html">descriptor_props</a>[<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].type].<a class="code" href="structdescriptor__props.html#a8f9c3310954b4916b28c7d5cce8bb697">struct_size</a>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a> = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>,</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                                                  <span class="keyword">sizeof</span>(*pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>),</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                                                  pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a> + 1);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="keywordflow">if</span> (!pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        dt = &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>[pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a>];</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        memset(dt, 0, <span class="keyword">sizeof</span>(*dt));</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        dt-&gt;sType = VK_STRUCTURE_TYPE_DESCRIPTOR_UPDATE_TEMPLATE_CREATE_INFO;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        dt-&gt;templateType = VK_DESCRIPTOR_UPDATE_TEMPLATE_TYPE_DESCRIPTOR_SET;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        dt-&gt;descriptorSetLayout = *<a class="code" href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        dt-&gt;pDescriptorUpdateEntries = des_entries;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;        dt-&gt;descriptorUpdateEntryCount = num;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a>++;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<a class="code" href="tests_2tree_8c.html#a83a6fb2986b6c7b677f1e00b513e7a8e">print</a>:</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <span class="comment">/* Write shader info */</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structdescriptor__props.html">descriptor_props</a> *prop = &amp;<a class="code" href="structdescriptor__props.html">descriptor_props</a>[<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].type];</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;layout (set = %i, binding = %i&quot;</span>, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a> - 1, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].mem_layout)</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;, %s&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].mem_layout);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structdescriptor__props.html#aad4c7c00018bd3627fe366c6b22af7ab">is_uniform</a>)</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot; uniform&quot;</span>);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structdescriptor__props.html#a6f0c1c9c9251f16c052f300d5f9fcb00">mem_quali</a> &amp;&amp; <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].mem_quali)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot; %s&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structdescriptor__props.html#a6f0c1c9c9251f16c052f300d5f9fcb00">mem_quali</a>);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structdescriptor__props.html#acb49941a84e9963853a31ad9ca5d7655">type</a>)</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot; %s&quot;</span>, prop-&gt;<a class="code" href="structdescriptor__props.html#acb49941a84e9963853a31ad9ca5d7655">type</a>);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structdescriptor__props.html#a576a8c52dae72f498a3277758a510d01">dim_needed</a>)</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;%iD&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].dimensions);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot; %s&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a>);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structdescriptor__props.html#a2f90e7feb63c16ef74f9607abc0f3c10">buf_content</a>)</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot; {\n    %s\n}&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structdescriptor__props.html#a2f90e7feb63c16ef74f9607abc0f3c10">buf_content</a>);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].elems &gt; 0)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;[%i]&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].elems);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;;\n&quot;</span>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    }</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <a class="code" href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;}</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a7f7663204c25cf00fb9af77230b90352"> 1160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a7f7663204c25cf00fb9af77230b90352">ff_vk_update_descriptor_set</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl,</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                                 <span class="keywordtype">int</span> set_id)</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;{</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    vkUpdateDescriptorSetWithTemplate(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev,</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                                      pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx * pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a> + set_id],</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                                      pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>[set_id],</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                                      <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a50e96517ea9dc843086601b8559b8133"> 1171</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a50e96517ea9dc843086601b8559b8133">ff_vk_update_push_exec</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e,</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                            VkShaderStageFlagBits stage, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>,</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                            <span class="keywordtype">size_t</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keywordtype">void</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;{</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    vkCmdPushConstants(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx], e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a141b2bccd933bfbde1cb040d18b813b9">bound_pl</a>-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">pipeline_layout</a>,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                       stage, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a9b96c9b1ddee079247a142ee3f240ec7"> 1180</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a9b96c9b1ddee079247a142ee3f240ec7">ff_vk_init_pipeline_layout</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a> = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;queue_count;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    { <span class="comment">/* Init descriptor set pool */</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        VkDescriptorPoolCreateInfo pool_create_info = {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            .sType         = VK_STRUCTURE_TYPE_DESCRIPTOR_POOL_CREATE_INFO,</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            .poolSizeCount = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8d211895d2797e074b017c7453af069d">pool_size_desc_num</a>,</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            .pPoolSizes    = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>,</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            .maxSets       = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>,</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        };</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateDescriptorPool(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;pool_create_info,</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a5cb55f9cb5a9f49408bde181d00280eb">desc_pool</a>);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to init descriptor set &quot;</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                   <span class="stringliteral">&quot;pool: %s\n&quot;</span>, <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    { <span class="comment">/* Allocate descriptor sets */</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;        VkDescriptorSetAllocateInfo alloc_info = {</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            .sType              = VK_STRUCTURE_TYPE_DESCRIPTOR_SET_ALLOCATE_INFO,</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            .descriptorPool     = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a5cb55f9cb5a9f49408bde181d00280eb">desc_pool</a>,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            .descriptorSetCount = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>,</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            .pSetLayouts        = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>,</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        };</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>*<span class="keyword">sizeof</span>(*pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a>));</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">if</span> (!pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a>)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkAllocateDescriptorSets(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;alloc_info,</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                                       pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a>);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to allocate descriptor set: %s\n&quot;</span>,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                   <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;        }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    }</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    { <span class="comment">/* Finally create the pipeline layout */</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        VkPipelineLayoutCreateInfo spawn_pipeline_layout = {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            .sType                  = VK_STRUCTURE_TYPE_PIPELINE_LAYOUT_CREATE_INFO,</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            .setLayoutCount         = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a>,</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            .pSetLayouts            = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>,</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            .pushConstantRangeCount = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#af8f4535540f067c62fd2aa0805acbfb0">push_consts_num</a>,</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            .pPushConstantRanges    = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        };</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreatePipelineLayout(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, &amp;spawn_pipeline_layout,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">pipeline_layout</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#af8f4535540f067c62fd2aa0805acbfb0">push_consts_num</a> = 0;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to init pipeline layout: %s\n&quot;</span>,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                   <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        }</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    { <span class="comment">/* Descriptor template (for tightly packed descriptors) */</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        VkDescriptorUpdateTemplateCreateInfo *desc_template_info;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>*<span class="keyword">sizeof</span>(*pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>));</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">if</span> (!pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <span class="comment">/* Create update templates for the descriptor sets */</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            desc_template_info = &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> % pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a>];</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            desc_template_info-&gt;pipelineLayout = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">pipeline_layout</a>;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateDescriptorUpdateTemplate(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev,</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                                                   desc_template_info,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc,</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                                                   &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>((<span class="keywordtype">void</span> *)desc_template_info-&gt;pDescriptorUpdateEntries);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to init descriptor &quot;</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                       <span class="stringliteral">&quot;template: %s\n&quot;</span>, <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    }</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<a class="code" href="vulkan_8c.html#a44ef81a3b663845f5f88ecf1753431db">FN_CREATING</a>(<a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a>, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a>, pipeline, pipelines, pipelines_num)</div>
<div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="vulkan_8h.html#adef85e831e424c0967507b661027efdd"> 1276</a></span>&#160;<a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *<a class="code" href="vulkan_8c.html#adef85e831e424c0967507b661027efdd">ff_vk_create_pipeline</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx)</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;{</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">return</span> create_pipeline(avctx-&gt;priv);</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;}</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a39ec4e372a508a17534ece0b972a1703"> 1281</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="vulkan_8c.html#a39ec4e372a508a17534ece0b972a1703">ff_vk_init_compute_pipeline</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;{</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    VkResult <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160; </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    VkComputePipelineCreateInfo pipe = {</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        .sType  = VK_STRUCTURE_TYPE_COMPUTE_PIPELINE_CREATE_INFO,</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        .layout = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">pipeline_layout</a>,</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    };</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aeb6e3ab0613edd4a30c0c4b560db7693">shaders_num</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        <span class="keywordflow">if</span> (pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#afeaadbc3d7b42121df4d7853afcee8a1">shaders</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.stage &amp; VK_SHADER_STAGE_COMPUTE_BIT) {</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            pipe.stage = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#afeaadbc3d7b42121df4d7853afcee8a1">shaders</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        }</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aeb6e3ab0613edd4a30c0c4b560db7693">shaders_num</a>) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Can&#39;t init compute pipeline, no shader\n&quot;</span>);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = vkCreateComputePipelines(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, VK_NULL_HANDLE, 1, &amp;pipe,</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc, &amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ac191be8812aabc6fe92dfc6b376e1de4">pipeline</a>);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != VK_SUCCESS) {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to init compute pipeline: %s\n&quot;</span>,</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;               <a class="code" href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    }</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a9fe6533d9e25defd9e3e941f2d71282b">bind_point</a> = VK_PIPELINE_BIND_POINT_COMPUTE;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;}</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a897b18c7efb42918344c95c9a84d4f09"> 1316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a897b18c7efb42918344c95c9a84d4f09">ff_vk_bind_pipeline_exec</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e,</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                              <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl)</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;{</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    vkCmdBindPipeline(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx], pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a9fe6533d9e25defd9e3e941f2d71282b">bind_point</a>, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ac191be8812aabc6fe92dfc6b376e1de4">pipeline</a>);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    vkCmdBindDescriptorSets(e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cur_queue_idx], pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a9fe6533d9e25defd9e3e941f2d71282b">bind_point</a>,</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                            pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">pipeline_layout</a>, 0, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>,</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                            pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a>, 0, 0);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a141b2bccd933bfbde1cb040d18b813b9">bound_pl</a> = pl;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;}</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"><a class="line" href="vulkan_8c.html#a9df1f24367e1e031b770c1fa98ec9d10"> 1330</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a9df1f24367e1e031b770c1fa98ec9d10">free_exec_ctx</a>(<a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_f_f_vk_exec_context.html">FFVkExecContext</a> *e)</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;{</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="comment">/* Make sure all queues have finished executing */</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;queue_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <a class="code" href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a> *q = &amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            vkWaitForFences(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, 1, &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>, VK_TRUE, UINT64_MAX);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            vkResetFences(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, 1, &amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <span class="comment">/* Free the fence */</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <span class="keywordflow">if</span> (q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>)</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            vkDestroyFence(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">fence</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <span class="comment">/* Free buffer dependencies */</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">nb_buf_deps</a>; j++)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a>[j]);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">buf_deps</a>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;        <span class="comment">/* Free frame dependencies */</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#ab9f8641d392e9aecc5173198dffdb68f">nb_frame_deps</a>; j++)</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a4fce40e235b572999ade3e04b840bdaa">frame_deps</a>[j]);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(q-&gt;<a class="code" href="struct_f_f_vk_queue_ctx.html#a4fce40e235b572999ade3e04b840bdaa">frame_deps</a>);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>)</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        vkFreeCommandBuffers(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#afcd096caf534c3f76f1b2bf4c6ce94ce">pool</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;queue_count, e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#afcd096caf534c3f76f1b2bf4c6ce94ce">pool</a>)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        vkDestroyCommandPool(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#afcd096caf534c3f76f1b2bf4c6ce94ce">pool</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">bufs</a>);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">queues</a>);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">sem_sig</a>);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">sem_wait</a>);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;e-&gt;<a class="code" href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">sem_wait_dst</a>);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(e);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"><a class="line" href="vulkan_8c.html#a9b4fadccc4e5cea818dc37422091a4ff"> 1369</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a9b4fadccc4e5cea818dc37422091a4ff">free_pipeline</a>(<a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_vulkan_pipeline.html">VulkanPipeline</a> *pl)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;{</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aeb6e3ab0613edd4a30c0c4b560db7693">shaders_num</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        <a class="code" href="struct_s_p_i_r_v_shader.html">SPIRVShader</a> *shd = pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#afeaadbc3d7b42121df4d7853afcee8a1">shaders</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <a class="code" href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a>(&amp;shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a9531c965c36eb8c8304e1b6fdfa1df20">src</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        vkDestroyShaderModule(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, shd-&gt;<a class="code" href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">shader</a>.module,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(shd);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    vkDestroyPipeline(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ac191be8812aabc6fe92dfc6b376e1de4">pipeline</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    vkDestroyPipelineLayout(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">pipeline_layout</a>,</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">desc_layout_num</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        <span class="keywordflow">if</span> (pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a> &amp;&amp; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            vkDestroyDescriptorUpdateTemplate(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                              <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="keywordflow">if</span> (pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a> &amp;&amp; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;            vkDestroyDescriptorSetLayout(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    }</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="comment">/* Also frees the descriptor sets */</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">if</span> (pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a5cb55f9cb5a9f49408bde181d00280eb">desc_pool</a>)</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        vkDestroyDescriptorPool(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a5cb55f9cb5a9f49408bde181d00280eb">desc_pool</a>,</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">desc_set</a>);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#afeaadbc3d7b42121df4d7853afcee8a1">shaders</a>);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">desc_layout</a>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">desc_template</a>);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">push_consts</a>);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#af8f4535540f067c62fd2aa0805acbfb0">push_consts_num</a> = 0;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="comment">/* Only freed in case of failure */</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">pool_size_desc</a>);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">if</span> (pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">descriptor_sets_num</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>((<span class="keywordtype">void</span> *)pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].pDescriptorUpdateEntries);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;pl-&gt;<a class="code" href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">desc_template_info</a>);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(pl);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="vulkan_8h.html#a6a5422ce3a9ce2d874d9ee9337c98ec6"> 1415</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="vulkan_8c.html#a6a5422ce3a9ce2d874d9ee9337c98ec6">ff_vk_filter_uninit</a>(<a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *avctx)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;{</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <a class="code" href="struct_vulkan_filter_context.html">VulkanFilterContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">priv</a>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="glslang_8cpp.html#a8b077259e1c6478ecd3b2c55df7eff81">glslang_uninit</a>();</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160; </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;exec_ctx_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <a class="code" href="vulkan_8c.html#a9df1f24367e1e031b770c1fa98ec9d10">free_exec_ctx</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;exec_ctx[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;exec_ctx);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;samplers_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        vkDestroySampler(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;act_dev, *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;samplers[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hwctx-&gt;alloc);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;samplers[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;samplers);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pipelines_num; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        <a class="code" href="vulkan_8c.html#a9b4fadccc4e5cea818dc37422091a4ff">free_pipeline</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pipelines[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pipelines);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;scratch);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;scratch_size = 0;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;device_ref);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frames_ref);</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="avulkan_8c_html_abef36c3fbff9bf3912de107c5989f718"><div class="ttname"><a href="vulkan_8c.html#abef36c3fbff9bf3912de107c5989f718">ff_vk_filter_query_formats</a></div><div class="ttdeci">int ff_vk_filter_query_formats(AVFilterContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00592">vulkan.c:592</a></div></div>
<div class="ttc" id="astruct_g_l_slang_result_html_a1fe2f13bd55f6e3924218e0e82c6fa58"><div class="ttname"><a href="struct_g_l_slang_result.html#a1fe2f13bd55f6e3924218e0e82c6fa58">GLSlangResult::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00036">glslang.h:36</a></div></div>
<div class="ttc" id="abprint_8h_html_a01aefbce0615a828eae24135a9b35c45"><div class="ttname"><a href="bprint_8h.html#a01aefbce0615a828eae24135a9b35c45">AV_BPRINT_SIZE_UNLIMITED</a></div><div class="ttdeci">#define AV_BPRINT_SIZE_UNLIMITED</div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_adb27990ed3d4ad300fd1dde281903508"><div class="ttname"><a href="writing__filters_8txt.html#adb27990ed3d4ad300fd1dde281903508">name</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf default minimum maximum flags name is the option name</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00088">writing_filters.txt:88</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a9e6f29d0f744930cdd0e8bdff8771520"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a9e6f29d0f744930cdd0e8bdff8771520">AVHWFramesContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00229">hwcontext.h:229</a></div></div>
<div class="ttc" id="aformats_8c_html_a43e709e9689273a94a5edc40d1cb5aed"><div class="ttname"><a href="formats_8c.html#a43e709e9689273a94a5edc40d1cb5aed">ff_make_format_list</a></div><div class="ttdeci">AVFilterFormats * ff_make_format_list(const int *fmts)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00286">formats.c:286</a></div></div>
<div class="ttc" id="aglslang_8h_html_ab2fa14c2a4ab7b8f367e53ca7fecb3ff"><div class="ttname"><a href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ff">GLSlangStage</a></div><div class="ttdeci">GLSlangStage</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00039">glslang.h:39</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html"><div class="ttname"><a href="struct_a_v_filter_link.html">AVFilterLink</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00471">avfilter.h:471</a></div></div>
<div class="ttc" id="abprint_8c_html_a3fd45f50d9d4f7cc8fed5331a37f47ea"><div class="ttname"><a href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a></div><div class="ttdeci">int av_bprint_finalize(AVBPrint *buf, char **ret_str)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00235">bprint.c:235</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a045bc1713932804f6ceef170a5578e0e"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a045bc1713932804f6ceef170a5578e0e">AVHWFramesContext::format</a></div><div class="ttdeci">enum AVPixelFormat format</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00199">hwcontext.h:209</a></div></div>
<div class="ttc" id="abprint_8c_html_a26abc84daea3189592c511fc26067d66"><div class="ttname"><a href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a></div><div class="ttdeci">void av_bprint_init(AVBPrint *buf, unsigned size_init, unsigned size_max)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00069">bprint.c:69</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html"><div class="ttname"><a href="struct_a_v_filter_context.html">AVFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00341">avfilter.h:341</a></div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html_acb8452e99cd75074b93800b532c6ea4b"><div class="ttname"><a href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">AVBufferRef::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00089">buffer.h:89</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a720b17cc89203cfc793b5d7e17a6ca88"><div class="ttname"><a href="filter__design_8txt.html#a720b17cc89203cfc793b5d7e17a6ca88">inlink</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the and needs to apply these operations to the correct inlink or outlink if there are several Macros are available to factor that when no extra processing is inlink</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00212">filter_design.txt:212</a></div></div>
<div class="ttc" id="astructdescriptor__props_html_aad4c7c00018bd3627fe366c6b22af7ab"><div class="ttname"><a href="structdescriptor__props.html#aad4c7c00018bd3627fe366c6b22af7ab">descriptor_props::is_uniform</a></div><div class="ttdeci">int is_uniform</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01002">vulkan.c:1002</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_a66a7e1ebc7e459ce07d3de6639ac7e38"><div class="ttname"><a href="hwcontext_8c.html#a66a7e1ebc7e459ce07d3de6639ac7e38">av_hwframe_ctx_init</a></div><div class="ttdeci">int av_hwframe_ctx_init(AVBufferRef *ref)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00333">hwcontext.c:333</a></div></div>
<div class="ttc" id="avulkan_8c_html_a9b4fadccc4e5cea818dc37422091a4ff"><div class="ttname"><a href="vulkan_8c.html#a9b4fadccc4e5cea818dc37422091a4ff">free_pipeline</a></div><div class="ttdeci">static void free_pipeline(VulkanFilterContext *s, VulkanPipeline *pl)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01369">vulkan.c:1369</a></div></div>
<div class="ttc" id="amem_8c_html_aadc230ece36ef112710b262a6601a16b"><div class="ttname"><a href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a></div><div class="ttdeci">void * av_realloc_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00198">mem.c:198</a></div></div>
<div class="ttc" id="aglslang_8h_html_ab2fa14c2a4ab7b8f367e53ca7fecb3ffa9537fa5b58d0183d29fac1f273e5fdf4"><div class="ttname"><a href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ffa9537fa5b58d0183d29fac1f273e5fdf4">GLSLANG_FRAGMENT</a></div><div class="ttdeci">@ GLSLANG_FRAGMENT</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00041">glslang.h:41</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_ac45a7c039eb4e084b692f69ff5f2e217"><div class="ttname"><a href="hwcontext_8c.html#ac45a7c039eb4e084b692f69ff5f2e217">av_hwframe_ctx_alloc</a></div><div class="ttdeci">AVBufferRef * av_hwframe_ctx_alloc(AVBufferRef *device_ref_in)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00247">hwcontext.c:247</a></div></div>
<div class="ttc" id="avulkan_8c_html_a95fe74aa2cbd8c16089f99a6fa49769b"><div class="ttname"><a href="vulkan_8c.html#a95fe74aa2cbd8c16089f99a6fa49769b">ff_vk_mt_is_np_rgb</a></div><div class="ttdeci">int ff_vk_mt_is_np_rgb(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00805">vulkan.c:805</a></div></div>
<div class="ttc" id="avulkan_8c_html_a31f8ed693347b5814c6c73e187546858"><div class="ttname"><a href="vulkan_8c.html#a31f8ed693347b5814c6c73e187546858">ff_vk_add_dep_exec_ctx</a></div><div class="ttdeci">int ff_vk_add_dep_exec_ctx(AVFilterContext *avctx, FFVkExecContext *e, AVBufferRef **deps, int nb_deps)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00561">vulkan.c:561</a></div></div>
<div class="ttc" id="avulkan_8c_html_a9df1f24367e1e031b770c1fa98ec9d10"><div class="ttname"><a href="vulkan_8c.html#a9df1f24367e1e031b770c1fa98ec9d10">free_exec_ctx</a></div><div class="ttdeci">static void free_exec_ctx(VulkanFilterContext *s, FFVkExecContext *e)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01330">vulkan.c:1330</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="aglslang_8cpp_html_af748687fc8fe194b6a01da85756e3d73"><div class="ttname"><a href="glslang_8cpp.html#af748687fc8fe194b6a01da85756e3d73">glslang_compile</a></div><div class="ttdeci">GLSlangResult * glslang_compile(const char *glsl, enum GLSlangStage stage)</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8cpp_source.html#l00152">glslang.cpp:152</a></div></div>
<div class="ttc" id="astruct_f_f_vk_buffer_html"><div class="ttname"><a href="struct_f_f_vk_buffer.html">FFVkBuffer</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00086">vulkan.h:86</a></div></div>
<div class="ttc" id="avulkan_8c_html_a0d7e96fbd2f2b3b26cfe10c72a336cf9"><div class="ttname"><a href="vulkan_8c.html#a0d7e96fbd2f2b3b26cfe10c72a336cf9">ff_vk_init_sampler</a></div><div class="ttdeci">VkSampler * ff_vk_init_sampler(AVFilterContext *avctx, int unnorm_coords, VkFilter filt)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00769">vulkan.c:769</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="astruct_s_p_i_r_v_shader_html_a7896977a2c3e4007278bd220eb44484f"><div class="ttname"><a href="struct_s_p_i_r_v_shader.html#a7896977a2c3e4007278bd220eb44484f">SPIRVShader::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00067">vulkan.h:67</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_af78abe107efa96a4d10e344cf1ec5de4"><div class="ttname"><a href="cbs__av1_8c.html#af78abe107efa96a4d10e344cf1ec5de4">fc</a></div><div class="ttdeci">#define fc(width, name, range_min, range_max)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00550">cbs_av1.c:550</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga3e7f4c92db85ccba0b2a16dd0069842a"><div class="ttname"><a href="group__lavu__buffer.html#ga3e7f4c92db85ccba0b2a16dd0069842a">av_buffer_create</a></div><div class="ttdeci">AVBufferRef * av_buffer_create(uint8_t *data, int size, void(*free)(void *opaque, uint8_t *data), void *opaque, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00029">buffer.c:29</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5acc582ddd3f60d4cd3ddffb48116fb154"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5acc582ddd3f60d4cd3ddffb48116fb154">AV_PIX_FMT_BGR24</a></div><div class="ttdeci">@ AV_PIX_FMT_BGR24</div><div class="ttdoc">packed RGB 8:8:8, 24bpp, BGRBGR...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00069">pixfmt.h:69</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a41c64e3682529dd5caca6f7d5d3c19c7">AV_PIX_FMT_BGRA</a></div><div class="ttdeci">@ AV_PIX_FMT_BGRA</div><div class="ttdoc">packed BGRA 8:8:8:8, 32bpp, BGRABGRA...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00095">pixfmt.h:95</a></div></div>
<div class="ttc" id="abprint_8c_html_aa215ba46a975d996e483cf0b9dcc85e5"><div class="ttname"><a href="bprint_8c.html#aa215ba46a975d996e483cf0b9dcc85e5">av_bprint_append_data</a></div><div class="ttdeci">void av_bprint_append_data(AVBPrint *buf, const char *data, unsigned size)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00158">bprint.c:158</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a141b2bccd933bfbde1cb040d18b813b9"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a141b2bccd933bfbde1cb040d18b813b9">FFVkExecContext::bound_pl</a></div><div class="ttdeci">VulkanPipeline * bound_pl</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00145">vulkan.h:145</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_afcd096caf534c3f76f1b2bf4c6ce94ce"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#afcd096caf534c3f76f1b2bf4c6ce94ce">FFVkExecContext::pool</a></div><div class="ttdeci">VkCommandPool pool</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00137">vulkan.h:137</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a1efd10db9d097b6d27054da46e06e133"><div class="ttname"><a href="struct_a_v_filter_link.html#a1efd10db9d097b6d27054da46e06e133">AVFilterLink::h</a></div><div class="ttdeci">int h</div><div class="ttdoc">agreed upon image height</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00482">avfilter.h:482</a></div></div>
<div class="ttc" id="astruct_vulkan_filter_context_html"><div class="ttname"><a href="struct_vulkan_filter_context.html">VulkanFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00159">vulkan.h:159</a></div></div>
<div class="ttc" id="astruct_image_view_ctx_html_a18ea26c8a347f5a3190ff985817f17c7"><div class="ttname"><a href="struct_image_view_ctx.html#a18ea26c8a347f5a3190ff985817f17c7">ImageViewCtx::view</a></div><div class="ttdeci">VkImageView view</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00825">vulkan.c:825</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0f77c711dcbc9a4acdea48b6b5bc50c7"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0f77c711dcbc9a4acdea48b6b5bc50c7">AV_PIX_FMT_VULKAN</a></div><div class="ttdeci">@ AV_PIX_FMT_VULKAN</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00356">pixfmt.h:356</a></div></div>
<div class="ttc" id="astructdescriptor__props_html_acb49941a84e9963853a31ad9ca5d7655"><div class="ttname"><a href="structdescriptor__props.html#acb49941a84e9963853a31ad9ca5d7655">descriptor_props::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01001">vulkan.c:1001</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="aformats_8h_html"><div class="ttname"><a href="formats_8h.html">formats.h</a></div></div>
<div class="ttc" id="avulkan_8c_html_a12d922a26bb56fefdaeb3731d7edab73"><div class="ttname"><a href="vulkan_8c.html#a12d922a26bb56fefdaeb3731d7edab73">CASE</a></div><div class="ttdeci">#define CASE(VAL)</div></div>
<div class="ttc" id="apixdesc_8c_html_a118df1d607abd7484f874b3d7ea8823a"><div class="ttname"><a href="pixdesc_8c.html#a118df1d607abd7484f874b3d7ea8823a">av_pix_fmt_count_planes</a></div><div class="ttdeci">int av_pix_fmt_count_planes(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02613">pixdesc.c:2613</a></div></div>
<div class="ttc" id="avulkan_8c_html_a6abb4f9cdba77d2d73648cda0b6e15db"><div class="ttname"><a href="vulkan_8c.html#a6abb4f9cdba77d2d73648cda0b6e15db">ff_vk_init_shader</a></div><div class="ttdeci">SPIRVShader * ff_vk_init_shader(AVFilterContext *avctx, VulkanPipeline *pl, const char *name, VkShaderStageFlags stage)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00888">vulkan.c:888</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_a6729167da6605e9d5586c4162a1977ec"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#a6729167da6605e9d5586c4162a1977ec">FFVkQueueCtx::queue</a></div><div class="ttdeci">VkQueue queue</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00123">vulkan.h:123</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a5571b2d72652c6a3f51d31724ba36c78"><div class="ttname"><a href="filter__design_8txt.html#a5571b2d72652c6a3f51d31724ba36c78">frames</a></div><div class="ttdeci">if it could not because there are no more frames</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00266">filter_design.txt:266</a></div></div>
<div class="ttc" id="avulkan_8c_html_adef85e831e424c0967507b661027efdd"><div class="ttname"><a href="vulkan_8c.html#adef85e831e424c0967507b661027efdd">ff_vk_create_pipeline</a></div><div class="ttdeci">VulkanPipeline * ff_vk_create_pipeline(AVFilterContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01276">vulkan.c:1276</a></div></div>
<div class="ttc" id="aglslang_8h_html_ab2fa14c2a4ab7b8f367e53ca7fecb3ffa41cabf0620690cfdbd900b8f0e8a2deb"><div class="ttname"><a href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ffa41cabf0620690cfdbd900b8f0e8a2deb">GLSLANG_COMPUTE</a></div><div class="ttdeci">@ GLSLANG_COMPUTE</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00042">glslang.h:42</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a8d211895d2797e074b017c7453af069d"><div class="ttname"><a href="struct_vulkan_pipeline.html#a8d211895d2797e074b017c7453af069d">VulkanPipeline::pool_size_desc_num</a></div><div class="ttdeci">int pool_size_desc_num</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00114">vulkan.h:114</a></div></div>
<div class="ttc" id="aglslang_8cpp_html_a8b077259e1c6478ecd3b2c55df7eff81"><div class="ttname"><a href="glslang_8cpp.html#a8b077259e1c6478ecd3b2c55df7eff81">glslang_uninit</a></div><div class="ttdeci">void glslang_uninit(void)</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8cpp_source.html#l00235">glslang.cpp:235</a></div></div>
<div class="ttc" id="aaf__dynaudnorm_8c_html_a098e07c895cd144e457198846bf64a8f"><div class="ttname"><a href="af__dynaudnorm_8c.html#a098e07c895cd144e457198846bf64a8f">cqueue_create</a></div><div class="ttdeci">static cqueue * cqueue_create(int size, int max_size)</div><div class="ttdef"><b>Definition:</b> <a href="af__dynaudnorm_8c_source.html#l00166">af_dynaudnorm.c:166</a></div></div>
<div class="ttc" id="astruct_g_l_slang_result_html_a2b02ce02075f78f012f0238b75913dd1"><div class="ttname"><a href="struct_g_l_slang_result.html#a2b02ce02075f78f012f0238b75913dd1">GLSlangResult::rval</a></div><div class="ttdeci">int rval</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00032">glslang.h:32</a></div></div>
<div class="ttc" id="avulkan_8c_html_a15e4e744de76504f064ea987e4681c4b"><div class="ttname"><a href="vulkan_8c.html#a15e4e744de76504f064ea987e4681c4b">ff_vk_add_exec_dep</a></div><div class="ttdeci">int ff_vk_add_exec_dep(AVFilterContext *avctx, FFVkExecContext *e, AVFrame *frame, VkPipelineStageFlagBits in_wait_dst_flag)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00464">vulkan.c:464</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_device_context_html"><div class="ttname"><a href="struct_a_v_h_w_device_context.html">AVHWDeviceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00061">hwcontext.h:61</a></div></div>
<div class="ttc" id="avulkan_8c_html_a6f2f6b74edac2598d023978eb9d69b0d"><div class="ttname"><a href="vulkan_8c.html#a6f2f6b74edac2598d023978eb9d69b0d">ff_vk_compile_shader</a></div><div class="ttdeci">int ff_vk_compile_shader(AVFilterContext *avctx, SPIRVShader *shd, const char *entrypoint)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00942">vulkan.c:942</a></div></div>
<div class="ttc" id="astruct_s_p_i_r_v_shader_html"><div class="ttname"><a href="struct_s_p_i_r_v_shader.html">SPIRVShader</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00066">vulkan.h:66</a></div></div>
<div class="ttc" id="astructdescriptor__props_html_a8f9c3310954b4916b28c7d5cce8bb697"><div class="ttname"><a href="structdescriptor__props.html#a8f9c3310954b4916b28c7d5cce8bb697">descriptor_props::struct_size</a></div><div class="ttdeci">size_t struct_size</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01000">vulkan.c:1000</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_ae61bbe1d8645a0c573085e29f1d0a58f"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#ae61bbe1d8645a0c573085e29f1d0a58f">AVHWFramesContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00229">hwcontext.h:229</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a343c68c6585d2e6b6e7de5715a8d6868"><div class="ttname"><a href="struct_vulkan_pipeline.html#a343c68c6585d2e6b6e7de5715a8d6868">VulkanPipeline::desc_template_info</a></div><div class="ttdeci">VkDescriptorUpdateTemplateCreateInfo * desc_template_info</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00117">vulkan.h:117</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a7d1231928faa6fa6d8d57d8942a2c565"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a7d1231928faa6fa6d8d57d8942a2c565">FFVkExecContext::bufs</a></div><div class="ttdeci">VkCommandBuffer * bufs</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00138">vulkan.h:138</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a8554a96a7c1fdab36bf382d517285d0e"><div class="ttname"><a href="struct_vulkan_pipeline.html#a8554a96a7c1fdab36bf382d517285d0e">VulkanPipeline::pipeline_layout</a></div><div class="ttdeci">VkPipelineLayout pipeline_layout</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00096">vulkan.h:96</a></div></div>
<div class="ttc" id="avulkan_8h_html_ab6f1c61dd4d32df3bb4850fd6c2454c4"><div class="ttname"><a href="vulkan_8h.html#ab6f1c61dd4d32df3bb4850fd6c2454c4">GLSLC</a></div><div class="ttdeci">#define GLSLC(N, S)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00038">vulkan.h:38</a></div></div>
<div class="ttc" id="avulkan_8c_html_a6a5422ce3a9ce2d874d9ee9337c98ec6"><div class="ttname"><a href="vulkan_8c.html#a6a5422ce3a9ce2d874d9ee9337c98ec6">ff_vk_filter_uninit</a></div><div class="ttdeci">void ff_vk_filter_uninit(AVFilterContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01415">vulkan.c:1415</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aformats_8c_html_a3ea436a8d465066eecdfb2ff513ff504"><div class="ttname"><a href="formats_8c.html#a3ea436a8d465066eecdfb2ff513ff504">ff_set_common_formats</a></div><div class="ttdeci">int ff_set_common_formats(AVFilterContext *ctx, AVFilterFormats *formats)</div><div class="ttdef"><b>Definition:</b> <a href="formats_8c_source.html#l00587">formats.c:587</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a9fe6533d9e25defd9e3e941f2d71282b"><div class="ttname"><a href="struct_vulkan_pipeline.html#a9fe6533d9e25defd9e3e941f2d71282b">VulkanPipeline::bind_point</a></div><div class="ttdeci">VkPipelineBindPoint bind_point</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00093">vulkan.h:93</a></div></div>
<div class="ttc" id="avulkan_8c_html_ac239d39cace7bf535d83100b20e94748"><div class="ttname"><a href="vulkan_8c.html#ac239d39cace7bf535d83100b20e94748">vulkan_filter_set_device</a></div><div class="ttdeci">static int vulkan_filter_set_device(AVFilterContext *avctx, AVBufferRef *device)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00604">vulkan.c:604</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga869fd8884d8d29a7a4910d879926d94a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga869fd8884d8d29a7a4910d879926d94a">av_fast_realloc</a></div><div class="ttdeci">void * av_fast_realloc(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00478">mem.c:478</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="avulkan_8c_html_a4c45e48efd94906237853884f732cd10"><div class="ttname"><a href="vulkan_8c.html#a4c45e48efd94906237853884f732cd10">ff_vk_filter_config_input</a></div><div class="ttdeci">int ff_vk_filter_config_input(AVFilterLink *inlink)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00635">vulkan.c:635</a></div></div>
<div class="ttc" id="avulkan_8c_html_a61f100015931450da7c2863d845fa2ae"><div class="ttname"><a href="vulkan_8c.html#a61f100015931450da7c2863d845fa2ae">ff_comp_identity_map</a></div><div class="ttdeci">const VkComponentMapping ff_comp_identity_map</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00044">vulkan.c:44</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_aabfa3233e3a1f25ecb128948cb91e7de"><div class="ttname"><a href="struct_vulkan_pipeline.html#aabfa3233e3a1f25ecb128948cb91e7de">VulkanPipeline::pool_size_desc</a></div><div class="ttdeci">VkDescriptorPoolSize * pool_size_desc</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00118">vulkan.h:118</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a2f3908bfadd569103b67ee4972ee7305"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a2f3908bfadd569103b67ee4972ee7305">AVHWFramesContext::device_ref</a></div><div class="ttdeci">AVBufferRef * device_ref</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00141">hwcontext.h:141</a></div></div>
<div class="ttc" id="astruct_g_l_slang_result_html_a728cee2cfcc03fea9fcd3c5ac45c5e07"><div class="ttname"><a href="struct_g_l_slang_result.html#a728cee2cfcc03fea9fcd3c5ac45c5e07">GLSlangResult::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00035">glslang.h:35</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="avulkan_8c_html_a0d8cba544b0d2d266e68ffa4a77a012d"><div class="ttname"><a href="vulkan_8c.html#a0d8cba544b0d2d266e68ffa4a77a012d">ff_vk_map_buffers</a></div><div class="ttdeci">int ff_vk_map_buffers(AVFilterContext *avctx, FFVkBuffer *buf, uint8_t *mem[], int nb_buffers, int invalidate)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00215">vulkan.c:215</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga46d6d32f6482a3e9c19203db5877105b"><div class="ttname"><a href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a></div><div class="ttdeci">AVFrame * av_frame_clone(const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00540">frame.c:540</a></div></div>
<div class="ttc" id="avulkan_8c_html_a9b96c9b1ddee079247a142ee3f240ec7"><div class="ttname"><a href="vulkan_8c.html#a9b96c9b1ddee079247a142ee3f240ec7">ff_vk_init_pipeline_layout</a></div><div class="ttdeci">int ff_vk_init_pipeline_layout(AVFilterContext *avctx, VulkanPipeline *pl)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01180">vulkan.c:1180</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a7331e302ea7bb48e0b605a069576e135"><div class="ttname"><a href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00039">demuxing_decoding.c:40</a></div></div>
<div class="ttc" id="avulkan_8c_html_a24a8fe4b47cc688eb9a4c3aac84efcfb"><div class="ttname"><a href="vulkan_8c.html#a24a8fe4b47cc688eb9a4c3aac84efcfb">ff_vk_add_descriptor_set</a></div><div class="ttdeci">int ff_vk_add_descriptor_set(AVFilterContext *avctx, VulkanPipeline *pl, SPIRVShader *shd, VulkanDescriptorSetBinding *desc, int num, int only_print_to_shader)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01020">vulkan.c:1020</a></div></div>
<div class="ttc" id="astruct_a_v_vk_frame_html"><div class="ttname"><a href="struct_a_v_vk_frame.html">AVVkFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__vulkan_8h_source.html#l00149">hwcontext_vulkan.h:149</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a41099aba85dbbaac54576698b468a972"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a41099aba85dbbaac54576698b468a972">FFVkExecContext::sem_sig_cnt</a></div><div class="ttdeci">int sem_sig_cnt</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00156">vulkan.h:156</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="avulkan_8c_html_a21c706efea1ada918d12b36640bfe60e"><div class="ttname"><a href="vulkan_8c.html#a21c706efea1ada918d12b36640bfe60e">ff_vk_ret2str</a></div><div class="ttdeci">const char * ff_vk_ret2str(VkResult res)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00052">vulkan.c:52</a></div></div>
<div class="ttc" id="avulkan_8c_html_a161b8a08a873b0501d6fdc6a10900d71"><div class="ttname"><a href="vulkan_8c.html#a161b8a08a873b0501d6fdc6a10900d71">ff_vk_filter_config_output_inplace</a></div><div class="ttdeci">int ff_vk_filter_config_output_inplace(AVFilterLink *outlink)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00675">vulkan.c:675</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a7ffbd399b88a48196e3cba416eec4dac"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a7ffbd399b88a48196e3cba416eec4dac">AV_PIX_FMT_RGBA</a></div><div class="ttdeci">@ AV_PIX_FMT_RGBA</div><div class="ttdoc">packed RGBA 8:8:8:8, 32bpp, RGBARGBA...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00093">pixfmt.h:93</a></div></div>
<div class="ttc" id="avulkan_8c_html_a31aba92136a217f24c10135a578c4e99"><div class="ttname"><a href="vulkan_8c.html#a31aba92136a217f24c10135a578c4e99">ff_vk_set_compute_shader_sizes</a></div><div class="ttdeci">void ff_vk_set_compute_shader_sizes(AVFilterContext *avctx, SPIRVShader *shd, int local_size[3])</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00909">vulkan.c:909</a></div></div>
<div class="ttc" id="avulkan_8c_html_a897b18c7efb42918344c95c9a84d4f09"><div class="ttname"><a href="vulkan_8c.html#a897b18c7efb42918344c95c9a84d4f09">ff_vk_bind_pipeline_exec</a></div><div class="ttdeci">void ff_vk_bind_pipeline_exec(AVFilterContext *avctx, FFVkExecContext *e, VulkanPipeline *pl)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01316">vulkan.c:1316</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_a743eecdf6ced716bd39acbbdb6a66d26"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#a743eecdf6ced716bd39acbbdb6a66d26">FFVkQueueCtx::buf_deps_alloc_size</a></div><div class="ttdeci">int buf_deps_alloc_size</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00128">vulkan.h:128</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a79f0cce2e796a9e51f75fea1695c9160"><div class="ttname"><a href="pixfmt_8h.html#a79f0cce2e796a9e51f75fea1695c9160">AV_PIX_FMT_RGBA64</a></div><div class="ttdeci">#define AV_PIX_FMT_RGBA64</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00389">pixfmt.h:389</a></div></div>
<div class="ttc" id="astructdescriptor__props_html_a6f0c1c9c9251f16c052f300d5f9fcb00"><div class="ttname"><a href="structdescriptor__props.html#a6f0c1c9c9251f16c052f300d5f9fcb00">descriptor_props::mem_quali</a></div><div class="ttdeci">int mem_quali</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01003">vulkan.c:1003</a></div></div>
<div class="ttc" id="aaacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00592">aacdec_template.c:592</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html">AVHWFramesContext</a></div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00124">hwcontext.h:124</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a5cb55f9cb5a9f49408bde181d00280eb"><div class="ttname"><a href="struct_vulkan_pipeline.html#a5cb55f9cb5a9f49408bde181d00280eb">VulkanPipeline::desc_pool</a></div><div class="ttdeci">VkDescriptorPool desc_pool</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00109">vulkan.h:109</a></div></div>
<div class="ttc" id="avulkan_8c_html_aec2532dfa47690480ce7a8ff3d9a13b2"><div class="ttname"><a href="vulkan_8c.html#aec2532dfa47690480ce7a8ff3d9a13b2">print_shader</a></div><div class="ttdeci">static void print_shader(AVFilterContext *avctx, SPIRVShader *shd, int prio)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00921">vulkan.c:921</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a971aad5ffa979644f6ea0ce456f823e8"><div class="ttname"><a href="struct_vulkan_pipeline.html#a971aad5ffa979644f6ea0ce456f823e8">VulkanPipeline::desc_layout</a></div><div class="ttdeci">VkDescriptorSetLayout * desc_layout</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00108">vulkan.h:108</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html"><div class="ttname"><a href="struct_f_f_vk_exec_context.html">FFVkExecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00136">vulkan.h:136</a></div></div>
<div class="ttc" id="avulkan_8c_html_a7b4230dc2458cb6ebac08f225a25d169"><div class="ttname"><a href="vulkan_8c.html#a7b4230dc2458cb6ebac08f225a25d169">ff_vk_get_exec_buf</a></div><div class="ttdeci">VkCommandBuffer ff_vk_get_exec_buf(AVFilterContext *avctx, FFVkExecContext *e)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00458">vulkan.c:458</a></div></div>
<div class="ttc" id="astruct_image_view_ctx_html"><div class="ttname"><a href="struct_image_view_ctx.html">ImageViewCtx</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00824">vulkan.c:824</a></div></div>
<div class="ttc" id="astructdescriptor__props_html_a576a8c52dae72f498a3277758a510d01"><div class="ttname"><a href="structdescriptor__props.html#a576a8c52dae72f498a3277758a510d01">descriptor_props::dim_needed</a></div><div class="ttdeci">int dim_needed</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01004">vulkan.c:1004</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a258e7e59a7f956604b743c14032906b0">AV_PIX_FMT_BGR0</a></div><div class="ttdeci">@ AV_PIX_FMT_BGR0</div><div class="ttdoc">packed BGR 8:8:8, 32bpp, BGRXBGRX... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00240">pixfmt.h:240</a></div></div>
<div class="ttc" id="avulkan_8c_html_a9ace42ba96212f78fda5e1547beb1074"><div class="ttname"><a href="vulkan_8c.html#a9ace42ba96212f78fda5e1547beb1074">ImageViewCtx</a></div><div class="ttdeci">struct ImageViewCtx ImageViewCtx</div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a5110926011394bc4f6066145314a5330"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a5110926011394bc4f6066145314a5330">AV_PIX_FMT_ABGR</a></div><div class="ttdeci">@ AV_PIX_FMT_ABGR</div><div class="ttdoc">packed ABGR 8:8:8:8, 32bpp, ABGRABGR...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00094">pixfmt.h:94</a></div></div>
<div class="ttc" id="avulkan_8h_html_aceefcd542ea253d1bbec9b89004ae1ad"><div class="ttname"><a href="vulkan_8h.html#aceefcd542ea253d1bbec9b89004ae1ad">GLSLA</a></div><div class="ttdeci">#define GLSLA(...)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00039">vulkan.h:39</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a369d48bb8e78601adc8ce4892509dc02"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a369d48bb8e78601adc8ce4892509dc02">FFVkExecContext::sem_wait</a></div><div class="ttdeci">VkSemaphore * sem_wait</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00147">vulkan.h:147</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_a39de7029a33bc3271ae437de0a38c343"><div class="ttname"><a href="llviddspenc_8c.html#a39de7029a33bc3271ae437de0a38c343">planes</a></div><div class="ttdeci">static const struct @0 planes[]</div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="afloatimg__cmp_8c_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="floatimg__cmp_8c.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="floatimg__cmp_8c_source.html#l00060">floatimg_cmp.c:60</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_aeb6e3ab0613edd4a30c0c4b560db7693"><div class="ttname"><a href="struct_vulkan_pipeline.html#aeb6e3ab0613edd4a30c0c4b560db7693">VulkanPipeline::shaders_num</a></div><div class="ttdeci">int shaders_num</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00101">vulkan.h:101</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a107eadfcfe8c9fc751289eeb7744a6d3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a107eadfcfe8c9fc751289eeb7744a6d3">AV_PIX_FMT_RGB24</a></div><div class="ttdeci">@ AV_PIX_FMT_RGB24</div><div class="ttdoc">packed RGB 8:8:8, 24bpp, RGBRGB...</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00068">pixfmt.h:68</a></div></div>
<div class="ttc" id="avulkan_8c_html_a50e96517ea9dc843086601b8559b8133"><div class="ttname"><a href="vulkan_8c.html#a50e96517ea9dc843086601b8559b8133">ff_vk_update_push_exec</a></div><div class="ttdeci">void ff_vk_update_push_exec(AVFilterContext *avctx, FFVkExecContext *e, VkShaderStageFlagBits stage, int offset, size_t size, void *src)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01171">vulkan.c:1171</a></div></div>
<div class="ttc" id="avulkan_8h_html"><div class="ttname"><a href="vulkan_8h.html">vulkan.h</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gac4f6e109c242c81aeee21868d3f35e12"><div class="ttname"><a href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a></div><div class="ttdeci">#define av_err2str(errnum)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00119">error.h:119</a></div></div>
<div class="ttc" id="atests_2tree_8c_html_a83a6fb2986b6c7b677f1e00b513e7a8e"><div class="ttname"><a href="tests_2tree_8c.html#a83a6fb2986b6c7b677f1e00b513e7a8e">print</a></div><div class="ttdeci">static void print(AVTreeNode *t, int depth)</div><div class="ttdef"><b>Definition:</b> <a href="tests_2tree_8c_source.html#l00044">tree.c:44</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="astruct_s_p_i_r_v_shader_html_a1436657f7b578af2d1e8007e9d7b6409"><div class="ttname"><a href="struct_s_p_i_r_v_shader.html#a1436657f7b578af2d1e8007e9d7b6409">SPIRVShader::local_size</a></div><div class="ttdeci">int local_size[3]</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00069">vulkan.h:69</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a8aa3ddf224cba014fb9eac404498046a"><div class="ttname"><a href="pixfmt_8h.html#a8aa3ddf224cba014fb9eac404498046a">AV_PIX_FMT_RGB48</a></div><div class="ttdeci">#define AV_PIX_FMT_RGB48</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00385">pixfmt.h:385</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_a1ce4de21d92ebc30bbd4fca061b04844"><div class="ttname"><a href="struct_vulkan_pipeline.html#a1ce4de21d92ebc30bbd4fca061b04844">VulkanPipeline::push_consts</a></div><div class="ttdeci">VkPushConstantRange * push_consts</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00104">vulkan.h:104</a></div></div>
<div class="ttc" id="aaf__earwax_8c_html_af168ba1108ec9a2931e0f8335202c228"><div class="ttname"><a href="af__earwax_8c.html#af168ba1108ec9a2931e0f8335202c228">filt</a></div><div class="ttdeci">static const int8_t filt[NUMTAPS]</div><div class="ttdef"><b>Definition:</b> <a href="af__earwax_8c_source.html#l00039">af_earwax.c:39</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html"><div class="ttname"><a href="struct_a_v_buffer_ref.html">AVBufferRef</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00081">buffer.h:81</a></div></div>
<div class="ttc" id="avf__colormatrix_8c_html_ad116363516b0293a59b40e02af04a018"><div class="ttname"><a href="vf__colormatrix_8c.html#ad116363516b0293a59b40e02af04a018">img</a></div><div class="ttdeci">#define img</div><div class="ttdef"><b>Definition:</b> <a href="vf__colormatrix_8c_source.html#l00116">vf_colormatrix.c:116</a></div></div>
<div class="ttc" id="astruct_f_f_vk_buffer_html_a9b96446253585acb32bec45090614ad8"><div class="ttname"><a href="struct_f_f_vk_buffer.html#a9b96446253585acb32bec45090614ad8">FFVkBuffer::flags</a></div><div class="ttdeci">VkMemoryPropertyFlagBits flags</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00089">vulkan.h:89</a></div></div>
<div class="ttc" id="astruct_g_l_slang_result_html"><div class="ttname"><a href="struct_g_l_slang_result.html">GLSlangResult</a></div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00031">glslang.h:31</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga9c520e483ba8648495620ffdb4c491f2"><div class="ttname"><a href="group__lavu__error.html#ga9c520e483ba8648495620ffdb4c491f2">AVERROR_EXTERNAL</a></div><div class="ttdeci">#define AVERROR_EXTERNAL</div><div class="ttdoc">Generic error in an external library.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00057">error.h:57</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astructline_html"><div class="ttname"><a href="structline.html">line</a></div><div class="ttdef"><b>Definition:</b> <a href="graph2dot_8c_source.html#l00048">graph2dot.c:48</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5ab9fcc01ba1689d75e4bc2080a347e1d0"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5ab9fcc01ba1689d75e4bc2080a347e1d0">AV_PIX_FMT_RGB0</a></div><div class="ttdeci">@ AV_PIX_FMT_RGB0</div><div class="ttdoc">packed RGB 8:8:8, 32bpp, RGBXRGBX... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00238">pixfmt.h:238</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_a4c7a521b8f1a0769c09bfa4a1fca7dab"><div class="ttname"><a href="libkvazaar_8c.html#a4c7a521b8f1a0769c09bfa4a1fca7dab">version</a></div><div class="ttdeci">version</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00317">libkvazaar.c:317</a></div></div>
<div class="ttc" id="avulkan_8c_html_ad6c4873e24f5f312c22c52230680c87c"><div class="ttname"><a href="vulkan_8c.html#ad6c4873e24f5f312c22c52230680c87c">ff_vk_filter_init</a></div><div class="ttdeci">int ff_vk_filter_init(AVFilterContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00756">vulkan.c:756</a></div></div>
<div class="ttc" id="ahwcontext__vulkan_8c_html_a8ec94342a3a8351bd61eacacd1dedf4b"><div class="ttname"><a href="hwcontext__vulkan_8c.html#a8ec94342a3a8351bd61eacacd1dedf4b">create_exec_ctx</a></div><div class="ttdeci">static int create_exec_ctx(AVHWFramesContext *hwfc, VulkanExecCtx *cmd, int queue_family_index, int num_queues)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__vulkan_8c_source.html#l00736">hwcontext_vulkan.c:736</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html"><div class="ttname"><a href="struct_vulkan_pipeline.html">VulkanPipeline</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00092">vulkan.h:92</a></div></div>
<div class="ttc" id="avulkan_8c_html_a7f7663204c25cf00fb9af77230b90352"><div class="ttname"><a href="vulkan_8c.html#a7f7663204c25cf00fb9af77230b90352">ff_vk_update_descriptor_set</a></div><div class="ttdeci">void ff_vk_update_descriptor_set(AVFilterContext *avctx, VulkanPipeline *pl, int set_id)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01160">vulkan.c:1160</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a5ffa8298f777146641927359d8c7173d"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a5ffa8298f777146641927359d8c7173d">FFVkExecContext::sem_wait_alloc</a></div><div class="ttdeci">int sem_wait_alloc</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00148">vulkan.h:148</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_adff737a5202749315a93c4756223593d"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#adff737a5202749315a93c4756223593d">FFVkExecContext::sem_wait_dst_alloc</a></div><div class="ttdeci">int sem_wait_dst_alloc</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00152">vulkan.h:152</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a669858250c93520fd944ba5d6eb1884d"><div class="ttname"><a href="filter__design_8txt.html#a669858250c93520fd944ba5d6eb1884d">layout</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel layout</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00018">filter_design.txt:18</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astructdescriptor__props_html"><div class="ttname"><a href="structdescriptor__props.html">descriptor_props</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00999">vulkan.c:999</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a41fb0f7b36bcafc2bbab937fe3c34a51"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a41fb0f7b36bcafc2bbab937fe3c34a51">FFVkExecContext::queues</a></div><div class="ttdeci">FFVkQueueCtx * queues</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00139">vulkan.h:139</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_acf038da5c9aa4942345a86ce708d0d32"><div class="ttname"><a href="struct_vulkan_pipeline.html#acf038da5c9aa4942345a86ce708d0d32">VulkanPipeline::descriptor_sets_num</a></div><div class="ttdeci">int descriptor_sets_num</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00113">vulkan.h:113</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_aa353e33c960f3a24b85a7ef435f52c3a"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#aa353e33c960f3a24b85a7ef435f52c3a">FFVkExecContext::sem_sig</a></div><div class="ttdeci">VkSemaphore * sem_sig</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00154">vulkan.h:154</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_a9c350c47f26a0e16fa38af38ae33567b"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#a9c350c47f26a0e16fa38af38ae33567b">FFVkQueueCtx::nb_buf_deps</a></div><div class="ttdeci">int nb_buf_deps</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00127">vulkan.h:127</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a4ed74bf972be6e87bd6281f29d35bef2"><div class="ttname"><a href="struct_a_v_filter_link.html#a4ed74bf972be6e87bd6281f29d35bef2">AVFilterLink::src</a></div><div class="ttdeci">AVFilterContext * src</div><div class="ttdoc">source filter</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00472">avfilter.h:472</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_af8f4535540f067c62fd2aa0805acbfb0"><div class="ttname"><a href="struct_vulkan_pipeline.html#af8f4535540f067c62fd2aa0805acbfb0">VulkanPipeline::push_consts_num</a></div><div class="ttdeci">int push_consts_num</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00105">vulkan.h:105</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="astruct_a_v_filter_formats_html"><div class="ttname"><a href="struct_a_v_filter_formats.html">AVFilterFormats</a></div><div class="ttdef"><b>Definition:</b> <a href="formats_8h_source.html#l00065">formats.h:65</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a5efc23c57a335a655c027e2039273049"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a5efc23c57a335a655c027e2039273049">FFVkExecContext::sem_sig_alloc</a></div><div class="ttdeci">int sem_sig_alloc</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00155">vulkan.h:155</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ab0749a06130381634569b1cb479cab79"><div class="ttname"><a href="pixfmt_8h.html#ab0749a06130381634569b1cb479cab79">AV_PIX_FMT_BGR565</a></div><div class="ttdeci">#define AV_PIX_FMT_BGR565</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00391">pixfmt.h:391</a></div></div>
<div class="ttc" id="astruct_s_p_i_r_v_shader_html_a6512e914cfa7534bb6a3f27005f0e1b2"><div class="ttname"><a href="struct_s_p_i_r_v_shader.html#a6512e914cfa7534bb6a3f27005f0e1b2">SPIRVShader::shader</a></div><div class="ttdeci">VkPipelineShaderStageCreateInfo shader</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00070">vulkan.h:70</a></div></div>
<div class="ttc" id="apixfmt_8h_html_ac006ecccd336ce7280ef0155568ebfb6"><div class="ttname"><a href="pixfmt_8h.html#ac006ecccd336ce7280ef0155568ebfb6">AV_PIX_FMT_RGB565</a></div><div class="ttdeci">#define AV_PIX_FMT_RGB565</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00386">pixfmt.h:386</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_adec291a752624614e04d9476d17c0051"><div class="ttname"><a href="struct_vulkan_pipeline.html#adec291a752624614e04d9476d17c0051">VulkanPipeline::desc_set</a></div><div class="ttdeci">VkDescriptorSet * desc_set</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00110">vulkan.h:110</a></div></div>
<div class="ttc" id="aglslang_8h_html_ab2fa14c2a4ab7b8f367e53ca7fecb3ffa67ddd6e49f0cffbf01406801d84e1304"><div class="ttname"><a href="glslang_8h.html#ab2fa14c2a4ab7b8f367e53ca7fecb3ffa67ddd6e49f0cffbf01406801d84e1304">GLSLANG_VERTEX</a></div><div class="ttdeci">@ GLSLANG_VERTEX</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00040">glslang.h:40</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html">FFVkQueueCtx</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00121">vulkan.h:121</a></div></div>
<div class="ttc" id="avulkan_8c_html_a44ef81a3b663845f5f88ecf1753431db"><div class="ttname"><a href="vulkan_8c.html#a44ef81a3b663845f5f88ecf1753431db">FN_CREATING</a></div><div class="ttdeci">#define FN_CREATING(ctx, type, shortname, array, num)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00025">vulkan.c:25</a></div></div>
<div class="ttc" id="aglslang_8h_html"><div class="ttname"><a href="glslang_8h.html">glslang.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="akmsgrab_8c_html_ab482f514ab017799e2ac45d666537564"><div class="ttname"><a href="kmsgrab_8c.html#ab482f514ab017799e2ac45d666537564">pixfmt</a></div><div class="ttdeci">enum AVPixelFormat pixfmt</div><div class="ttdef"><b>Definition:</b> <a href="kmsgrab_8c_source.html#l00071">kmsgrab.c:367</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a698dbf894ce405d3775c6cf440debf65"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a698dbf894ce405d3775c6cf440debf65">AV_PIX_FMT_0BGR</a></div><div class="ttdeci">@ AV_PIX_FMT_0BGR</div><div class="ttdoc">packed BGR 8:8:8, 32bpp, XBGRXBGR... X=unused/undefined</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00239">pixfmt.h:239</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="avulkan_8c_html_adb48fb11bc3e2df0e99e62c375b89267"><div class="ttname"><a href="vulkan_8c.html#adb48fb11bc3e2df0e99e62c375b89267">destroy_imageview</a></div><div class="ttdeci">static void destroy_imageview(void *opaque, uint8_t *data)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00828">vulkan.c:828</a></div></div>
<div class="ttc" id="avulkan_8c_html_a91407de17023c4e4c7c0bef190cbc7a5"><div class="ttname"><a href="vulkan_8c.html#a91407de17023c4e4c7c0bef190cbc7a5">ff_vk_start_exec_recording</a></div><div class="ttdeci">int ff_vk_start_exec_recording(AVFilterContext *avctx, FFVkExecContext *e)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00417">vulkan.c:417</a></div></div>
<div class="ttc" id="astructdescriptor__props_html_a2f90e7feb63c16ef74f9607abc0f3c10"><div class="ttname"><a href="structdescriptor__props.html#a2f90e7feb63c16ef74f9607abc0f3c10">descriptor_props::buf_content</a></div><div class="ttdeci">int buf_content</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01005">vulkan.c:1005</a></div></div>
<div class="ttc" id="avulkan_8c_html_a1f745da476561c9a806960987cb5a32b"><div class="ttname"><a href="vulkan_8c.html#a1f745da476561c9a806960987cb5a32b">ff_vk_create_buf</a></div><div class="ttdeci">int ff_vk_create_buf(AVFilterContext *avctx, FFVkBuffer *buf, size_t size, VkBufferUsageFlags usage, VkMemoryPropertyFlagBits flags)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00150">vulkan.c:150</a></div></div>
<div class="ttc" id="abprint_8c_html_a123a83f3ad2f3c370ed18592d0299fd6"><div class="ttname"><a href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a></div><div class="ttdeci">void av_bprintf(AVBPrint *buf, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00094">bprint.c:94</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_ad09f1dbea93620d45d178e92bebad315"><div class="ttname"><a href="struct_vulkan_pipeline.html#ad09f1dbea93620d45d178e92bebad315">VulkanPipeline::desc_template</a></div><div class="ttdeci">VkDescriptorUpdateTemplate * desc_template</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00111">vulkan.h:111</a></div></div>
<div class="ttc" id="astruct_f_f_vk_buffer_html_a2bad6a3b8896bfbeb4026cafab2d1546"><div class="ttname"><a href="struct_f_f_vk_buffer.html#a2bad6a3b8896bfbeb4026cafab2d1546">FFVkBuffer::buf</a></div><div class="ttdeci">VkBuffer buf</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00087">vulkan.h:87</a></div></div>
<div class="ttc" id="avulkan_8c_html_ab222691b335dd7c71035aa77a2a093cd"><div class="ttname"><a href="vulkan_8c.html#ab222691b335dd7c71035aa77a2a093cd">ff_vk_submit_exec_queue</a></div><div class="ttdeci">int ff_vk_submit_exec_queue(AVFilterContext *avctx, FFVkExecContext *e)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00522">vulkan.c:522</a></div></div>
<div class="ttc" id="avulkan_8c_html_ad82a824e0beff2914bdabcdfdc4b5698"><div class="ttname"><a href="vulkan_8c.html#ad82a824e0beff2914bdabcdfdc4b5698">vulkan_filter_set_frames</a></div><div class="ttdeci">static int vulkan_filter_set_frames(AVFilterContext *avctx, AVBufferRef *frames)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00621">vulkan.c:621</a></div></div>
<div class="ttc" id="avulkan_8c_html_a250d983242a6c1f31a2bde307088b873"><div class="ttname"><a href="vulkan_8c.html#a250d983242a6c1f31a2bde307088b873">ff_vk_shader_rep_fmt</a></div><div class="ttdeci">const char * ff_vk_shader_rep_fmt(enum AVPixelFormat pixfmt)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00817">vulkan.c:817</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_ab9f8641d392e9aecc5173198dffdb68f"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#ab9f8641d392e9aecc5173198dffdb68f">FFVkQueueCtx::nb_frame_deps</a></div><div class="ttdeci">int nb_frame_deps</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00132">vulkan.h:132</a></div></div>
<div class="ttc" id="astruct_g_l_slang_result_html_a99e33855e76c732f74bae04ad8a74cad"><div class="ttname"><a href="struct_g_l_slang_result.html#a99e33855e76c732f74bae04ad8a74cad">GLSlangResult::error_msg</a></div><div class="ttdeci">char * error_msg</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8h_source.html#l00033">glslang.h:33</a></div></div>
<div class="ttc" id="avulkan_8c_html_aabfe71abb7d35f80adda795f4f27632f"><div class="ttname"><a href="vulkan_8c.html#aabfe71abb7d35f80adda795f4f27632f">vk_alloc_mem</a></div><div class="ttdeci">static int vk_alloc_mem(AVFilterContext *avctx, VkMemoryRequirements *req, VkMemoryPropertyFlagBits req_flags, void *alloc_extension, VkMemoryPropertyFlagBits *mem_flags, VkDeviceMemory *mem)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00089">vulkan.c:89</a></div></div>
<div class="ttc" id="avulkan_8c_html_aa0a830f2090c6505f0fda1f16d21e385"><div class="ttname"><a href="vulkan_8c.html#aa0a830f2090c6505f0fda1f16d21e385">ff_vk_free_buf</a></div><div class="ttdeci">void ff_vk_free_buf(AVFilterContext *avctx, FFVkBuffer *buf)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00306">vulkan.c:306</a></div></div>
<div class="ttc" id="avulkan_8c_html_a00e2f72a33482e81ff7741ae598f0559"><div class="ttname"><a href="vulkan_8c.html#a00e2f72a33482e81ff7741ae598f0559">ff_vk_unmap_buffers</a></div><div class="ttdeci">int ff_vk_unmap_buffers(AVFilterContext *avctx, FFVkBuffer *buf, int nb_buffers, int flush)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00264">vulkan.c:264</a></div></div>
<div class="ttc" id="avulkan_8h_html_a8ea2fb70286c613ec0790473ec6c4d6e"><div class="ttname"><a href="vulkan_8h.html#a8ea2fb70286c613ec0790473ec6c4d6e">GLSLF</a></div><div class="ttdeci">#define GLSLF(N, S,...)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00040">vulkan.h:40</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00093">buffer.c:93</a></div></div>
<div class="ttc" id="alibsvtav1_8c_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="libsvtav1_8c_source.html#l00079">libsvtav1.c:79</a></div></div>
<div class="ttc" id="avulkan_8c_html_a72f44d60d2ce5a34abc29cfe177c924b"><div class="ttname"><a href="vulkan_8c.html#a72f44d60d2ce5a34abc29cfe177c924b">ff_vk_create_exec_ctx</a></div><div class="ttdeci">int ff_vk_create_exec_ctx(AVFilterContext *avctx, FFVkExecContext **ctx)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00339">vulkan.c:339</a></div></div>
<div class="ttc" id="aglslang_8cpp_html_aaefad04526f9add8246c63110dfb886a"><div class="ttname"><a href="glslang_8cpp.html#aaefad04526f9add8246c63110dfb886a">glslang_init</a></div><div class="ttdeci">int glslang_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="glslang_8cpp_source.html#l00223">glslang.cpp:223</a></div></div>
<div class="ttc" id="ahwcontext__vdpau_8c_html_a2996cc16b36e13c9010705bad768e866"><div class="ttname"><a href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a></div><div class="ttdeci">const VDPAUPixFmtMap * map</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__vdpau_8c_source.html#l00071">hwcontext_vdpau.c:71</a></div></div>
<div class="ttc" id="avulkan_8c_html_a33e0deb5a142debdb9df30428735d4bf"><div class="ttname"><a href="vulkan_8c.html#a33e0deb5a142debdb9df30428735d4bf">ff_vk_add_push_constant</a></div><div class="ttdeci">int ff_vk_add_push_constant(AVFilterContext *avctx, VulkanPipeline *pl, int offset, int size, VkShaderStageFlagBits stage)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00318">vulkan.c:318</a></div></div>
<div class="ttc" id="astruct_vulkan_descriptor_set_binding_html"><div class="ttname"><a href="struct_vulkan_descriptor_set_binding.html">VulkanDescriptorSetBinding</a></div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00073">vulkan.h:73</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a7b75b04b9c8b71faf7ab4271327949f8"><div class="ttname"><a href="struct_a_v_filter_link.html#a7b75b04b9c8b71faf7ab4271327949f8">AVFilterLink::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00616">avfilter.h:616</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_aefd7a302718a85c272913ff41e3cf3c1"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#aefd7a302718a85c272913ff41e3cf3c1">FFVkQueueCtx::buf_deps</a></div><div class="ttdeci">AVBufferRef ** buf_deps</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00126">vulkan.h:126</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="avulkan_8c_html_a2524a96b984b8c06de93ba10d26e9dec"><div class="ttname"><a href="vulkan_8c.html#a2524a96b984b8c06de93ba10d26e9dec">ff_vk_discard_exec_deps</a></div><div class="ttdeci">void ff_vk_discard_exec_deps(AVFilterContext *avctx, FFVkExecContext *e)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00400">vulkan.c:400</a></div></div>
<div class="ttc" id="astruct_s_p_i_r_v_shader_html_a9531c965c36eb8c8304e1b6fdfa1df20"><div class="ttname"><a href="struct_s_p_i_r_v_shader.html#a9531c965c36eb8c8304e1b6fdfa1df20">SPIRVShader::src</a></div><div class="ttdeci">AVBPrint src</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00068">vulkan.h:68</a></div></div>
<div class="ttc" id="astruct_f_f_vk_buffer_html_aeeb3e67e863a5409ef2ea169d479bf00"><div class="ttname"><a href="struct_f_f_vk_buffer.html#aeeb3e67e863a5409ef2ea169d479bf00">FFVkBuffer::mem</a></div><div class="ttdeci">VkDeviceMemory mem</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00088">vulkan.h:88</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="avulkan_8c_html_a39ec4e372a508a17534ece0b972a1703"><div class="ttname"><a href="vulkan_8c.html#a39ec4e372a508a17534ece0b972a1703">ff_vk_init_compute_pipeline</a></div><div class="ttdeci">int ff_vk_init_compute_pipeline(AVFilterContext *avctx, VulkanPipeline *pl)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l01281">vulkan.c:1281</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_addd946fbe5af506a2b19f9ad7cb97c35"><div class="ttname"><a href="struct_a_v_filter_context.html#addd946fbe5af506a2b19f9ad7cb97c35">AVFilterContext::hw_device_ctx</a></div><div class="ttdeci">AVBufferRef * hw_device_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00397">avfilter.h:397</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_ae00e61b5444e0c853aef0008c560e3f8"><div class="ttname"><a href="struct_vulkan_pipeline.html#ae00e61b5444e0c853aef0008c560e3f8">VulkanPipeline::desc_layout_num</a></div><div class="ttdeci">int desc_layout_num</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00112">vulkan.h:112</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_frames_context_html_a663a9aceca97aa7b2426c9aba6543e4a"><div class="ttname"><a href="struct_a_v_h_w_frames_context.html#a663a9aceca97aa7b2426c9aba6543e4a">AVHWFramesContext::sw_format</a></div><div class="ttdeci">enum AVPixelFormat sw_format</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8h_source.html#l00199">hwcontext.h:222</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_a6837bf4b3d70c0a2bd3122f9daadc0d4"><div class="ttname"><a href="struct_a_v_filter_context.html#a6837bf4b3d70c0a2bd3122f9daadc0d4">AVFilterContext::inputs</a></div><div class="ttdeci">AVFilterLink ** inputs</div><div class="ttdoc">array of pointers to input links</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00349">avfilter.h:349</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_abd4773619578c90a84d1bb41e5cbf270"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#abd4773619578c90a84d1bb41e5cbf270">FFVkExecContext::sem_wait_dst</a></div><div class="ttdeci">VkPipelineStageFlagBits * sem_wait_dst</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00151">vulkan.h:151</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="avulkan_8c_html_adfc9367c08ae8ecdce5298c4f1308dc0"><div class="ttname"><a href="vulkan_8c.html#adfc9367c08ae8ecdce5298c4f1308dc0">ff_vk_create_imageview</a></div><div class="ttdeci">int ff_vk_create_imageview(AVFilterContext *avctx, FFVkExecContext *e, VkImageView *v, VkImage img, VkFormat fmt, const VkComponentMapping map)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00836">vulkan.c:836</a></div></div>
<div class="ttc" id="astruct_a_v_filter_link_html_a08e3e25929bb29d5f6ef768343ff7f57"><div class="ttname"><a href="struct_a_v_filter_link.html#a08e3e25929bb29d5f6ef768343ff7f57">AVFilterLink::w</a></div><div class="ttdeci">int w</div><div class="ttdoc">agreed upon image width</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00481">avfilter.h:481</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_afeaadbc3d7b42121df4d7853afcee8a1"><div class="ttname"><a href="struct_vulkan_pipeline.html#afeaadbc3d7b42121df4d7853afcee8a1">VulkanPipeline::shaders</a></div><div class="ttdeci">SPIRVShader ** shaders</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00100">vulkan.h:100</a></div></div>
<div class="ttc" id="avulkan_8c_html_a5539448a017f968f4b1e9fe427c68350"><div class="ttname"><a href="vulkan_8c.html#a5539448a017f968f4b1e9fe427c68350">ff_vk_filter_config_output</a></div><div class="ttdeci">int ff_vk_filter_config_output(AVFilterLink *outlink)</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8c_source.html#l00705">vulkan.c:705</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html_ab0858b4059e67889c7f27c5cc9e258eb"><div class="ttname"><a href="struct_a_v_filter_context.html#ab0858b4059e67889c7f27c5cc9e258eb">AVFilterContext::priv</a></div><div class="ttdeci">void * priv</div><div class="ttdoc">private data for use by the filter</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00356">avfilter.h:356</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_a7c3b4fe4e3ea9391be7503858adedec1"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#a7c3b4fe4e3ea9391be7503858adedec1">FFVkQueueCtx::fence</a></div><div class="ttdeci">VkFence fence</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00122">vulkan.h:122</a></div></div>
<div class="ttc" id="astruct_f_f_vk_exec_context_html_a40313a8e5973fa16727a73f276c9eb60"><div class="ttname"><a href="struct_f_f_vk_exec_context.html#a40313a8e5973fa16727a73f276c9eb60">FFVkExecContext::sem_wait_cnt</a></div><div class="ttdeci">int sem_wait_cnt</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00149">vulkan.h:149</a></div></div>
<div class="ttc" id="astruct_vulkan_pipeline_html_ac191be8812aabc6fe92dfc6b376e1de4"><div class="ttname"><a href="struct_vulkan_pipeline.html#ac191be8812aabc6fe92dfc6b376e1de4">VulkanPipeline::pipeline</a></div><div class="ttdeci">VkPipeline pipeline</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00097">vulkan.h:97</a></div></div>
<div class="ttc" id="astruct_f_f_vk_queue_ctx_html_a4fce40e235b572999ade3e04b840bdaa"><div class="ttname"><a href="struct_f_f_vk_queue_ctx.html#a4fce40e235b572999ade3e04b840bdaa">FFVkQueueCtx::frame_deps</a></div><div class="ttdeci">AVFrame ** frame_deps</div><div class="ttdef"><b>Definition:</b> <a href="vulkan_8h_source.html#l00131">vulkan.h:131</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
