<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/pthread_frame.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">pthread_frame.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="pthread__frame_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;stdatomic.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwconfig_8h.html">hwconfig.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pthread__internal_8h.html">pthread_internal.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">thread.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libswscale_2version_8h.html">version.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="buffer_8h.html">libavutil/buffer.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cpu_8h.html">libavutil/cpu.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="frame_8h.html">libavutil/frame.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">libavutil/log.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem_8h.html">libavutil/mem.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">libavutil/thread.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">   52</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>,</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badcdf7ce3063cf38961937007e27abcde">   57</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badcdf7ce3063cf38961937007e27abcde">STATE_GET_BUFFER</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba35dec6732dff5101176a587be7db7161">STATE_GET_FORMAT</a>,</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6">   64</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6">STATE_SETUP_FINISHED</a>,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;};</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html">   70</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_per_thread_context.html">PerThreadContext</a> {</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">   71</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a1105537905e4cf066ed3744d17b3da54">   73</a></span>&#160;    <a class="code" href="structpthread__t.html">pthread_t</a>      <a class="code" href="struct_per_thread_context.html#a1105537905e4cf066ed3744d17b3da54">thread</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">   74</a></span>&#160;    <span class="keywordtype">int</span>            <a class="code" href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">thread_init</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">   75</a></span>&#160;    <a class="code" href="structpthread__cond__t.html">pthread_cond_t</a> <a class="code" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">input_cond</a>;      </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">   76</a></span>&#160;    <a class="code" href="structpthread__cond__t.html">pthread_cond_t</a> <a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>;   </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">   77</a></span>&#160;    <a class="code" href="structpthread__cond__t.html">pthread_cond_t</a> <a class="code" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">output_cond</a>;     </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">   79</a></span>&#160;    <a class="code" href="os2threads_8h.html#ac171f4e937b5a585efb4a7f99ee2234a">pthread_mutex_t</a> <a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>;          </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">   80</a></span>&#160;    <a class="code" href="os2threads_8h.html#ac171f4e937b5a585efb4a7f99ee2234a">pthread_mutex_t</a> <a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">   82</a></span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>;          </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">   84</a></span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a>       <a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>;           </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">   86</a></span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>;                 </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">   87</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a>;              </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">   88</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a>;                 </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">   90</a></span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> <a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">   96</a></span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> **<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">   97</a></span>&#160;    <span class="keywordtype">int</span>   <a class="code" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">num_released_buffers</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">   98</a></span>&#160;    <span class="keywordtype">int</span>       <a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#afb8654113249ff8b47fde0a894067858">  100</a></span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="struct_per_thread_context.html#afb8654113249ff8b47fde0a894067858">requested_frame</a>;       </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a6ec6ae2e7401998e8fc18a85efcafe74">  101</a></span>&#160;    <span class="keywordtype">int</span>      <a class="code" href="struct_per_thread_context.html#a6ec6ae2e7401998e8fc18a85efcafe74">requested_flags</a>;       </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a8bb98e58c63d3ff8709b576a6707bbdf">  103</a></span>&#160;    <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *<a class="code" href="struct_per_thread_context.html#a3008114e8bda5c7bbd59114142e543a2">available_formats</a>; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="struct_per_thread_context.html#a8bb98e58c63d3ff8709b576a6707bbdf">result_format</a>;            </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a382361db53ba4a5cab12c09d076261ac">  106</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_per_thread_context.html#a382361db53ba4a5cab12c09d076261ac">die</a>;                        </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">  108</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#affb5449e61a7aabb9fe9bb6a8be65618">  109</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_per_thread_context.html#affb5449e61a7aabb9fe9bb6a8be65618">async_serializing</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">  111</a></span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> <a class="code" href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">debug_threads</a>;       </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a6b59880fee32c0338a22dc913a78b97a">  112</a></span>&#160;} <a class="code" href="pthread__frame_8c.html#a6b59880fee32c0338a22dc913a78b97a">PerThreadContext</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html">  117</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> {</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">  118</a></span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>;     </div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">  119</a></span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">  121</a></span>&#160;    <a class="code" href="os2threads_8h.html#ac171f4e937b5a585efb4a7f99ee2234a">pthread_mutex_t</a> <a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>;  </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">  126</a></span>&#160;    <a class="code" href="os2threads_8h.html#ac171f4e937b5a585efb4a7f99ee2234a">pthread_mutex_t</a> <a class="code" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">hwaccel_mutex</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">  127</a></span>&#160;    <a class="code" href="os2threads_8h.html#ac171f4e937b5a585efb4a7f99ee2234a">pthread_mutex_t</a> <a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">  128</a></span>&#160;    <a class="code" href="structpthread__cond__t.html">pthread_cond_t</a> <a class="code" href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">async_cond</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">  129</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">async_lock</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">  131</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a>;             </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">  132</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">next_finished</a>;             </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">  134</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">delaying</a>;                  </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a88c455d2b5f5d01e03930ca16e197376">  138</a></span>&#160;} <a class="code" href="pthread__frame_8c.html#a88c455d2b5f5d01e03930ca16e197376">FrameThreadContext</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">  140</a></span>&#160;<span class="preprocessor">#define THREAD_SAFE_CALLBACKS(avctx) \</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">((avctx)-&gt;thread_safe_callbacks || (avctx)-&gt;get_buffer2 == avcodec_default_get_buffer2)</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#ace3f325ae923771bece7e11b4f0f4c2a">  143</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#ace3f325ae923771bece7e11b4f0f4c2a">async_lock</a>(<a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">while</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">async_lock</a>)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">async_cond</a>, &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">async_lock</a> = 1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a3c466bb4c648eb0b36c243724efe88f3">  152</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#a3c466bb4c648eb0b36c243724efe88f3">async_unlock</a>(<a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">async_lock</a>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">async_lock</a> = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">async_cond</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a4333a67a652d73e0b1a3290de2202725">  168</a></span>&#160;<span class="keyword">static</span> <a class="code" href="libavutil_2internal_8h.html#adfe57f15d021b52f5137ff917767a525">attribute_align_arg</a> <span class="keywordtype">void</span> *<a class="code" href="pthread__frame_8c.html#a4333a67a652d73e0b1a3290de2202725">frame_worker_thread</a>(<span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx = p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_codec.html">AVCodec</a> *codec = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a> &amp;&amp; !p-&gt;<a class="code" href="struct_per_thread_context.html#a382361db53ba4a5cab12c09d076261ac">die</a>)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">input_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#a382361db53ba4a5cab12c09d076261ac">die</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> (!codec-&gt;<a class="code" href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">update_thread_context</a> &amp;&amp; <a class="code" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx))</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3">ff_thread_finish_setup</a>(avctx);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">/* If a decoder supports hwaccel, then it must call ff_get_format().</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">         * Since that call must happen before ff_thread_finish_setup(), the</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">         * decoder is required to implement update_thread_context() and call</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">         * ff_thread_finish_setup() manually. Therefore the above</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">         * ff_thread_finish_setup() call did not happen and hwaccel_serializing</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">         * cannot be true here. */</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(!p-&gt;<a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">/* if the previous thread uses hwaccel then we take the lock to ensure</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">         * the threads don&#39;t run concurrently */</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">hwaccel</a>) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>-&gt;<a class="code" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">hwaccel_mutex</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            p-&gt;<a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a> = 1;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a> = 0;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a> = codec-&gt;<a class="code" href="struct_a_v_codec.html#af5e25ad31402c1d510b2d9053368d8f0">decode</a>(avctx, p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">if</span> ((p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a> &lt; 0 || !p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a>) &amp;&amp; p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">buf</a>[0]) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a30b99d076ad0288b0d9bf3c931df8986">caps_internal</a> &amp; <a class="code" href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a>)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;A frame threaded decoder did not &quot;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                       <span class="stringliteral">&quot;free the frame on failure. This is a bug, please report it.\n&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <a class="code" href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3">ff_thread_finish_setup</a>(avctx);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a>) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            p-&gt;<a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a> = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>-&gt;<a class="code" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">hwaccel_mutex</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#affb5449e61a7aabb9fe9bb6a8be65618">async_serializing</a>) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            p-&gt;<a class="code" href="struct_per_thread_context.html#affb5449e61a7aabb9fe9bb6a8be65618">async_serializing</a> = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="pthread__frame_8c.html#a3c466bb4c648eb0b36c243724efe88f3">async_unlock</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">output_cond</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">  245</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *dst, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> for_user)</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (dst != <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> &amp;&amp; (for_user || <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;codec-&gt;update_thread_context)) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;time_base;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;framerate;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>     = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;width;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>    = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;height;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>   = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;pix_fmt;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a1ff9829b01eeb0063c21d039dcc5900d">sw_pix_fmt</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;sw_pix_fmt;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a>  = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;coded_width;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;coded_height;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">has_b_frames</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;has_b_frames;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a8b669e043c8b064fcf991fd71e16a870">idct_algo</a>    = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;idct_algo;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5273a8cf73ef598d632c6eee1379d5ad">bits_per_coded_sample</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;bits_per_coded_sample;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a>   = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;sample_aspect_ratio;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">profile</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;profile;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">level</a>   = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;level;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;bits_per_raw_sample;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">ticks_per_frame</a>     = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;ticks_per_frame;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a>     = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;color_primaries;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>   = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;color_trc;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>  = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;colorspace;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;color_range;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;chroma_sample_location;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">hwaccel</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hwaccel;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ab222f7d747dfdceff0a76999e09648c0">hwaccel_context</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hwaccel_context;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>       = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;channels;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>    = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;sample_rate;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>     = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;sample_fmt;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;channel_layout;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a888a25d20e49fd9efc779a09e4a6cb05">hwaccel_priv_data</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;internal-&gt;hwaccel_priv_data;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">if</span> (!!dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a> != !!<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hw_frames_ctx ||</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            (dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a> &amp;&amp; dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a>-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a> != <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hw_frames_ctx-&gt;data)) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hw_frames_ctx) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hw_frames_ctx);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">if</span> (!dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a0a90b6a8e324a220e2be52d6e33038b8">hwaccel_flags</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;hwaccel_flags;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        err = <a class="code" href="group__lavu__buffer.html#ga61cdb5e07d22ef10b9103cbd3ae78371">av_buffer_replace</a>(&amp;dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#aa71ee0b39b71d2decc99975c793e4445">pool</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;internal-&gt;pool);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">if</span> (for_user) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">#if FF_API_CODED_FRAME</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<a class="code" href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5a2bc090d586303b25c642e3315d8671">coded_frame</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;coded_frame;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<a class="code" href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">update_thread_context</a>)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            err = dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">update_thread_context</a>(dst, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a1fc6112564ad20c495e8acd579ac7ddf">  326</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#a1fc6112564ad20c495e8acd579ac7ddf">update_context_from_user</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *dst, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">flags</a>          = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;flags;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a692cb615f8045df330ec0a12852b5252">draw_horiz_band</a>= <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;draw_horiz_band;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aef79333a4c6abf1628c55d75ec82bede">get_buffer2</a>    = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;get_buffer2;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aab9c4495feeedde28c1e908d76b7b9f5">opaque</a>   = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;opaque;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a1c52e4da25b608b2b9a80af21bb86d58">debug</a>    = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;debug;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ad823755aadd6eec734c216dbb17f145d">debug_mv</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;debug_mv;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a2ce5f24ee2312281a68b40428b384bc8">slice_flags</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_flags;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a1944f9a4f8f2e123c087e1fe7613d571">flags2</a>      = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;flags2;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a8c50ed0bb6e64d620c3ba513d5c2e31d">export_side_data</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;export_side_data;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a6be328131743a97103b89e028e62e771">skip_loop_filter</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;skip_loop_filter;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#ac3d90275bfb1153a5b00ebc2dd32a689">skip_idct</a>        = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;skip_idct;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#af869b808363998c80adf7df6a944a5a6">skip_frame</a>       = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;skip_frame;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">frame_number</a>     = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;frame_number;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a64c09907902b41744c3ea60c89fd42fb">reordered_opaque</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;reordered_opaque;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5bd9a6f252d615243d01198fd3957fd8">thread_safe_callbacks</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;thread_safe_callbacks;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_count &amp;&amp; <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_offset) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5ab4f688d837387c83315fba6027a43a">slice_count</a> &lt; <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_count) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="keywordtype">int</span> err = <a class="code" href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a>(&amp;dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aedd75624ca647d2ac04b20c1eb7352e6">slice_offset</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_count,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                        <span class="keyword">sizeof</span>(*dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aedd75624ca647d2ac04b20c1eb7352e6">slice_offset</a>));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        memcpy(dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aedd75624ca647d2ac04b20c1eb7352e6">slice_offset</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_offset,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;               <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_count * <span class="keyword">sizeof</span>(*dst-&gt;<a class="code" href="struct_a_v_codec_context.html#aedd75624ca647d2ac04b20c1eb7352e6">slice_offset</a>));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    dst-&gt;<a class="code" href="struct_a_v_codec_context.html#a5ab4f688d837387c83315fba6027a43a">slice_count</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;slice_count;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">  364</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">release_delayed_buffers</a>(<a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx = p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">while</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">num_released_buffers</a> &gt; 0) {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="comment">// fix extended data in case the caller screwed it up</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> ||</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                   p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>[--p-&gt;<a class="code" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">num_released_buffers</a>];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;extended_data = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;data;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#aa87f39770cea677ca1e1f3f03fb14986">  384</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#aa87f39770cea677ca1e1f3f03fb14986">submit_packet</a>(<a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *user_avctx,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                         <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;{</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx = p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *prev_thread = fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_codec.html">AVCodec</a> *codec = p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (!avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &amp;&amp; !(codec-&gt;<a class="code" href="struct_a_v_codec.html#af51f7ff3dac8b730f46b9713e49a2518">capabilities</a> &amp; <a class="code" href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a>))</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="pthread__frame_8c.html#a1fc6112564ad20c495e8acd579ac7ddf">update_context_from_user</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, user_avctx);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#ad559c29e007899c11142f0d899625397">atomic_store_explicit</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">debug_threads</a>,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                          (p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a1c52e4da25b608b2b9a80af21bb86d58">debug</a> &amp; <a class="code" href="avcodec_8h.html#a15aee1184d9f83886ae38cef62f5e281">FF_DEBUG_THREADS</a>) != 0,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                          memory_order_relaxed);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">release_delayed_buffers</a>(p);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (prev_thread) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>, &amp;prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        err = <a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, prev_thread-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, 0);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#gadb05d71fa2ea7b7fd3e8cfc6d9065a47">av_packet_ref</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>, avpkt);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;av_packet_ref() failed in submit_packet()\n&quot;</span>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">input_cond</a>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">     * If the client doesn&#39;t have a thread-safe get_buffer(),</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">     * then decoding threads call back to the main thread,</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">     * and it calls back to the client here.</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a5bd9a6f252d615243d01198fd3957fd8">thread_safe_callbacks</a> &amp;&amp; (</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;         p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a360a2b8508a67c4234d97f4c13ba1bb5">get_format</a> != <a class="code" href="group__lavc__misc__pixfmt.html#ga2d16136bf8844295b2f8ea17c386d833">avcodec_default_get_format</a> ||</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;         p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aef79333a4c6abf1628c55d75ec82bede">get_buffer2</a> != <a class="code" href="group__lavc__decoding.html#ga09dee227d3666720eff1f6913d11699d">avcodec_default_get_buffer2</a>)) {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6">STATE_SETUP_FINISHED</a> &amp;&amp; <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordtype">int</span> call_done = 1;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, memory_order_acquire)) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badcdf7ce3063cf38961937007e27abcde">STATE_GET_BUFFER</a>:</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a> = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, p-&gt;<a class="code" href="struct_per_thread_context.html#afb8654113249ff8b47fde0a894067858">requested_frame</a>, p-&gt;<a class="code" href="struct_per_thread_context.html#a6ec6ae2e7401998e8fc18a85efcafe74">requested_flags</a>);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba35dec6732dff5101176a587be7db7161">STATE_GET_FORMAT</a>:</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                p-&gt;<a class="code" href="struct_per_thread_context.html#a8bb98e58c63d3ff8709b576a6707bbdf">result_format</a> = <a class="code" href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, p-&gt;<a class="code" href="struct_per_thread_context.html#a3008114e8bda5c7bbd59114142e543a2">available_formats</a>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                call_done = 0;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">if</span> (call_done) {</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                <a class="code" href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a> = p;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a>++;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#ac39dd042416f1f404fe1be56bb91d97d">  476</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#ac39dd042416f1f404fe1be56bb91d97d">ff_thread_decode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                           <a class="code" href="struct_a_v_frame.html">AVFrame</a> *picture, <span class="keywordtype">int</span> *got_picture_ptr,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                           <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;{</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordtype">int</span> finished = fctx-&gt;<a class="code" href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">next_finished</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="comment">/* release the async lock, permitting blocked hwaccel threads to</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">     * go forward while we are in this function */</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="pthread__frame_8c.html#a3c466bb4c648eb0b36c243724efe88f3">async_unlock</a>(fctx);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">     * Submit a packet to the next decoding thread.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160; </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    p = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a>];</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    err = <a class="code" href="pthread__frame_8c.html#aa87f39770cea677ca1e1f3f03fb14986">submit_packet</a>(p, avctx, avpkt);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">     * If we&#39;re still receiving the initial packets, don&#39;t return a frame.</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a> &gt; (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>-1-(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea610509eb997372e2ea71cb6b4dfb553f">AV_CODEC_ID_FFV1</a>)))</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">delaying</a> = 0;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">delaying</a>) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        *got_picture_ptr=0;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">if</span> (avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            err = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">     * Return the next available frame from the oldest thread.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">     * If we&#39;re at the end of the stream, then we have to skip threads that</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">     * didn&#39;t output a frame/error, because we don&#39;t want to accidentally signal</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">     * EOF (avpkt-&gt;size == 0 &amp;&amp; *got_picture_ptr == 0 &amp;&amp; err &gt;= 0).</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        p = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[finished++];</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, memory_order_relaxed) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">output_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="group__lavu__frame.html#ga709e62bc2917ffd84c5c0f4e1dfc48f7">av_frame_move_ref</a>(picture, p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        *got_picture_ptr = p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        picture-&gt;<a class="code" href="struct_a_v_frame.html#aa52951f35ec9e303d3dfeb4b3e44248a">pkt_dts</a> = p-&gt;<a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        err = p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">         * A later call with avkpt-&gt;size == 0 may loop over all threads,</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">         * including this one, searching for a frame/error to return before being</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">         * stopped by the &quot;finished != fctx-&gt;next_finished&quot; condition.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">         * Make sure we don&#39;t mistakenly return the same frame/error again.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a> = 0;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a> = 0;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">if</span> (finished &gt;= avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>) finished = 0;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    } <span class="keywordflow">while</span> (!avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> &amp;&amp; !*got_picture_ptr &amp;&amp; err &gt;= 0 &amp;&amp; finished != fctx-&gt;<a class="code" href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">next_finished</a>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(avctx, p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, 1);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a> &gt;= avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>) fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a> = 0;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">next_finished</a> = finished;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="comment">/* return the size of the consumed packet if no error occurred */</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (err &gt;= 0)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        err = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="pthread__frame_8c.html#ace3f325ae923771bece7e11b4f0f4c2a">async_lock</a>(fctx);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#a8f2a011a6e511ed85066482460c6c5cd">  561</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(<a class="code" href="struct_thread_frame.html">ThreadFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;{</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> *progress = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress ? (<a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a>*)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress-&gt;data : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (!progress ||</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;progress[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], memory_order_relaxed) &gt;= n)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    p = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>]-&gt;internal-&gt;thread_ctx;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">debug_threads</a>, memory_order_relaxed))</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;               <span class="stringliteral">&quot;%p finished %d field %d\n&quot;</span>, progress, n, <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#ad559c29e007899c11142f0d899625397">atomic_store_explicit</a>(&amp;progress[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], n, memory_order_release);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#aae1e141aa3437d0e73598ee5a5e3cc4a">  584</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#a86d6b711aaa79b65aff17276564fc25e">ff_thread_await_progress</a>(<a class="code" href="struct_thread_frame.html">ThreadFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>)</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;{</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> *progress = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress ? (<a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a>*)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress-&gt;data : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (!progress ||</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;progress[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], memory_order_acquire) &gt;= n)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    p = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>]-&gt;internal-&gt;thread_ctx;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">debug_threads</a>, memory_order_relaxed))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;               <span class="stringliteral">&quot;thread awaiting %d field %d from %p\n&quot;</span>, n, <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>, progress);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a>(&amp;progress[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], memory_order_relaxed) &lt; n)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#a9ad620f797a848df3977ea512316ceb3">  605</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3">ff_thread_finish_setup</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (!(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a>&amp;<a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">hwaccel</a> &amp;&amp; !p-&gt;<a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a>) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>-&gt;<a class="code" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">hwaccel_mutex</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">hwaccel_serializing</a> = 1;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">/* this assumes that no hwaccel calls happen before ff_thread_finish_setup() */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">hwaccel</a> &amp;&amp;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        !(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">hwaccel</a>-&gt;<a class="code" href="struct_a_v_h_w_accel.html#ac86c35478948dd4c3ee5619db982ee0d">caps_internal</a> &amp; <a class="code" href="hwconfig_8h.html#a6c1e3494a613e73e4b7bcd9a3b75d45d">HWACCEL_CAP_ASYNC_SAFE</a>)) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#affb5449e61a7aabb9fe9bb6a8be65618">async_serializing</a> = 1;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="pthread__frame_8c.html#ace3f325ae923771bece7e11b4f0f4c2a">async_lock</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6">STATE_SETUP_FINISHED</a>){</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Multiple ff_thread_finish_setup() calls\n&quot;</span>);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6">STATE_SETUP_FINISHED</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#af038da83dd3011d06976e91813a8de0f">  635</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#af038da83dd3011d06976e91813a8de0f">park_frame_worker_threads</a>(<a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx, <span class="keywordtype">int</span> thread_count)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="pthread__frame_8c.html#a3c466bb4c648eb0b36c243724efe88f3">async_unlock</a>(fctx);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; thread_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a>)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">output_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a> = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="pthread__frame_8c.html#ace3f325ae923771bece7e11b4f0f4c2a">async_lock</a>(fctx);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="pthread__internal_8h.html#a44656a5ba9977049dad8e39934bb497b">  656</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#a44656a5ba9977049dad8e39934bb497b">ff_frame_thread_free</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keywordtype">int</span> thread_count)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_codec.html">AVCodec</a> *codec = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="pthread__frame_8c.html#af038da83dd3011d06976e91813a8de0f">park_frame_worker_threads</a>(fctx, thread_count);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a888a25d20e49fd9efc779a09e4a6cb05">hwaccel_priv_data</a> !=</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                             fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a888a25d20e49fd9efc779a09e4a6cb05">hwaccel_priv_data</a>) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(avctx, fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, 1) &lt; 0) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to update user thread.\n&quot;</span>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a> &amp;&amp; fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a> != fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>)</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, 0) &lt; 0) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Final thread update failed\n&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a010e0c58d71447285e4a26cdea9d8862">is_copy</a> = fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a010e0c58d71447285e4a26cdea9d8862">is_copy</a>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a010e0c58d71447285e4a26cdea9d8862">is_copy</a> = 1;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; thread_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a382361db53ba4a5cab12c09d076261ac">die</a> = 1;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">input_cond</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">thread_init</a>)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;            <a class="code" href="os2threads_8h.html#a5a76bdbebd80f3d24df2a42cf08e98d6">pthread_join</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a1105537905e4cf066ed3744d17b3da54">thread</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">thread_init</a>=0;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160; </div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="struct_a_v_codec.html#aebac19f8d0808a44a775f8d1700d3c46">close</a> &amp;&amp; p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            codec-&gt;<a class="code" href="struct_a_v_codec.html#aebac19f8d0808a44a775f8d1700d3c46">close</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <a class="code" href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">release_delayed_buffers</a>(p);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; thread_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <a class="code" href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">input_cond</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <a class="code" href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <a class="code" href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">output_cond</a>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; p-&gt;<a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a>; j++)</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>[j]);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="struct_a_v_codec.html#a4ded9f7ec1fa1a73ea3e831428c100fa">priv_class</a>)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                <a class="code" href="group__avoptions.html#gac14db824af52baf8181406e98d116097">av_opt_free</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aedd75624ca647d2ac04b20c1eb7352e6">slice_offset</a>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#aa71ee0b39b71d2decc99975c793e4445">pool</a>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">hwaccel_mutex</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">async_cond</a>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a> &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a4ded9f7ec1fa1a73ea3e831428c100fa">priv_class</a>)</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="group__avoptions.html#gac14db824af52baf8181406e98d116097">av_opt_free</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;}</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="pthread__internal_8h.html#a64637c4de849dbe667c5dbd89d3da9fd">  741</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#a64637c4de849dbe667c5dbd89d3da9fd">ff_frame_thread_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;{</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordtype">int</span> thread_count = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_a_v_codec.html">AVCodec</a> *codec = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = avctx;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, err = 0;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (!thread_count) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordtype">int</span> nb_cpus = <a class="code" href="cpu_8c.html#af8bdb502bd3964052fc8595b0fe721a8">av_cpu_count</a>();</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="preprocessor">#if FF_API_DEBUG_MV</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">if</span> ((avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1c52e4da25b608b2b9a80af21bb86d58">debug</a> &amp; (FF_DEBUG_VIS_QP | FF_DEBUG_VIS_MB_TYPE)) || avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ad823755aadd6eec734c216dbb17f145d">debug_mv</a>)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            nb_cpus = 1;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="comment">// use number of cores + 1 as thread count if there is more than one</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="keywordflow">if</span> (nb_cpus &gt; 1)</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            thread_count = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(nb_cpus + 1, <a class="code" href="pthread__internal_8h.html#a7875257dfe9bc66968e7e76f29852289">MAX_AUTO_THREADS</a>);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            thread_count = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a> = 1;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span> (thread_count &lt;= 1) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a> = 0;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a> = fctx = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a>));</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (!fctx)</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a> = <a class="code" href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a>(thread_count, <span class="keyword">sizeof</span>(<a class="code" href="struct_per_thread_context.html">PerThreadContext</a>));</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (!fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">hwaccel_mutex</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">async_mutex</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">async_cond</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">async_lock</a> = 1;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">delaying</a> = 1;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="struct_a_v_codec.html#ab539ca86026d043803c24ba06fa84197">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a948993adfdfcd64b81dad1151fe50f33">delay</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;thread_count - 1;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; thread_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a>));</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p  = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">mutex</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        <a class="code" href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <a class="code" href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">input_cond</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <a class="code" href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <a class="code" href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">output_cond</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            err = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        }</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a> = fctx;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>  = <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            err = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        *<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a> = *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;internal = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_codec_internal.html">AVCodecInternal</a>));</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;internal) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;priv_data = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            err = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        *<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;internal = *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;internal;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;internal-&gt;thread_ctx = p;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;internal-&gt;last_pkt_props = &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">avpkt</a>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;delay = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a948993adfdfcd64b81dad1151fe50f33">delay</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="struct_a_v_codec.html#aa86c803fcfc0ebb569b15d4645d0e796">priv_data_size</a>) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;priv_data = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(codec-&gt;<a class="code" href="struct_a_v_codec.html#aa86c803fcfc0ebb569b15d4645d0e796">priv_data_size</a>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;priv_data) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                err = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="struct_a_v_codec.html#a4ded9f7ec1fa1a73ea3e831428c100fa">priv_class</a>) {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                *(<span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> **)<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;priv_data = codec-&gt;<a class="code" href="struct_a_v_codec.html#a4ded9f7ec1fa1a73ea3e831428c100fa">priv_class</a>;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                err = <a class="code" href="group__avoptions.html#ga0bcbbef33c677ddbf37d423dcb9c7833">av_opt_copy</a>(<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;priv_data, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;priv_data);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                    <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160; </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;internal-&gt;is_copy = 1;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="struct_a_v_codec.html#a53c60e0ee7698b85b9d0704edbc78555">init</a>)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            err = codec-&gt;<a class="code" href="struct_a_v_codec.html#a53c60e0ee7698b85b9d0704edbc78555">init</a>(<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="keywordflow">if</span> (err) <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(avctx, <a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>, 1);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">debug_threads</a>, (<a class="code" href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a>-&gt;debug &amp; <a class="code" href="avcodec_8h.html#a15aee1184d9f83886ae38cef62f5e281">FF_DEBUG_THREADS</a>) != 0);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160; </div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        err = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(<a class="code" href="os2threads_8h.html#a9b6e74e145dcb6f426dd83bcc51aa217">pthread_create</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a1105537905e4cf066ed3744d17b3da54">thread</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="pthread__frame_8c.html#a4333a67a652d73e0b1a3290de2202725">frame_worker_thread</a>, p));</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">thread_init</a>= !err;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="keywordflow">if</span>(!p-&gt;<a class="code" href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">thread_init</a>)</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="pthread__frame_8c.html#a44656a5ba9977049dad8e39934bb497b">ff_frame_thread_free</a>(avctx, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>+1);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#af9fb90d995171cf16ed454f6965e0710">  869</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#af9fb90d995171cf16ed454f6965e0710">ff_thread_flush</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;{</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (!fctx) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="pthread__frame_8c.html#af038da83dd3011d06976e91813a8de0f">park_frame_worker_threads</a>(fctx, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>);</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">if</span> (fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a> != &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[0])</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <a class="code" href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a>(fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[0].<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a>-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>, 0);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    }</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">next_decoding</a> = fctx-&gt;<a class="code" href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">next_finished</a> = 0;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">delaying</a> = 1;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">prev_thread</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">thread_count</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = &amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">threads</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <span class="comment">// Make sure decode flush calls with size=0 won&#39;t return old frames</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">got_frame</a> = 0;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">frame</a>);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a> = 0;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <a class="code" href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">release_delayed_buffers</a>(p);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#aa9142c9e26ed120d5f19a13f676ca03c">flush</a>)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#aa9142c9e26ed120d5f19a13f676ca03c">flush</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">avctx</a>);</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">  899</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> ((avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a>&amp;<a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>) &amp;&amp; <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a> &amp;&amp;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">update_thread_context</a> || !<a class="code" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx))) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="pthread__frame_8c.html#a072fb6b4e21f7b1e1d37f9339a87afd9">  909</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#a072fb6b4e21f7b1e1d37f9339a87afd9">thread_get_buffer_internal</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;{</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[0] = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[1] = avctx;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (!(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a> &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>))</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a> &amp;&amp;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">update_thread_context</a> || !<a class="code" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx))) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;get_buffer() cannot be called after ff_thread_finish_setup()\n&quot;</span>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a30b99d076ad0288b0d9bf3c931df8986">caps_internal</a> &amp; <a class="code" href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a>) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> *progress;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress = <a class="code" href="group__lavu__buffer.html#ga5ae84ac902283dea1a660ede06c1cdac">av_buffer_alloc</a>(2 * <span class="keyword">sizeof</span>(*progress));</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        progress = (<a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a>*)<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress-&gt;data;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;progress[0], -1);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a>(&amp;progress[1], -1);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx)) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        err = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#afb8654113249ff8b47fde0a894067858">requested_frame</a> = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a6ec6ae2e7401998e8fc18a85efcafe74">requested_flags</a> = <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <a class="code" href="dummy_2stdatomic_8h.html#ad559c29e007899c11142f0d899625397">atomic_store_explicit</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badcdf7ce3063cf38961937007e27abcde">STATE_GET_BUFFER</a>, memory_order_release);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;            <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        err = p-&gt;<a class="code" href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">result</a>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx) &amp;&amp; !avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">update_thread_context</a>)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <a class="code" href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3">ff_thread_finish_setup</a>(avctx);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;}</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="pthread__frame_8c.html#ab72df5e427afa9ab4020584e33a37b70">ff_thread_get_format</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *fmt)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;{</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> res;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> (!(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a> &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>) || avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5bd9a6f252d615243d01198fd3957fd8">thread_safe_callbacks</a> ||</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a360a2b8508a67c4234d97f4c13ba1bb5">get_format</a> == <a class="code" href="group__lavc__misc__pixfmt.html#ga2d16136bf8844295b2f8ea17c386d833">avcodec_default_get_format</a>)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a>(avctx, fmt);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>) {</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;get_format() cannot be called after ff_thread_finish_setup()\n&quot;</span>);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    p-&gt;<a class="code" href="struct_per_thread_context.html#a3008114e8bda5c7bbd59114142e543a2">available_formats</a> = fmt;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba35dec6732dff5101176a587be7db7161">STATE_GET_FORMAT</a>);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">state</a>) != <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a>)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <a class="code" href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">progress_cond</a>, &amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    res = p-&gt;<a class="code" href="struct_per_thread_context.html#a8bb98e58c63d3ff8709b576a6707bbdf">result_format</a>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;p-&gt;<a class="code" href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">progress_mutex</a>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;}</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#a175c018f02630ddf4e3824b2c8b9184f">  991</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="pthread__frame_8c.html#a175c018f02630ddf4e3824b2c8b9184f">ff_thread_get_buffer</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;{</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="pthread__frame_8c.html#a072fb6b4e21f7b1e1d37f9339a87afd9">thread_get_buffer_internal</a>(avctx, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;thread_get_buffer() failed\n&quot;</span>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno"><a class="line" href="libavcodec_2thread_8h.html#aa3f6cbc3d5b74d46b247469ca3247ad1">  999</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_thread_frame.html">ThreadFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>)</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;{</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="struct_per_thread_context.html">PerThreadContext</a> *p = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">internal</a>-&gt;<a class="code" href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">thread_ctx</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="struct_frame_thread_context.html">FrameThreadContext</a> *fctx;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *dst;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordtype">int</span> can_direct_free = !(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">active_thread_type</a> &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>) ||</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                          <a class="code" href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a>(avctx);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1c52e4da25b608b2b9a80af21bb86d58">debug</a> &amp; <a class="code" href="avcodec_8h.html#adb074c59640127bdd20b187ed3c5a614">FF_DEBUG_BUFFERS</a>)</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;thread_release_buffer called on pic %p\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;progress);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[0] = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;owner[1] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">// when the frame buffers are not allocated, just reset it to clean state</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">if</span> (can_direct_free || !<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;buf[0]) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    fctx = p-&gt;<a class="code" href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">parent</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keywordflow">if</span> (p-&gt;<a class="code" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">num_released_buffers</a> == p-&gt;<a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a>) {</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        <a class="code" href="struct_a_v_frame.html">AVFrame</a> **tmp = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>, p-&gt;<a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a> + 1,</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                                         <span class="keyword">sizeof</span>(*p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>));</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">if</span> (tmp) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            tmp[p-&gt;<a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a>] = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a> = tmp;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160; </div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">if</span> (!tmp || !tmp[p-&gt;<a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a>]) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;        }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        p-&gt;<a class="code" href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">released_buffers_allocated</a>++;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    dst = p-&gt;<a class="code" href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">released_buffers</a>[p-&gt;<a class="code" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">num_released_buffers</a>];</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="group__lavu__frame.html#ga709e62bc2917ffd84c5c0f4e1dfc48f7">av_frame_move_ref</a>(dst, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    p-&gt;<a class="code" href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">num_released_buffers</a>++;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <a class="code" href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a>(&amp;fctx-&gt;<a class="code" href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">buffer_mutex</a>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="comment">// make sure the frame is clean even if we fail to free it</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="comment">// this leaks, but it is better than crashing</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Could not queue a frame for freeing, this will leak\n&quot;</span>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;buf, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;buf));</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;extended_buf)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            memset(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;extended_buf, 0, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;nb_extended_buf * <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f-&gt;extended_buf));</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;f);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="aos2threads_8h_html_ac171f4e937b5a585efb4a7f99ee2234a"><div class="ttname"><a href="os2threads_8h.html#ac171f4e937b5a585efb4a7f99ee2234a">pthread_mutex_t</a></div><div class="ttdeci">_fmutex pthread_mutex_t</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00053">os2threads.h:53</a></div></div>
<div class="ttc" id="ahwconfig_8h_html"><div class="ttname"><a href="hwconfig_8h.html">hwconfig.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a3008114e8bda5c7bbd59114142e543a2"><div class="ttname"><a href="struct_per_thread_context.html#a3008114e8bda5c7bbd59114142e543a2">PerThreadContext::available_formats</a></div><div class="ttdeci">enum AVPixelFormat * available_formats</div><div class="ttdoc">Format array for get_format()</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00103">pthread_frame.c:103</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_aa6ef004d10669ab4ee062367a014ea33"><div class="ttname"><a href="libavutil_2internal_8h.html#aa6ef004d10669ab4ee062367a014ea33">FF_ENABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_ENABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00085">internal.h:85</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a5a76bdbebd80f3d24df2a42cf08e98d6"><div class="ttname"><a href="os2threads_8h.html#a5a76bdbebd80f3d24df2a42cf08e98d6">pthread_join</a></div><div class="ttdeci">static av_always_inline int pthread_join(pthread_t thread, void **value_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00094">os2threads.h:94</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a28d38d1b61e79d99480b64efbb980839"><div class="ttname"><a href="struct_per_thread_context.html#a28d38d1b61e79d99480b64efbb980839">PerThreadContext::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdoc">Context used to decode packets passed to this thread.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00082">pthread_frame.c:82</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3bac44bb0b016ab838780cc19ac277d6"><div class="ttname"><a href="struct_a_v_codec_context.html#a3bac44bb0b016ab838780cc19ac277d6">AVCodecContext::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02226">avcodec.h:2226</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1147</a></div></div>
<div class="ttc" id="astruct_a_v_codec_internal_html_a14c9b6f7986719ce790cc3c061236927"><div class="ttname"><a href="struct_a_v_codec_internal.html#a14c9b6f7986719ce790cc3c061236927">AVCodecInternal::thread_ctx</a></div><div class="ttdeci">void * thread_ctx</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00138">internal.h:138</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a0241b1f231c55cdf092b2d509e8d83df"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a></div><div class="ttdeci">#define atomic_store(object, desired)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00085">stdatomic.h:85</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_ae6baec58c85defff1a445e45de9a27e3"><div class="ttname"><a href="struct_per_thread_context.html#ae6baec58c85defff1a445e45de9a27e3">PerThreadContext::hwaccel_serializing</a></div><div class="ttdeci">int hwaccel_serializing</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00108">pthread_frame.c:108</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga5ae84ac902283dea1a660ede06c1cdac"><div class="ttname"><a href="group__lavu__buffer.html#ga5ae84ac902283dea1a660ede06c1cdac">av_buffer_alloc</a></div><div class="ttdeci">AVBufferRef * av_buffer_alloc(int size)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00067">buffer.c:67</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ab539ca86026d043803c24ba06fa84197"><div class="ttname"><a href="struct_a_v_codec.html#ab539ca86026d043803c24ba06fa84197">AVCodec::type</a></div><div class="ttdeci">enum AVMediaType type</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00202">codec.h:203</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_adc5f65d6099fd8339c1580c091777223"><div class="ttname"><a href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">AVCodecContext::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:536</a></div></div>
<div class="ttc" id="adecode_8c_html_a8a7eadb05d8ea6f849a146035377ad1f"><div class="ttname"><a href="decode_8c.html#a8a7eadb05d8ea6f849a146035377ad1f">ff_get_format</a></div><div class="ttdeci">int ff_get_format(AVCodecContext *avctx, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01299">decode.c:1299</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6be328131743a97103b89e028e62e771"><div class="ttname"><a href="struct_a_v_codec_context.html#a6be328131743a97103b89e028e62e771">AVCodecContext::skip_loop_filter</a></div><div class="ttdeci">enum AVDiscard skip_loop_filter</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01982">avcodec.h:1990</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_afb8654113249ff8b47fde0a894067858"><div class="ttname"><a href="struct_per_thread_context.html#afb8654113249ff8b47fde0a894067858">PerThreadContext::requested_frame</a></div><div class="ttdeci">AVFrame * requested_frame</div><div class="ttdoc">AVFrame the codec passed to get_buffer()</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00100">pthread_frame.c:100</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_af9fb90d995171cf16ed454f6965e0710"><div class="ttname"><a href="pthread__frame_8c.html#af9fb90d995171cf16ed454f6965e0710">ff_thread_flush</a></div><div class="ttdeci">void ff_thread_flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00869">pthread_frame.c:869</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a4f8250fbf301e0e62dad0aad3ba030a9"><div class="ttname"><a href="os2threads_8h.html#a4f8250fbf301e0e62dad0aad3ba030a9">pthread_mutex_init</a></div><div class="ttdeci">static av_always_inline int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *attr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00104">os2threads.h:104</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_ae4471e4e8fa85c02e2b6eaee22ce4f30"><div class="ttname"><a href="pthread__frame_8c.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a></div><div class="ttdeci">int ff_thread_can_start_frame(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00899">pthread_frame.c:899</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html_acb8452e99cd75074b93800b532c6ea4b"><div class="ttname"><a href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">AVBufferRef::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00089">buffer.h:89</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5a2bc090d586303b25c642e3315d8671"><div class="ttname"><a href="struct_a_v_codec_context.html#a5a2bc090d586303b25c642e3315d8671">AVCodecContext::coded_frame</a></div><div class="ttdeci">attribute_deprecated AVFrame * coded_frame</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01776">avcodec.h:1776</a></div></div>
<div class="ttc" id="apthread__internal_8h_html_a7875257dfe9bc66968e7e76f29852289"><div class="ttname"><a href="pthread__internal_8h.html#a7875257dfe9bc66968e7e76f29852289">MAX_AUTO_THREADS</a></div><div class="ttdeci">#define MAX_AUTO_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="pthread__internal_8h_source.html#l00026">pthread_internal.h:26</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab2ebb76836ef4cd9822b5077c17b33d0"><div class="ttname"><a href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">AVCodecContext::coded_height</a></div><div class="ttdeci">int coded_height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_af0b3de302ffc34777d52dc2280848abd"><div class="ttname"><a href="struct_per_thread_context.html#af0b3de302ffc34777d52dc2280848abd">PerThreadContext::result</a></div><div class="ttdeci">int result</div><div class="ttdoc">The result of the last codec decode/encode() call.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00088">pthread_frame.c:88</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_af038da83dd3011d06976e91813a8de0f"><div class="ttname"><a href="pthread__frame_8c.html#af038da83dd3011d06976e91813a8de0f">park_frame_worker_threads</a></div><div class="ttdeci">static void park_frame_worker_threads(FrameThreadContext *fctx, int thread_count)</div><div class="ttdoc">Waits for all threads to finish.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00635">pthread_frame.c:635</a></div></div>
<div class="ttc" id="amem_8c_html_aadc230ece36ef112710b262a6601a16b"><div class="ttname"><a href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a></div><div class="ttdeci">void * av_realloc_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00198">mem.c:198</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_aae8c0917e794bac1a2683987929c6cbc"><div class="ttname"><a href="pthread__frame_8c.html#aae8c0917e794bac1a2683987929c6cbc">THREAD_SAFE_CALLBACKS</a></div><div class="ttdeci">#define THREAD_SAFE_CALLBACKS(avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00140">pthread_frame.c:140</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a9e5a25a530d01c04491216c368a1a04a"><div class="ttname"><a href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">AVCodecContext::frame_number</a></div><div class="ttdeci">int frame_number</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01217">avcodec.h:1217</a></div></div>
<div class="ttc" id="astruct_a_v_codec_internal_html"><div class="ttname"><a href="struct_a_v_codec_internal.html">AVCodecInternal</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00119">internal.h:119</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5f4579d94675579e1d46a591340f598f"><div class="ttname"><a href="struct_a_v_codec_context.html#a5f4579d94675579e1d46a591340f598f">AVCodecContext::active_thread_type</a></div><div class="ttdeci">int active_thread_type</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01804">avcodec.h:1804</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_aa86c803fcfc0ebb569b15d4645d0e796"><div class="ttname"><a href="struct_a_v_codec.html#aa86c803fcfc0ebb569b15d4645d0e796">AVCodec::priv_data_size</a></div><div class="ttdeci">int priv_data_size</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00238">codec.h:238</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1c52e4da25b608b2b9a80af21bb86d58"><div class="ttname"><a href="struct_a_v_codec_context.html#a1c52e4da25b608b2b9a80af21bb86d58">AVCodecContext::debug</a></div><div class="ttdeci">int debug</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01611">avcodec.h:1611</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a60b2151806275a115118e9981cc096b2"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a></div><div class="ttdeci">intptr_t atomic_int</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00055">stdatomic.h:55</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a8bb98e58c63d3ff8709b576a6707bbdf"><div class="ttname"><a href="struct_per_thread_context.html#a8bb98e58c63d3ff8709b576a6707bbdf">PerThreadContext::result_format</a></div><div class="ttdeci">enum AVPixelFormat result_format</div><div class="ttdoc">get_format() result</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00103">pthread_frame.c:104</a></div></div>
<div class="ttc" id="agroup__lavc__misc__pixfmt_html_ga2d16136bf8844295b2f8ea17c386d833"><div class="ttname"><a href="group__lavc__misc__pixfmt.html#ga2d16136bf8844295b2f8ea17c386d833">avcodec_default_get_format</a></div><div class="ttdeci">enum AVPixelFormat avcodec_default_get_format(struct AVCodecContext *s, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l00998">decode.c:1087</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52951f35ec9e303d3dfeb4b3e44248a"><div class="ttname"><a href="struct_a_v_frame.html#aa52951f35ec9e303d3dfeb4b3e44248a">AVFrame::pkt_dts</a></div><div class="ttdeci">int64_t pkt_dts</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00417">frame.h:417</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab222f7d747dfdceff0a76999e09648c0"><div class="ttname"><a href="struct_a_v_codec_context.html#ab222f7d747dfdceff0a76999e09648c0">AVCodecContext::hwaccel_context</a></div><div class="ttdeci">void * hwaccel_context</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01702">avcodec.h:1702</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html"><div class="ttname"><a href="struct_frame_thread_context.html">FrameThreadContext</a></div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00117">pthread_frame.c:117</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8c50ed0bb6e64d620c3ba513d5c2e31d"><div class="ttname"><a href="struct_a_v_codec_context.html#a8c50ed0bb6e64d620c3ba513d5c2e31d">AVCodecContext::export_side_data</a></div><div class="ttdeci">int export_side_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02354">avcodec.h:2354</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a13bcfd492eabe0bfc7b7c8f58c108412"><div class="ttname"><a href="struct_per_thread_context.html#a13bcfd492eabe0bfc7b7c8f58c108412">PerThreadContext::thread_init</a></div><div class="ttdeci">int thread_init</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00074">pthread_frame.c:74</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a44656a5ba9977049dad8e39934bb497b"><div class="ttname"><a href="pthread__frame_8c.html#a44656a5ba9977049dad8e39934bb497b">ff_frame_thread_free</a></div><div class="ttdeci">void ff_frame_thread_free(AVCodecContext *avctx, int thread_count)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00656">pthread_frame.c:656</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aef79333a4c6abf1628c55d75ec82bede"><div class="ttname"><a href="struct_a_v_codec_context.html#aef79333a4c6abf1628c55d75ec82bede">AVCodecContext::get_buffer2</a></div><div class="ttdeci">int(* get_buffer2)(struct AVCodecContext *s, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01341">avcodec.h:1341</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a1140791d54011075c0d316e0a0289357"><div class="ttname"><a href="struct_per_thread_context.html#a1140791d54011075c0d316e0a0289357">PerThreadContext::parent</a></div><div class="ttdeci">struct FrameThreadContext * parent</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00071">pthread_frame.c:71</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af869b808363998c80adf7df6a944a5a6"><div class="ttname"><a href="struct_a_v_codec_context.html#af869b808363998c80adf7df6a944a5a6">AVCodecContext::skip_frame</a></div><div class="ttdeci">enum AVDiscard skip_frame</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01982">avcodec.h:2004</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_ac36dbec917251f24fb626e4e09e1b056"><div class="ttname"><a href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a></div><div class="ttdeci">static void finish(void)</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00345">movenc.c:345</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_ab59e1ad321ee3df5a0f673df788d5a54"><div class="ttname"><a href="struct_frame_thread_context.html#ab59e1ad321ee3df5a0f673df788d5a54">FrameThreadContext::prev_thread</a></div><div class="ttdeci">PerThreadContext * prev_thread</div><div class="ttdoc">The last thread submit_packet() was called on.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00119">pthread_frame.c:119</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac60a0209642b5d74068cab0ac35a78b2"><div class="ttname"><a href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">AVCodecContext::chroma_sample_location</a></div><div class="ttdeci">enum AVChromaLocation chroma_sample_location</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1168</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a6b59880fee32c0338a22dc913a78b97a"><div class="ttname"><a href="pthread__frame_8c.html#a6b59880fee32c0338a22dc913a78b97a">PerThreadContext</a></div><div class="ttdeci">struct PerThreadContext PerThreadContext</div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1140</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5ab4f688d837387c83315fba6027a43a"><div class="ttname"><a href="struct_a_v_codec_context.html#a5ab4f688d837387c83315fba6027a43a">AVCodecContext::slice_count</a></div><div class="ttdeci">int slice_count</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00880">avcodec.h:880</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_a7b5d6aa74cb016664de16bbf2202f80e"><div class="ttname"><a href="struct_frame_thread_context.html#a7b5d6aa74cb016664de16bbf2202f80e">FrameThreadContext::delaying</a></div><div class="ttdeci">int delaying</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00134">pthread_frame.c:134</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_af74d0295e80306c4c67bbe7b9c576ecb"><div class="ttname"><a href="struct_per_thread_context.html#af74d0295e80306c4c67bbe7b9c576ecb">PerThreadContext::input_cond</a></div><div class="ttdeci">pthread_cond_t input_cond</div><div class="ttdoc">Used to wait for a new packet from the main thread.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00075">pthread_frame.c:75</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a692cb615f8045df330ec0a12852b5252"><div class="ttname"><a href="struct_a_v_codec_context.html#a692cb615f8045df330ec0a12852b5252">AVCodecContext::draw_horiz_band</a></div><div class="ttdeci">void(* draw_horiz_band)(struct AVCodecContext *s, const AVFrame *src, int offset[AV_NUM_DATA_POINTERS], int y, int type, int height)</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00761">avcodec.h:761</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a64c09907902b41744c3ea60c89fd42fb"><div class="ttname"><a href="struct_a_v_codec_context.html#a64c09907902b41744c3ea60c89fd42fb">AVCodecContext::reordered_opaque</a></div><div class="ttdeci">int64_t reordered_opaque</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01683">avcodec.h:1683</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_aa87f39770cea677ca1e1f3f03fb14986"><div class="ttname"><a href="pthread__frame_8c.html#aa87f39770cea677ca1e1f3f03fb14986">submit_packet</a></div><div class="ttdeci">static int submit_packet(PerThreadContext *p, AVCodecContext *user_avctx, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00384">pthread_frame.c:384</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55badcdf7ce3063cf38961937007e27abcde"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55badcdf7ce3063cf38961937007e27abcde">STATE_GET_BUFFER</a></div><div class="ttdeci">@ STATE_GET_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00057">pthread_frame.c:57</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_a8ec7bd36b0486be03cde53816969ec87"><div class="ttname"><a href="struct_frame_thread_context.html#a8ec7bd36b0486be03cde53816969ec87">FrameThreadContext::async_cond</a></div><div class="ttdeci">pthread_cond_t async_cond</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00128">pthread_frame.c:128</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aa852b6227d0778b62e9cc4034ad3720c"><div class="ttname"><a href="struct_a_v_codec_context.html#aa852b6227d0778b62e9cc4034ad3720c">AVCodecContext::thread_count</a></div><div class="ttdeci">int thread_count</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01785">avcodec.h:1785</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_afceb84b9d627ce2a9beb4563856cc6fd"><div class="ttname"><a href="struct_per_thread_context.html#afceb84b9d627ce2a9beb4563856cc6fd">PerThreadContext::output_cond</a></div><div class="ttdeci">pthread_cond_t output_cond</div><div class="ttdoc">Used by the main thread to wait for frames to finish.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00077">pthread_frame.c:77</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a86d6b711aaa79b65aff17276564fc25e"><div class="ttname"><a href="pthread__frame_8c.html#a86d6b711aaa79b65aff17276564fc25e">ff_thread_await_progress</a></div><div class="ttdeci">void ff_thread_await_progress(ThreadFrame *f, int n, int field)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00584">pthread_frame.c:584</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a686a77363668795c15c87b532cc455fa"><div class="ttname"><a href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">AVCodecContext::has_b_frames</a></div><div class="ttdeci">int has_b_frames</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00816">avcodec.h:816</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5f33349843a2a9fa8360ead8fc28eee1"><div class="ttname"><a href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">AVCodecContext::hwaccel</a></div><div class="ttdeci">const struct AVHWAccel * hwaccel</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01690">avcodec.h:1690</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a1c689544e66e3dd516af1d6e6f045367"><div class="ttname"><a href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a></div><div class="ttdeci">void ff_thread_report_progress(ThreadFrame *f, int n, int field)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00561">pthread_frame.c:561</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_af95fc1ff940e1d90c57ff838fa0da1aa"><div class="ttname"><a href="struct_per_thread_context.html#af95fc1ff940e1d90c57ff838fa0da1aa">PerThreadContext::frame</a></div><div class="ttdeci">AVFrame * frame</div><div class="ttdoc">Output frame (for decoding) or input (for encoding).</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00086">pthread_frame.c:86</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_a2887d82d6289adcfdbcd9a52adc28118"><div class="ttname"><a href="struct_frame_thread_context.html#a2887d82d6289adcfdbcd9a52adc28118">FrameThreadContext::async_lock</a></div><div class="ttdeci">int async_lock</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00129">pthread_frame.c:129</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a382361db53ba4a5cab12c09d076261ac"><div class="ttname"><a href="struct_per_thread_context.html#a382361db53ba4a5cab12c09d076261ac">PerThreadContext::die</a></div><div class="ttdeci">int die</div><div class="ttdoc">Set when the thread should exit.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00106">pthread_frame.c:106</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5252d34fbce300228d4dbda19a8c3293"><div class="ttname"><a href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">AVCodecContext::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00905">avcodec.h:905</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a889b84d5b3657df4a4e45b17b87848f5"><div class="ttname"><a href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">AVCodecContext::bits_per_raw_sample</a></div><div class="ttdeci">int bits_per_raw_sample</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01757">avcodec.h:1757</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a1fc6112564ad20c495e8acd579ac7ddf"><div class="ttname"><a href="pthread__frame_8c.html#a1fc6112564ad20c495e8acd579ac7ddf">update_context_from_user</a></div><div class="ttdeci">static int update_context_from_user(AVCodecContext *dst, AVCodecContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00326">pthread_frame.c:326</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_aa377c914ccb65b694f52fc4ce9d02f03"><div class="ttname"><a href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this field</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00078">writing_filters.txt:78</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a53c60e0ee7698b85b9d0704edbc78555"><div class="ttname"><a href="struct_a_v_codec.html#a53c60e0ee7698b85b9d0704edbc78555">AVCodec::init</a></div><div class="ttdeci">int(* init)(struct AVCodecContext *)</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00269">codec.h:269</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5bd9a6f252d615243d01198fd3957fd8"><div class="ttname"><a href="struct_a_v_codec_context.html#a5bd9a6f252d615243d01198fd3957fd8">AVCodecContext::thread_safe_callbacks</a></div><div class="ttdeci">int thread_safe_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01814">avcodec.h:1814</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_acced2a78b2a440317feed51f3e505d1d"><div class="ttname"><a href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a></div><div class="ttdeci">#define atomic_load(object)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00093">stdatomic.h:93</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_aa9142c9e26ed120d5f19a13f676ca03c"><div class="ttname"><a href="struct_a_v_codec.html#aa9142c9e26ed120d5f19a13f676ca03c">AVCodec::flush</a></div><div class="ttdeci">void(* flush)(struct AVCodecContext *)</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00303">codec.h:303</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a1643932de8429a4e1af0f23f6efc8e58"><div class="ttname"><a href="os2threads_8h.html#a1643932de8429a4e1af0f23f6efc8e58">pthread_cond_broadcast</a></div><div class="ttdeci">static av_always_inline int pthread_cond_broadcast(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00162">os2threads.h:162</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="alibavcodec_2jacosubdec_8c_html_ac3a73711fd7f8a50db1c4b62e41cf852"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a></div><div class="ttdeci">const char * arg</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00066">jacosubdec.c:66</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a9b6e74e145dcb6f426dd83bcc51aa217"><div class="ttname"><a href="os2threads_8h.html#a9b6e74e145dcb6f426dd83bcc51aa217">pthread_create</a></div><div class="ttdeci">static av_always_inline int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00080">os2threads.h:80</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_a_v_codec_internal_html_aa71ee0b39b71d2decc99975c793e4445"><div class="ttname"><a href="struct_a_v_codec_internal.html#aa71ee0b39b71d2decc99975c793e4445">AVCodecInternal::pool</a></div><div class="ttdeci">AVBufferRef * pool</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00136">internal.h:136</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a6ec6ae2e7401998e8fc18a85efcafe74"><div class="ttname"><a href="struct_per_thread_context.html#a6ec6ae2e7401998e8fc18a85efcafe74">PerThreadContext::requested_flags</a></div><div class="ttdeci">int requested_flags</div><div class="ttdoc">flags passed to get_buffer() for requested_frame</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00101">pthread_frame.c:101</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa9e2952195e80d068413bdadf1569bf6">STATE_SETUP_FINISHED</a></div><div class="ttdeci">@ STATE_SETUP_FINISHED</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00064">pthread_frame.c:64</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1944f9a4f8f2e123c087e1fe7613d571"><div class="ttname"><a href="struct_a_v_codec_context.html#a1944f9a4f8f2e123c087e1fe7613d571">AVCodecContext::flags2</a></div><div class="ttdeci">int flags2</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00613">avcodec.h:613</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_a3b8e5bcf6c020a098751f02f400c1a4c"><div class="ttname"><a href="struct_frame_thread_context.html#a3b8e5bcf6c020a098751f02f400c1a4c">FrameThreadContext::threads</a></div><div class="ttdeci">PerThreadContext * threads</div><div class="ttdoc">The contexts for each thread.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00118">pthread_frame.c:118</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="astruct_a_v_h_w_accel_html_ac86c35478948dd4c3ee5619db982ee0d"><div class="ttname"><a href="struct_a_v_h_w_accel.html#ac86c35478948dd4c3ee5619db982ee0d">AVHWAccel::caps_internal</a></div><div class="ttdeci">int caps_internal</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02559">avcodec.h:2559</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a4333a67a652d73e0b1a3290de2202725"><div class="ttname"><a href="pthread__frame_8c.html#a4333a67a652d73e0b1a3290de2202725">frame_worker_thread</a></div><div class="ttdeci">static attribute_align_arg void * frame_worker_thread(void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00168">pthread_frame.c:168</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6927dc652ae6241f1dfdbad4e12d3a40"><div class="ttname"><a href="struct_a_v_codec_context.html#a6927dc652ae6241f1dfdbad4e12d3a40">AVCodecContext::level</a></div><div class="ttdeci">int level</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01982">avcodec.h:1982</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a9ad620f797a848df3977ea512316ceb3"><div class="ttname"><a href="pthread__frame_8c.html#a9ad620f797a848df3977ea512316ceb3">ff_thread_finish_setup</a></div><div class="ttdeci">void ff_thread_finish_setup(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00605">pthread_frame.c:605</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ad823755aadd6eec734c216dbb17f145d"><div class="ttname"><a href="struct_a_v_codec_context.html#ad823755aadd6eec734c216dbb17f145d">AVCodecContext::debug_mv</a></div><div class="ttdeci">int debug_mv</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02157">avcodec.h:2157</a></div></div>
<div class="ttc" id="apthread__internal_8h_html"><div class="ttname"><a href="pthread__internal_8h.html">pthread_internal.h</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gac14db824af52baf8181406e98d116097"><div class="ttname"><a href="group__avoptions.html#gac14db824af52baf8181406e98d116097">av_opt_free</a></div><div class="ttdeci">void av_opt_free(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01610">opt.c:1610</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a175c018f02630ddf4e3824b2c8b9184f"><div class="ttname"><a href="pthread__frame_8c.html#a175c018f02630ddf4e3824b2c8b9184f">ff_thread_get_buffer</a></div><div class="ttdeci">int ff_thread_get_buffer(AVCodecContext *avctx, ThreadFrame *f, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00991">pthread_frame.c:991</a></div></div>
<div class="ttc" id="astruct_a_v_codec_internal_html_a888a25d20e49fd9efc779a09e4a6cb05"><div class="ttname"><a href="struct_a_v_codec_internal.html#a888a25d20e49fd9efc779a09e4a6cb05">AVCodecInternal::hwaccel_priv_data</a></div><div class="ttdeci">void * hwaccel_priv_data</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00169">internal.h:169</a></div></div>
<div class="ttc" id="aavcodec_8h_html_adb074c59640127bdd20b187ed3c5a614"><div class="ttname"><a href="avcodec_8h.html#adb074c59640127bdd20b187ed3c5a614">FF_DEBUG_BUFFERS</a></div><div class="ttdeci">#define FF_DEBUG_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01633">avcodec.h:1633</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gadb05d71fa2ea7b7fd3e8cfc6d9065a47"><div class="ttname"><a href="group__lavc__packet.html#gadb05d71fa2ea7b7fd3e8cfc6d9065a47">av_packet_ref</a></div><div class="ttdeci">int av_packet_ref(AVPacket *dst, const AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00615">avpacket.c:615</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_aebac19f8d0808a44a775f8d1700d3c46"><div class="ttname"><a href="struct_a_v_codec.html#aebac19f8d0808a44a775f8d1700d3c46">AVCodec::close</a></div><div class="ttdeci">int(* close)(struct AVCodecContext *)</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00285">codec.h:285</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0a90b6a8e324a220e2be52d6e33038b8"><div class="ttname"><a href="struct_a_v_codec_context.html#a0a90b6a8e324a220e2be52d6e33038b8">AVCodecContext::hwaccel_flags</a></div><div class="ttdeci">int hwaccel_flags</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02287">avcodec.h:2287</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a714cabdfee3dff182363e10401689371"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a714cabdfee3dff182363e10401689371">atomic_load_explicit</a></div><div class="ttdeci">#define atomic_load_explicit(object, order)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00096">stdatomic.h:96</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a15aee1184d9f83886ae38cef62f5e281"><div class="ttname"><a href="avcodec_8h.html#a15aee1184d9f83886ae38cef62f5e281">FF_DEBUG_THREADS</a></div><div class="ttdeci">#define FF_DEBUG_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01634">avcodec.h:1634</a></div></div>
<div class="ttc" id="affprobe_8c_html_aa91b7ec8ae8a2d699fb09cc20c444fe8"><div class="ttname"><a href="ffprobe_8c.html#aa91b7ec8ae8a2d699fb09cc20c444fe8">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="ffprobe_8c_source.html#l00066">ffprobe.c:66</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_affb5449e61a7aabb9fe9bb6a8be65618"><div class="ttname"><a href="struct_per_thread_context.html#affb5449e61a7aabb9fe9bb6a8be65618">PerThreadContext::async_serializing</a></div><div class="ttdeci">int async_serializing</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00109">pthread_frame.c:109</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_ace3f325ae923771bece7e11b4f0f4c2a"><div class="ttname"><a href="pthread__frame_8c.html#ace3f325ae923771bece7e11b4f0f4c2a">async_lock</a></div><div class="ttdeci">static void async_lock(FrameThreadContext *fctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00143">pthread_frame.c:143</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a7abe7095de73df98df4895bf9e25fc6b"><div class="ttname"><a href="struct_a_v_codec_context.html#a7abe7095de73df98df4895bf9e25fc6b">AVCodecContext::profile</a></div><div class="ttdeci">int profile</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01859">avcodec.h:1859</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_a17cc5a94a61c24592ceaf05b41ce3fc2"><div class="ttname"><a href="struct_frame_thread_context.html#a17cc5a94a61c24592ceaf05b41ce3fc2">FrameThreadContext::async_mutex</a></div><div class="ttdeci">pthread_mutex_t async_mutex</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00127">pthread_frame.c:127</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a71088b17e760954bfc7198da57998134"><div class="ttname"><a href="struct_per_thread_context.html#a71088b17e760954bfc7198da57998134">PerThreadContext::debug_threads</a></div><div class="ttdeci">atomic_int debug_threads</div><div class="ttdoc">Set if the FF_DEBUG_THREADS option is set.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00111">pthread_frame.c:111</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_aa3f6cbc3d5b74d46b247469ca3247ad1"><div class="ttname"><a href="pthread__frame_8c.html#aa3f6cbc3d5b74d46b247469ca3247ad1">ff_thread_release_buffer</a></div><div class="ttdeci">void ff_thread_release_buffer(AVCodecContext *avctx, ThreadFrame *f)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00999">pthread_frame.c:999</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="acpu_8c_html_af8bdb502bd3964052fc8595b0fe721a8"><div class="ttname"><a href="cpu_8c.html#af8bdb502bd3964052fc8595b0fe721a8">av_cpu_count</a></div><div class="ttdeci">int av_cpu_count(void)</div><div class="ttdef"><b>Definition:</b> <a href="cpu_8c_source.html#l00275">cpu.c:275</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_adfe57f15d021b52f5137ff917767a525"><div class="ttname"><a href="libavutil_2internal_8h.html#adfe57f15d021b52f5137ff917767a525">attribute_align_arg</a></div><div class="ttdeci">#define attribute_align_arg</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00062">internal.h:62</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea610509eb997372e2ea71cb6b4dfb553f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea610509eb997372e2ea71cb6b4dfb553f">AV_CODEC_ID_FFV1</a></div><div class="ttdeci">@ AV_CODEC_ID_FFV1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00082">codec_id.h:82</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_ac39dd042416f1f404fe1be56bb91d97d"><div class="ttname"><a href="pthread__frame_8c.html#ac39dd042416f1f404fe1be56bb91d97d">ff_thread_decode_frame</a></div><div class="ttdeci">int ff_thread_decode_frame(AVCodecContext *avctx, AVFrame *picture, int *got_picture_ptr, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00476">pthread_frame.c:476</a></div></div>
<div class="ttc" id="avf__vaguedenoiser_8c_html_a119184041ca9d38a2ef373e1227323f9"><div class="ttname"><a href="vf__vaguedenoiser_8c.html#a119184041ca9d38a2ef373e1227323f9">copy</a></div><div class="ttdeci">static void copy(const float *p1, float *p2, const int length)</div><div class="ttdef"><b>Definition:</b> <a href="vf__vaguedenoiser_8c_source.html#l00194">vf_vaguedenoiser.c:194</a></div></div>
<div class="ttc" id="acpu_8h_html"><div class="ttname"><a href="cpu_8h.html">cpu.h</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a3c466bb4c648eb0b36c243724efe88f3"><div class="ttname"><a href="pthread__frame_8c.html#a3c466bb4c648eb0b36c243724efe88f3">async_unlock</a></div><div class="ttdeci">static void async_unlock(FrameThreadContext *fctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00152">pthread_frame.c:152</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html"><div class="ttname"><a href="struct_per_thread_context.html">PerThreadContext</a></div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00070">pthread_frame.c:70</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aedd75624ca647d2ac04b20c1eb7352e6"><div class="ttname"><a href="struct_a_v_codec_context.html#aedd75624ca647d2ac04b20c1eb7352e6">AVCodecContext::slice_offset</a></div><div class="ttdeci">int * slice_offset</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00896">avcodec.h:896</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_af5e25ad31402c1d510b2d9053368d8f0"><div class="ttname"><a href="struct_a_v_codec.html#af5e25ad31402c1d510b2d9053368d8f0">AVCodec::decode</a></div><div class="ttdeci">int(* decode)(struct AVCodecContext *, void *outdata, int *outdata_size, struct AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00284">codec.h:284</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_adbcac0e9153be6a272818ce53ffd1c68"><div class="ttname"><a href="struct_per_thread_context.html#adbcac0e9153be6a272818ce53ffd1c68">PerThreadContext::got_frame</a></div><div class="ttdeci">int got_frame</div><div class="ttdoc">The output of got_picture_ptr from the last avcodec_decode_video() call.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00087">pthread_frame.c:87</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2069</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_ab4bef17445d837f275c3367017fdcd56"><div class="ttname"><a href="struct_per_thread_context.html#ab4bef17445d837f275c3367017fdcd56">PerThreadContext::state</a></div><div class="ttdeci">atomic_int state</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00090">pthread_frame.c:90</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a39419fe5caf1d94d2c3f4dc12f41e777"><div class="ttname"><a href="struct_per_thread_context.html#a39419fe5caf1d94d2c3f4dc12f41e777">PerThreadContext::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdoc">Mutex used to protect the contents of the PerThreadContext.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00079">pthread_frame.c:79</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_abb01e291550fa3fb96188af4d494587e"><div class="ttname"><a href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">AVCodecContext::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00606">avcodec.h:606</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a85dbbd306b44b02390cd91c45e6a0f76"><div class="ttname"><a href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">AVPacket::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00362">packet.h:362</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab7bfeb9fa5840aac090e2b0bd0ef7589"><div class="ttname"><a href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">AVCodecContext::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00649">avcodec.h:649</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="aframe_8h_html"><div class="ttname"><a href="frame_8h.html">frame.h</a></div></div>
<div class="ttc" id="abuffer_8h_html"><div class="ttname"><a href="buffer_8h.html">buffer.h</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gad8fde0c159ac905909339e082a049cde"><div class="ttname"><a href="group__lavu__mem__funcs.html#gad8fde0c159ac905909339e082a049cde">av_reallocp_array</a></div><div class="ttdeci">int av_reallocp_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00206">mem.c:206</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a948993adfdfcd64b81dad1151fe50f33"><div class="ttname"><a href="struct_a_v_codec_context.html#a948993adfdfcd64b81dad1151fe50f33">AVCodecContext::delay</a></div><div class="ttdeci">int delay</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00682">avcodec.h:682</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a557b00b95b2ec41a711894e91388a2c4"><div class="ttname"><a href="struct_per_thread_context.html#a557b00b95b2ec41a711894e91388a2c4">PerThreadContext::released_buffers</a></div><div class="ttdeci">AVFrame ** released_buffers</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00096">pthread_frame.c:96</a></div></div>
<div class="ttc" id="amem_8c_html_aedc3761897b7e9ea8ae1222b3d013c94"><div class="ttname"><a href="mem_8c.html#aedc3761897b7e9ea8ae1222b3d013c94">av_mallocz_array</a></div><div class="ttdeci">void * av_mallocz_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00190">mem.c:190</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a2ce5f24ee2312281a68b40428b384bc8"><div class="ttname"><a href="struct_a_v_codec_context.html#a2ce5f24ee2312281a68b40428b384bc8">AVCodecContext::slice_flags</a></div><div class="ttdeci">int slice_flags</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01004">avcodec.h:1004</a></div></div>
<div class="ttc" id="astructpthread__t_html"><div class="ttname"><a href="structpthread__t.html">pthread_t</a></div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00044">os2threads.h:44</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a4c57837c88ef09274545ae2ebd18160a"><div class="ttname"><a href="os2threads_8h.html#a4c57837c88ef09274545ae2ebd18160a">pthread_cond_destroy</a></div><div class="ttdeci">static av_always_inline int pthread_cond_destroy(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00144">os2threads.h:144</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a116c7fb56ac57ccca3e08b80467b2a40"><div class="ttname"><a href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a></div><div class="ttdeci">#define FF_THREAD_FRAME</div><div class="ttdoc">Decode more than one frame at once.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01796">avcodec.h:1796</a></div></div>
<div class="ttc" id="aos2threads_8h_html_af75a104513c9384ace314b0a6b1a8240"><div class="ttname"><a href="os2threads_8h.html#af75a104513c9384ace314b0a6b1a8240">pthread_mutex_destroy</a></div><div class="ttdeci">static av_always_inline int pthread_mutex_destroy(pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00112">os2threads.h:112</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_abf4b66b5d6f82db38b91cf457833b60b"><div class="ttname"><a href="struct_frame_thread_context.html#abf4b66b5d6f82db38b91cf457833b60b">FrameThreadContext::next_finished</a></div><div class="ttdeci">int next_finished</div><div class="ttdoc">The next context to return output from.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00132">pthread_frame.c:132</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a3a89dbfd94ec9ab8e435cc2cec378590"><div class="ttname"><a href="struct_per_thread_context.html#a3a89dbfd94ec9ab8e435cc2cec378590">PerThreadContext::released_buffers_allocated</a></div><div class="ttdeci">int released_buffers_allocated</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00098">pthread_frame.c:98</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga09dee227d3666720eff1f6913d11699d"><div class="ttname"><a href="group__lavc__decoding.html#ga09dee227d3666720eff1f6913d11699d">avcodec_default_get_buffer2</a></div><div class="ttdeci">int avcodec_default_get_buffer2(AVCodecContext *s, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01668">decode.c:1668</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_afd0be6fff9d938e25ac289fbf19e8f18"><div class="ttname"><a href="struct_per_thread_context.html#afd0be6fff9d938e25ac289fbf19e8f18">PerThreadContext::progress_cond</a></div><div class="ttdeci">pthread_cond_t progress_cond</div><div class="ttdoc">Used by child threads to wait for progress to change.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00076">pthread_frame.c:76</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="alog_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_af51f7ff3dac8b730f46b9713e49a2518"><div class="ttname"><a href="struct_a_v_codec.html#af51f7ff3dac8b730f46b9713e49a2518">AVCodec::capabilities</a></div><div class="ttdeci">int capabilities</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00209">codec.h:209</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_ad559c29e007899c11142f0d899625397"><div class="ttname"><a href="dummy_2stdatomic_8h.html#ad559c29e007899c11142f0d899625397">atomic_store_explicit</a></div><div class="ttdeci">#define atomic_store_explicit(object, desired, order)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00090">stdatomic.h:90</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a4a64d05cc676bfa8e18bf22d16c8a51f"><div class="ttname"><a href="struct_a_v_frame.html#a4a64d05cc676bfa8e18bf22d16c8a51f">AVFrame::buf</a></div><div class="ttdeci">AVBufferRef * buf[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00499">frame.h:499</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a7b7ebce292612e17b712ad820640078b"><div class="ttname"><a href="pthread__frame_8c.html#a7b7ebce292612e17b712ad820640078b">release_delayed_buffers</a></div><div class="ttdeci">static void release_delayed_buffers(PerThreadContext *p)</div><div class="ttdoc">Releases the buffers that this decoding thread was the last user of.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00364">pthread_frame.c:364</a></div></div>
<div class="ttc" id="ahwconfig_8h_html_a6c1e3494a613e73e4b7bcd9a3b75d45d"><div class="ttname"><a href="hwconfig_8h.html#a6c1e3494a613e73e4b7bcd9a3b75d45d">HWACCEL_CAP_ASYNC_SAFE</a></div><div class="ttdeci">#define HWACCEL_CAP_ASYNC_SAFE</div><div class="ttdef"><b>Definition:</b> <a href="hwconfig_8h_source.html#l00026">hwconfig.h:26</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga709e62bc2917ffd84c5c0f4e1dfc48f7"><div class="ttname"><a href="group__lavu__frame.html#ga709e62bc2917ffd84c5c0f4e1dfc48f7">av_frame_move_ref</a></div><div class="ttdeci">void av_frame_move_ref(AVFrame *dst, AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00582">frame.c:582</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga0a2b687f9c1c5ed0089b01fd61227108"><div class="ttname"><a href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a></div><div class="ttdeci">void av_frame_unref(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00553">frame.c:553</a></div></div>
<div class="ttc" id="astruct_thread_frame_html"><div class="ttname"><a href="struct_thread_frame.html">ThreadFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2thread_8h_source.html#l00034">thread.h:34</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba79798e311e0693b01e60700bc5d68c63">STATE_SETTING_UP</a></div><div class="ttdeci">@ STATE_SETTING_UP</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00052">pthread_frame.c:52</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba9bc41441475fe4550f50ef76ecef168f">STATE_INPUT_READY</a></div><div class="ttdeci">@ STATE_INPUT_READY</div><div class="ttdoc">Set when the thread is awaiting a packet.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00051">pthread_frame.c:50</a></div></div>
<div class="ttc" id="astructpthread__cond__t_html"><div class="ttname"><a href="structpthread__cond__t.html">pthread_cond_t</a></div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00058">os2threads.h:58</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a360a2b8508a67c4234d97f4c13ba1bb5"><div class="ttname"><a href="struct_a_v_codec_context.html#a360a2b8508a67c4234d97f4c13ba1bb5">AVCodecContext::get_format</a></div><div class="ttdeci">enum AVPixelFormat(* get_format)(struct AVCodecContext *s, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00761">avcodec.h:778</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="alibswscale_2version_8h_html"><div class="ttname"><a href="libswscale_2version_8h.html">version.h</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a1105537905e4cf066ed3744d17b3da54"><div class="ttname"><a href="struct_per_thread_context.html#a1105537905e4cf066ed3744d17b3da54">PerThreadContext::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00073">pthread_frame.c:73</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8b669e043c8b064fcf991fd71e16a870"><div class="ttname"><a href="struct_a_v_codec_context.html#a8b669e043c8b064fcf991fd71e16a870">AVCodecContext::idct_algo</a></div><div class="ttdeci">int idct_algo</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01729">avcodec.h:1729</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_a1b2f2de59e63291ec6e65e5bb96e8a6e"><div class="ttname"><a href="struct_frame_thread_context.html#a1b2f2de59e63291ec6e65e5bb96e8a6e">FrameThreadContext::next_decoding</a></div><div class="ttdeci">int next_decoding</div><div class="ttdoc">The next context to submit a packet to.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00131">pthread_frame.c:131</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a64637c4de849dbe667c5dbd89d3da9fd"><div class="ttname"><a href="pthread__frame_8c.html#a64637c4de849dbe667c5dbd89d3da9fd">ff_frame_thread_init</a></div><div class="ttdeci">int ff_frame_thread_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00741">pthread_frame.c:741</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a215efed993567deadcea30a74ed05d6c"><div class="ttname"><a href="os2threads_8h.html#a215efed993567deadcea30a74ed05d6c">pthread_cond_signal</a></div><div class="ttdeci">static av_always_inline int pthread_cond_signal(pthread_cond_t *cond)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00152">os2threads.h:152</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a072fb6b4e21f7b1e1d37f9339a87afd9"><div class="ttname"><a href="pthread__frame_8c.html#a072fb6b4e21f7b1e1d37f9339a87afd9">thread_get_buffer_internal</a></div><div class="ttdeci">static int thread_get_buffer_internal(AVCodecContext *avctx, ThreadFrame *f, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00909">pthread_frame.c:909</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a88c455d2b5f5d01e03930ca16e197376"><div class="ttname"><a href="pthread__frame_8c.html#a88c455d2b5f5d01e03930ca16e197376">FrameThreadContext</a></div><div class="ttdeci">struct FrameThreadContext FrameThreadContext</div></div>
<div class="ttc" id="astruct_a_v_codec_html_a4ded9f7ec1fa1a73ea3e831428c100fa"><div class="ttname"><a href="struct_a_v_codec.html#a4ded9f7ec1fa1a73ea3e831428c100fa">AVCodec::priv_class</a></div><div class="ttdeci">const AVClass * priv_class</div><div class="ttdoc">AVClass for the private context.</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00216">codec.h:216</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga61cdb5e07d22ef10b9103cbd3ae78371"><div class="ttname"><a href="group__lavu__buffer.html#ga61cdb5e07d22ef10b9103cbd3ae78371">av_buffer_replace</a></div><div class="ttdeci">int av_buffer_replace(AVBufferRef **pdst, AVBufferRef *src)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00219">buffer.c:219</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5273a8cf73ef598d632c6eee1379d5ad"><div class="ttname"><a href="struct_a_v_codec_context.html#a5273a8cf73ef598d632c6eee1379d5ad">AVCodecContext::bits_per_coded_sample</a></div><div class="ttdeci">int bits_per_coded_sample</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01750">avcodec.h:1750</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeffc0091dc3138015b53107c8ffb04af"><div class="ttname"><a href="struct_a_v_codec_context.html#aeffc0091dc3138015b53107c8ffb04af">AVCodecContext::internal</a></div><div class="ttdeci">struct AVCodecInternal * internal</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00561">avcodec.h:561</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3f99ca3115c44e6d7772c9384faf15e6"><div class="ttname"><a href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">AVCodecContext::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00532">avcodec.h:534</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a803e2f964ea430fd2eebaf861e4cf494"><div class="ttname"><a href="struct_a_v_codec.html#a803e2f964ea430fd2eebaf861e4cf494">AVCodec::update_thread_context</a></div><div class="ttdeci">int(* update_thread_context)(struct AVCodecContext *dst, const struct AVCodecContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00253">codec.h:253</a></div></div>
<div class="ttc" id="astruct_a_v_codec_internal_html_a010e0c58d71447285e4a26cdea9d8862"><div class="ttname"><a href="struct_a_v_codec_internal.html#a010e0c58d71447285e4a26cdea9d8862">AVCodecInternal::is_copy</a></div><div class="ttdeci">int is_copy</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00126">internal.h:126</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga3f55f5bcfbb12e06c7cb1195028855e6"><div class="ttname"><a href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a></div><div class="ttdeci">#define AV_CODEC_CAP_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00075">codec.h:75</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_ad06529d60fba7c44cc63786264acf390"><div class="ttname"><a href="struct_frame_thread_context.html#ad06529d60fba7c44cc63786264acf390">FrameThreadContext::buffer_mutex</a></div><div class="ttdeci">pthread_mutex_t buffer_mutex</div><div class="ttdoc">Mutex used to protect get/release_buffer().</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00121">pthread_frame.c:121</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1ff9829b01eeb0063c21d039dcc5900d"><div class="ttname"><a href="struct_a_v_codec_context.html#a1ff9829b01eeb0063c21d039dcc5900d">AVCodecContext::sw_pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat sw_pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2076</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00093">buffer.c:93</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba35dec6732dff5101176a587be7db7161"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba35dec6732dff5101176a587be7db7161">STATE_GET_FORMAT</a></div><div class="ttdeci">@ STATE_GET_FORMAT</div><div class="ttdoc">Set after the codec has called ff_thread_finish_setup().</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00063">pthread_frame.c:62</a></div></div>
<div class="ttc" id="aos2threads_8h_html_af2ed122199f455b63a734ae9b592d286"><div class="ttname"><a href="os2threads_8h.html#af2ed122199f455b63a734ae9b592d286">pthread_cond_wait</a></div><div class="ttdeci">static av_always_inline int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00192">os2threads.h:192</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a5837cafc419c2b5ecdb1dfa330675d13"><div class="ttname"><a href="libavutil_2internal_8h.html#a5837cafc419c2b5ecdb1dfa330675d13">FF_DISABLE_DEPRECATION_WARNINGS</a></div><div class="ttdeci">#define FF_DISABLE_DEPRECATION_WARNINGS</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00084">internal.h:84</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae3c157e97ff15d46e898a538c6bc7f09"><div class="ttname"><a href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">AVCodecContext::coded_width</a></div><div class="ttdeci">int coded_width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aab9c4495feeedde28c1e908d76b7b9f5"><div class="ttname"><a href="struct_a_v_codec_context.html#aab9c4495feeedde28c1e908d76b7b9f5">AVCodecContext::opaque</a></div><div class="ttdeci">void * opaque</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00568">avcodec.h:568</a></div></div>
<div class="ttc" id="amem_8h_html"><div class="ttname"><a href="mem_8h.html">mem.h</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_a133d9f0e29862e9f1726beafc530e052"><div class="ttname"><a href="libavcodec_2internal_8h.html#a133d9f0e29862e9f1726beafc530e052">FF_CODEC_CAP_ALLOCATE_PROGRESS</a></div><div class="ttdeci">#define FF_CODEC_CAP_ALLOCATE_PROGRESS</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00075">internal.h:75</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_ab72df5e427afa9ab4020584e33a37b70"><div class="ttname"><a href="pthread__frame_8c.html#ab72df5e427afa9ab4020584e33a37b70">ff_thread_get_format</a></div><div class="ttdeci">enum AVPixelFormat ff_thread_get_format(AVCodecContext *avctx, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00909">pthread_frame.c:965</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00721">avcodec.h:736</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ga0bcbbef33c677ddbf37d423dcb9c7833"><div class="ttname"><a href="group__avoptions.html#ga0bcbbef33c677ddbf37d423dcb9c7833">av_opt_copy</a></div><div class="ttdeci">int av_opt_copy(void *dst, const void *src)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01788">opt.c:1788</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="astruct_frame_thread_context_html_af5d6b6dfd892a7b2633a0c9602d1465f"><div class="ttname"><a href="struct_frame_thread_context.html#af5d6b6dfd892a7b2633a0c9602d1465f">FrameThreadContext::hwaccel_mutex</a></div><div class="ttdeci">pthread_mutex_t hwaccel_mutex</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00126">pthread_frame.c:126</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a5840a111fd49af38c72a16ce9edb5dfb"><div class="ttname"><a href="struct_per_thread_context.html#a5840a111fd49af38c72a16ce9edb5dfb">PerThreadContext::num_released_buffers</a></div><div class="ttdeci">int num_released_buffers</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00097">pthread_frame.c:97</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a8a3a29425c8e4eb5d0b4c551b39f754e"><div class="ttname"><a href="struct_per_thread_context.html#a8a3a29425c8e4eb5d0b4c551b39f754e">PerThreadContext::avpkt</a></div><div class="ttdeci">AVPacket avpkt</div><div class="ttdoc">Input packet (for decoding) or output (for encoding).</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00084">pthread_frame.c:84</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a255bf7100a4ba6dcb6ee5d87740a4f35"><div class="ttname"><a href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">AVCodecContext::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1161</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a30b99d076ad0288b0d9bf3c931df8986"><div class="ttname"><a href="struct_a_v_codec.html#a30b99d076ad0288b0d9bf3c931df8986">AVCodec::caps_internal</a></div><div class="ttdeci">int caps_internal</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00308">codec.h:308</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a90293d12cef762b6df0139309d13fdbf"><div class="ttname"><a href="os2threads_8h.html#a90293d12cef762b6df0139309d13fdbf">pthread_cond_init</a></div><div class="ttdeci">static av_always_inline int pthread_cond_init(pthread_cond_t *cond, const pthread_condattr_t *attr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00133">os2threads.h:133</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_af8a9cbe9495fcafaa892b24b383acf96"><div class="ttname"><a href="dummy_2stdatomic_8h.html#af8a9cbe9495fcafaa892b24b383acf96">atomic_init</a></div><div class="ttdeci">#define atomic_init(obj, value)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00033">stdatomic.h:33</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac3d90275bfb1153a5b00ebc2dd32a689"><div class="ttname"><a href="struct_a_v_codec_context.html#ac3d90275bfb1153a5b00ebc2dd32a689">AVCodecContext::skip_idct</a></div><div class="ttdeci">enum AVDiscard skip_idct</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01982">avcodec.h:1997</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6e606effa68724cae2ef5cc05f7fd9cb"><div class="ttname"><a href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">AVCodecContext::codec</a></div><div class="ttdeci">const struct AVCodec * codec</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:535</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5c62b9c1528a272923ea2a4b86dea31a"><div class="ttname"><a href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">AVCodecContext::ticks_per_frame</a></div><div class="ttdeci">int ticks_per_frame</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00658">avcodec.h:658</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1154</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8ff0b000c463361e234af48d03aadfc0"><div class="ttname"><a href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">AVCodecContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdoc">samples per second</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01186">avcodec.h:1186</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_aad82c48daa57a2f86352b0dd80f486a7"><div class="ttname"><a href="pthread__frame_8c.html#aad82c48daa57a2f86352b0dd80f486a7">update_context_from_thread</a></div><div class="ttdeci">static int update_context_from_thread(AVCodecContext *dst, AVCodecContext *src, int for_user)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00245">pthread_frame.c:245</a></div></div>
<div class="ttc" id="affprobe_8c_html_a3bd1ad5edf8fc93f783af77e8cd6ee9a"><div class="ttname"><a href="ffprobe_8c.html#a3bd1ad5edf8fc93f783af77e8cd6ee9a">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="ffprobe_8c_source.html#l00062">ffprobe.c:62</a></div></div>
<div class="ttc" id="astruct_per_thread_context_html_a956246e68fa261a8bc071146d2722a1a"><div class="ttname"><a href="struct_per_thread_context.html#a956246e68fa261a8bc071146d2722a1a">PerThreadContext::progress_mutex</a></div><div class="ttdeci">pthread_mutex_t progress_mutex</div><div class="ttdoc">Mutex used to protect frame progress values and progress_cond.</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00080">pthread_frame.c:80</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
