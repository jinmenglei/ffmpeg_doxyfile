<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/fftools/ffmpeg.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_9229381fcfa7f0f68e9eaf74e7e9b0d3.html">fftools</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ffmpeg.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ffmpeg_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2000-2003 Fabrice Bellard</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;config.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="limits_8h.html">limits.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;stdatomic.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#if HAVE_IO_H</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;io.h&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#if HAVE_UNISTD_H</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avformat_8h.html">libavformat/avformat.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avdevice_8h.html">libavdevice/avdevice.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="swresample_8h.html">libswresample/swresample.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opt_8h.html">libavutil/opt.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__layout_8h.html">libavutil/channel_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="parseutils_8h.html">libavutil/parseutils.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="samplefmt_8h.html">libavutil/samplefmt.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fifo_8h.html">libavutil/fifo.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hwcontext_8h.html">libavutil/hwcontext.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="intreadwrite_8h.html">libavutil/intreadwrite.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dict_8h.html">libavutil/dict.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="display_8h.html">libavutil/display.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathematics_8h.html">libavutil/mathematics.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="pixdesc_8h.html">libavutil/pixdesc.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avstring_8h.html">libavutil/avstring.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libm_8h.html">libavutil/libm.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="timestamp_8h.html">libavutil/timestamp.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="bprint_8h.html">libavutil/bprint.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="time_8h.html">libavutil/time.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">libavutil/thread.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="threadmessage_8h.html">libavutil/threadmessage.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mathops_8h.html">libavcodec/mathops.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="os__support_8h.html">libavformat/os_support.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor"># include &quot;<a class="code" href="avfilter_8h.html">libavfilter/avfilter.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor"># include &quot;<a class="code" href="buffersrc_8h.html">libavfilter/buffersrc.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor"># include &quot;<a class="code" href="buffersink_8h.html">libavfilter/buffersink.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#if HAVE_SYS_RESOURCE_H</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#elif HAVE_GETPROCESSTIMES</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#if HAVE_GETPROCESSMEMORYINFO</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &lt;psapi.h&gt;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#if HAVE_SETCONSOLECTRLHANDLER</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#if HAVE_SYS_SELECT_H</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#include &lt;sys/select.h&gt;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#if HAVE_TERMIOS_H</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#elif HAVE_KBHIT</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor">#include &lt;conio.h&gt;</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="time_8h.html">time.h</a>&gt;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ffmpeg_8h.html">ffmpeg.h</a>&quot;</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cmdutils_8h.html">cmdutils.h</a>&quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a01a73e823e0892841a4fd2f900b85688">  109</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="ffmpeg_8c.html#a01a73e823e0892841a4fd2f900b85688">program_name</a>[] = <span class="stringliteral">&quot;ffmpeg&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#adb047c8ef284577de88f3a64fe7638e0">  110</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#adb047c8ef284577de88f3a64fe7638e0">program_birth_year</a> = 2000;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">  112</a></span>&#160;<span class="keyword">static</span> FILE *<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a1cd18e061e07695c0547d09e3dd4dcce">  114</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">const</span> <a class="code" href="ffmpeg_8c.html#a1cd18e061e07695c0547d09e3dd4dcce">forced_keyframes_const_names</a>[] = {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="stringliteral">&quot;n&quot;</span>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="stringliteral">&quot;n_forced&quot;</span>,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="stringliteral">&quot;prev_forced_n&quot;</span>,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="stringliteral">&quot;prev_forced_t&quot;</span>,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="stringliteral">&quot;t&quot;</span>,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;};</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="struct_benchmark_time_stamps.html">  123</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> {</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">  124</a></span>&#160;    int64_t <a class="code" href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">real_usec</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">  125</a></span>&#160;    int64_t <a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">  126</a></span>&#160;    int64_t <a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a556ba3dffaac6f6e98a41a843baf898b">  127</a></span>&#160;} <a class="code" href="ffmpeg_8c.html#a556ba3dffaac6f6e98a41a843baf898b">BenchmarkTimeStamps</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ad97d709b57b2a391fedb2890e6e317d2">do_video_stats</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">static</span> <a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> <a class="code" href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2">get_benchmark_time_stamps</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="ffmpeg_8c.html#a5be8624c1f375fb6ad9bd97bcc05f898">getmaxrss</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639">ifilter_has_all_input_formats</a>(<a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aedf8e88653afe069ede914d844f5121c">  134</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#aedf8e88653afe069ede914d844f5121c">run_as_daemon</a>  = 0;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">  135</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a> = 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a6e50fb6ee72b2eb86923d914ce0d5394">  136</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="ffmpeg_8c.html#a6e50fb6ee72b2eb86923d914ce0d5394">dup_warning</a> = 1000;</div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">  137</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a> = 0;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">  138</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[2];</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a9b608e8190714ba5feee307c53a74028">  140</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a9b608e8190714ba5feee307c53a74028">want_sdp</a> = 1;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">  142</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a07200fa0b8654967cb39c207a6170862">  143</a></span>&#160;<a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *<a class="code" href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">  145</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#aa80f29f39afa7345065ee7019c879980">  147</a></span>&#160;<a class="code" href="struct_input_stream.html">InputStream</a> **<a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a4d798d73986e80662044e710a8fb4984">  148</a></span>&#160;<span class="keywordtype">int</span>        <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a> = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a30b4858540ac444ef7dab2ec3b7f5be0">  149</a></span>&#160;<a class="code" href="struct_input_file.html">InputFile</a>   **<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>   = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a5f5fcdd4b6cea118793d38dfa2da4741">  150</a></span>&#160;<span class="keywordtype">int</span>        <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>   = 0;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#acab4b2fa7160415e392ae27ce59dce60">  152</a></span>&#160;<a class="code" href="struct_output_stream.html">OutputStream</a> **<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a18762b95222ff37bcce3933bf75c0ea6">  153</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a> = 0;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#adc4bdebb5c8ece97d332af967e83e2e3">  154</a></span>&#160;<a class="code" href="struct_output_file.html">OutputFile</a>   **<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>   = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a821eae86a7d18bdd5792636a8ee31d8d">  155</a></span>&#160;<span class="keywordtype">int</span>         <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>   = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a69604b80f08f69c2870b8b97da11c931">  157</a></span>&#160;<a class="code" href="struct_filter_graph.html">FilterGraph</a> **<a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a25562f714212eb22a94a33c076126461">  158</a></span>&#160;<span class="keywordtype">int</span>        <a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#if HAVE_TERMIOS_H</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/* init terminal so that we can grab keys */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>termios oldtty;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> restore_tty;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> free_input_threads(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">/* sub2video hack:</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">   Convert subtitles to video with alpha to insert them in filter graphs.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">   This is a temporary solution until libavfilter gets real subtitles support.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#adf36095ece065987e766e291e863f0d6">  176</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#adf36095ece065987e766e291e863f0d6">sub2video_get_blank_frame</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;{</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>  = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  ? ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  : ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0bd83c4ad9f5301d63e49a9f94b8cf7d">w</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> ? ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> : ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#aeecdbc3f86c3bcbf9c42ac7a867e91db">h</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a> = <a class="code" href="pixfmt_8h.html#afa47a1e5163830c51665a3da04a318a0">AV_PIX_FMT_RGB32</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__frame.html#ga6b1acbfa82c79bf7fd78d868572f0ceb">av_frame_get_buffer</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    memset(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0], 0, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height * <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[0]);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aa2e51f604857d33adbb56b536f4d7718">  191</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#aa2e51f604857d33adbb56b536f4d7718">sub2video_copy_rect</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keywordtype">int</span> dst_linesize, <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                <a class="code" href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a> *<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    uint32_t *pal, *dst2;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, *src2;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">int</span> x, y;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;type != <a class="code" href="group__lavc__core.html#gga828218dcb8874ab2c5af8d486c365421a0e577aa36b52d777c6ec5bef8625dde4">SUBTITLE_BITMAP</a>) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;sub2video: non-bitmap subtitle\n&quot;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;x &lt; 0 || <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;x + <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;w &gt; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> || <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;y &lt; 0 || <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;y + <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;h &gt; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;sub2video: rectangle (%d %d %d %d) overflowing %d %d\n&quot;</span>,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;x, <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;y, <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;w, <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;h, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    dst += <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;y * dst_linesize + <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;x * 4;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;data[0];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    pal = (uint32_t *)<a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;data[1];</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (y = 0; y &lt; <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;h; y++) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        dst2 = (uint32_t *)dst;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        src2 = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;w; x++)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            *(dst2++) = pal[*(src2++)];</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        dst += dst_linesize;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> += <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a2c1506f84f74e9af9fabdf8cc1f86b89">  222</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a2c1506f84f74e9af9fabdf8cc1f86b89">sub2video_push_ref</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0]);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a992c9fe5de3acf5dce388cffda4fdce8">last_pts</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi__buffersrc.html#ga73ed90c3c3407f36e54d65f91faaaed9">av_buffersrc_add_frame_flags</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                           <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba24758c8f4deed09b04b1be6c2e66a14e">AV_BUFFERSRC_FLAG_KEEP_REF</a> |</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                           <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba361be31bba170d5ec5bac19ce962ceb5">AV_BUFFERSRC_FLAG_PUSH</a>);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Error while add the frame to buffer source(%s).\n&quot;</span>,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                   <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a8d9e8224d0a2f354635fcaacce63acd4">  240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a8d9e8224d0a2f354635fcaacce63acd4">sub2video_update</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, int64_t heartbeat_pts, <a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a> *<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    int8_t *dst;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span>     dst_linesize;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> num_rects, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, end_pts;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>       = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts + <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;start_display_time * 1000LL,</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                 <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        end_pts   = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts + <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;end_display_time   * 1000LL,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                 <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        num_rects = <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;num_rects;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="comment">/* If we are initializing the system, utilize current heartbeat</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">           PTS as the start time, and show until the following subpicture</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">           is received. Otherwise, utilize the previous subpicture&#39;s end time</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">           as the fall-back value. */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>       = ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a15e606590596931e88ebd0b4626bfe97">initialize</a> ?</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    heartbeat_pts : ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#aaf500e3a36c6e6a6920a8e18c6478a8e">end_pts</a>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        end_pts   = INT64_MAX;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        num_rects = 0;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#adf36095ece065987e766e291e863f0d6">sub2video_get_blank_frame</a>(ist) &lt; 0) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;               <span class="stringliteral">&quot;Impossible to get a blank canvas.\n&quot;</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    dst          = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data    [0];</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    dst_linesize = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[0];</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_rects; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <a class="code" href="ffmpeg_8c.html#aa2e51f604857d33adbb56b536f4d7718">sub2video_copy_rect</a>(dst, dst_linesize, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height, <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;rects[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="ffmpeg_8c.html#a2c1506f84f74e9af9fabdf8cc1f86b89">sub2video_push_ref</a>(ist, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#aaf500e3a36c6e6a6920a8e18c6478a8e">end_pts</a> = end_pts;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a15e606590596931e88ebd0b4626bfe97">initialize</a> = 0;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a738eb950f81407f6fd85fee223606fd4">  280</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a738eb950f81407f6fd85fee223606fd4">sub2video_heartbeat</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a> *infile = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>];</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, nb_reqs;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    int64_t pts2;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="comment">/* When a frame is read from a file, examine all sub2video streams in</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">       the same file and send the sub2video frame again. Otherwise, decoded</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">       video frames could be accumulating in the filter graph while a filter</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">       (possibly overlay) is desperately waiting for a subtitle frame. */</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; infile-&gt;<a class="code" href="struct_input_file.html#afee3292b7b58207fe6fd91c8127fac19">nb_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <a class="code" href="struct_input_stream.html">InputStream</a> *ist2 = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[infile-&gt;<a class="code" href="struct_input_file.html#ac2f5772aebd0118a4c464a268dbb4d9c">ist_index</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">if</span> (!ist2-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="comment">/* subtitles seem to be usually muxed ahead of other streams;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">           if not, subtracting a larger time here is necessary */</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        pts2 = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, ist2-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>) - 1;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="comment">/* do not send the heartbeat frame if the subtitle is already ahead */</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">if</span> (pts2 &lt;= ist2-&gt;sub2video.last_pts)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> (pts2 &gt;= ist2-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#aaf500e3a36c6e6a6920a8e18c6478a8e">end_pts</a> || ist2-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a15e606590596931e88ebd0b4626bfe97">initialize</a>)</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">/* if we have hit the end of the current displayed subpicture,</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">               or if we need to initialize the system, update the</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">               overlayed subpicture and its start/end times */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <a class="code" href="ffmpeg_8c.html#a8d9e8224d0a2f354635fcaacce63acd4">sub2video_update</a>(ist2, pts2 + 1, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">for</span> (j = 0, nb_reqs = 0; j &lt; ist2-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>; j++)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            nb_reqs += <a class="code" href="group__lavfi__buffersrc.html#ga996e96007a0fda870549ac3c4e1e0967">av_buffersrc_get_nb_failed_requests</a>(ist2-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[j]-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">if</span> (nb_reqs)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <a class="code" href="ffmpeg_8c.html#a2c1506f84f74e9af9fabdf8cc1f86b89">sub2video_push_ref</a>(ist2, pts2);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aa1b7dcf7df1f398b1e33d121695b79c7">  312</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#aa1b7dcf7df1f398b1e33d121695b79c7">sub2video_flush</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#aaf500e3a36c6e6a6920a8e18c6478a8e">end_pts</a> &lt; INT64_MAX)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="ffmpeg_8c.html#a8d9e8224d0a2f354635fcaacce63acd4">sub2video_update</a>(ist, INT64_MAX, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi__buffersrc.html#ga8fc71cb48c1ad1aa78b48f87daa4cf19">av_buffersrc_add_frame</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Flush the frame error.\n&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/* end of sub2video hack */</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a9ff329d05aff252a944b937bb80d16e1">  328</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a9ff329d05aff252a944b937bb80d16e1">term_exit_sigsafe</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#if HAVE_TERMIOS_H</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span>(restore_tty)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        tcsetattr (0, TCSANOW, &amp;oldtty);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a19c97d7729be97389faaf4aaac8c3e88">  336</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a19c97d7729be97389faaf4aaac8c3e88">term_exit</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga11e329935b59b83ca722b66674f37fd4">AV_LOG_QUIET</a>, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="ffmpeg_8c.html#a9ff329d05aff252a944b937bb80d16e1">term_exit_sigsafe</a>();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">  342</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">received_sigterm</a> = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">  343</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a> = 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aff9e7184fccecd0ffcd55379bc93d477">  344</a></span>&#160;<span class="keyword">static</span> <a class="code" href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a> <a class="code" href="ffmpeg_8c.html#aff9e7184fccecd0ffcd55379bc93d477">transcode_init_done</a> = <a class="code" href="dummy_2stdatomic_8h.html#ad501bafcd2074b392f630497545de87d">ATOMIC_VAR_INIT</a>(0);</div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a7e7ee2a0542150203a78fc135a15674b">  345</a></span>&#160;<span class="keyword">static</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a7e7ee2a0542150203a78fc135a15674b">ffmpeg_exited</a> = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a478cd4ca45f6d24dd443138f3bc4a11a">  346</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a478cd4ca45f6d24dd443138f3bc4a11a">main_return_code</a> = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">  347</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">copy_ts_first_pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">  350</a></span>&#160;<a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>(<span class="keywordtype">int</span> sig)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">received_sigterm</a> = sig;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a>++;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="ffmpeg_8c.html#a9ff329d05aff252a944b937bb80d16e1">term_exit_sigsafe</a>();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a> &gt; 3) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = write(2<span class="comment">/*STDERR_FILENO*/</span>, <span class="stringliteral">&quot;Received &gt; 3 system signals, hard exiting\n&quot;</span>,</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                    strlen(<span class="stringliteral">&quot;Received &gt; 3 system signals, hard exiting\n&quot;</span>));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) { <span class="comment">/* Do nothing */</span> };</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        exit(123);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">#if HAVE_SETCONSOLECTRLHANDLER</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="keyword">static</span> BOOL WINAPI CtrlHandler(DWORD fdwCtrlType)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;\nReceived windows signal %ld\n&quot;</span>, fdwCtrlType);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">switch</span> (fdwCtrlType)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">case</span> CTRL_C_EVENT:</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">case</span> CTRL_BREAK_EVENT:</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>(SIGINT);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">case</span> CTRL_CLOSE_EVENT:</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">case</span> CTRL_LOGOFF_EVENT:</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">case</span> CTRL_SHUTDOWN_EVENT:</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>(SIGTERM);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="comment">/* Basically, with these 3 events, when we return from this method the</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">           process is hard terminated, so stall as long as we need to</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">           to try and let the main thread(s) clean up and gracefully terminate</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">           (we have at most 5 seconds, but should be done far before that). */</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="ffmpeg_8c.html#a7e7ee2a0542150203a78fc135a15674b">ffmpeg_exited</a>) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            Sleep(0);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Received unknown windows signal %ld\n&quot;</span>, fdwCtrlType);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#ac7072b9c76dd77ce9900197d0133b0ba">  396</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ac7072b9c76dd77ce9900197d0133b0ba">term_init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">#if HAVE_TERMIOS_H</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#aedf8e88653afe069ede914d844f5121c">run_as_daemon</a> &amp;&amp; <a class="code" href="ffmpeg_8h.html#a257632e7ed67e603a2b50e522412577d">stdin_interaction</a>) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keyword">struct </span>termios tty;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> (tcgetattr (0, &amp;tty) == 0) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            oldtty = tty;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            restore_tty = 1;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            tty.c_iflag &amp;= ~(IGNBRK|BRKINT|PARMRK|ISTRIP</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                             |INLCR|IGNCR|ICRNL|IXON);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            tty.c_oflag |= OPOST;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            tty.c_lflag &amp;= ~(<a class="code" href="af__aecho_8c.html#aa74d656b4802f55ddf3d3a7a1ea23502">ECHO</a>|ECHONL|ICANON|IEXTEN);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            tty.c_cflag &amp;= ~(CSIZE|PARENB);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            tty.c_cflag |= CS8;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            tty.c_cc[VMIN] = 1;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            tty.c_cc[VTIME] = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            tcsetattr (0, TCSANOW, &amp;tty);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        signal(SIGQUIT, <a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>); <span class="comment">/* Quit (POSIX).  */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    signal(SIGINT , <a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>); <span class="comment">/* Interrupt (ANSI).    */</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    signal(SIGTERM, <a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>); <span class="comment">/* Termination (ANSI).  */</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">#ifdef SIGXCPU</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    signal(SIGXCPU, <a class="code" href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#ifdef SIGPIPE</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    signal(SIGPIPE, SIG_IGN); <span class="comment">/* Broken pipe (POSIX). */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#if HAVE_SETCONSOLECTRLHANDLER</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    SetConsoleCtrlHandler((PHANDLER_ROUTINE) CtrlHandler, TRUE);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;}</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">/* read a key without blocking */</span></div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a888998656da528d50f125b39dcd1067a">  434</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a888998656da528d50f125b39dcd1067a">read_key</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ch;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">#if HAVE_TERMIOS_H</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordtype">int</span> n = 1;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keyword">struct </span>timeval tv;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    fd_set rfds;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    FD_ZERO(&amp;rfds);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    FD_SET(0, &amp;rfds);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    tv.tv_sec = 0;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    tv.tv_usec = 0;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    n = select(1, &amp;rfds, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;tv);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (n &gt; 0) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        n = read(0, &amp;ch, 1);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">if</span> (n == 1)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            <span class="keywordflow">return</span> ch;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">return</span> n;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">#elif HAVE_KBHIT</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">#    if HAVE_PEEKNAMEDPIPE</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> is_pipe;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keyword">static</span> HANDLE input_handle;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    DWORD dw, nchars;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">if</span>(!input_handle){</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        input_handle = GetStdHandle(STD_INPUT_HANDLE);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        is_pipe = !GetConsoleMode(input_handle, &amp;dw);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (is_pipe) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">/* When running under a GUI, you will end here. */</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span> (!PeekNamedPipe(input_handle, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;nchars, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="comment">// input pipe may have been closed by the program that ran ffmpeg</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="comment">//Read it</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span>(nchars != 0) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            read(0, &amp;ch, 1);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keywordflow">return</span> ch;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">#    endif</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">if</span>(kbhit())</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">return</span>(getch());</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a9beebdd76e933c60de0e18629bc9fc2e">  485</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a9beebdd76e933c60de0e18629bc9fc2e">decode_interrupt_cb</a>(<span class="keywordtype">void</span> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a> &gt; <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="ffmpeg_8c.html#aff9e7184fccecd0ffcd55379bc93d477">transcode_init_done</a>);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a3a2cd7c4434c215577d8a317cad8e3ff">  490</a></span>&#160;<span class="keyword">const</span> <a class="code" href="struct_a_v_i_o_interrupt_c_b.html">AVIOInterruptCB</a> <a class="code" href="ffmpeg_8c.html#a3a2cd7c4434c215577d8a317cad8e3ff">int_cb</a> = { <a class="code" href="ffmpeg_8c.html#a9beebdd76e933c60de0e18629bc9fc2e">decode_interrupt_cb</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aba1cc9fe65233e8e346f8da1a6a59fa8">  492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#aba1cc9fe65233e8e346f8da1a6a59fa8">ffmpeg_cleanup</a>(<span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a2b9cc93533df33a5f103f70a005cafd1">do_benchmark</a>) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordtype">int</span> maxrss = <a class="code" href="ffmpeg_8c.html#a5be8624c1f375fb6ad9bd97bcc05f898">getmaxrss</a>() / 1024;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;bench: maxrss=%ikB\n&quot;</span>, maxrss);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg = <a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="group__lavfi.html#ga871684449dac05050df238a18d0d493b">avfilter_graph_free</a>(&amp;fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; fg-&gt;<a class="code" href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">nb_inputs</a>; j++) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter = fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[j];</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keyword">struct </span><a class="code" href="struct_input_stream.html">InputStream</a> *ist = ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>)) {</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                <a class="code" href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>, &amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                     <span class="keyword">sizeof</span>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <a class="code" href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a>(&amp;ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                <span class="keywordflow">while</span> (<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>)) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                    <a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a> <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    <a class="code" href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                                         &amp;<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>, <span class="keyword">sizeof</span>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    <a class="code" href="group__lavc__core.html#gaa2c3e02a761d9fc0c5c9b2340408c332">avsubtitle_free</a>(&amp;<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <a class="code" href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <a class="code" href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a>(&amp;ifilter-&gt;<a class="code" href="struct_input_filter.html#a05a22838e8069f8fdabba7686809494c">hw_frames_ctx</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ifilter-&gt;<a class="code" href="struct_input_filter.html#a09efa5b4f05e3ca7c08c7ac949466556">name</a>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[j]);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; fg-&gt;<a class="code" href="struct_filter_graph.html#a92c7f6faf7e95b259bce1c717d43b4ee">nb_outputs</a>; j++) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <a class="code" href="struct_output_filter.html">OutputFilter</a> *ofilter = fg-&gt;<a class="code" href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">outputs</a>[j];</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;            <a class="code" href="group__lavfi.html#ga294500a9856260eb1552354fd9d9a6c4">avfilter_inout_free</a>(&amp;ofilter-&gt;<a class="code" href="struct_output_filter.html#a1571021ae59382241c925f7ee613cd7d">out_tmp</a>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ofilter-&gt;<a class="code" href="struct_output_filter.html#a7713667d07c3f7605e6dd24f0ca19940">name</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ofilter-&gt;<a class="code" href="struct_output_filter.html#acd4f04cfb3db05beef2507e397aef9aa">formats</a>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ofilter-&gt;<a class="code" href="struct_output_filter.html#a4f141db3516fc737c8876f817a68b16b">channel_layouts</a>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ofilter-&gt;<a class="code" href="struct_output_filter.html#a9f66eff9402b2790dfcea63a0010aecc">sample_rates</a>);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fg-&gt;<a class="code" href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">outputs</a>[j]);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fg-&gt;<a class="code" href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">outputs</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;fg-&gt;<a class="code" href="struct_filter_graph.html#ad45139bb5ec5c7766be0b216f9c8c2c4">graph_desc</a>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">/* close files */</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">if</span> (!of)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat &amp;&amp; !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a>))</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <a class="code" href="avio_8h.html#ae118a1f37f1e48617609ead9910aac15">avio_closep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <a class="code" href="group__lavf__core.html#gac2990b13b68e831a408fce8e1d0d6445">avformat_free_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;of-&gt;<a class="code" href="struct_output_file.html#aac74ddf07f90ad30cd5ddf80583468ec">opts</a>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="group__lavc__core.html#ga08d53431e76355f88e27763b1940df4f">av_bsf_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;bsf_ctx);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filtered_frame);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="eval_8c.html#a01c05d7049a9208c2b22147a3f16c58c">av_expr_free</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_pexpr);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;avfilter);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile_prefix);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;audio_channels_map);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;audio_channels_mapped = 0;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sws_dict);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;swr_opts);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="group__lavc__core.html#gaf869d0829ed607cec3a4a02a1c7026b3">avcodec_free_context</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <a class="code" href="codec__par_8h.html#a950c8da55b8112077e640b6a0cb8cf36">avcodec_parameters_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;ref_par);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue)) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <a class="code" href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keyword">sizeof</span>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            }</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            <a class="code" href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    free_input_threads();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <a class="code" href="group__lavf__decoding.html#gae804b99aec044690162b8b9b110236a4">avformat_close_input</a>(&amp;<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <a class="code" href="group__lavc__core.html#gaa2c3e02a761d9fc0c5c9b2340408c332">avsubtitle_free</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae48685e82826c6b5922014d47e2cb6bb">hwaccel_device</a>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <a class="code" href="group__lavc__core.html#gaf869d0829ed607cec3a4a02a1c7026b3">avcodec_free_context</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">if</span> (fclose(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>))</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                   <span class="stringliteral">&quot;Error closing vstats file, loss of information possible: %s\n&quot;</span>,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                   <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(errno)));</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8h.html#a888da811ed2e3af55edb9d9d49d4295f">vstats_filename</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="cmdutils_8c.html#ac58552bde3a215ae94a3bd114577cbee">uninit_opts</a>();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="group__lavf__core.html#ga245f2875f80ce67ec3d1e0f54dacf2c4">avformat_network_deinit</a>();</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">received_sigterm</a>) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Exiting normally, received signal %d.\n&quot;</span>,</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;               (<span class="keywordtype">int</span>) <a class="code" href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">received_sigterm</a>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &amp;&amp; <a class="code" href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a>(&amp;<a class="code" href="ffmpeg_8c.html#aff9e7184fccecd0ffcd55379bc93d477">transcode_init_done</a>)) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Conversion failed!\n&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="ffmpeg_8c.html#a19c97d7729be97389faaf4aaac8c3e88">term_exit</a>();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="ffmpeg_8c.html#a7e7ee2a0542150203a78fc135a15674b">ffmpeg_exited</a> = 1;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#aa34a84957adf117f712efcb6cbfd834f">  650</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#aa34a84957adf117f712efcb6cbfd834f">remove_avoptions</a>(<a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> **<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *t = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">while</span> ((t = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, <span class="stringliteral">&quot;&quot;</span>, t, <a class="code" href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a>))) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, t-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">key</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__dict.html#gad9cbc53cec515b72ae7caa2e194c6bc0">AV_DICT_MATCH_CASE</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;}</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#aeceadb162c07ff048a54d0d70cc851fb">  659</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#aeceadb162c07ff048a54d0d70cc851fb">assert_avoptions</a>(<a class="code" href="struct_a_v_dictionary.html">AVDictionary</a> *m)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *t;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> ((t = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(m, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a>))) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Option %s not found.\n&quot;</span>, t-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">key</a>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a33407e9015714983ecce9cfd2c3bb41f">  668</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a33407e9015714983ecce9cfd2c3bb41f">abort_codec_experimental</a>(<a class="code" href="struct_a_v_codec.html">AVCodec</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <span class="keywordtype">int</span> encoder)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;{</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;}</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">  673</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;{</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#ad87050cf933e8938bd511dbd295a8848">do_benchmark_all</a>) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> t = <a class="code" href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2">get_benchmark_time_stamps</a>();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        va_list va;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="keywordtype">char</span> buf[1024];</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> (fmt) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            va_start(va, fmt);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            <a class="code" href="snprintf_8h.html#a00ba2ca988495904efc418acbf0627d7">vsnprintf</a>(buf, <span class="keyword">sizeof</span>(buf), fmt, va);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            va_end(va);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>,</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                   <span class="stringliteral">&quot;bench: %8&quot;</span> PRIu64 <span class="stringliteral">&quot; user %8&quot;</span> PRIu64 <span class="stringliteral">&quot; sys %8&quot;</span> PRIu64 <span class="stringliteral">&quot; real %s \n&quot;</span>,</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                   t.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a> - <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a>,</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                   t.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a> - <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a>,</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                   t.<a class="code" href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">real_usec</a> - <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>.<a class="code" href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">real_usec</a>, buf);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a> = t;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;}</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ac237321f98a7041c9f6004d2ce8a425c">  694</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ac237321f98a7041c9f6004d2ce8a425c">close_all_output_streams</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31">OSTFinished</a> this_stream, <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31">OSTFinished</a> others)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;{</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *ost2 = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        ost2-&gt;<a class="code" href="struct_output_stream.html#a2cb215b02eb510c4b19947063a5d5bd8">finished</a> |= <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> == ost2 ? this_stream : others;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">  703</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <span class="keywordtype">int</span> unqueue)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;{</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="comment">     * Audio encoders may split the packets --  #frames in != #packets out.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">     * But there is no reordering, so we can limit the number of output packets</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">     * by simply dropping them here.</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">     * Counting encoded video frames needs to be done separately because of</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">     * reordering, see do_video_out().</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">     * Do not count the packet when unqueued because it has been counted when queued.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed) &amp;&amp; !unqueue) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number &gt;= <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;max_frames) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number++;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (!of-&gt;<a class="code" href="struct_output_file.html#a7f831b66ccff154c4e9d880d900e5b3f">header_written</a>) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> tmp_pkt = {0};</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">/* the muxer is not initialized yet, buffer the packet */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2fifo_8c.html#ac1e0d8ee7f1568cb40fa95a740c60f13">av_fifo_space</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue)) {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> are_we_over_size =</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue_data_size + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>) &gt; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue_data_threshold;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            <span class="keywordtype">int</span> new_size = are_we_over_size ?</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                           <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(2 * <a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue),</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                                 <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;max_muxing_queue_size) :</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                           2 * <a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">if</span> (new_size &lt;= <a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue)) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                       <span class="stringliteral">&quot;Too many packets buffered for output stream %d:%d.\n&quot;</span>,</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                       <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavutil_2fifo_8c.html#aeaf7aa802f3b18fef86bb72445eff5d8">av_fifo_realloc2</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue, new_size);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__packet.html#ga8a6deff6c1809029037ffd760db3e0d4">av_packet_make_refcounted</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <a class="code" href="group__lavc__packet.html#ga91dbb1359f99547adb544ee96a406b21">av_packet_move_ref</a>(&amp;tmp_pkt, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue_data_size += tmp_pkt.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue, &amp;tmp_pkt, <span class="keyword">sizeof</span>(tmp_pkt), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; <a class="code" href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a> == <a class="code" href="ffmpeg_8h.html#a16386b3f2344042c2a72b9143f09fcfa">VSYNC_DROP</a>) ||</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        (<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp; <a class="code" href="ffmpeg_8h.html#a8d030f80a6336997e85f819eba6e1b2c">audio_sync_method</a> &lt; 0))</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *sd = <a class="code" href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a8b58774a0ff03f493edda6685967ad51">AV_PKT_DATA_QUALITY_STATS</a>,</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                                              <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;quality = sd ? <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(sd) : -1;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;pict_type = sd ? sd[4] : <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea33183189d771e3325ccdd36fa980b6f6">AV_PICTURE_TYPE_NONE</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;error); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">if</span> (sd &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sd[5])</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;error[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="avr32_2intreadwrite_8h.html#a4b838e76f70c011eda1fa44695041c75">AV_RL64</a>(sd + 8 + 8*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;error[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = -1;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;is_cfr) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> &gt; 0)</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Overriding packet duration by frame rate, this should not happen\n&quot;</span>);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(1, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate),</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                         <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>)) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &gt; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid DTS: %&quot;</span>PRId64<span class="stringliteral">&quot; PTS: %&quot;</span>PRId64<span class="stringliteral">&quot; in output stream %d:%d, replacing by guess\n&quot;</span>,</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                   <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> =</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> + <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts + 1</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                     - <a class="code" href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts + 1)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                     - <a class="code" href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts + 1);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> || <a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> || <a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>) &amp;&amp;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            !(<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a> &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;stream_copy) &amp;&amp;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            int64_t <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts + !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;oformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a918dc7abf0d4f7abd36a2ea2a594feaf">AVFMT_TS_NONSTRICT</a>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &lt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                <span class="keywordtype">int</span> loglevel = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &gt; 2 || <a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> ? <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a> : <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                    loglevel = <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, loglevel, <span class="stringliteral">&quot;Non-monotonous DTS in output stream &quot;</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                       <span class="stringliteral">&quot;%d:%d; previous: %&quot;</span>PRId64<span class="stringliteral">&quot;, current: %&quot;</span>PRId64<span class="stringliteral">&quot;; &quot;</span>,</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                       <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>) {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;aborting.\n&quot;</span>);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, loglevel, <span class="stringliteral">&quot;changing to %&quot;</span>PRId64<span class="stringliteral">&quot;. This may result &quot;</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                       <span class="stringliteral">&quot;in incorrect timestamps in the output file.\n&quot;</span>,</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                       <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &gt;= <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_mux_dts = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size += <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;packets_written++;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;muxer &lt;- type:%s &quot;</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                <span class="stringliteral">&quot;pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s size:%d\n&quot;</span>,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                <a class="code" href="group__lavu__misc.html#gaf21645cfa855b2caf9699d7dc7b2d08e">av_get_media_type_string</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_type),</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;              );</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1">av_interleaved_write_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="cmdutils_8c.html#a2911387e778b01a25f0e65eabadf1b7b">print_error</a>(<span class="stringliteral">&quot;av_interleaved_write_frame()&quot;</span>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <a class="code" href="ffmpeg_8c.html#a478cd4ca45f6d24dd443138f3bc4a11a">main_return_code</a> = 1;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        <a class="code" href="ffmpeg_8c.html#ac237321f98a7041c9f6004d2ce8a425c">close_all_output_streams</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31ae8b7f720076ace3e8c20648c8b77835b">MUXER_FINISHED</a> | <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7">ENCODER_FINISHED</a>, <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7">ENCODER_FINISHED</a>);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">  846</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished |= <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7">ENCODER_FINISHED</a>;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_output_file.html#acfef99893985d28ae7f7f6a92e6d1bd7">shortest</a>) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        int64_t <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts - <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;first_pts, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        of-&gt;<a class="code" href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">recording_time</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(of-&gt;<a class="code" href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">recording_time</a>, <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;}</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment"> * Send a single packet to the output, applying any bitstream filters</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment"> * associated with the output stream.  This may result in any number</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment"> * of packets actually being written, depending on what bitstream</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment"> * filters are applied.  The supplied packet is consumed and will be</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment"> * blank (as if newly-allocated) when this function returns.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment"> * If eof is set, instead indicate EOF to all bitstream filters and</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment"> * therefore flush any delayed packets to the output.  A blank packet</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment"> * must be supplied in this case.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">  868</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                          <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <span class="keywordtype">int</span> eof)</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;{</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; </div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment">/* apply the output bitstream filters */</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;bsf_ctx) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#gaada9ea8f08d3dcf23c14564dbc88992c">av_bsf_send_packet</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;bsf_ctx, eof ? <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <span class="keywordflow">while</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga7fffb6c87b91250956e7a2367af56b38">av_bsf_receive_packet</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;bsf_ctx, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) &gt;= 0)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            <a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>(of, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN))</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!eof)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>(of, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<a class="code" href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a>:</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error applying bitstream filters to an output &quot;</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;               <span class="stringliteral">&quot;packet for stream #%d:%d.\n&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;}</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; </div>
<div class="line"><a name="l00894"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a2fc10262dc3c90f4c4d0cdac1fdd8991">  894</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a2fc10262dc3c90f4c4d0cdac1fdd8991">check_recording_time</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;{</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">recording_time</a> != INT64_MAX &amp;&amp;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="group__lavu__math.html#ga151744358fff630942b926e67e67c415">av_compare_ts</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts - <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;first_pts, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, of-&gt;<a class="code" href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">recording_time</a>,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                      <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>) &gt;= 0) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        <a class="code" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#abc5e61273039380ac14ed7b0a3cce725">  907</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="ffmpeg_8c.html#abc5e61273039380ac14ed7b0a3cce725">adjust_frame_pts_to_encoder_tb</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>,</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                             <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;{</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">double</span> float_pts = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>; <span class="comment">// this is identical to frame.pts but with higher precision</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> || <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> ||</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        !enc || !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter || !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;graph)</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <span class="keywordflow">goto</span> early_exit;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        int64_t <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> = (of-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) ? 0 : of-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="struct_a_v_rational.html">AVRational</a> filter_tb = <a class="code" href="group__lavfi__buffersink__accessors.html#gabc82f65ec7f4fa47c5216260639258a1">av_buffersink_get_time_base</a>(<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a> = enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="intrax8_8c.html#ab7fb8460bc7af9e005bc1369f710bfbd">extra_bits</a> = av_clip(29 - <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a>.den), 0, 16);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a>.den &lt;&lt;= <a class="code" href="intrax8_8c.html#ab7fb8460bc7af9e005bc1369f710bfbd">extra_bits</a>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        float_pts =</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;            <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts, filter_tb, <a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a>) -</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, <a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a>);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        float_pts /= 1 &lt;&lt; <a class="code" href="intrax8_8c.html#ab7fb8460bc7af9e005bc1369f710bfbd">extra_bits</a>;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="comment">// avoid exact midoints to reduce the chance of rounding differences, this can be removed in case the fps code is changed to work with integers</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        float_pts += <a class="code" href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a>(float_pts) * 1.0 / (1&lt;&lt;17);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts =</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts, filter_tb, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>) -</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160; </div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;early_exit:</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;filter -&gt; pts:%s pts_time:%s exact:%f time_base:%d/%d\n&quot;</span>,</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;               <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> ? <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts) : <span class="stringliteral">&quot;NULL&quot;</span>,</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;               <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a> ? <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>) : <span class="stringliteral">&quot;NULL&quot;</span>,</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;               float_pts,</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;               enc ? enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> : -1,</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;               enc ? enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> : -1);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">return</span> float_pts;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;}</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a906f8498cdec75ab84457f6b929115c6">init_output_stream</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                              <span class="keywordtype">char</span> *<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, <span class="keywordtype">int</span> error_len);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">  954</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fatal)</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>[1024] = {0};</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;initialized)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a906f8498cdec75ab84457f6b929115c6">init_output_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, <span class="keyword">sizeof</span>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>));</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error initializing output stream %d:%d -- %s\n&quot;</span>,</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;               <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">if</span> (fatal)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a18033581df001bc68ef11676eb7040bd">  975</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a18033581df001bc68ef11676eb7040bd">do_audio_out</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>,</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                         <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = 0;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <a class="code" href="ffmpeg_8c.html#abc5e61273039380ac14ed7b0a3cce725">adjust_frame_pts_to_encoder_tb</a>(of, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a2fc10262dc3c90f4c4d0cdac1fdd8991">check_recording_time</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>))</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> || <a class="code" href="ffmpeg_8h.html#a8d030f80a6336997e85f819eba6e1b2c">audio_sync_method</a> &lt; 0)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts + <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;samples_encoded += <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frames_encoded++;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> || !<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;encoder &lt;- type:audio &quot;</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;               <span class="stringliteral">&quot;frame_pts:%s frame_pts_time:%s time_base:%d/%d\n&quot;</span>,</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;pts, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>),</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;               enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga9395cb802a5febf1f00df31497779169">avcodec_send_frame</a>(enc, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga5b8eff59cf259747cf0b31563e38ded6">avcodec_receive_packet</a>(enc, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN))</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<span class="stringliteral">&quot;encode_audio %d.%d&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <a class="code" href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;encoder -&gt; type:audio &quot;</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                   <span class="stringliteral">&quot;pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s\n&quot;</span>,</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                   <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>),</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                   <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>));</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Audio encoding failed\n&quot;</span>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a2af61470284cfd849344d6a5fdd3257c"> 1037</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a2af61470284cfd849344d6a5fdd3257c">do_subtitle_out</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of,</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                            <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>,</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                            <a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a> *<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;{</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordtype">int</span> subtitle_out_max_size = 1024 * 1024;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordtype">int</span> subtitle_out_size, nb, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Subtitle packets must have a pts\n&quot;</span>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a>) {</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a> = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(subtitle_out_max_size);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a>) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Failed to allocate subtitle_out\n&quot;</span>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">/* Note: DVB subtitle need one packet to draw them and one other</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">       packet to clear them */</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">/* XXX: signal it in the codec context ? */</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1a3f67e556cc61335c6f001ae3c7069f">AV_CODEC_ID_DVB_SUBTITLE</a>)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        nb = 2;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        nb = 1;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="comment">/* shift timestamp to honor -ss and make check_recording_time() work with -t */</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index]-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> -= <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index]-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a>;</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordtype">unsigned</span> save_num_rects = <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;num_rects;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a2fc10262dc3c90f4c4d0cdac1fdd8991">check_recording_time</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>))</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="comment">// start_display_time is required to be 0</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts               += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;start_display_time, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ 1, 1000 }, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;end_display_time  -= <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;start_display_time;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;start_display_time = 0;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 1)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;            <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;num_rects = 0;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frames_encoded++;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        subtitle_out_size = <a class="code" href="group__lavc__encoding.html#ga37be256d85d78f665df27ad6c8f1d65b">avcodec_encode_subtitle</a>(enc, <a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a>,</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                                                    subtitle_out_max_size, <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 1)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;num_rects = save_num_rects;</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <span class="keywordflow">if</span> (subtitle_out_size &lt; 0) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Subtitle encoding failed\n&quot;</span>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a>;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = subtitle_out_size;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>  = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;pts, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;end_display_time, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ 1, 1000 }, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">if</span> (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1a3f67e556cc61335c6f001ae3c7069f">AV_CODEC_ID_DVB_SUBTITLE</a>) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <span class="comment">/* XXX: the pts correction is handled here. Maybe handling</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">               it in the codec would be better */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> == 0)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;start_display_time, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ 1, 1000 }, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a>-&gt;end_display_time, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ 1, 1000 }, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a33a912b98c7c73e52a0ab9cc4e11b995"> 1120</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a33a912b98c7c73e52a0ab9cc4e11b995">do_video_out</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of,</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                         <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                         <a class="code" href="struct_a_v_frame.html">AVFrame</a> *next_picture)</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;{</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, format_video_sync;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> frame_rate;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordtype">int</span> nb_frames, nb0_frames, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, delta0;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = 0;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="keywordtype">double</span> sync_ipts = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = 0;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, next_picture, 1);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    sync_ipts = <a class="code" href="ffmpeg_8c.html#abc5e61273039380ac14ed7b0a3cce725">adjust_frame_pts_to_encoder_tb</a>(of, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, next_picture);</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160; </div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index &gt;= 0)</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index];</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160; </div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    frame_rate = <a class="code" href="group__lavfi__buffersink__accessors.html#ga55614fd28de2fa05b04f427390061d5b">av_buffersink_get_frame_rate</a>(<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">if</span> (frame_rate.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &gt; 0 &amp;&amp; frame_rate.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &gt; 0)</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = 1/(<a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(frame_rate) * <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>));</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">if</span>(ist &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a1e341587fa92b173a0d6ae73fadb0409">first_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num)</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, 1/(<a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate) * <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>)));</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filters_script &amp;&amp;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;        !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filters &amp;&amp;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;        (<a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a> == 0 || !<a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>[0]-&gt;<a class="code" href="struct_filter_graph.html#ad45139bb5ec5c7766be0b216f9c8c2c4">graph_desc</a>) &amp;&amp;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        next_picture &amp;&amp;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        ist &amp;&amp;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(next_picture-&gt;<a class="code" href="struct_a_v_frame.html#a385c44d7cafe80cad82fe46e25cab221">pkt_duration</a> * <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>) / <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>)) &gt; 0) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(next_picture-&gt;<a class="code" href="struct_a_v_frame.html#a385c44d7cafe80cad82fe46e25cab221">pkt_duration</a> * <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>) / <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>));</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    }</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160; </div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">if</span> (!next_picture) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <span class="comment">//end, flushing</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        nb0_frames = nb_frames = <a class="code" href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames[0],</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                                          <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames[1],</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                                          <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames[2]);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        delta0 = sync_ipts - <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts; <span class="comment">// delta0 is the &quot;drift&quot; between the input frame (next_picture) and where it would fall in the output.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>  = delta0 + <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <span class="comment">/* by default, we output a single frame */</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        nb0_frames = 0; <span class="comment">// tracks the number of times the PREVIOUS frame should be duplicated, mostly for variable framerate (VFR)</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        nb_frames = 1;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;        format_video_sync = <a class="code" href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <span class="keywordflow">if</span> (format_video_sync == <a class="code" href="ffmpeg_8h.html#a7a29c56248090da0d5fb37a87b9a695d">VSYNC_AUTO</a>) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            <span class="keywordflow">if</span>(!strcmp(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>, <span class="stringliteral">&quot;avi&quot;</span>)) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                format_video_sync = <a class="code" href="ffmpeg_8h.html#ae4d5327ac60265779027253e0f6ca4dc">VSYNC_VFR</a>;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                format_video_sync = (of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">flags</a> &amp; <a class="code" href="avformat_8h.html#a4d9f21e76a3bf919c74ea40957ef21a7">AVFMT_VARIABLE_FPS</a>) ? ((of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">flags</a> &amp; <a class="code" href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a>) ? <a class="code" href="ffmpeg_8h.html#ad997d298e58562365e7011c3d2fdd811">VSYNC_PASSTHROUGH</a> : <a class="code" href="ffmpeg_8h.html#ae4d5327ac60265779027253e0f6ca4dc">VSYNC_VFR</a>) : <a class="code" href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            <span class="keywordflow">if</span> (   ist</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                &amp;&amp; format_video_sync == <a class="code" href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                &amp;&amp; <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a4062ac530db413964aa76090995b85cd">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a> == 1</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                &amp;&amp; <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a4ffe49e7403ae36ac4bdff5a7a0a3486">input_ts_offset</a> == 0) {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                format_video_sync = <a class="code" href="ffmpeg_8h.html#ad58e98727fde6229cee5d33aaec6d787">VSYNC_VSCFR</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            }</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="keywordflow">if</span> (format_video_sync == <a class="code" href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a> &amp;&amp; <a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a>) {</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                format_video_sync = <a class="code" href="ffmpeg_8h.html#ad58e98727fde6229cee5d33aaec6d787">VSYNC_VSCFR</a>;</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;            }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        }</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;is_cfr = (format_video_sync == <a class="code" href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a> || format_video_sync == <a class="code" href="ffmpeg_8h.html#ad58e98727fde6229cee5d33aaec6d787">VSYNC_VSCFR</a>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        <span class="keywordflow">if</span> (delta0 &lt; 0 &amp;&amp;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            format_video_sync != <a class="code" href="ffmpeg_8h.html#ad997d298e58562365e7011c3d2fdd811">VSYNC_PASSTHROUGH</a> &amp;&amp;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            format_video_sync != <a class="code" href="ffmpeg_8h.html#a16386b3f2344042c2a72b9143f09fcfa">VSYNC_DROP</a>) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            <span class="keywordflow">if</span> (delta0 &lt; -0.6) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Past duration %f too large\n&quot;</span>, -delta0);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Clipping frame in rate conversion by %f\n&quot;</span>, -delta0);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            sync_ipts = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> += delta0;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            delta0 = 0;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">switch</span> (format_video_sync) {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="ffmpeg_8h.html#ad58e98727fde6229cee5d33aaec6d787">VSYNC_VSCFR</a>:</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number == 0 &amp;&amp; delta0 &gt;= 0.5) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Not duplicating %d initial frames\n&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(delta0));</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                delta0 = 0;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts = <a class="code" href="libm_8h.html#a220c7fd7006446ff6f373833bdc847ba">llrint</a>(sync_ipts);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a>:</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            <span class="comment">// FIXME set to 0.5 after we fix some dts/pts bugs like in avidec.c</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a5b01f541872e13c9a239486b77ae218e">frame_drop_threshold</a> &amp;&amp; delta &lt; frame_drop_threshold &amp;&amp; ost-&gt;frame_number) {</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                nb_frames = 0;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &lt; -1.1)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                nb_frames = 0;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt; 1.1) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                nb_frames = <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                <span class="keywordflow">if</span> (delta0 &gt; 1.1)</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                    nb0_frames = <a class="code" href="libm_8h.html#af1370021d215283273ef203f8260b7ee">llrintf</a>(delta0 - 0.6);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="ffmpeg_8h.html#ae4d5327ac60265779027253e0f6ca4dc">VSYNC_VFR</a>:</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &lt;= -0.6)</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                nb_frames = 0;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt; 0.6)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts = <a class="code" href="libm_8h.html#a220c7fd7006446ff6f373833bdc847ba">llrint</a>(sync_ipts);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="ffmpeg_8h.html#a16386b3f2344042c2a72b9143f09fcfa">VSYNC_DROP</a>:</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="ffmpeg_8h.html#ad997d298e58562365e7011c3d2fdd811">VSYNC_PASSTHROUGH</a>:</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts = <a class="code" href="libm_8h.html#a220c7fd7006446ff6f373833bdc847ba">llrint</a>(sync_ipts);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(0);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    nb_frames = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(nb_frames, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;max_frames - <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    nb0_frames = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(nb0_frames, nb_frames);</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    memmove(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames + 1,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames,</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            <span class="keyword">sizeof</span>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames[0]) * (<a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames) - 1));</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_nb0_frames[0] = nb0_frames;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">if</span> (nb0_frames == 0 &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_dropped) {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a>++;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>,</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;               <span class="stringliteral">&quot;*** dropping frame %d from stream %d at ts %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;               <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame-&gt;pts);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">if</span> (nb_frames &gt; (nb0_frames &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_dropped) + (nb_frames &gt; nb0_frames)) {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        <span class="keywordflow">if</span> (nb_frames &gt; <a class="code" href="ffmpeg_8h.html#a484dd0b82131430527f4d4563a325e02">dts_error_threshold</a> * 30) {</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;%d frame duplication too large, skipping\n&quot;</span>, nb_frames - 1);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a>++;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <a class="code" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a> += nb_frames - (nb0_frames &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_dropped) - (nb_frames &gt; nb0_frames);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;*** %d dup!\n&quot;</span>, nb_frames - 1);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a> &gt; <a class="code" href="ffmpeg_8c.html#a6e50fb6ee72b2eb86923d914ce0d5394">dup_warning</a>) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;More than %d frames duplicated\n&quot;</span>, <a class="code" href="ffmpeg_8c.html#a6e50fb6ee72b2eb86923d914ce0d5394">dup_warning</a>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            <a class="code" href="ffmpeg_8c.html#a6e50fb6ee72b2eb86923d914ce0d5394">dup_warning</a> *= 10;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    }</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_dropped = nb_frames == nb0_frames &amp;&amp; next_picture;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="comment">/* duplicates frame if needed */</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_frames; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="struct_a_v_frame.html">AVFrame</a> *in_picture;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordtype">int</span> forced_keyframe = 0;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="keywordtype">double</span> pts_time;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = 0;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;        <span class="keywordflow">if</span> (i &lt; nb0_frames &amp;&amp; ost-&gt;last_frame) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;            in_picture = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            in_picture = next_picture;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">if</span> (!in_picture)</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a2fc10262dc3c90f4c4d0cdac1fdd8991">check_recording_time</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>))</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a791c071afd3e95fcae14cb781829754d">quality</a> = enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a209f5ec60cb5f0b0a4962f4c5c5bb541">global_quality</a>;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        in_picture-&gt;<a class="code" href="struct_a_v_frame.html#af9920fc3fbfa347b8943ae461b50d18b">pict_type</a> = 0;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_ref_pts == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_ref_pts = in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        pts_time = in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> ?</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;            (in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> - <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_ref_pts) * <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>) : <a class="code" href="mathematics_8h.html#a8abfcc76130f3f991d124dd22d7e69bc">NAN</a>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_index &lt; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_count &amp;&amp;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> &gt;= <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_pts[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_index]) {</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_index++;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            forced_keyframe = 1;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_pexpr) {</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            <span class="keywordtype">double</span> res;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a7ea9b7f772135312dec60fcf7b0973de">FKF_T</a>] = pts_time;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            res = <a class="code" href="eval_8c.html#a569b6171b99e02f899d9ba8b5545cc27">av_expr_eval</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_pexpr,</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                               <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;force_key_frame: n:%f n_forced:%f prev_forced_n:%f t:%f prev_forced_t:%f -&gt; res:%f\n&quot;</span>,</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508affb3715058142056c2f602c81e52c15b">FKF_N</a>],</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508af7bb0577a3c487398eaf009668f9c531">FKF_N_FORCED</a>],</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a522165f39cb8f0acf7c4bdebd1beb18a">FKF_PREV_FORCED_N</a>],</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a7ea9b7f772135312dec60fcf7b0973de">FKF_T</a>],</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508aa4cb3dbc7a44f39776072f4349d1facc">FKF_PREV_FORCED_T</a>],</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                    res);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">if</span> (res) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                forced_keyframe = 1;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a522165f39cb8f0acf7c4bdebd1beb18a">FKF_PREV_FORCED_N</a>] =</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508affb3715058142056c2f602c81e52c15b">FKF_N</a>];</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508aa4cb3dbc7a44f39776072f4349d1facc">FKF_PREV_FORCED_T</a>] =</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a7ea9b7f772135312dec60fcf7b0973de">FKF_T</a>];</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508af7bb0577a3c487398eaf009668f9c531">FKF_N_FORCED</a>] += 1;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508affb3715058142056c2f602c81e52c15b">FKF_N</a>] += 1;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                   &amp;&amp; !strncmp(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes, <span class="stringliteral">&quot;source&quot;</span>, 6)</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                   &amp;&amp; in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a3649a81e8414a193d685a6eee06ce902">key_frame</a>==1</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                   &amp;&amp; !<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            forced_keyframe = 1;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">if</span> (forced_keyframe) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            in_picture-&gt;<a class="code" href="struct_a_v_frame.html#af9920fc3fbfa347b8943ae461b50d18b">pict_type</a> = <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Forced keyframe at time %f\n&quot;</span>, pts_time);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;encoder &lt;- type:video &quot;</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                   <span class="stringliteral">&quot;frame_pts:%s frame_pts_time:%s time_base:%d/%d\n&quot;</span>,</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                   <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(in_picture-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>),</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                   enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frames_encoded++;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga9395cb802a5febf1f00df31497779169">avcodec_send_frame</a>(enc, in_picture);</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="comment">// Make sure Closed Captions will not be duplicated</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <a class="code" href="group__lavu__frame.html#ga132d6c01d0a21e5b48b96cd7c988de91">av_frame_remove_side_data</a>(in_picture, <a class="code" href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca4848fd3952b4c2e1c1b85acb628c78a6">AV_FRAME_DATA_A53_CC</a>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga5b8eff59cf259747cf0b31563e38ded6">avcodec_receive_packet</a>(enc, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<span class="stringliteral">&quot;encode_video %d.%d&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN))</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <span class="keywordflow">goto</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;encoder -&gt; type:video &quot;</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                       <span class="stringliteral">&quot;pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s\n&quot;</span>,</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                       <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>),</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                       <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>));</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; !(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#af51f7ff3dac8b730f46b9713e49a2518">capabilities</a> &amp; <a class="code" href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a>))</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <a class="code" href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160; </div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;encoder -&gt; type:video &quot;</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                    <span class="stringliteral">&quot;pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s\n&quot;</span>,</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                    <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase),</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                    <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase));</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;            }</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;            <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160; </div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;            <span class="comment">/* if two pass, output log */</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile &amp;&amp; enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0f5bec27a856369ac81ccc9784f52e86">stats_out</a>) {</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                fprintf(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile, <span class="stringliteral">&quot;%s&quot;</span>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0f5bec27a856369ac81ccc9784f52e86">stats_out</a>);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            }</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        }</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts++;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment">         * For video, number of frames in == number of packets out.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="comment">         * But there may be reordering, so we can&#39;t throw away frames on encoder</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">         * flush, we need to limit them here, before they go into encoder.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number++;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a888da811ed2e3af55edb9d9d49d4295f">vstats_filename</a> &amp;&amp; <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <a class="code" href="ffmpeg_8c.html#ad97d709b57b2a391fedb2890e6e317d2">do_video_stats</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame)</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <span class="keywordflow">if</span> (next_picture &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame)</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <a class="code" href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame, next_picture);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_frame);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>:</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Video encoding failed\n&quot;</span>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;}</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; </div>
<div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2"> 1412</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2">psnr</a>(<span class="keywordtype">double</span> d)</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;{</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="keywordflow">return</span> -10.0 * log10(d);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;}</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ad97d709b57b2a391fedb2890e6e317d2"> 1417</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ad97d709b57b2a391fedb2890e6e317d2">do_video_stats</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <span class="keywordtype">int</span> <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>)</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;{</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="keywordtype">int</span> frame_number;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordtype">double</span> ti1, <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>, avg_bitrate;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="comment">/* this is executed just the first time do_video_stats is called */</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>) {</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        <a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a> = fopen(<a class="code" href="ffmpeg_8h.html#a888da811ed2e3af55edb9d9d49d4295f">vstats_filename</a>, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;            perror(<span class="stringliteral">&quot;fopen&quot;</span>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        }</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160; </div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordflow">if</span> (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        frame_number = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a4382c3064df1c9eb232ac198dec067f9">nb_frames</a>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a825bfbd9e324635efff526253289806d">vstats_version</a> &lt;= 1) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            fprintf(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>, <span class="stringliteral">&quot;frame= %5d q= %2.1f &quot;</span>, frame_number,</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;quality / (<span class="keywordtype">float</span>)<a class="code" href="group__lavu__enc.html#gad6ce86405f7381daad36ccf516b4da98">FF_QP2LAMBDA</a>);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        } <span class="keywordflow">else</span>  {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            fprintf(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>, <span class="stringliteral">&quot;out= %2d st= %2d frame= %5d q= %2.1f &quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, frame_number,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;quality / (<span class="keywordtype">float</span>)<a class="code" href="group__lavu__enc.html#gad6ce86405f7381daad36ccf516b4da98">FF_QP2LAMBDA</a>);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;error[0]&gt;=0 &amp;&amp; (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">flags</a> &amp; <a class="code" href="group__lavc__core.html#gac14e43b675c9a342f9c7275553d6f533">AV_CODEC_FLAG_PSNR</a>))</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            fprintf(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>, <span class="stringliteral">&quot;PSNR= %6.2f &quot;</span>, <a class="code" href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2">psnr</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;error[0] / (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a> * enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> * 255.0 * 255.0)));</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        fprintf(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>,<span class="stringliteral">&quot;f_size= %6d &quot;</span>, <a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;        <span class="comment">/* compute pts value */</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        ti1 = <a class="code" href="avformat_8h.html#aea2211b21ee4a9a443886c2e0a63be1c">av_stream_get_end_pts</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st) * <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span> (ti1 &lt; 0.01)</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            ti1 = 0.01;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>     = (<a class="code" href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a> * 8) / <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>) / 1000.0;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        avg_bitrate = (double)(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size * 8) / ti1 / 1000.0;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        fprintf(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>, <span class="stringliteral">&quot;s_size= %8.0fkB time= %0.3f br= %7.1fkbits/s avg_br= %7.1fkbits/s &quot;</span>,</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;               (<span class="keywordtype">double</span>)<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size / 1024, ti1, <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>, avg_bitrate);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;        fprintf(<a class="code" href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a>, <span class="stringliteral">&quot;type= %c\n&quot;</span>, <a class="code" href="group__lavu__picture.html#gacbf2ea8b2b89924c890ef8ec10a3d922">av_get_picture_type_char</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;pict_type));</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    }</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;}</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a603a43eb595edc7f66cf508c6815d228"> 1460</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a603a43eb595edc7f66cf508c6815d228">finish_output_stream</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished = <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7">ENCODER_FINISHED</a> | <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31ae8b7f720076ace3e8c20648c8b77835b">MUXER_FINISHED</a>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_output_file.html#acfef99893985d28ae7f7f6a92e6d1bd7">shortest</a>) {</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[of-&gt;<a class="code" href="struct_output_file.html#ac09855bfd066c44eb761f84e28f00dce">ost_index</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_stream.html#a2cb215b02eb510c4b19947063a5d5bd8">finished</a> = <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7">ENCODER_FINISHED</a> | <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31ae8b7f720076ace3e8c20648c8b77835b">MUXER_FINISHED</a>;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;    }</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;}</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e"> 1479</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e">reap_filters</a>(<span class="keywordtype">int</span> <a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>)</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;{</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *filtered_frame = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <span class="comment">/* Reap all buffers present in the buffer sinks */</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <a class="code" href="struct_output_file.html">OutputFile</a>    *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <a class="code" href="struct_a_v_filter_context.html">AVFilterContext</a> *<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter || !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;graph)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">         * Unlike video, with audio the audio frame size matters.</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">         * Currently we are fully reliant on the lavfi filter chain to</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">         * do the buffering deed for us, and thus the frame size parameter</span></div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<span class="comment">         * needs to be set accordingly. Where does one get the required</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<span class="comment">         * frame size? From the initialized AVCodecContext of an audio</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<span class="comment">         * encoder. Thus, if we have gotten to an audio stream, initialize</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;<span class="comment">         * the encoder earlier than receiving the first AVFrame.</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavfi__buffersink__accessors.html#ga1eb8bbf583ffb7cc29aaa1944b1e699c">av_buffersink_get_type</a>(<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>) == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            <a class="code" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filtered_frame &amp;&amp; !(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filtered_frame = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>())) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        filtered_frame = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filtered_frame;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160; </div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi__buffersink.html#ga71ae9c529c8da51681e12faa37d1a395">av_buffersink_get_frame_flags</a>(<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>, filtered_frame,</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                                               <a class="code" href="group__lavfi__buffersink.html#gade670e86ece8d740194c916fa1ea6cc0">AV_BUFFERSINK_FLAG_NO_REQUEST</a>);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN) &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                           <span class="stringliteral">&quot;Error in av_buffersink_get_frame_flags(): %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="group__lavfi__buffersink__accessors.html#ga1eb8bbf583ffb7cc29aaa1944b1e699c">av_buffersink_get_type</a>(<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>) == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                        <a class="code" href="ffmpeg_8c.html#a33a912b98c7c73e52a0ab9cc4e11b995">do_video_out</a>(of, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;            }</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished) {</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(filtered_frame);</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="group__lavfi__buffersink__accessors.html#ga1eb8bbf583ffb7cc29aaa1944b1e699c">av_buffersink_get_type</a>(<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>)) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_aspect_ratio.num)</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                    enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a> = filtered_frame-&gt;<a class="code" href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">sample_aspect_ratio</a>;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                <a class="code" href="ffmpeg_8c.html#a33a912b98c7c73e52a0ab9cc4e11b995">do_video_out</a>(of, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, filtered_frame);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                <span class="keywordflow">if</span> (!(enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#af51f7ff3dac8b730f46b9713e49a2518">capabilities</a> &amp; <a class="code" href="group__lavc__core.html#gad15ae1ecff401c3d2dc5ac44030a9900">AV_CODEC_CAP_PARAM_CHANGE</a>) &amp;&amp;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                    enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a> != filtered_frame-&gt;<a class="code" href="struct_a_v_frame.html#a58c663568a99c1477c163e64858b3fef">channels</a>) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                           <span class="stringliteral">&quot;Audio filter graph output is not normalized and encoder does not support parameter changes\n&quot;</span>);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                <a class="code" href="ffmpeg_8c.html#a18033581df001bc68ef11676eb7040bd">do_audio_out</a>(of, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, filtered_frame);</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                <span class="comment">// TODO support subtitle filters</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(0);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;            }</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(filtered_frame);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        }</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160; </div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a379e18554a7d7ecb27d37c0dc6f3ebba"> 1559</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a379e18554a7d7ecb27d37c0dc6f3ebba">print_final_stats</a>(int64_t total_size)</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;{</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    uint64_t video_size = 0, audio_size = 0, extra_size = 0, other_size = 0;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    uint64_t subtitle_size = 0;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    uint64_t <a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a> = 0;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordtype">float</span> percent = -1.0;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <span class="keywordtype">int</span> pass1_used = 1;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_type) {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>: video_size += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>: audio_size += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>: subtitle_size += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;            <span class="keywordflow">default</span>:                 other_size += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        extra_size += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;extradata_size;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a>  += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        <span class="keywordflow">if</span> (   (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;flags &amp; (<a class="code" href="group__lavc__core.html#ga81bc0a84e8866ecff68e6d8a82781936">AV_CODEC_FLAG_PASS1</a> | <a class="code" href="group__lavc__core.html#ga234d986d58043b694dd518e2312b4cbe">AV_CODEC_FLAG_PASS2</a>))</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;            != <a class="code" href="group__lavc__core.html#ga81bc0a84e8866ecff68e6d8a82781936">AV_CODEC_FLAG_PASS1</a>)</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            pass1_used = 0;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    }</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a> &amp;&amp; total_size&gt;0 &amp;&amp; total_size &gt;= <a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a>)</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        percent = 100.0 * (total_size - <a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a>) / <a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;video:%1.0fkB audio:%1.0fkB subtitle:%1.0fkB other streams:%1.0fkB global headers:%1.0fkB muxing overhead: &quot;</span>,</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;           video_size / 1024.0,</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;           audio_size / 1024.0,</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;           subtitle_size / 1024.0,</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;           other_size / 1024.0,</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;           extra_size / 1024.0);</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="keywordflow">if</span> (percent &gt;= 0.0)</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;%f%%&quot;</span>, percent);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;unknown&quot;</span>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160; </div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="comment">/* print verbose per-stream stats */</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;        uint64_t total_packets = 0, total_size = 0;</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Input file #%d (%s):\n&quot;</span>,</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;               <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx-&gt;url);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;nb_streams; j++) {</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;            <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ist_index + j];</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            <span class="keyword">enum</span> <a class="code" href="group__lavu__misc.html#ga9a84bba4713dfced21a1a56163be1f48">AVMediaType</a> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;            total_size    += ist-&gt;<a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a>;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            total_packets += ist-&gt;<a class="code" href="struct_input_stream.html#ade4b46981af499da120e4e2b30517bef">nb_packets</a>;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160; </div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;  Input stream #%d:%d (%s): &quot;</span>,</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                   <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="cmdutils_8h.html#a1d155f9f5addbe58b32c5c180831caa9">media_type_string</a>(<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>));</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;%&quot;</span>PRIu64<span class="stringliteral">&quot; packets read (%&quot;</span>PRIu64<span class="stringliteral">&quot; bytes); &quot;</span>,</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                   ist-&gt;<a class="code" href="struct_input_stream.html#ade4b46981af499da120e4e2b30517bef">nb_packets</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a>);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;%&quot;</span>PRIu64<span class="stringliteral">&quot; frames decoded&quot;</span>,</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#ac61e0f854402b58a64e676bdcfa75dfd">frames_decoded</a>);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot; (%&quot;</span>PRIu64<span class="stringliteral">&quot; samples)&quot;</span>, ist-&gt;<a class="code" href="struct_input_stream.html#aa8aa609acb39eb21da43f02cdfb036eb">samples_decoded</a>);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;; &quot;</span>);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        }</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;  Total: %&quot;</span>PRIu64<span class="stringliteral">&quot; packets (%&quot;</span>PRIu64<span class="stringliteral">&quot; bytes) demuxed\n&quot;</span>,</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;               total_packets, total_size);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    }</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160; </div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        uint64_t total_packets = 0, total_size = 0;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Output file #%d (%s):\n&quot;</span>,</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;               <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160; </div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; j++) {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;            <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[of-&gt;<a class="code" href="struct_output_file.html#ac09855bfd066c44eb761f84e28f00dce">ost_index</a> + j];</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            <span class="keyword">enum</span> <a class="code" href="group__lavu__misc.html#ga9a84bba4713dfced21a1a56163be1f48">AVMediaType</a> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_type;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            total_size    += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;            total_packets += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;packets_written;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;  Output stream #%d:%d (%s): &quot;</span>,</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                   <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, <a class="code" href="cmdutils_8h.html#a1d155f9f5addbe58b32c5c180831caa9">media_type_string</a>(<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>));</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed) {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;%&quot;</span>PRIu64<span class="stringliteral">&quot; frames encoded&quot;</span>,</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;                       <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frames_encoded);</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot; (%&quot;</span>PRIu64<span class="stringliteral">&quot; samples)&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;samples_encoded);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;; &quot;</span>);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;%&quot;</span>PRIu64<span class="stringliteral">&quot; packets muxed (%&quot;</span>PRIu64<span class="stringliteral">&quot; bytes); &quot;</span>,</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;packets_written, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;data_size);</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160; </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;  Total: %&quot;</span>PRIu64<span class="stringliteral">&quot; packets (%&quot;</span>PRIu64<span class="stringliteral">&quot; bytes) muxed\n&quot;</span>,</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;               total_packets, total_size);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">if</span>(video_size + <a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a> + audio_size + subtitle_size + extra_size == 0){</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Output file is empty, nothing was encoded &quot;</span>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        <span class="keywordflow">if</span> (pass1_used) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;(check -ss / -t / -frames parameters if used)\n&quot;</span>);</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;}</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ac639722e5e5a6a26c78eca5e9122909d"> 1676</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ac639722e5e5a6a26c78eca5e9122909d">print_report</a>(<span class="keywordtype">int</span> is_last_report, int64_t timer_start, int64_t cur_time)</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;{</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    AVBPrint buf, buf_script;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *oc;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    int64_t total_size;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordtype">int</span> frame_number, vid, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordtype">double</span> <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordtype">double</span> speed;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = INT64_MIN + 1;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keyword">static</span> int64_t last_time = -1;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> qp_histogram[52];</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <span class="keywordtype">int</span> hours, mins, secs, <a class="code" href="cbs__h2645_8c.html#a4a02756a337012b1d96221b0a2f98128">us</a>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *hours_sign;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordtype">float</span> t;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160; </div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8h.html#a21a0be842e8fa2c780fa87f45bd5d17e">print_stats</a> &amp;&amp; !is_last_report &amp;&amp; !<a class="code" href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a>)</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="keywordflow">if</span> (!is_last_report) {</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;        <span class="keywordflow">if</span> (last_time == -1) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            last_time = cur_time;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        }</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <span class="keywordflow">if</span> ((cur_time - last_time) &lt; 500000)</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        last_time = cur_time;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    t = (cur_time-timer_start) / 1000000.0;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160; </div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    oc = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[0]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    total_size = <a class="code" href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a>(oc-&gt;<a class="code" href="struct_a_v_format_context.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordflow">if</span> (total_size &lt;= 0) <span class="comment">// FIXME improve avio_size() so it works with non seekable output too</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;        total_size = <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(oc-&gt;<a class="code" href="struct_a_v_format_context.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    vid = 0;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <a class="code" href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a>(&amp;buf, 0, <a class="code" href="bprint_8h.html#a0e07836126dff024ac10acbc744ebe8f">AV_BPRINT_SIZE_AUTOMATIC</a>);</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <a class="code" href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a>(&amp;buf_script, 0, <a class="code" href="bprint_8h.html#a0e07836126dff024ac10acbc744ebe8f">AV_BPRINT_SIZE_AUTOMATIC</a>);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        <span class="keywordtype">float</span> q = -1;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;stream_copy)</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            q = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;quality / (float) <a class="code" href="group__lavu__enc.html#gad6ce86405f7381daad36ccf516b4da98">FF_QP2LAMBDA</a>;</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keywordflow">if</span> (vid &amp;&amp; enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;q=%2.1f &quot;</span>, q);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;stream_%d_%d_q=%.1f\n&quot;</span>,</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                       <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, q);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">if</span> (!vid &amp;&amp; enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            <span class="keywordtype">float</span> fps;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            frame_number = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            fps = t &gt; 1 ? frame_number / t : 0;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;frame=%5d fps=%3.*f q=%3.1f &quot;</span>,</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                     frame_number, fps &lt; 9.95, fps, q);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;frame=%d\n&quot;</span>, frame_number);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;fps=%.2f\n&quot;</span>, fps);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;stream_%d_%d_q=%.1f\n&quot;</span>,</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                       <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, q);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            <span class="keywordflow">if</span> (is_last_report)</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;L&quot;</span>);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a6a23996c235371236b38622e17c4f4c1">qp_hist</a>) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;                <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                <span class="keywordtype">int</span> qp = <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(q);</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                <span class="keywordflow">if</span> (qp &gt;= 0 &amp;&amp; qp &lt; <a class="code" href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a>(qp_histogram))</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                    qp_histogram[qp]++;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 32; j++)</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;%X&quot;</span>, <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(qp_histogram[j] + 1));</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            }</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="keywordflow">if</span> ((enc-&gt;<a class="code" href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">flags</a> &amp; <a class="code" href="group__lavc__core.html#gac14e43b675c9a342f9c7275553d6f533">AV_CODEC_FLAG_PSNR</a>) &amp;&amp; (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea33183189d771e3325ccdd36fa980b6f6">AV_PICTURE_TYPE_NONE</a> || is_last_report)) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                <span class="keywordtype">double</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_sum = 0;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                <span class="keywordtype">double</span> scale, scale_sum = 0;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                <span class="keywordtype">double</span> p;</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                <span class="keywordtype">char</span> <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>[3] = { <span class="charliteral">&#39;Y&#39;</span>,<span class="charliteral">&#39;U&#39;</span>,<span class="charliteral">&#39;V&#39;</span> };</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;PSNR=&quot;</span>);</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                    <span class="keywordflow">if</span> (is_last_report) {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                        <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = enc-&gt;<a class="code" href="struct_a_v_codec_context.html#acb7a609f77fd8876c8433c3673e9f9d5">error</a>[j];</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                        scale = enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a> * enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> * 255.0 * 255.0 * frame_number;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                        <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;error[j];</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;                        scale = enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a> * enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> * 255.0 * 255.0;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                    }</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                    <span class="keywordflow">if</span> (j)</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                        scale /= 4;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                    error_sum += <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                    scale_sum += scale;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                    p = <a class="code" href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2">psnr</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a> / scale);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;%c:%2.2f &quot;</span>, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>[j], p);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;stream_%d_%d_psnr_%c=%2.2f\n&quot;</span>,</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                               <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a>[j] | 32, p);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                p = <a class="code" href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2">psnr</a>(error_sum / scale_sum);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;*:%2.2f &quot;</span>, <a class="code" href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2">psnr</a>(error_sum / scale_sum));</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;stream_%d_%d_psnr_all=%2.2f\n&quot;</span>,</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                           <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, p);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            vid = 1;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="comment">/* compute min output value */</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avformat_8h.html#aea2211b21ee4a9a443886c2e0a63be1c">av_stream_get_end_pts</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st) != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="avformat_8h.html#aea2211b21ee4a9a443886c2e0a63be1c">av_stream_get_end_pts</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st),</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                                          <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>));</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a>) {</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">copy_ts_first_pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> &gt; 1)</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                    <a class="code" href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">copy_ts_first_pts</a> = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">copy_ts_first_pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                    <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> -= <a class="code" href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">copy_ts_first_pts</a>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        <span class="keywordflow">if</span> (is_last_report)</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a> += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;last_dropped;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    secs = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>) / <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <a class="code" href="cbs__h2645_8c.html#a4a02756a337012b1d96221b0a2f98128">us</a> = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>) % <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    mins = secs / 60;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    secs %= 60;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    hours = mins / 60;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    mins %= 60;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    hours_sign = (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> &lt; 0) ? <span class="stringliteral">&quot;-&quot;</span> : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> &amp;&amp; total_size &gt;= 0 ? total_size * 8 / (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> / 1000.0) : -1;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    speed = t != 0.0 ? (double)<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> / <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> / t : -1;</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">if</span> (total_size &lt; 0) <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;size=N/A time=&quot;</span>);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">else</span>                <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;size=%8.0fkB time=&quot;</span>, total_size / 1024.0);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;N/A &quot;</span>);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;%s%02d:%02d:%02d.%02d &quot;</span>,</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                   hours_sign, hours, mins, secs, (100 * <a class="code" href="cbs__h2645_8c.html#a4a02756a337012b1d96221b0a2f98128">us</a>) / <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    }</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160; </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a> &lt; 0) {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;bitrate=N/A&quot;</span>);</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;bitrate=N/A\n&quot;</span>);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot;bitrate=%6.1fkbits/s&quot;</span>, <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;bitrate=%6.1fkbits/s\n&quot;</span>, <a class="code" href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a>);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (total_size &lt; 0) <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;total_size=N/A\n&quot;</span>);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordflow">else</span>                <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;total_size=%&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, total_size);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;out_time_us=N/A\n&quot;</span>);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;out_time_ms=N/A\n&quot;</span>);</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;out_time=N/A\n&quot;</span>);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;out_time_us=%&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;out_time_ms=%&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;out_time=%s%02d:%02d:%02d.%06d\n&quot;</span>,</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                   hours_sign, hours, mins, secs, <a class="code" href="cbs__h2645_8c.html#a4a02756a337012b1d96221b0a2f98128">us</a>);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    }</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a> || <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a>)</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot; dup=%d drop=%d&quot;</span>, <a class="code" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a>, <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a>);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;dup_frames=%d\n&quot;</span>, <a class="code" href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a>);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;drop_frames=%d\n&quot;</span>, <a class="code" href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a>);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160; </div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">if</span> (speed &lt; 0) {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot; speed=N/A&quot;</span>);</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;speed=N/A\n&quot;</span>);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf, <span class="stringliteral">&quot; speed=%4.3gx&quot;</span>, speed);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;speed=%4.3gx\n&quot;</span>, speed);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a21a0be842e8fa2c780fa87f45bd5d17e">print_stats</a> || is_last_report) {</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = is_last_report ? <span class="charliteral">&#39;\n&#39;</span> : <span class="charliteral">&#39;\r&#39;</span>;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a21a0be842e8fa2c780fa87f45bd5d17e">print_stats</a>==1 &amp;&amp; <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a> &gt; <a class="code" href="group__lavu__log.html#gae8ada5cc5722548d8698650b05207904">av_log_get_level</a>()) {</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;%s    %c&quot;</span>, buf.str, <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;%s    %c&quot;</span>, buf.str, <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>);</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        fflush(stderr);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    }</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <a class="code" href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a>(&amp;buf, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160; </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a>) {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        <a class="code" href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a>(&amp;buf_script, <span class="stringliteral">&quot;progress=%s\n&quot;</span>,</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                   is_last_report ? <span class="stringliteral">&quot;end&quot;</span> : <span class="stringliteral">&quot;continue&quot;</span>);</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        <a class="code" href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a>(<a class="code" href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a>, buf_script.str,</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                   <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(buf_script.len, buf_script.size - 1));</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <a class="code" href="avio_8h.html#ad88b866a118c17c95663f7782b2e8946">avio_flush</a>(<a class="code" href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a>);</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <a class="code" href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a>(&amp;buf_script, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;        <span class="keywordflow">if</span> (is_last_report) {</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="avio_8h.html#ae118a1f37f1e48617609ead9910aac15">avio_closep</a>(&amp;<a class="code" href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a>)) &lt; 0)</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                       <span class="stringliteral">&quot;Error closing progress log, loss of information possible: %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">if</span> (is_last_report)</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        <a class="code" href="ffmpeg_8c.html#a379e18554a7d7ecb27d37c0dc6f3ebba">print_final_stats</a>(total_size);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;}</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#af46fcadeb44ca81755a251c59bd3d78f"> 1883</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#af46fcadeb44ca81755a251c59bd3d78f">ifilter_parameters_from_codecpar</a>(<a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter, <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par)</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;{</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">// We never got any input. Set a fake format, which will</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="comment">// come from libavformat.</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">format</a>                 = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">format</a>;</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#a1c8870375203b3594e67e632119bbc10">sample_rate</a>            = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">sample_rate</a>;</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#ae65ce297679c894d4536e8eaaf623b84">channels</a>               = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">channels</a>;</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#aaf4487a0c41b756199c9dde4ea8962b8">channel_layout</a>         = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">channel_layout</a>;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#af86da4dd2e5092c08e8b171b52c6fa66">width</a>                  = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#a2ad802636d7a1f6b3be4eaaa21929c3f">height</a>                 = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#abbd8721ddcadbfb453a4f5cdf6301c25">sample_aspect_ratio</a>    = par-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;}</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#adfd9959ab0ec5f8d63e3f5b2cc929590"> 1896</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#adfd9959ab0ec5f8d63e3f5b2cc929590">flush_encoders</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;{</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a>   *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <a class="code" href="struct_output_file.html">OutputFile</a>      *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed)</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        <span class="comment">// Try to enable encoding with no input frames.</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        <span class="comment">// Maybe we should just let encoding fail instead.</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;initialized) {</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            <a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                   <span class="stringliteral">&quot;Finishing stream %d:%d without any data written to it.\n&quot;</span>,</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter &amp;&amp; !fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>) {</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                <span class="keywordtype">int</span> x;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                <span class="keywordflow">for</span> (x = 0; x &lt; fg-&gt;<a class="code" href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">nb_inputs</a>; x++) {</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                    <a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter = fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[x];</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                    <span class="keywordflow">if</span> (ifilter-&gt;<a class="code" href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">format</a> &lt; 0)</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                        <a class="code" href="ffmpeg_8c.html#af46fcadeb44ca81755a251c59bd3d78f">ifilter_parameters_from_codecpar</a>(ifilter, ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639">ifilter_has_all_input_formats</a>(fg))</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#adfc4727f627c5abd0aa843206d046ec6">configure_filtergraph</a>(fg);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error configuring filter graph\n&quot;</span>);</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                <a class="code" href="ffmpeg_8c.html#a603a43eb595edc7f66cf508c6815d228">finish_output_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;            }</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            <a class="code" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        }</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <span class="keywordflow">if</span> (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            <span class="keywordtype">int</span> pkt_size;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            <span class="keywordflow">switch</span> (enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>) {</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>   = <span class="stringliteral">&quot;audio&quot;</span>;</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;                <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>   = <span class="stringliteral">&quot;video&quot;</span>;</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;                <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(0);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;            }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = 0;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            <span class="keywordflow">while</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga5b8eff59cf259747cf0b31563e38ded6">avcodec_receive_packet</a>(enc, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)) == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga9395cb802a5febf1f00df31497779169">avcodec_send_frame</a>(enc, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;%s encoding failed: %s\n&quot;</span>,</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                           <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>,</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                           <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                }</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            }</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<span class="stringliteral">&quot;flush_%s %d.%d&quot;</span>, <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;%s encoding failed: %s\n&quot;</span>,</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                       <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                       <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;            }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile &amp;&amp; enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0f5bec27a856369ac81ccc9784f52e86">stats_out</a>) {</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;                fprintf(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile, <span class="stringliteral">&quot;%s&quot;</span>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#a0f5bec27a856369ac81ccc9784f52e86">stats_out</a>);</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;            }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 1);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;            }</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished &amp; <a class="code" href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31ae8b7f720076ace3e8c20648c8b77835b">MUXER_FINISHED</a>) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;            }</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            <a class="code" href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, enc-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            pkt_size = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> &amp;&amp; <a class="code" href="ffmpeg_8h.html#a888da811ed2e3af55edb9d9d49d4295f">vstats_filename</a>) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                <a class="code" href="ffmpeg_8c.html#ad97d709b57b2a391fedb2890e6e317d2">do_video_stats</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, pkt_size);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;            }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        }</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;}</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;<span class="comment"> * Check whether a packet from ist should be written into ost at this time</span></div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a8058514ce4db47327793e924526a39ed"> 2006</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a8058514ce4db47327793e924526a39ed">check_output_constraints</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;{</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keywordtype">int</span> ist_index  = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#ac2f5772aebd0118a4c464a268dbb4d9c">ist_index</a> + ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160; </div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index != ist_index)</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160; </div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished)</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> &lt; of-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a>)</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160; </div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;}</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#adb98afa9c4922dc9f61b7130c3beb183"> 2023</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#adb98afa9c4922dc9f61b7130c3beb183">do_streamcopy</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;{</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a>   *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a> [ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>];</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    int64_t <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> = (of-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) ? 0 : of-&gt;<a class="code" href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">start_time</a>;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    int64_t ost_tb_start_time = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> opkt;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="comment">// EOF: flush output bitstream filters.</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;opkt);</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = 0;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;opkt, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 1);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    }</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    <span class="keywordflow">if</span> ((!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number &amp;&amp; !(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> &amp; <a class="code" href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a>)) &amp;&amp;</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;        !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;copy_initial_nonkeyframes)</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;copy_prior_start) {</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        int64_t comp_start = <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>;</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;start_time != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            comp_start = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;start_time + <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ts_offset);</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> ?</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> &lt; comp_start :</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &lt; <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(comp_start, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>))</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">if</span> (of-&gt;<a class="code" href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">recording_time</a> != INT64_MAX &amp;&amp;</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> &gt;= of-&gt;<a class="code" href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">recording_time</a> + <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>) {</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        <a class="code" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;recording_time != INT64_MAX) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx-&gt;start_time;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;start_time != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a>)</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a> += <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;start_time;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> &gt;= <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;recording_time + <a class="code" href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a>) {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;            <a class="code" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    }</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160; </div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="comment">/* force the input stream PTS */</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_opts++;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavc__packet.html#gadb05d71fa2ea7b7fd3e8cfc6d9065a47">av_packet_ref</a>(&amp;opkt, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) &lt; 0)</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160; </div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase) - ost_tb_start_time;</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160; </div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) {</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="group__lavc__misc.html#ga3266a8c3df0790c62259f91afcde45a9">av_get_audio_frame_duration</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>);</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>)</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>;</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="group__lavu__math.html#ga29b7c3d60d68ef678ee1f4adc61a25dc">av_rescale_delta</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>,</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                                    (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1, ist-&gt;dec_ctx-&gt;sample_rate}, <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>,</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                                    &amp;ist-&gt;<a class="code" href="struct_input_stream.html#a7ff433fc7a48e7b58a4b91e8ff05cf25">filter_in_rescale_delta_last</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="comment">/* dts will be set immediately afterwards to what pts is now */</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = opkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> - ost_tb_start_time;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        opkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    opkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> -= ost_tb_start_time;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160; </div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    opkt.<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a>(of, &amp;opkt, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 0);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;}</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"><a class="line" href="ffmpeg_8h.html#a2c6d81c909bf3abbf4685cfadd458a87"> 2100</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a2c6d81c909bf3abbf4685cfadd458a87">guess_input_channel_layout</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist)</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;{</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channel_layout) {</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        <span class="keywordtype">char</span> layout_name[256];</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channels &gt; ist-&gt;<a class="code" href="struct_input_stream.html#a99e6bf56ec091f8af11744e4b0499327">guess_layout_max</a>)</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channel_layout = <a class="code" href="group__channel__mask__c.html#gacb84f3e93a583e1f84a5283162a606a2">av_get_default_channel_layout</a>(<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channels);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channel_layout)</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;        <a class="code" href="group__channel__mask__c.html#ga99d0b5bb80534d13a6cc96336cf9076a">av_get_channel_layout_string</a>(layout_name, <span class="keyword">sizeof</span>(layout_name),</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                                     <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channels, <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;channel_layout);</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Guessed Channel Layout for Input Stream &quot;</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;               <span class="stringliteral">&quot;#%d.%d : %s\n&quot;</span>, ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, layout_name);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    }</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;}</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a733571df1f9d2cdd5aca9e933919a237"> 2120</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a733571df1f9d2cdd5aca9e933919a237">check_decode_result</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <span class="keywordtype">int</span> *<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;{</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> || <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>&lt;0)</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>&lt;0] ++;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160; </div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> &amp;&amp; ist) {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3dd46fd353a405f6e9b91c11d9c5b736">decode_error_flags</a> || (ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a49020cc320b8fb1f5449167b6c97515b">flags</a> &amp; <a class="code" href="group__lavu__frame__flags.html#gadddbce4ec0cc2ad4298cf6f266f97f6a">AV_FRAME_FLAG_CORRUPT</a>)) {</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a> ? <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a> : <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                   <span class="stringliteral">&quot;%s: corrupt decoded frame in stream %d\n&quot;</span>, <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a4062ac530db413964aa76090995b85cd">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        }</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    }</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;}</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;<span class="comment">// Filters can be configured only if the formats of all inputs are known.</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639"> 2139</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639">ifilter_has_all_input_formats</a>(<a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg)</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;{</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; fg-&gt;<a class="code" href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">nb_inputs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        <span class="keywordflow">if</span> (fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">format</a> &lt; 0 &amp;&amp; (fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_input_filter.html#aa033b48aa4612dc26aa8e66e83f932bc">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> ||</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                                          fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_input_filter.html#aa033b48aa4612dc26aa8e66e83f932bc">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>))</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    }</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;}</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160; </div>
<div class="line"><a name="l02150"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a7327043132cd8fc6043a82eb04a375a1"> 2150</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a7327043132cd8fc6043a82eb04a375a1">ifilter_send_frame</a>(<a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;{</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg = ifilter-&gt;<a class="code" href="struct_input_filter.html#ab1730578ae74132f67d2e847df4cc624">graph</a>;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordtype">int</span> need_reinit, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160; </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="comment">/* determine if the parameters for this input changed */</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    need_reinit = ifilter-&gt;<a class="code" href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">format</a> != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;format;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160; </div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">switch</span> (ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        need_reinit |= ifilter-&gt;<a class="code" href="struct_input_filter.html#a1c8870375203b3594e67e632119bbc10">sample_rate</a>    != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;sample_rate ||</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                       ifilter-&gt;<a class="code" href="struct_input_filter.html#ae65ce297679c894d4536e8eaaf623b84">channels</a>       != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;channels ||</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                       ifilter-&gt;<a class="code" href="struct_input_filter.html#aaf4487a0c41b756199c9dde4ea8962b8">channel_layout</a> != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;channel_layout;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;        need_reinit |= ifilter-&gt;<a class="code" href="struct_input_filter.html#af86da4dd2e5092c08e8b171b52c6fa66">width</a>  != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width ||</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                       ifilter-&gt;<a class="code" href="struct_input_filter.html#a2ad802636d7a1f6b3be4eaaa21929c3f">height</a> != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    }</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160; </div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keywordflow">if</span> (!ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#a809d93e64e76fe2f142102e58dc82a1e">reinit_filters</a> &amp;&amp; fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>)</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        need_reinit = 0;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160; </div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="keywordflow">if</span> (!!ifilter-&gt;<a class="code" href="struct_input_filter.html#a05a22838e8069f8fdabba7686809494c">hw_frames_ctx</a> != !!<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;hw_frames_ctx ||</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        (ifilter-&gt;<a class="code" href="struct_input_filter.html#a05a22838e8069f8fdabba7686809494c">hw_frames_ctx</a> &amp;&amp; ifilter-&gt;<a class="code" href="struct_input_filter.html#a05a22838e8069f8fdabba7686809494c">hw_frames_ctx</a>-&gt;<a class="code" href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">data</a> != <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;hw_frames_ctx-&gt;data))</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        need_reinit = 1;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">if</span> (need_reinit) {</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#a0e8b6e753bb0f299b554d18f3589944a">ifilter_parameters_from_frame</a>(ifilter, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    }</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="comment">/* (re)init the graph if possible, otherwise buffer the frame and return */</span></div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <span class="keywordflow">if</span> (need_reinit || !fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>) {</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; fg-&gt;<a class="code" href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">nb_inputs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639">ifilter_has_all_input_formats</a>(fg)) {</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                <a class="code" href="struct_a_v_frame.html">AVFrame</a> *tmp = <a class="code" href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                <span class="keywordflow">if</span> (!tmp)</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2fifo_8c.html#ac1e0d8ee7f1568cb40fa95a740c60f13">av_fifo_space</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>)) {</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavutil_2fifo_8c.html#aeaf7aa802f3b18fef86bb72445eff5d8">av_fifo_realloc2</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>, 2 * <a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>));</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                        <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;tmp);</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                    }</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                }</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                <a class="code" href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">frame_queue</a>, &amp;tmp, <span class="keyword">sizeof</span>(tmp), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;            }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;        }</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e">reap_filters</a>(1);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error while filtering: %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        }</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#adfc4727f627c5abd0aa843206d046ec6">configure_filtergraph</a>(fg);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error reinitializing filters!\n&quot;</span>);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    }</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi__buffersrc.html#ga73ed90c3c3407f36e54d65f91faaaed9">av_buffersrc_add_frame_flags</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba361be31bba170d5ec5bac19ce962ceb5">AV_BUFFERSRC_FLAG_PUSH</a>);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error while filtering: %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    }</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160; </div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#af6db4eeaee5d848f75aebb60927cc9d4"> 2227</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#af6db4eeaee5d848f75aebb60927cc9d4">ifilter_send_eof</a>(<a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter, int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>)</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;{</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    ifilter-&gt;<a class="code" href="struct_input_filter.html#ad3e4e5041c3312bb70cc4d1f0bbd4726">eof</a> = 1;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keywordflow">if</span> (ifilter-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>) {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi__buffersrc.html#ga828fc86955dc0530ea53c123862e3da6">av_buffersrc_close</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>, <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba361be31bba170d5ec5bac19ce962ceb5">AV_BUFFERSRC_FLAG_PUSH</a>);</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;        <span class="comment">// the filtergraph was never configured</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keywordflow">if</span> (ifilter-&gt;<a class="code" href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">format</a> &lt; 0)</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <a class="code" href="ffmpeg_8c.html#af46fcadeb44ca81755a251c59bd3d78f">ifilter_parameters_from_codecpar</a>(ifilter, ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        <span class="keywordflow">if</span> (ifilter-&gt;<a class="code" href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">format</a> &lt; 0 &amp;&amp; (ifilter-&gt;<a class="code" href="struct_input_filter.html#aa033b48aa4612dc26aa8e66e83f932bc">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> || ifilter-&gt;<a class="code" href="struct_input_filter.html#aa033b48aa4612dc26aa8e66e83f932bc">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)) {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot determine format of input stream %d:%d after EOF\n&quot;</span>, ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        }</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    }</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;}</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">// This does not quite work like avcodec_decode_audio4/avcodec_decode_video2.</span></div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">// There is the following difference: if you got a frame, you must call</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment">// it again with pkt=NULL. pkt==NULL is treated differently from pkt-&gt;size==0</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="comment">// (pkt==NULL means get more output, pkt-&gt;size==0 is a flush/drain packet)</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8"> 2254</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8">decode</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <span class="keywordtype">int</span> *got_frame, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;{</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    *got_frame = 0;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga58bc4bf1e0ac59e27362597e467efff3">avcodec_send_packet</a>(avctx, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        <span class="comment">// In particular, we don&#39;t expect AVERROR(EAGAIN), because we read all</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;        <span class="comment">// decoded frames with avcodec_receive_frame() until done.</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    }</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga11e6542c4e66d3028668788a1a74217c">avcodec_receive_frame</a>(avctx, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN))</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;        *got_frame = 1;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;}</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a4981f23e6d794110daa5408fc9a9f0fb"> 2277</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a4981f23e6d794110daa5408fc9a9f0fb">send_frame_to_filters</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>)</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;{</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160; </div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a> &gt; 0); <span class="comment">/* ensure ret is initialized */</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;        <span class="keywordflow">if</span> (i &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a> - 1) {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a>;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a7327043132cd8fc6043a82eb04a375a1">ifilter_send_frame</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0; <span class="comment">/* ignore */</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;                   <span class="stringliteral">&quot;Failed to inject frame into filter network: %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;        }</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;}</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a159db49b7f730d2869253cd4ff0411aa"> 2303</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a159db49b7f730d2869253cd4ff0411aa">decode_audio</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> *<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>,</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                        <span class="keywordtype">int</span> *decode_failed)</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;{</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, err = 0;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> decoded_frame_tb;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a> &amp;&amp; !(ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()))</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a> &amp;&amp; !(ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()))</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160; </div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8">decode</a>(avctx, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>, <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<span class="stringliteral">&quot;decode_audio %d.%d&quot;</span>, ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        *decode_failed = 1;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160; </div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0 &amp;&amp; avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a> &lt;= 0) {</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Sample rate %d invalid\n&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    }</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        <a class="code" href="ffmpeg_8c.html#a733571df1f9d2cdd5aca9e933919a237">check_decode_result</a>(ist, <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">if</span> (!*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> || <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#aa8aa609acb39eb21da43f02cdfb036eb">samples_decoded</a> += <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a>;</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#ac61e0f854402b58a64e676bdcfa75dfd">frames_decoded</a>++;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="comment">/* increment next_dts to use for the case where the input stream does not</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment">       have timestamps or there are multiple frames in the packet */</span></div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> += ((int64_t)<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> * <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a>) /</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                     avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> += ((int64_t)<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> * <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a>) /</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                     avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        decoded_frame_tb   = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;        decoded_frame_tb   = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    }<span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        decoded_frame_tb   = <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>;</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    }</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = <a class="code" href="group__lavu__math.html#ga29b7c3d60d68ef678ee1f4adc61a25dc">av_rescale_delta</a>(decoded_frame_tb, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                                              (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1, avctx-&gt;sample_rate}, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a>, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#a7ff433fc7a48e7b58a4b91e8ff05cf25">filter_in_rescale_delta_last</a>,</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                                              (<a class="code" href="struct_a_v_rational.html">AVRational</a>){1, avctx-&gt;sample_rate});</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#af76c7165931c721b63008034c94d9275">nb_samples</a> = <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">nb_samples</a>;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    err = <a class="code" href="ffmpeg_8c.html#a4981f23e6d794110daa5408fc9a9f0fb">send_frame_to_filters</a>(ist, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160; </div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a>);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordflow">return</span> err &lt; 0 ? err : <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a71dd0984704d7f70065c6b97edc7069e"> 2365</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a71dd0984704d7f70065c6b97edc7069e">decode_video</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> *<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, int64_t *duration_pts, <span class="keywordtype">int</span> eof,</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;                        <span class="keywordtype">int</span> *decode_failed)</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;{</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, err = 0;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    int64_t best_effort_timestamp;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    int64_t <a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> avpkt;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="comment">// With fate-indeo3-2, we&#39;re getting 0-sized packets before EOF for some</span></div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <span class="comment">// reason. This seems like a semi-critical bug. Don&#39;t trigger EOF, and</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="comment">// skip the packet.</span></div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="keywordflow">if</span> (!eof &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> == 0)</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160; </div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a> &amp;&amp; !(ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()))</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a> &amp;&amp; !(ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a> = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()))</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>;</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        avpkt = *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        avpkt.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>; <span class="comment">// ffmpeg.c probably shouldn&#39;t do this</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    }</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160; </div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="comment">// The old code used to set dts on the drain packet, which does not work</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="comment">// with the new API anymore.</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    <span class="keywordflow">if</span> (eof) {</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;        <span class="keywordtype">void</span> *<span class="keyword">new</span> = <a class="code" href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a4b6db5d0fb15c8262b1ba543495fe628">nb_dts_buffer</a> + 1, <span class="keyword">sizeof</span>(ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>[0]));</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;        <span class="keywordflow">if</span> (!<span class="keyword">new</span>)</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a> = <span class="keyword">new</span>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>[ist-&gt;<a class="code" href="struct_input_stream.html#a4b6db5d0fb15c8262b1ba543495fe628">nb_dts_buffer</a>++] = <a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    }</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160; </div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8">decode</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>, <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> ? &amp;avpkt : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <a class="code" href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a>(<span class="stringliteral">&quot;decode_video %d.%d&quot;</span>, ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        *decode_failed = 1;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160; </div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="comment">// The following line may be required in some cases where there is no parser</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    <span class="comment">// or the parser does not has_b_frames correctly</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">has_b_frames</a>) {</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a>) {</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">has_b_frames</a>;</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                   <span class="stringliteral">&quot;video_delay is larger in decoder than demuxer %d &gt; %d.\n&quot;</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                   <span class="stringliteral">&quot;If you want to help, upload a sample &quot;</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                   <span class="stringliteral">&quot;of this file to https://streams.videolan.org/upload/ &quot;</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                   <span class="stringliteral">&quot;and contact the ffmpeg-devel mailing list. (ffmpeg-devel@ffmpeg.org)\n&quot;</span>,</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                   ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">has_b_frames</a>,</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                   ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">video_delay</a>);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    }</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160; </div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <a class="code" href="ffmpeg_8c.html#a733571df1f9d2cdd5aca9e933919a237">check_decode_result</a>(ist, <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160; </div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0) {</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  != <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a> ||</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> != <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a> ||</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> != <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a>) {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Frame parameters mismatch context %d,%d,%d != %d,%d,%d\n&quot;</span>,</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">width</a>,</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">height</a>,</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a>,</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>,</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>,</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        }</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    }</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">if</span> (!*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> || <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160; </div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordflow">if</span>(ist-&gt;<a class="code" href="struct_input_stream.html#abc71c343e0ade7e102adb45badfc6243">top_field_first</a>&gt;=0)</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a6f3ee0596312c90a2ef2ad160c991188">top_field_first</a> = ist-&gt;<a class="code" href="struct_input_stream.html#abc71c343e0ade7e102adb45badfc6243">top_field_first</a>;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#ac61e0f854402b58a64e676bdcfa75dfd">frames_decoded</a>++;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160; </div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ad983487b3e7c29f53bb3336190f14051">hwaccel_retrieve_data</a> &amp;&amp; <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a> == ist-&gt;<a class="code" href="struct_input_stream.html#a05769ba0518105626a6d64386795b48f">hwaccel_pix_fmt</a>) {</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        err = ist-&gt;<a class="code" href="struct_input_stream.html#ad983487b3e7c29f53bb3336190f14051">hwaccel_retrieve_data</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    }</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#a91c6f154cc61c348f644987044423e57">hwaccel_retrieved_pix_fmt</a> = <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">format</a>;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160; </div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;    best_effort_timestamp= <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0943e85eb624c2191490862ececd319d">best_effort_timestamp</a>;</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    *duration_pts = <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a385c44d7cafe80cad82fe46e25cab221">pkt_duration</a>;</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160; </div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>)</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        best_effort_timestamp = ist-&gt;<a class="code" href="struct_input_stream.html#a3a0034bb2959a06111810d2813975b24">cfr_next_pts</a>++;</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160; </div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">if</span> (eof &amp;&amp; best_effort_timestamp == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a4b6db5d0fb15c8262b1ba543495fe628">nb_dts_buffer</a> &gt; 0) {</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        best_effort_timestamp = ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>[0];</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160; </div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a4b6db5d0fb15c8262b1ba543495fe628">nb_dts_buffer</a> - 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = ist-&gt;<a class="code" href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">dts_buffer</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a4b6db5d0fb15c8262b1ba543495fe628">nb_dts_buffer</a>--;</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    }</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160; </div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">if</span>(best_effort_timestamp != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        int64_t ts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a> = best_effort_timestamp, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160; </div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        <span class="keywordflow">if</span> (ts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> = ts;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    }</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160; </div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;decoder -&gt; ist_index:%d type:video &quot;</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;               <span class="stringliteral">&quot;frame_pts:%s frame_pts_time:%s best_effort_ts:%&quot;</span>PRId64<span class="stringliteral">&quot; best_effort_ts_time:%s keyframe:%d frame_type:%d time_base:%d/%d\n&quot;</span>,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;               ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>),</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;               <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">pts</a>, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;               best_effort_timestamp,</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;               <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(best_effort_timestamp, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;               <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a3649a81e8414a193d685a6eee06ce902">key_frame</a>, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#af9920fc3fbfa347b8943ae461b50d18b">pict_type</a>,</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;               ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    }</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160; </div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>)</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;        <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>-&gt;<a class="code" href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">sample_aspect_ratio</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160; </div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    err = <a class="code" href="ffmpeg_8c.html#a4981f23e6d794110daa5408fc9a9f0fb">send_frame_to_filters</a>(ist, <a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(ist-&gt;<a class="code" href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">filter_frame</a>);</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">decoded_frame</a>);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    <span class="keywordflow">return</span> err &lt; 0 ? err : <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;}</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a0c4f43b9ed5f99a30210c6ef7191a89e"> 2498</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a0c4f43b9ed5f99a30210c6ef7191a89e">transcode_subtitles</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> *<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>,</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;                               <span class="keywordtype">int</span> *decode_failed)</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;{</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a> <a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>;</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    <span class="keywordtype">int</span> free_sub = 1;</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__decoding.html#ga47db1b7f294b9f92684401b9c66a7c4b">avcodec_decode_subtitle2</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>,</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;                                          &amp;<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>, <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <a class="code" href="ffmpeg_8c.html#a733571df1f9d2cdd5aca9e933919a237">check_decode_result</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 || !*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>) {</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;        *decode_failed = 1;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>)</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;            <a class="code" href="ffmpeg_8c.html#aa1b7dcf7df1f398b1e33d121695b79c7">sub2video_flush</a>(ist);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    }</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160; </div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a1ed159d9bc9d71428699968505629b38">fix_sub_duration</a>) {</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = 1;</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>) {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>.<a class="code" href="struct_a_v_subtitle.html#af7cc390bba4f9d6c32e391ca59d117a2">pts</a> - ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>.<a class="code" href="struct_a_v_subtitle.html#af7cc390bba4f9d6c32e391ca59d117a2">pts</a>,</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                             1000, <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="keywordflow">if</span> (end &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.subtitle.end_display_time) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                       <span class="stringliteral">&quot;Subtitle duration reduced from %&quot;</span>PRId32<span class="stringliteral">&quot; to %d%s\n&quot;</span>,</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>.<a class="code" href="struct_a_v_subtitle.html#a354cdfa51cda54c914a569ee3f7493c0">end_display_time</a>, <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>,</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                       <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> &lt;= 0 ? <span class="stringliteral">&quot;, dropping it&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>.<a class="code" href="struct_a_v_subtitle.html#a354cdfa51cda54c914a569ee3f7493c0">end_display_time</a> = <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>;</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;            }</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        }</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">int</span>,        *<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>);</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">int</span>,        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>,         ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#a6ae65382f22317b94b7ccfe00024d31a">ret</a>);</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a>, <a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>,    ist-&gt;<a class="code" href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">prev_sub</a>.<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>);</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> &lt;= 0)</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    }</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <span class="keywordflow">if</span> (!*<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>)</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160; </div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">frame</a>) {</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;        <a class="code" href="ffmpeg_8c.html#a8d9e8224d0a2f354635fcaacce63acd4">sub2video_update</a>(ist, INT64_MIN, &amp;<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;        <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>)</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a> = <a class="code" href="libavutil_2fifo_8c.html#adae9b18c5eed14fe851c5bb984ce374b">av_fifo_alloc</a>(8 * <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_subtitle.html">AVSubtitle</a>));</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>)</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2fifo_8c.html#ac1e0d8ee7f1568cb40fa95a740c60f13">av_fifo_space</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>)) {</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavutil_2fifo_8c.html#aeaf7aa802f3b18fef86bb72445eff5d8">av_fifo_realloc2</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>, 2 * <a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>));</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;        }</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;        <a class="code" href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">sub2video</a>.<a class="code" href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">sub_queue</a>, &amp;<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;        free_sub = 0;</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160; </div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>.<a class="code" href="struct_a_v_subtitle.html#a89491b1f6998eceb6221791fd50087df">num_rects</a>)</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160; </div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#ac61e0f854402b58a64e676bdcfa75dfd">frames_decoded</a>++;</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160; </div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160; </div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a8058514ce4db47327793e924526a39ed">check_output_constraints</a>(ist, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>) || !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            || <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;type != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>)</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160; </div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        <a class="code" href="ffmpeg_8c.html#a2af61470284cfd849344d6a5fdd3257c">do_subtitle_out</a>(<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index], <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, &amp;<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;    }</div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160; </div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>:</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    <span class="keywordflow">if</span> (free_sub)</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;        <a class="code" href="group__lavc__core.html#gaa2c3e02a761d9fc0c5c9b2340408c332">avsubtitle_free</a>(&amp;<a class="code" href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">subtitle</a>);</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;}</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160; </div>
<div class="line"><a name="l02575"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a9b8d7a73907fc2dd36f4bd0cce4f2f0d"> 2575</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a9b8d7a73907fc2dd36f4bd0cce4f2f0d">send_filter_eof</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist)</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;{</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <span class="comment">/* TODO keep pts also in stream time base to avoid converting back */</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>,</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;                                   <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aea95b00154ff83c740b46376dfa06e11">AV_ROUND_NEAR_INF</a> | <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0a7fcb56631d6898b282d6c78ce6c14a43">AV_ROUND_PASS_MINMAX</a>);</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160; </div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#af6db4eeaee5d848f75aebb60927cc9d4">ifilter_send_eof</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>);</div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    }</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;}</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160; </div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="comment">/* pkt = NULL means EOF (needed to flush decoder buffers) */</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78"> 2591</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78">process_input_packet</a>(<a class="code" href="struct_input_stream.html">InputStream</a> *ist, <span class="keyword">const</span> <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keywordtype">int</span> no_eof)</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;{</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    <span class="keywordtype">int</span> repeating = 0;</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    <span class="keywordtype">int</span> eof_reached = 0;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160; </div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> avpkt;</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#a09d78f4795c4ff17dd54204450f2d394">saw_first_ts</a>) {</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> ? - ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">has_b_frames</a> * <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> / <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>) : 0;</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> = 0;</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; !ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>; <span class="comment">//unused but better to set it to a value thats not totally wrong</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;        }</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a09d78f4795c4ff17dd54204450f2d394">saw_first_ts</a> = 1;</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;    }</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160; </div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>;</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a>;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160; </div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;        <span class="comment">/* EOF handling */</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;        <a class="code" href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a>(&amp;avpkt);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        avpkt.<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;        avpkt.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = 0;</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;        avpkt = *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    }</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160; </div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> != <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> || !ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>)</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>;</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    }</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="comment">// while we have more to decode or while the decoder did output something on EOF</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    <span class="keywordflow">while</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;        int64_t duration_dts = 0;</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        int64_t duration_pts = 0;</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> = 0;</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;        <span class="keywordtype">int</span> decode_failed = 0;</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160; </div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a>;</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>;</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;        <span class="keywordflow">switch</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>) {</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a159db49b7f730d2869253cd4ff0411aa">decode_audio</a>    (ist, repeating ? <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : &amp;avpkt, &amp;<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>,</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;                                   &amp;decode_failed);</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a71dd0984704d7f70065c6b97edc7069e">decode_video</a>    (ist, repeating ? <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : &amp;avpkt, &amp;<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, &amp;duration_pts, !<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;                                   &amp;decode_failed);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            <span class="keywordflow">if</span> (!repeating || !<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> || <a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>) {</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>) {</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;                    duration_dts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> != 0 &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> != 0) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;                    <span class="keywordtype">int</span> ticks= <a class="code" href="avformat_8h.html#a125e78a8250557501479986fead28a43">av_stream_get_parser</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>) ? <a class="code" href="avformat_8h.html#a125e78a8250557501479986fead28a43">av_stream_get_parser</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>)-&gt;<a class="code" href="struct_a_v_codec_parser_context.html#a813780022f0a6abd1b7ab075264ffc3f">repeat_pict</a>+1 : ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">ticks_per_frame</a>;</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                    duration_dts = ((int64_t)<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> *</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;                                    ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * ticks) /</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;                                    ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> / ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">ticks_per_frame</a>;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;                }</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160; </div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;                <span class="keywordflow">if</span>(ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; duration_dts) {</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;                    ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> += duration_dts;</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;                }<span class="keywordflow">else</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;                    ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            }</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>) {</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;                <span class="keywordflow">if</span> (duration_pts &gt; 0) {</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;                    ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(duration_pts, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;                    ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> += duration_dts;</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;                }</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            }</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>:</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;            <span class="keywordflow">if</span> (repeating)</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a0c4f43b9ed5f99a30210c6ef7191a89e">transcode_subtitles</a>(ist, &amp;avpkt, &amp;<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>, &amp;decode_failed);</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;        }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            eof_reached = 1;</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;        }</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160; </div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;            <span class="keywordflow">if</span> (decode_failed) {</div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error while decoding stream #%d:%d: %s\n&quot;</span>,</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Error while processing the decoded &quot;</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;                       <span class="stringliteral">&quot;data for stream #%d:%d\n&quot;</span>, ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;            }</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;            <span class="keywordflow">if</span> (!decode_failed || <a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        }</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160; </div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>)</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> = 1;</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160; </div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a>)</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160; </div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;        <span class="comment">// During draining, we might get multiple output frames in this loop.</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        <span class="comment">// ffmpeg.c does not drain the filter chain on configuration changes,</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;        <span class="comment">// which means if we send multiple frames at once to the filters, and</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;        <span class="comment">// one of those frames changes configuration, the buffered frames will</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        <span class="comment">// be lost. This can upset certain FATE tests.</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;        <span class="comment">// Decode only 1 frame per call on EOF to appease these FATE tests.</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <span class="comment">// The ideal solution would be to rewrite decoding to use the new</span></div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        <span class="comment">// decoding API in a better way.</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160; </div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        repeating = 1;</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    }</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160; </div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="comment">/* after flushing, send an EOF on all the filter inputs attached to the stream */</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    <span class="comment">/* except when looping we need to flush but not to send an EOF */</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a> &amp;&amp; eof_reached &amp;&amp; !no_eof) {</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a9b8d7a73907fc2dd36f4bd0cce4f2f0d">send_filter_eof</a>(ist);</div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Error marking filters as finished\n&quot;</span>);</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;        }</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    }</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160; </div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="comment">/* handle stream copy */</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordflow">if</span> (!ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>) {</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>;</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;        <span class="keywordflow">switch</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>) {</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;            <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a> &gt;= 0);</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>) {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> += ((int64_t)<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> * ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>) /</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                                  ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>;</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            }</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>) {</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;                <span class="comment">// TODO: Remove work-around for c99-to-c89 issue 7</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                <a class="code" href="struct_a_v_rational.html">AVRational</a> time_base_q = <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                int64_t <a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>, time_base_q, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>));</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> + 1, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>), time_base_q);</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>) {</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> != 0) {</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;                <span class="keywordtype">int</span> ticks= <a class="code" href="avformat_8h.html#a125e78a8250557501479986fead28a43">av_stream_get_parser</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>) ? <a class="code" href="avformat_8h.html#a125e78a8250557501479986fead28a43">av_stream_get_parser</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>)-&gt;<a class="code" href="struct_a_v_codec_parser_context.html#a813780022f0a6abd1b7ab075264ffc3f">repeat_pict</a> + 1 : ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">ticks_per_frame</a>;</div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> += ((int64_t)<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> *</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;                                  ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> * ticks) /</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                                  ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> / ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">ticks_per_frame</a>;</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;            }</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;        }</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;    }</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160; </div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a8058514ce4db47327793e924526a39ed">check_output_constraints</a>(ist, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>) || <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed)</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;        <a class="code" href="ffmpeg_8c.html#adb98afa9c4922dc9f61b7130c3beb183">do_streamcopy</a>(ist, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    }</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160; </div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    <span class="keywordflow">return</span> !eof_reached;</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;}</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a2e002b603f4f756cbe614fb2e5cbb0dd"> 2773</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a2e002b603f4f756cbe614fb2e5cbb0dd">print_sdp</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;{</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordtype">char</span> sdp[16384];</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    <a class="code" href="struct_a_v_i_o_context.html">AVIOContext</a> *sdp_pb;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> **avc;</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;header_written)</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    }</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160; </div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;    avc = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>, <span class="keyword">sizeof</span>(*avc));</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="keywordflow">if</span> (!avc)</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, j = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;        <span class="keywordflow">if</span> (!strcmp(<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>, <span class="stringliteral">&quot;rtp&quot;</span>)) {</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;            avc[j] = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            j++;</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        }</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;    }</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160; </div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keywordflow">if</span> (!j)</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160; </div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;    <a class="code" href="group__lavf__misc.html#gaa2a7353a6bb0c8726797abd56b176af0">av_sdp_create</a>(avc, j, sdp, <span class="keyword">sizeof</span>(sdp));</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160; </div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8h.html#a20f244d86fd0a7190400a50689f3524a">sdp_filename</a>) {</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <a class="code" href="tablegen_8txt.html#a934618af0084fc36af687c3b11489b27">printf</a>(<span class="stringliteral">&quot;SDP:\n%s\n&quot;</span>, sdp);</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;        fflush(stdout);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="avio_8h.html#ade8a63980569494c99593ebf0d1e891b">avio_open2</a>(&amp;sdp_pb, <a class="code" href="ffmpeg_8h.html#a20f244d86fd0a7190400a50689f3524a">sdp_filename</a>, <a class="code" href="avio_8h.html#a5c9308f296545a8f3b7687d277a6dabc">AVIO_FLAG_WRITE</a>, &amp;<a class="code" href="ffmpeg_8c.html#a3a2cd7c4434c215577d8a317cad8e3ff">int_cb</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &lt; 0) {</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to open sdp file &#39;%s&#39;\n&quot;</span>, <a class="code" href="ffmpeg_8h.html#a20f244d86fd0a7190400a50689f3524a">sdp_filename</a>);</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;            <a class="code" href="avio_8h.html#a4933ebf30594f9ebb9f929271eb6b027">avio_print</a>(sdp_pb, sdp);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <a class="code" href="avio_8h.html#ae118a1f37f1e48617609ead9910aac15">avio_closep</a>(&amp;sdp_pb);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="ffmpeg_8h.html#a20f244d86fd0a7190400a50689f3524a">sdp_filename</a>);</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;        }</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    }</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;avc);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;}</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160; </div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> <a class="code" href="ffmpeg_8c.html#a360baf543db2a3aa9b2a91740eefdbd3">get_format</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *<a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>)</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;{</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a> *p;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160; </div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">for</span> (p = <a class="code" href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a>; *p != <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>; p++) {</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(*p);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_h_w_config.html">AVCodecHWConfig</a>  *config = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;        <span class="keywordflow">if</span> (!(<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;flags &amp; <a class="code" href="pixdesc_8h.html#a76f6211b2404231bd7d206ebf4ae46f6">AV_PIX_FMT_FLAG_HWACCEL</a>))</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160; </div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a6c3473c28e30500adb3fa7886e6d7c3e">hwaccel_id</a> == <a class="code" href="ffmpeg_8h.html#a0804b6530666fd8d5f4e4193ee1d205fab96d67115af909300a442d76232c0362">HWACCEL_GENERIC</a> ||</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a6c3473c28e30500adb3fa7886e6d7c3e">hwaccel_id</a> == <a class="code" href="ffmpeg_8h.html#a0804b6530666fd8d5f4e4193ee1d205faf30c0c6c4434db4f22346cdcbd909a02">HWACCEL_AUTO</a>) {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;                config = <a class="code" href="group__lavc__core.html#ga4f80582a2ea9c0e141de5d6f6152008f">avcodec_get_hw_config</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;                <span class="keywordflow">if</span> (!config)</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;                <span class="keywordflow">if</span> (!(config-&gt;<a class="code" href="struct_a_v_codec_h_w_config.html#a208c924c3f626b01bf2020eef9eb4905">methods</a> &amp;</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;                      <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba680870b80f0ed65e9ba97ea0905eb2fa">AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX</a>))</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                <span class="keywordflow">if</span> (config-&gt;<a class="code" href="struct_a_v_codec_h_w_config.html#a9352b11d6d6b315fe3c61b65447d5174">pix_fmt</a> == *p)</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;            }</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        }</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">if</span> (config) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <span class="keywordflow">if</span> (config-&gt;<a class="code" href="struct_a_v_codec_h_w_config.html#a1474cb73c1f41e377dc5070ae373ac40">device_type</a> != ist-&gt;<a class="code" href="struct_input_stream.html#af577e45cb148e174ef437f3cbaa8b628">hwaccel_device_type</a>) {</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;                <span class="comment">// Different hwaccel offered, ignore.</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;            }</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160; </div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#a518f7a9a1bd1b5544a39fdbd1d925663">hwaccel_decode_init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;                <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a6c3473c28e30500adb3fa7886e6d7c3e">hwaccel_id</a> == <a class="code" href="ffmpeg_8h.html#a0804b6530666fd8d5f4e4193ee1d205fab96d67115af909300a442d76232c0362">HWACCEL_GENERIC</a>) {</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>,</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                           <span class="stringliteral">&quot;%s hwaccel requested for input stream #%d:%d, &quot;</span></div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                           <span class="stringliteral">&quot;but cannot be initialized.\n&quot;</span>,</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;                           <a class="code" href="hwcontext_8c.html#afb2b99a15f3fdde25a2fd19353ac5a67">av_hwdevice_get_type_name</a>(config-&gt;<a class="code" href="struct_a_v_codec_h_w_config.html#a1474cb73c1f41e377dc5070ae373ac40">device_type</a>),</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;                           ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>;</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;                }</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;            }</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_h_w_accel.html">HWAccel</a> *hwaccel = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="ffmpeg_8h.html#ae4051148bbc3f89a78b6de3f6eddb997">hwaccels</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h_w_accel.html#a82d8cefa2fe98d73edc28eb129b9c510">name</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#ae4051148bbc3f89a78b6de3f6eddb997">hwaccels</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a> == *p) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                    hwaccel = &amp;<a class="code" href="ffmpeg_8h.html#ae4051148bbc3f89a78b6de3f6eddb997">hwaccels</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;                }</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;            }</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;            <span class="keywordflow">if</span> (!hwaccel) {</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                <span class="comment">// No hwaccel supporting this pixfmt.</span></div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;            }</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            <span class="keywordflow">if</span> (hwaccel-&gt;<a class="code" href="struct_h_w_accel.html#a34f08a5231e54a2fb677aa07bfc2f2b8">id</a> != ist-&gt;<a class="code" href="struct_input_stream.html#a6c3473c28e30500adb3fa7886e6d7c3e">hwaccel_id</a>) {</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                <span class="comment">// Does not match requested hwaccel.</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;            }</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160; </div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = hwaccel-&gt;<a class="code" href="struct_h_w_accel.html#a6524d8c42550b3b71408c216d0c8698a">init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>,</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;                       <span class="stringliteral">&quot;%s hwaccel requested for input stream #%d:%d, &quot;</span></div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;                       <span class="stringliteral">&quot;but cannot be initialized.\n&quot;</span>, hwaccel-&gt;<a class="code" href="struct_h_w_accel.html#a82d8cefa2fe98d73edc28eb129b9c510">name</a>,</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>;</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;            }</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;        }</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160; </div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a604ca5401ed734e8b1acb1f416f3210f">hw_frames_ctx</a>) {</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hw_frames_ctx = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a604ca5401ed734e8b1acb1f416f3210f">hw_frames_ctx</a>);</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hw_frames_ctx)</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>;</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;        }</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160; </div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a05769ba0518105626a6d64386795b48f">hwaccel_pix_fmt</a> = *p;</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    }</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160; </div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="keywordflow">return</span> *p;</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;}</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160; </div>
<div class="line"><a name="l02904"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a8aac50e0d8fe8a1bb2d79b56b9e57b0a"> 2904</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a8aac50e0d8fe8a1bb2d79b56b9e57b0a">get_buffer</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <span class="keywordtype">int</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>)</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;{</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;opaque;</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160; </div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a7243fc5f2d9fcbb9249c8a036dc4eb1b">hwaccel_get_buffer</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;format == ist-&gt;<a class="code" href="struct_input_stream.html#a05769ba0518105626a6d64386795b48f">hwaccel_pix_fmt</a>)</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;        <span class="keywordflow">return</span> ist-&gt;<a class="code" href="struct_input_stream.html#a7243fc5f2d9fcbb9249c8a036dc4eb1b">hwaccel_get_buffer</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160; </div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavc__decoding.html#ga09dee227d3666720eff1f6913d11699d">avcodec_default_get_buffer2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;}</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160; </div>
<div class="line"><a name="l02914"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a2b55a894aa10247fb5d5e065bc1b1655"> 2914</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a2b55a894aa10247fb5d5e065bc1b1655">init_input_stream</a>(<span class="keywordtype">int</span> ist_index, <span class="keywordtype">char</span> *<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, <span class="keywordtype">int</span> error_len)</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;{</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[ist_index];</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160; </div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <a class="code" href="struct_a_v_codec.html">AVCodec</a> *codec = ist-&gt;<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;        <span class="keywordflow">if</span> (!codec) {</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_len, <span class="stringliteral">&quot;Decoder (codec %s) not found for input stream #%d:%d&quot;</span>,</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;                    <a class="code" href="group__lavc__core.html#ga2016a52e94f867ebe5113bdf448e182d">avcodec_get_name</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a>), ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;        }</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160; </div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aab9c4495feeedde28c1e908d76b7b9f5">opaque</a>                = ist;</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a360a2b8508a67c4234d97f4c13ba1bb5">get_format</a>            = <a class="code" href="ffmpeg_8c.html#a360baf543db2a3aa9b2a91740eefdbd3">get_format</a>;</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#aef79333a4c6abf1628c55d75ec82bede">get_buffer2</a>           = <a class="code" href="ffmpeg_8c.html#a8aac50e0d8fe8a1bb2d79b56b9e57b0a">get_buffer</a>;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a5bd9a6f252d615243d01198fd3957fd8">thread_safe_callbacks</a> = 1;</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160; </div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        <a class="code" href="group__opt__set__funcs.html#ga3adf7185c21cc080890a5ec02c2e56b2">av_opt_set_int</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, <span class="stringliteral">&quot;refcounted_frames&quot;</span>, 1, 0);</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1a3f67e556cc61335c6f001ae3c7069f">AV_CODEC_ID_DVB_SUBTITLE</a> &amp;&amp;</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;           (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a> &amp; <a class="code" href="ffmpeg_8h.html#ac19c669906e50a4be81b78eb8777ca8c">DECODING_FOR_OST</a>)) {</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>, <span class="stringliteral">&quot;compute_edt&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <a class="code" href="group__lavu__dict.html#ga8ed4237acfc3d68484301a5d1859936c">AV_DICT_DONT_OVERWRITE</a>);</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a> &amp; <a class="code" href="ffmpeg_8h.html#a69301b0986380d3c18feb65b0ac128c4">DECODING_FOR_FILTER</a>)</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Warning using DVB subtitles for filtering and output at the same time is not fully supported, also see -compute_edt [0|1]\n&quot;</span>);</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;        }</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160; </div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>, <span class="stringliteral">&quot;sub_text_format&quot;</span>, <span class="stringliteral">&quot;ass&quot;</span>, <a class="code" href="group__lavu__dict.html#ga8ed4237acfc3d68484301a5d1859936c">AV_DICT_DONT_OVERWRITE</a>);</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160; </div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;        <span class="comment">/* Useful for subtitles retiming by lavf (FIXME), skipping samples in</span></div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;<span class="comment">         * audio, and video decoders such as cuvid or mediacodec */</span></div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">pkt_timebase</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160; </div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>, <span class="stringliteral">&quot;threads&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0))</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>, <span class="stringliteral">&quot;threads&quot;</span>, <span class="stringliteral">&quot;auto&quot;</span>, 0);</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        <span class="comment">/* Attached pics are sparse, therefore we would not want to delay their decoding till EOF. */</span></div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> &amp; <a class="code" href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a>)</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>, <span class="stringliteral">&quot;threads&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, 0);</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160; </div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#a77e8d12a4bdb9110a2d815b9aa5f8d02">hw_device_setup_for_decode</a>(ist);</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_len, <span class="stringliteral">&quot;Device setup failed for &quot;</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;                     <span class="stringliteral">&quot;decoder on input stream #%d:%d : %s&quot;</span>,</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;                     ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;        }</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160; </div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d">avcodec_open2</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>, codec, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>)) &lt; 0) {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#ga3d2f16ec410d409c19e3547673b8469b">AVERROR_EXPERIMENTAL</a>)</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;                <a class="code" href="ffmpeg_8c.html#a33407e9015714983ecce9cfd2c3bb41f">abort_codec_experimental</a>(codec, 0);</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160; </div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_len,</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;                     <span class="stringliteral">&quot;Error while opening decoder for input stream &quot;</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;                     <span class="stringliteral">&quot;#%d:%d : %s&quot;</span>,</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;                     ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;        }</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;        <a class="code" href="ffmpeg_8c.html#aeceadb162c07ff048a54d0d70cc851fb">assert_avoptions</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">decoder_opts</a>);</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;    }</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160; </div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160; </div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;}</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160; </div>
<div class="line"><a name="l02979"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9"> 2979</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_input_stream.html">InputStream</a> *<a class="code" href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9">get_input_stream</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;{</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index &gt;= 0)</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index];</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;}</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160; </div>
<div class="line"><a name="l02986"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a69b0f920b4d91360bd5cd5da5842e282"> 2986</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a69b0f920b4d91360bd5cd5da5842e282">compare_int64</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>)</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;{</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="common_8h.html#add8913a6f8e5714b6174eeaad5751006">FFDIFFSIGN</a>(*(<span class="keyword">const</span> int64_t *)<a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, *(<span class="keyword">const</span> int64_t *)<a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>);</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;}</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160; </div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;<span class="comment">/* open the muxer when all the streams are initialized */</span></div>
<div class="line"><a name="l02992"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a88ac1fa670df56643b51e4face274d51"> 2992</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a88ac1fa670df56643b51e4face274d51">check_init_output_file</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of, <span class="keywordtype">int</span> <a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>)</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;{</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160; </div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[of-&gt;<a class="code" href="struct_output_file.html#ac09855bfd066c44eb761f84e28f00dce">ost_index</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;initialized)</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    }</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160; </div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;    of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a5b37acfe4024d92ee510064e80920b40">interrupt_callback</a> = <a class="code" href="ffmpeg_8c.html#a3a2cd7c4434c215577d8a317cad8e3ff">int_cb</a>;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160; </div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__encoding.html#ga18b7b10bb5b94c4842de18166bc677cb">avformat_write_header</a>(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>, &amp;of-&gt;<a class="code" href="struct_output_file.html#aac74ddf07f90ad30cd5ddf80583468ec">opts</a>);</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;               <span class="stringliteral">&quot;Could not write header for output file #%d &quot;</span></div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;               <span class="stringliteral">&quot;(incorrect codec parameters ?): %s\n&quot;</span>,</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;               <a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    }</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    <span class="comment">//assert_avoptions(of-&gt;opts);</span></div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;    of-&gt;<a class="code" href="struct_output_file.html#a7f831b66ccff154c4e9d880d900e5b3f">header_written</a> = 1;</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160; </div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;    <a class="code" href="group__lavf__misc.html#gae2645941f2dc779c307eb6314fd39f10">av_dump_format</a>(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>, <a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>, 1);</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160; </div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a20f244d86fd0a7190400a50689f3524a">sdp_filename</a> || <a class="code" href="ffmpeg_8c.html#a9b608e8190714ba5feee307c53a74028">want_sdp</a>)</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;        <a class="code" href="ffmpeg_8c.html#a2e002b603f4f756cbe614fb2e5cbb0dd">print_sdp</a>();</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;    <span class="comment">/* flush the muxing queues */</span></div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[of-&gt;<a class="code" href="struct_output_file.html#ac09855bfd066c44eb761f84e28f00dce">ost_index</a> + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160; </div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;        <span class="comment">/* try to improve muxing time_base (only possible if nothing has been written yet) */</span></div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue))</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160; </div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue)) {</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            <a class="code" href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <span class="keyword">sizeof</span>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>), <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;muxing_queue_data_size -= <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;            <a class="code" href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a>(of, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, 1);</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;        }</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    }</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160; </div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;}</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160; </div>
<div class="line"><a name="l03039"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a433b8659111b2f6ae74ab1fa29445f2c"> 3039</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a433b8659111b2f6ae74ab1fa29445f2c">init_output_bsfs</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;{</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <a class="code" href="struct_a_v_b_s_f_context.html">AVBSFContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;bsf_ctx;</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160; </div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160; </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="codec__par_8h.html#a6d02e640ccc12c783841ce51d09b9fa7">avcodec_parameters_copy</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;par_in, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>);</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160; </div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;time_base_in = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160; </div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga242529d54013acf87e94273d298a5ff2">av_bsf_init</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error initializing bitstream filter: %s\n&quot;</span>,</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;filter-&gt;name);</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;    }</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160; </div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="codec__par_8h.html#a6d02e640ccc12c783841ce51d09b9fa7">avcodec_parameters_copy</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;par_out);</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;time_base_out;</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160; </div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;}</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160; </div>
<div class="line"><a name="l03068"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ac6e13f95a03d441765f0e4645cc8cf7e"> 3068</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#ac6e13f95a03d441765f0e4645cc8cf7e">init_output_stream_streamcopy</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;{</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <a class="code" href="struct_output_file.html">OutputFile</a> *of = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9">get_input_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par_dst = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>;</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <a class="code" href="struct_a_v_codec_parameters.html">AVCodecParameters</a> *par_src = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;ref_par;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;    <a class="code" href="struct_a_v_rational.html">AVRational</a> sar;</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;    uint32_t codec_tag = par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(ist &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter);</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160; </div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#gac7b282f51540ca7a99416a3ba6ee0d16">avcodec_parameters_to_context</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>);</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__avoptions.html#gaf1a88e8f152d7835f111b1ef8813fb2e">av_opt_set_dict</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>,</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;               <span class="stringliteral">&quot;Error setting up codec context options.\n&quot;</span>);</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    }</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160; </div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga0c7058f764778615e7978a1821ab3cfe">avcodec_parameters_from_context</a>(par_src, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx);</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>,</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;               <span class="stringliteral">&quot;Error getting reference codec parameters.\n&quot;</span>);</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;    }</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160; </div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    <span class="keywordflow">if</span> (!codec_tag) {</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> codec_tag_tmp;</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;        <span class="keywordflow">if</span> (!of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a> ||</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;            <a class="code" href="group__lavf__misc.html#ga27b89fa8286af6efb5a69e8db4033b09">av_codec_get_id</a> (of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a>, par_src-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>) == par_src-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> ||</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;            !<a class="code" href="group__lavf__misc.html#gabe1a7b6824078229c69b75c71053c035">av_codec_get_tag2</a>(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">codec_tag</a>, par_src-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a>, &amp;codec_tag_tmp))</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;            codec_tag = par_src-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a>;</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;    }</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160; </div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="codec__par_8h.html#a6d02e640ccc12c783841ce51d09b9fa7">avcodec_parameters_copy</a>(par_dst, par_src);</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160; </div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">codec_tag</a> = codec_tag;</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160; </div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num)</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate = ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate;</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160; </div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__misc.html#gae35832b110d26ffa3e8805b3d55e8f36">avformat_transfer_internal_stream_timing_info</a>(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>, <a class="code" href="ffmpeg_8h.html#a8e4ab3fbd5ee2de7cd51ff1a033db4b3">copy_tb</a>);</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160; </div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="comment">// copy timebase while removing common factors</span></div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &lt;= 0 || <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt;= 0)</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a> = <a class="code" href="group__lavu__math__rational.html#ga2eb3a275aabacd8421f140a12bab4a91">av_add_q</a>(<a class="code" href="group__lavf__misc.html#ga64b609bbdda09ec7b29534a30656eb1a">av_stream_get_codec_timebase</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st), (<a class="code" href="struct_a_v_rational.html">AVRational</a>){0, 1});</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="comment">// copy estimated duration as a hint to the muxer</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &lt;= 0 &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &gt; 0)</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160; </div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    <span class="comment">// copy disposition</span></div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad2d413a504862fdfcf84105e898deb88">nb_side_data</a>) {</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad2d413a504862fdfcf84105e898deb88">nb_side_data</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_a_v_packet_side_data.html">AVPacketSideData</a> *sd_src = &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a069da4bb2fba6871858065fdf25fe3b3">side_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_data;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160; </div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;            dst_data = <a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a>, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;            <span class="keywordflow">if</span> (!dst_data)</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;            memcpy(dst_data, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7d43e1011586e6c987f418b604b57ec3">data</a>, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        }</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;    }</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160; </div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;rotate_overridden) {</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *sd = <a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st, <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a>,</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;                                              <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) * 9);</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;        <span class="keywordflow">if</span> (sd)</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;            <a class="code" href="group__lavu__video__display.html#ga5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a>((<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *)sd, -<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;rotate_override_value);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;    }</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160; </div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    <span class="keywordflow">switch</span> (par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>) {</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a13213d6339827ff18b6af3f0ec13db5e">audio_volume</a> != 256) {</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;-acodec copy and -vol are incompatible (frames are not decoded)\n&quot;</span>);</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;        }</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;        <span class="keywordflow">if</span>((par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a> == 1 || par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a> == 1152 || par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a> == 576) &amp;&amp; par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a>)</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a>= 0;</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;        <span class="keywordflow">if</span>(par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a>)</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">block_align</a>= 0;</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_aspect_ratio.num) { <span class="comment">// overridden by the -aspect cli option</span></div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            sar =</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;                <a class="code" href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_aspect_ratio,</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;                         (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ par_dst-&gt;height, par_dst-&gt;width });</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Overriding aspect ratio &quot;</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;                   <span class="stringliteral">&quot;with stream copy may produce invalid files\n&quot;</span>);</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;            }</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>)</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;            sar = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a>;</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;            sar = par_src-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a>;</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a> = par_dst-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">sample_aspect_ratio</a> = sar;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>;</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a>;</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    }</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160; </div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160; </div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;}</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160; </div>
<div class="line"><a name="l03182"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a861b24f5520382037a477a313641b1cf"> 3182</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a861b24f5520382037a477a313641b1cf">set_encoder_id</a>(<a class="code" href="struct_output_file.html">OutputFile</a> *of, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;{</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;    <a class="code" href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a> *e;</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160; </div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *encoder_string;</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;    <span class="keywordtype">int</span> encoder_string_len;</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;    <span class="keywordtype">int</span> format_flags = 0;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="cafenc_8c.html#aa3e4f4f7b65f0f74ddcb4907e1993d92">codec_flags</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;flags;</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160; </div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;encoder&quot;</span>,  <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0))</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160; </div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    e = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(of-&gt;<a class="code" href="struct_output_file.html#aac74ddf07f90ad30cd5ddf80583468ec">opts</a>, <span class="stringliteral">&quot;fflags&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;    <span class="keywordflow">if</span> (e) {</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> *o = <a class="code" href="group__avoptions.html#gae31ae7fb20113b00108d0ecf53f25664">av_opt_find</a>(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>, <span class="stringliteral">&quot;fflags&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0);</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;        <span class="keywordflow">if</span> (!o)</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;        <a class="code" href="group__opt__eval__funcs.html#gae245940b870e13b759354d570decf3dc">av_opt_eval_flags</a>(of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>, o, e-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, &amp;format_flags);</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;    }</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;    e = <a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts, <span class="stringliteral">&quot;flags&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    <span class="keywordflow">if</span> (e) {</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> *o = <a class="code" href="group__avoptions.html#gae31ae7fb20113b00108d0ecf53f25664">av_opt_find</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx, <span class="stringliteral">&quot;flags&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0);</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;        <span class="keywordflow">if</span> (!o)</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;        <a class="code" href="group__opt__eval__funcs.html#gae245940b870e13b759354d570decf3dc">av_opt_eval_flags</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx, o, e-&gt;<a class="code" href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">value</a>, &amp;<a class="code" href="cafenc_8c.html#aa3e4f4f7b65f0f74ddcb4907e1993d92">codec_flags</a>);</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    }</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160; </div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    encoder_string_len = <span class="keyword">sizeof</span>(<a class="code" href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a>) + strlen(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;name) + 2;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    encoder_string     = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(encoder_string_len);</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    <span class="keywordflow">if</span> (!encoder_string)</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160; </div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <span class="keywordflow">if</span> (!(format_flags &amp; <a class="code" href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a>) &amp;&amp; !(<a class="code" href="cafenc_8c.html#aa3e4f4f7b65f0f74ddcb4907e1993d92">codec_flags</a> &amp; <a class="code" href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a>))</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;        <a class="code" href="group__lavu__string.html#ga716447ae73b612bcf3a405b9b4608f6c">av_strlcpy</a>(encoder_string, <a class="code" href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a> <span class="stringliteral">&quot; &quot;</span>, encoder_string_len);</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;        <a class="code" href="group__lavu__string.html#ga716447ae73b612bcf3a405b9b4608f6c">av_strlcpy</a>(encoder_string, <span class="stringliteral">&quot;Lavc &quot;</span>, encoder_string_len);</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;    <a class="code" href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a>(encoder_string, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;name, encoder_string_len);</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;encoder&quot;</span>,  encoder_string,</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;                <a class="code" href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a> | <a class="code" href="group__lavu__dict.html#ga8ed4237acfc3d68484301a5d1859936c">AV_DICT_DONT_OVERWRITE</a>);</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;}</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160; </div>
<div class="line"><a name="l03223"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a64d2227a8af6a247040fc50ab547dc0e"> 3223</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a64d2227a8af6a247040fc50ab547dc0e">parse_forced_key_frames</a>(<span class="keywordtype">char</span> *kf, <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>,</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;                                    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;{</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;    <span class="keywordtype">char</span> *p;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    <span class="keywordtype">int</span> n = 1, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0;</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    int64_t t, *<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160; </div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="keywordflow">for</span> (p = kf; *p; p++)</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;,&#39;</span>)</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;            n++;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = n;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;    <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keyword">sizeof</span>(*<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>));</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>) {</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Could not allocate forced key frames array.\n&quot;</span>);</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    }</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160; </div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    p = kf;</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; n; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;        <span class="keywordtype">char</span> *next = strchr(p, <span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160; </div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;        <span class="keywordflow">if</span> (next)</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;            *next++ = 0;</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160; </div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;        <span class="keywordflow">if</span> (!memcmp(p, <span class="stringliteral">&quot;chapters&quot;</span>, 8)) {</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;            <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *avf = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;            <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160; </div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;            <span class="keywordflow">if</span> (avf-&gt;<a class="code" href="struct_a_v_format_context.html#a6f60043baf4abd0d201ccefc27bb4306">nb_chapters</a> &gt; INT_MAX - <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> ||</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;                !(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a>(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> += avf-&gt;<a class="code" href="struct_a_v_format_context.html#a6f60043baf4abd0d201ccefc27bb4306">nb_chapters</a> - 1,</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;                                     <span class="keyword">sizeof</span>(*<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>)))) {</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>,</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;                       <span class="stringliteral">&quot;Could not allocate forced key frames array.\n&quot;</span>);</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;            }</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;            t = p[8] ? <a class="code" href="cmdutils_8c.html#aa60d6deab0047c29fc1f6602f812774f">parse_time_or_die</a>(<span class="stringliteral">&quot;force_key_frames&quot;</span>, p + 8, 1) : 0;</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;            t = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(t, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>);</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160; </div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; avf-&gt;<a class="code" href="struct_a_v_format_context.html#a6f60043baf4abd0d201ccefc27bb4306">nb_chapters</a>; j++) {</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;                <a class="code" href="struct_a_v_chapter.html">AVChapter</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = avf-&gt;<a class="code" href="struct_a_v_format_context.html#ac17d5fc2dcdb00806cc83b02d9f940f3">chapters</a>[j];</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;                <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;                <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++] = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;start, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;time_base,</div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;                                            avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>) + t;</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;            }</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160; </div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160; </div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;            t = <a class="code" href="cmdutils_8c.html#aa60d6deab0047c29fc1f6602f812774f">parse_time_or_die</a>(<span class="stringliteral">&quot;force_key_frames&quot;</span>, p, 1);</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;            <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>(<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;            <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++] = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(t, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>);</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160; </div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;        }</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160; </div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;        p = next;</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    }</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160; </div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> == <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;    qsort(<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keyword">sizeof</span>(*<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>), <a class="code" href="ffmpeg_8c.html#a69b0f920b4d91360bd5cd5da5842e282">compare_int64</a>);</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_count = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_pts   = <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a>;</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;}</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160; </div>
<div class="line"><a name="l03286"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#af347e179754a8ebece457e4a9985717b"> 3286</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#af347e179754a8ebece457e4a9985717b">init_encoder_time_base</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="struct_a_v_rational.html">AVRational</a> default_time_base)</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;{</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9">get_input_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc_ctx = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *oc;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160; </div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_timebase.num &gt; 0) {</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_timebase;</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    }</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160; </div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_timebase.num &lt; 0) {</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        <span class="keywordflow">if</span> (ist) {</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a> = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;        }</div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160; </div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;        oc = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(oc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Input stream data not available, using default time base\n&quot;</span>);</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;    }</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160; </div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a> = default_time_base;</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;}</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160; </div>
<div class="line"><a name="l03310"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a44476e48d5e06f4ee53c6e2fdbb62ca0"> 3310</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a44476e48d5e06f4ee53c6e2fdbb62ca0">init_output_stream_encode</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;{</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9">get_input_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *enc_ctx = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx;</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *oc = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <span class="keywordtype">int</span> j, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160; </div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <a class="code" href="ffmpeg_8c.html#a861b24f5520382037a477a313641b1cf">set_encoder_id</a>(<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index], <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160; </div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    <span class="comment">// Muxers use AV_PKT_DATA_DISPLAYMATRIX to signal rotation. On the other</span></div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    <span class="comment">// hand, the legacy API makes demuxers set &quot;rotate&quot; metadata entries,</span></div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <span class="comment">// which have to be filtered out to prevent leaking them to output files.</span></div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">metadata</a>, <span class="stringliteral">&quot;rotate&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160; </div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    <span class="keywordflow">if</span> (ist) {</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>          = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>;</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;        <a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160; </div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a> = <a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a>;</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; oc-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; j++) {</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            <a class="code" href="struct_a_v_stream.html">AVStream</a> *<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a> = oc-&gt;<a class="code" href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[j];</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a> != <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st &amp;&amp; <a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>)</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        }</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        <span class="keywordflow">if</span> (j == oc-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>)</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> ||</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>)</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a> = <a class="code" href="avformat_8h.html#af09f200b4cd9bf0baa05671436eef2fb">AV_DISPOSITION_DEFAULT</a>;</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;    }</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160; </div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="keywordflow">if</span> (enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>) {</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num)</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate = <a class="code" href="group__lavfi__buffersink__accessors.html#ga55614fd28de2fa05b04f427390061d5b">av_buffersink_get_frame_rate</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;        <span class="keywordflow">if</span> (ist &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num)</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate = ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>;</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        <span class="keywordflow">if</span> (ist &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num)</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">r_frame_rate</a>;</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        <span class="keywordflow">if</span> (ist &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num) {</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate = (<a class="code" href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a>){25, 1};</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;                   <span class="stringliteral">&quot;No information &quot;</span></div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;                   <span class="stringliteral">&quot;about the input framerate is available. Falling &quot;</span></div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;                   <span class="stringliteral">&quot;back to a default value of 25fps for output stream #%d:%d. Use the -r option &quot;</span></div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;                   <span class="stringliteral">&quot;if you want a different framerate.\n&quot;</span>,</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;        }</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;supported_framerates &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;force_fps) {</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;            <span class="keywordtype">int</span> idx = <a class="code" href="group__lavu__math__rational.html#ga63d5ef1c2f77a5fdccb2b3a1c8cc77f5">av_find_nearest_q_idx</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;supported_framerates);</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;supported_framerates[idx];</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        }</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;        <span class="comment">// reduce frame rate for mpeg4 to be within the spec limits</span></div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;        <span class="keywordflow">if</span> (enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">codec_id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a>) {</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;            <a class="code" href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.den,</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;                      <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.num, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate.den, 65535);</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        }</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    }</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160; </div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <span class="keywordflow">switch</span> (enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>) {</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>:</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>     = <a class="code" href="group__lavfi__buffersink__accessors.html#ga402ddbef6f7347869725696846ac81eb">av_buffersink_get_format</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>)</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a>,</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;                                                 <a class="code" href="group__lavu__sampfmts.html#ga0c3c218e1dd570ad4917c69a35a6c77d">av_get_bytes_per_sample</a>(enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>) &lt;&lt; 3);</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>    = <a class="code" href="group__lavfi__buffersink__accessors.html#ga2af714e82f48759551acdbc4488ded4a">av_buffersink_get_sample_rate</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a> = <a class="code" href="group__lavfi__buffersink__accessors.html#ga87e21bf198fd932c30cc3cdc6b16bff1">av_buffersink_get_channel_layout</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>       = <a class="code" href="group__lavfi__buffersink__accessors.html#gace78881c41bf449527826b95d21279a2">av_buffersink_get_channels</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160; </div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;        <a class="code" href="ffmpeg_8c.html#af347e179754a8ebece457e4a9985717b">init_encoder_time_base</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a>(1, enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>));</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160; </div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a>:</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        <a class="code" href="ffmpeg_8c.html#af347e179754a8ebece457e4a9985717b">init_encoder_time_base</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate));</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160; </div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;        <span class="keywordflow">if</span> (!(enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &amp;&amp; enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a>))</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a> = <a class="code" href="group__lavfi__buffersink__accessors.html#gabc82f65ec7f4fa47c5216260639258a1">av_buffersink_get_time_base</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;        <span class="keywordflow">if</span> (   <a class="code" href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a>(enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>) &lt; 0.001 &amp;&amp; <a class="code" href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a> != <a class="code" href="ffmpeg_8h.html#ad997d298e58562365e7011c3d2fdd811">VSYNC_PASSTHROUGH</a></div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;           &amp;&amp; (<a class="code" href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a> == <a class="code" href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a> || <a class="code" href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a> == <a class="code" href="ffmpeg_8h.html#ad58e98727fde6229cee5d33aaec6d787">VSYNC_VSCFR</a> || (<a class="code" href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a> == <a class="code" href="ffmpeg_8h.html#a7a29c56248090da0d5fb37a87b9a695d">VSYNC_AUTO</a> &amp;&amp; !(oc-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">flags</a> &amp; <a class="code" href="avformat_8h.html#a4d9f21e76a3bf919c74ea40957ef21a7">AVFMT_VARIABLE_FPS</a>)))){</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(oc, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Frame rate very high for a muxer not efficiently supporting it.\n&quot;</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;                                       <span class="stringliteral">&quot;Please consider specifying a lower framerate, a different muxer or -vsync 2\n&quot;</span>);</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        }</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160; </div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  = <a class="code" href="group__lavfi__buffersink__accessors.html#gac8c86515d2ef56090395dfd74854c835">av_buffersink_get_w</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> = <a class="code" href="group__lavfi__buffersink__accessors.html#ga955ecf3680e71e10429d7500343be25c">av_buffersink_get_h</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">sample_aspect_ratio</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">sample_aspect_ratio</a> =</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_aspect_ratio.num ? <span class="comment">// overridden by the -aspect cli option</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;            <a class="code" href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_aspect_ratio, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){ enc_ctx-&gt;height, enc_ctx-&gt;width }) :</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            <a class="code" href="group__lavfi__buffersink__accessors.html#gaa38ee33e1c7f6f7cb190bd2330e5f848">av_buffersink_get_sample_aspect_ratio</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160; </div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> = <a class="code" href="group__lavfi__buffersink__accessors.html#ga402ddbef6f7347869725696846ac81eb">av_buffersink_get_format</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter);</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>)</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a>,</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;                                                 <a class="code" href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a>(enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>)-&gt;<a class="code" href="struct_a_v_pix_fmt_descriptor.html#a17569c9349766c3b5201b33f84f19a25">comp</a>[0].<a class="code" href="struct_a_v_component_descriptor.html#ae504ab46ea3719e9930f91491af593dc">depth</a>);</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160; </div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>) {</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">color_range</a>            = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;color_range;</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">color_primaries</a>        = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;color_primaries;</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">color_trc</a>              = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;color_trc;</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">colorspace</a>             = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;colorspace;</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">chroma_sample_location</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;chroma_location;</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;        }</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160; </div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">framerate</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate;</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160; </div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_rate;</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160; </div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a> ||</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>   != <a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>  ||</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>  != <a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a> ||</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a> != <a class="code" href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">pix_fmt</a>) {</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = <a class="code" href="ffmpeg_8h.html#a374bbecd984df3a5da8a67cc6e9a7aa7">frame_bits_per_raw_sample</a>;</div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;        }</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160; </div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;top_field_first == 0) {</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5d222eeeb0b54ab462af363bcb9273bc">field_order</a> = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a>;</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;top_field_first == 1) {</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5d222eeeb0b54ab462af363bcb9273bc">field_order</a> = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a>;</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;        }</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160; </div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>) {</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;            <span class="keywordflow">if</span> (enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">flags</a> &amp; (<a class="code" href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a> | <a class="code" href="group__lavc__core.html#ga936c6ae1b3d24d7504f0a9aea1a24c74">AV_CODEC_FLAG_INTERLACED_ME</a>) &amp;&amp;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;top_field_first &gt;= 0)</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;                <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;top_field_first = !!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;top_field_first;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160; </div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;interlaced_frame) {</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;                <span class="keywordflow">if</span> (enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">id</a> == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a>)</div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                    enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5d222eeeb0b54ab462af363bcb9273bc">field_order</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;top_field_first ? <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a>:<a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a>;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;                    enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5d222eeeb0b54ab462af363bcb9273bc">field_order</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;top_field_first ? <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02cae1efa8b010ca5331f1f845104e7c0667">AV_FIELD_TB</a>:<a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02caba81a12143ed2cea06438739a7caaafb">AV_FIELD_BT</a>;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;                enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5d222eeeb0b54ab462af363bcb9273bc">field_order</a> = <a class="code" href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a>;</div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;        }</div>
<div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160; </div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes) {</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;            <span class="keywordflow">if</span> (!strncmp(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes, <span class="stringliteral">&quot;expr:&quot;</span>, 5)) {</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="eval_8c.html#ad3bf8f3330d1fd139de2ca156c313f34">av_expr_parse</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_pexpr, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes+5,</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;                                    <a class="code" href="ffmpeg_8c.html#a1cd18e061e07695c0547d09e3dd4dcce">forced_keyframes_const_names</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;                           <span class="stringliteral">&quot;Invalid force_key_frames expression &#39;%s&#39;\n&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes+5);</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;                }</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508affb3715058142056c2f602c81e52c15b">FKF_N</a>] = 0;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508af7bb0577a3c487398eaf009668f9c531">FKF_N_FORCED</a>] = 0;</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a522165f39cb8f0acf7c4bdebd1beb18a">FKF_PREV_FORCED_N</a>] = <a class="code" href="mathematics_8h.html#a8abfcc76130f3f991d124dd22d7e69bc">NAN</a>;</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes_expr_const_values[<a class="code" href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508aa4cb3dbc7a44f39776072f4349d1facc">FKF_PREV_FORCED_T</a>] = <a class="code" href="mathematics_8h.html#a8abfcc76130f3f991d124dd22d7e69bc">NAN</a>;</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160; </div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;                <span class="comment">// Don&#39;t parse the &#39;forced_keyframes&#39; in case of &#39;keep-source-keyframes&#39;,</span></div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;                <span class="comment">// parse it only for static kf timings</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strncmp(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes, <span class="stringliteral">&quot;source&quot;</span>, 6)) {</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;                <a class="code" href="ffmpeg_8c.html#a64d2227a8af6a247040fc50ab547dc0e">parse_forced_key_frames</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_keyframes, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx);</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;            }</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;        }</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>:</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;        enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a> = <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>;</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;        <span class="keywordflow">if</span> (!enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>) {</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>     = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index]-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">width</a>;</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;            enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>    = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index]-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">height</a>;</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;        }</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a>:</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;        abort();</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;    }</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160; </div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;mux_timebase = enc_ctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">time_base</a>;</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160; </div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;}</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160; </div>
<div class="line"><a name="l03486"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a906f8498cdec75ab84457f6b929115c6"> 3486</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a906f8498cdec75ab84457f6b929115c6">init_output_stream</a>(<a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                              <span class="keywordtype">char</span> *<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, <span class="keywordtype">int</span> error_len)</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;{</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160; </div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed) {</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;        <a class="code" href="struct_a_v_codec.html">AVCodec</a>      *codec = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc;</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;        <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a> = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;        <a class="code" href="struct_input_stream.html">InputStream</a> *ist;</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160; </div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a44476e48d5e06f4ee53c6e2fdbb62ca0">init_output_stream_encode</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160; </div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;        <span class="keywordflow">if</span> ((ist = <a class="code" href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9">get_input_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>)))</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;            <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a> = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a> &amp;&amp; <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;subtitle_header) {</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;            <span class="comment">/* ASS code assumes this buffer is null terminated so add extra byte. */</span></div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;subtitle_header = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;subtitle_header_size + 1);</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;subtitle_header)</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;            memcpy(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;subtitle_header, <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;subtitle_header, <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;subtitle_header_size);</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;subtitle_header_size = <a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;subtitle_header_size;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;        }</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts, <span class="stringliteral">&quot;threads&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0))</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts, <span class="stringliteral">&quot;threads&quot;</span>, <span class="stringliteral">&quot;auto&quot;</span>, 0);</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;            !codec-&gt;<a class="code" href="struct_a_v_codec.html#a16e4be8873bd93ac84c7b7d86455d518">defaults</a> &amp;&amp;</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;            !<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts, <span class="stringliteral">&quot;b&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) &amp;&amp;</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;            !<a class="code" href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts, <span class="stringliteral">&quot;ab&quot;</span>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0))</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;            <a class="code" href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts, <span class="stringliteral">&quot;b&quot;</span>, <span class="stringliteral">&quot;128000&quot;</span>, 0);</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160; </div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#a01128ebf95f6a3b130f446b13b171c52">hw_device_setup_for_encode</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_len, <span class="stringliteral">&quot;Device setup failed for &quot;</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                     <span class="stringliteral">&quot;encoder on output stream #%d:%d : %s&quot;</span>,</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;                     <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;        }</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160; </div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;        <span class="keywordflow">if</span> (ist &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;<a class="code" href="struct_a_v_codec.html#ab539ca86026d043803c24ba06fa84197">type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a> &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>) {</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;            <span class="keywordtype">int</span> input_props = 0, output_props = 0;</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;            <a class="code" href="struct_a_v_codec_descriptor.html">AVCodecDescriptor</a> <span class="keyword">const</span> *input_descriptor =</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                <a class="code" href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a>(<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;codec_id);</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;            <a class="code" href="struct_a_v_codec_descriptor.html">AVCodecDescriptor</a> <span class="keyword">const</span> *output_descriptor =</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                <a class="code" href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_id);</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;            <span class="keywordflow">if</span> (input_descriptor)</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;                input_props = input_descriptor-&gt;<a class="code" href="struct_a_v_codec_descriptor.html#a9949288403a12812cd6e3892ac45f40f">props</a> &amp; (<a class="code" href="group__lavc__core.html#gae1c276095faaece7c097f8fd9f1184db">AV_CODEC_PROP_TEXT_SUB</a> | <a class="code" href="group__lavc__core.html#gac0dfb59ee63132c9a064696a741419f6">AV_CODEC_PROP_BITMAP_SUB</a>);</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;            <span class="keywordflow">if</span> (output_descriptor)</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;                output_props = output_descriptor-&gt;<a class="code" href="struct_a_v_codec_descriptor.html#a9949288403a12812cd6e3892ac45f40f">props</a> &amp; (<a class="code" href="group__lavc__core.html#gae1c276095faaece7c097f8fd9f1184db">AV_CODEC_PROP_TEXT_SUB</a> | <a class="code" href="group__lavc__core.html#gac0dfb59ee63132c9a064696a741419f6">AV_CODEC_PROP_BITMAP_SUB</a>);</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;            <span class="keywordflow">if</span> (input_props &amp;&amp; output_props &amp;&amp; input_props != output_props) {</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;                <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_len,</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;                         <span class="stringliteral">&quot;Subtitle encoding currently only possible from text to text &quot;</span></div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                         <span class="stringliteral">&quot;or bitmap to bitmap&quot;</span>);</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;            }</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;        }</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160; </div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d">avcodec_open2</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx, codec, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts)) &lt; 0) {</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#ga3d2f16ec410d409c19e3547673b8469b">AVERROR_EXPERIMENTAL</a>)</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;                <a class="code" href="ffmpeg_8c.html#a33407e9015714983ecce9cfd2c3bb41f">abort_codec_experimental</a>(codec, 1);</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;            <a class="code" href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, error_len,</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;                     <span class="stringliteral">&quot;Error while opening encoder for output stream #%d:%d - &quot;</span></div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;                     <span class="stringliteral">&quot;maybe incorrect parameters such as bit_rate, rate, width or height&quot;</span>,</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;        }</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;            !(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;capabilities &amp; <a class="code" href="group__lavc__core.html#ga38b16ee9a8fd4c57ffd4fef0db3481c6">AV_CODEC_CAP_VARIABLE_FRAME_SIZE</a>))</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;            <a class="code" href="group__lavfi__buffersink.html#ga359d7d1e42c27ca14c07559d4e9adba7">av_buffersink_set_frame_size</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter,</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;                                            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;frame_size);</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        <a class="code" href="ffmpeg_8c.html#aeceadb162c07ff048a54d0d70cc851fb">assert_avoptions</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts);</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;bit_rate &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;bit_rate &lt; 1000 &amp;&amp;</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec_id != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea8ea61c837be9e734549f53754cef2cb2">AV_CODEC_ID_CODEC2</a> <span class="comment">/* don&#39;t complain about 700 bit/s modes */</span>)</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;The bitrate parameter is set too low.&quot;</span></div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;                                         <span class="stringliteral">&quot; It takes bits/s as argument, not kbits/s\n&quot;</span>);</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160; </div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#ga0c7058f764778615e7978a1821ab3cfe">avcodec_parameters_from_context</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx);</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>,</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;                   <span class="stringliteral">&quot;Error initializing the output stream codec context.\n&quot;</span>);</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;        }</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="comment">         * FIXME: ost-&gt;st-&gt;codec should&#39;t be needed here anymore.</span></div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavc__core.html#gae381631ba4fb14f4124575d9ceacb87e">avcodec_copy_context</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;codec, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx);</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160; </div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;nb_coded_side_data) {</div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160; </div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;nb_coded_side_data; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;                <span class="keyword">const</span> <a class="code" href="struct_a_v_packet_side_data.html">AVPacketSideData</a> *sd_src = &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;coded_side_data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_data;</div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160; </div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;                dst_data = <a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a>, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;                <span class="keywordflow">if</span> (!dst_data)</div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;                memcpy(dst_data, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7d43e1011586e6c987f418b604b57ec3">data</a>, sd_src-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;            }</div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;        }</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160; </div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;<span class="comment">         * Add global input side data. For now this is naive, and copies it</span></div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;<span class="comment">         * from the input stream&#39;s global side data. All side data should</span></div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;<span class="comment">         * really be funneled over AVFrame and libavfilter, then added back to</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;<span class="comment">         * packet side data, and then potentially using the first packet for</span></div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;<span class="comment">         * global side data.</span></div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="keywordflow">if</span> (ist) {</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad2d413a504862fdfcf84105e898deb88">nb_side_data</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;                <a class="code" href="struct_a_v_packet_side_data.html">AVPacketSideData</a> *sd = &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a069da4bb2fba6871858065fdf25fe3b3">side_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;                <span class="keywordflow">if</span> (sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a> != <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ad1bb4c48001b980f2563da3f969060d3">AV_PKT_DATA_CPB_PROPERTIES</a>) {</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;                    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst = <a class="code" href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st, sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a>, sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;                    <span class="keywordflow">if</span> (!dst)</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;                    memcpy(dst, sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7d43e1011586e6c987f418b604b57ec3">data</a>, sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;                    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#abcb8222561f1ee84a2f7a2157bed356c">autorotate</a> &amp;&amp; sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a> == <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a>)</div>
<div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;                        <a class="code" href="group__lavu__video__display.html#ga5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a>((uint32_t *)dst, 0);</div>
<div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;                }</div>
<div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            }</div>
<div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;        }</div>
<div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160; </div>
<div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;        <span class="comment">// copy timebase while removing common factors</span></div>
<div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a> &lt;= 0 || <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>.<a class="code" href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">den</a> &lt;= 0)</div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a> = <a class="code" href="group__lavu__math__rational.html#ga2eb3a275aabacd8421f140a12bab4a91">av_add_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, (<a class="code" href="struct_a_v_rational.html">AVRational</a>){0, 1});</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160; </div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;        <span class="comment">// copy estimated duration as a hint to the muxer</span></div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &lt;= 0 &amp;&amp; ist &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> &gt; 0)</div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">duration</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160; </div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;codec-&gt;codec= <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;codec;</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;stream_copy) {</div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#ac6e13f95a03d441765f0e4645cc8cf7e">init_output_stream_streamcopy</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;    }</div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160; </div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    <span class="comment">// parse user provided disposition, and update stream values</span></div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>) {</div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_option.html">AVOption</a> <a class="code" href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a>[] = {</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;            { <span class="stringliteral">&quot;disposition&quot;</span>         , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e">AV_OPT_TYPE_FLAGS</a>, { .i64 = 0 }, INT64_MIN, INT64_MAX, .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;            { <span class="stringliteral">&quot;default&quot;</span>             , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#af09f200b4cd9bf0baa05671436eef2fb">AV_DISPOSITION_DEFAULT</a>           },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            { <span class="stringliteral">&quot;dub&quot;</span>                 , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a5bf41aa870351bd4e912725bcaf87031">AV_DISPOSITION_DUB</a>               },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;            { <span class="stringliteral">&quot;original&quot;</span>            , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#aed1d78ae5604930f7465e5f48220941e">AV_DISPOSITION_ORIGINAL</a>          },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;            { <span class="stringliteral">&quot;comment&quot;</span>             , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a3fd17d972522f10a6d73937482225482">AV_DISPOSITION_COMMENT</a>           },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;            { <span class="stringliteral">&quot;lyrics&quot;</span>              , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a07792fd9060493192a4d4f25714a56d6">AV_DISPOSITION_LYRICS</a>            },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;            { <span class="stringliteral">&quot;karaoke&quot;</span>             , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a4e6b75c4d996642d88b98241f0ad2979">AV_DISPOSITION_KARAOKE</a>           },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;            { <span class="stringliteral">&quot;forced&quot;</span>              , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#aa72fcb393482cb6bb302d4995990bf3b">AV_DISPOSITION_FORCED</a>            },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;            { <span class="stringliteral">&quot;hearing_impaired&quot;</span>    , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a39ba22fdf89ec823243ba92bfd35c189">AV_DISPOSITION_HEARING_IMPAIRED</a>  },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;            { <span class="stringliteral">&quot;visual_impaired&quot;</span>     , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#aa8e9704bcc842236ad048062dcf45d45">AV_DISPOSITION_VISUAL_IMPAIRED</a>   },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;            { <span class="stringliteral">&quot;clean_effects&quot;</span>       , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a9b09132b5af7f7f6fe54d61782373bc7">AV_DISPOSITION_CLEAN_EFFECTS</a>     },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;            { <span class="stringliteral">&quot;attached_pic&quot;</span>        , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a>      },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;            { <span class="stringliteral">&quot;captions&quot;</span>            , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a51efe44185491ba0a214fe2bc92ac2a1">AV_DISPOSITION_CAPTIONS</a>          },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;            { <span class="stringliteral">&quot;descriptions&quot;</span>        , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#ae578ee8b851860926955855d1234f93f">AV_DISPOSITION_DESCRIPTIONS</a>      },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;            { <span class="stringliteral">&quot;dependent&quot;</span>           , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a791257b925684cc144e626be83ff0ade">AV_DISPOSITION_DEPENDENT</a>         },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;            { <span class="stringliteral">&quot;metadata&quot;</span>            , <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a>, { .i64 = <a class="code" href="avformat_8h.html#a5ff7b03b405295a7a9743cfa67369759">AV_DISPOSITION_METADATA</a>          },    .unit = <span class="stringliteral">&quot;flags&quot;</span> },</div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;            { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;        };</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> <span class="keyword">class </span>= {</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;            .<a class="code" href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">class_name</a> = <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;            .item_name  = <a class="code" href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a>,</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;            .option     = <a class="code" href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a>,</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;            .version    = <a class="code" href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a>,</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;        };</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;        <span class="keyword">const</span> <a class="code" href="struct_a_v_class.html">AVClass</a> *pclass = &amp;<span class="keyword">class</span>;</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160; </div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__opt__eval__funcs.html#gae245940b870e13b759354d570decf3dc">av_opt_eval_flags</a>(&amp;pclass, &amp;<a class="code" href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a>[0], <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>, &amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>);</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;    }</div>
<div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160; </div>
<div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;    <span class="comment">/* initialize bitstream filters for the output stream</span></div>
<div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="comment">     * needs to be done here, because the codec id for streamcopy is not</span></div>
<div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;<span class="comment">     * known until now */</span></div>
<div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a433b8659111b2f6ae74ab1fa29445f2c">init_output_bsfs</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160; </div>
<div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;initialized = 1;</div>
<div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160; </div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a88ac1fa670df56643b51e4face274d51">check_init_output_file</a>(<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index], <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index);</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160; </div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;}</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160; </div>
<div class="line"><a name="l03677"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ab19f077af44d4caa16ecad4d9532715a"> 3677</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#ab19f077af44d4caa16ecad4d9532715a">report_new_stream</a>(<span class="keywordtype">int</span> input_index, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;{</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a> *file = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[input_index];</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;    <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = file-&gt;<a class="code" href="struct_input_file.html#a4062ac530db413964aa76090995b85cd">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">streams</a>[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160; </div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> &lt; file-&gt;<a class="code" href="struct_input_file.html#a9a4fc2543b5db4e4a2b8b11294565dde">nb_streams_warn</a>)</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(file-&gt;<a class="code" href="struct_input_file.html#a4062ac530db413964aa76090995b85cd">ctx</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;           <span class="stringliteral">&quot;New %s stream %d:%d at pos:%&quot;</span>PRId64<span class="stringliteral">&quot; and DTS:%ss\n&quot;</span>,</div>
<div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;           <a class="code" href="group__lavu__misc.html#gaf21645cfa855b2caf9699d7dc7b2d08e">av_get_media_type_string</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">codecpar</a>-&gt;<a class="code" href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">codec_type</a>),</div>
<div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;           input_index, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>,</div>
<div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;           <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#ab5793d8195cf4789dfb3913b7a693903">pos</a>, <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>));</div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;    file-&gt;<a class="code" href="struct_input_file.html#a9a4fc2543b5db4e4a2b8b11294565dde">nb_streams_warn</a> = <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>-&gt;<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> + 1;</div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;}</div>
<div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160; </div>
<div class="line"><a name="l03692"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#aa4af1fda1a5fc33ec74e4ae2c0dbc122"> 3692</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#aa4af1fda1a5fc33ec74e4ae2c0dbc122">transcode_init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;{</div>
<div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k;</div>
<div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *oc;</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>;</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <span class="keywordtype">char</span> <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>[1024] = {0};</div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160; </div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;        <a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg = <a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; fg-&gt;<a class="code" href="struct_filter_graph.html#a92c7f6faf7e95b259bce1c717d43b4ee">nb_outputs</a>; j++) {</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;            <a class="code" href="struct_output_filter.html">OutputFilter</a> *ofilter = fg-&gt;<a class="code" href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">outputs</a>[j];</div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            <span class="keywordflow">if</span> (!ofilter-&gt;<a class="code" href="struct_output_filter.html#a2d283eee3e140f822b5eb381890ba035">ost</a> || ofilter-&gt;<a class="code" href="struct_output_filter.html#a2d283eee3e140f822b5eb381890ba035">ost</a>-&gt;<a class="code" href="struct_output_stream.html#a2a77c9bd86203478143c85e26e67df3d">source_index</a> &gt;= 0)</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;            <span class="keywordflow">if</span> (fg-&gt;<a class="code" href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">nb_inputs</a> != 1)</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;            <span class="keywordflow">for</span> (k = <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>-1; k &gt;= 0 ; k--)</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;                <span class="keywordflow">if</span> (fg-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[0]-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a> == <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[k])</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;            ofilter-&gt;<a class="code" href="struct_output_filter.html#a2d283eee3e140f822b5eb381890ba035">ost</a>-&gt;<a class="code" href="struct_output_stream.html#a2a77c9bd86203478143c85e26e67df3d">source_index</a> = k;</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;        }</div>
<div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;    }</div>
<div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160; </div>
<div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    <span class="comment">/* init framerate emulation */</span></div>
<div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;        <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;rate_emu)</div>
<div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;nb_streams; j++)</div>
<div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;                <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[j + <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index]-&gt;<a class="code" href="struct_input_stream.html#a6718f5f7b2206b2848af5e35ae3a9186">start</a> = <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>();</div>
<div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;    }</div>
<div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160; </div>
<div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    <span class="comment">/* init input streams */</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a2b55a894aa10247fb5d5e065bc1b1655">init_input_stream</a>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>, <span class="keyword">sizeof</span>(<a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>))) &lt; 0) {</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;                <a class="code" href="group__lavc__core.html#gaf4daa92361efb3523ef5afeb0b54077f">avcodec_close</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx);</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;            }</div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;            <span class="keywordflow">goto</span> dump_format;</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        }</div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160; </div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;<span class="comment">     * initialize stream copy and subtitle/data streams.</span></div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="comment">     * Encoded AVFrame based streams will get initialized as follows:</span></div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="comment">     * - when the first AVFrame is received in do_video_out</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;<span class="comment">     * - just before the first AVFrame is received in either transcode_step</span></div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;<span class="comment">     *   or reap_filters due to us requiring the filter chain buffer sink</span></div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;<span class="comment">     *   to be configured with the correct audio frame size, which is only</span></div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;<span class="comment">     *   known after the encoder is initialized.</span></div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;stream_copy &amp;&amp;</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;            (<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;enc_ctx-&gt;codec_type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> ||</div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;             <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_stream.html#ab7b674f9a0c60e3e02526d560a83f583">enc_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>))</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160; </div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a>(<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;            <span class="keywordflow">goto</span> dump_format;</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;    }</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160; </div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    <span class="comment">/* discard unused programs */</span></div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;        <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ctx-&gt;nb_programs; j++) {</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;            <a class="code" href="struct_a_v_program.html">AVProgram</a> *p = <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ctx-&gt;programs[j];</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;            <span class="keywordtype">int</span> discard  = <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a>;</div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160; </div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;            <span class="keywordflow">for</span> (k = 0; k &lt; p-&gt;<a class="code" href="struct_a_v_program.html#a136cf29d2aa5b0e4c6d743406c5e39d1">nb_stream_indexes</a>; k++)</div>
<div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + p-&gt;<a class="code" href="struct_a_v_program.html#a7967d41af4812ed61a28762e988c7a02">stream_index</a>[k]]-&gt;<a class="code" href="struct_input_stream.html#ac39249a26eeec2ed084fcc433ec9825e">discard</a>) {</div>
<div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;                    discard = <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a81453d8c452e8ee794daf7fde1c80b5b">AVDISCARD_DEFAULT</a>;</div>
<div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;                }</div>
<div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;            p-&gt;<a class="code" href="struct_a_v_program.html#a9c7a07c08a1f960aaa49f3f47633af5c">discard</a> = discard;</div>
<div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;        }</div>
<div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    }</div>
<div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160; </div>
<div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <span class="comment">/* write headers for files with no streams */</span></div>
<div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;        oc = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;        <span class="keywordflow">if</span> (oc-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">flags</a> &amp; <a class="code" href="avformat_8h.html#a1500ed92d07addf13d1e9dfd0fff6672">AVFMT_NOSTREAMS</a> &amp;&amp; oc-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a> == 0) {</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a88ac1fa670df56643b51e4face274d51">check_init_output_file</a>(<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;                <span class="keywordflow">goto</span> dump_format;</div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;        }</div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    }</div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160; </div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160; dump_format:</div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;    <span class="comment">/* dump the stream mapping */</span></div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Stream mapping:\n&quot;</span>);</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;        ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160; </div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; ist-&gt;<a class="code" href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">nb_filters</a>; j++) {</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8h.html#ad60a50ce02efbab762effbbdd7eda05e">filtergraph_is_simple</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[j]-&gt;<a class="code" href="struct_input_filter.html#ab1730578ae74132f67d2e847df4cc624">graph</a>)) {</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;  Stream #%d:%d (%s) -&gt; %s&quot;</span>,</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a> ? ist-&gt;<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>-&gt;<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a> : <span class="stringliteral">&quot;?&quot;</span>,</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[j]-&gt;<a class="code" href="struct_input_filter.html#a09efa5b4f05e3ca7c08c7ac949466556">name</a>);</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a> &gt; 1)</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; (graph %d)&quot;</span>, ist-&gt;<a class="code" href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">filters</a>[j]-&gt;<a class="code" href="struct_input_filter.html#ab1730578ae74132f67d2e847df4cc624">graph</a>-&gt;<a class="code" href="struct_filter_graph.html#a3ec6739834ba482eacc125e05b59b246">index</a>);</div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;            }</div>
<div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;        }</div>
<div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;    }</div>
<div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160; </div>
<div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160; </div>
<div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;attachment_filename) {</div>
<div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;            <span class="comment">/* an attached file */</span></div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;  File %s -&gt; Stream #%d:%d\n&quot;</span>,</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;attachment_filename, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;        }</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160; </div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter &amp;&amp; !<a class="code" href="ffmpeg_8h.html#ad60a50ce02efbab762effbbdd7eda05e">filtergraph_is_simple</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph)) {</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;            <span class="comment">/* output from a complex graph */</span></div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;  %s&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;name);</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a> &gt; 1)</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; (graph %d)&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160; </div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; -&gt; Stream #%d:%d (%s)\n&quot;</span>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index,</div>
<div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc ? <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;name : <span class="stringliteral">&quot;?&quot;</span>);</div>
<div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;        }</div>
<div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160; </div>
<div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;  Stream #%d:%d -&gt; #%d:%d&quot;</span>,</div>
<div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;               <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index]-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>,</div>
<div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;               <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index]-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>,</div>
<div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;               <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index,</div>
<div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;               <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_ist != <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index])</div>
<div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; [sync #%d:%d]&quot;</span>,</div>
<div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_ist-&gt;file_index,</div>
<div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                   <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sync_ist-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>);</div>
<div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;stream_copy)</div>
<div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; (copy)&quot;</span>);</div>
<div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_a_v_codec.html">AVCodec</a> *in_codec    = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index]-&gt;<a class="code" href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">dec</a>;</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_a_v_codec.html">AVCodec</a> *out_codec   = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc;</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *decoder_name   = <span class="stringliteral">&quot;?&quot;</span>;</div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *in_codec_name  = <span class="stringliteral">&quot;?&quot;</span>;</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *encoder_name   = <span class="stringliteral">&quot;?&quot;</span>;</div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *out_codec_name = <span class="stringliteral">&quot;?&quot;</span>;</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;            <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_descriptor.html">AVCodecDescriptor</a> *<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>;</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160; </div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;            <span class="keywordflow">if</span> (in_codec) {</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;                decoder_name  = in_codec-&gt;<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>;</div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;                <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a>(in_codec-&gt;<a class="code" href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">id</a>);</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>)</div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;                    in_codec_name = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;name;</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;                <span class="keywordflow">if</span> (!strcmp(decoder_name, in_codec_name))</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;                    decoder_name = <span class="stringliteral">&quot;native&quot;</span>;</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;            }</div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160; </div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;            <span class="keywordflow">if</span> (out_codec) {</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;                encoder_name   = out_codec-&gt;<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>;</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;                <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a> = <a class="code" href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a>(out_codec-&gt;<a class="code" href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">id</a>);</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>)</div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                    out_codec_name = <a class="code" href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a>-&gt;name;</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;                <span class="keywordflow">if</span> (!strcmp(encoder_name, out_codec_name))</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;                    encoder_name = <span class="stringliteral">&quot;native&quot;</span>;</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;            }</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160; </div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot; (%s (%s) -&gt; %s (%s))&quot;</span>,</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;                   in_codec_name, decoder_name,</div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;                   out_codec_name, encoder_name);</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;        }</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;    }</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160; </div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>) {</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a>);</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;    }</div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160; </div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;    <a class="code" href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a>(&amp;<a class="code" href="ffmpeg_8c.html#aff9e7184fccecd0ffcd55379bc93d477">transcode_init_done</a>, 1);</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160; </div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;}</div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160; </div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;<span class="comment">/* Return 1 if there remain streams where more output is wanted, 0 otherwise. */</span></div>
<div class="line"><a name="l03874"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a19c0b9ce7a779f9cafb2f1b639843ea2"> 3874</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a19c0b9ce7a779f9cafb2f1b639843ea2">need_output</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;{</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160; </div>
<div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>    = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;        <a class="code" href="struct_output_file.html">OutputFile</a> *of       = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index];</div>
<div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;        <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *os  = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;file_index]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160; </div>
<div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished ||</div>
<div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;            (os-&gt;<a class="code" href="struct_a_v_format_context.html#a1e7324262b6b78522e52064daaa7bc87">pb</a> &amp;&amp; <a class="code" href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a>(os-&gt;<a class="code" href="struct_a_v_format_context.html#a1e7324262b6b78522e52064daaa7bc87">pb</a>) &gt;= of-&gt;<a class="code" href="struct_output_file.html#a4482c7ccf1b6d9f56a7b02490a60fbd8">limit_filesize</a>))</div>
<div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;frame_number &gt;= <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;max_frames) {</div>
<div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;            <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; of-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">nb_streams</a>; j++)</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;                <a class="code" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a>(<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[of-&gt;<a class="code" href="struct_output_file.html#ac09855bfd066c44eb761f84e28f00dce">ost_index</a> + j]);</div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;        }</div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160; </div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;    }</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160; </div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;}</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160; </div>
<div class="line"><a name="l03904"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a677a37d7ea296c85c36f131210edd44b"> 3904</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="ffmpeg_8c.html#a677a37d7ea296c85c36f131210edd44b">choose_output</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;{</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;    int64_t opts_min = INT64_MAX;</div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    <a class="code" href="struct_output_stream.html">OutputStream</a> *ost_min = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160; </div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;        int64_t <a class="code" href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a> = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> ? INT64_MIN :</div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                       <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>,</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;                                    <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">cur_dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                <span class="stringliteral">&quot;cur_dts is invalid st:%d (%d) [init:%d i_done:%d finish:%d] (this is harmless if it occurs once at the start per stream)\n&quot;</span>,</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;                <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;st-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a>, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;initialized, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;inputs_done, <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished);</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160; </div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;initialized &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;inputs_done)</div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>;</div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160; </div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;finished &amp;&amp; <a class="code" href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a> &lt; opts_min) {</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;            opts_min = <a class="code" href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a>;</div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;            ost_min  = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;unavailable ? <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> : <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>;</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;        }</div>
<div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    }</div>
<div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;    <span class="keywordflow">return</span> ost_min;</div>
<div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;}</div>
<div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160; </div>
<div class="line"><a name="l03931"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96"> 3931</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96">set_tty_echo</a>(<span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#a95df7a7ff85fb8f73f62d3c5d2d325f8">on</a>)</div>
<div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;{</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="preprocessor">#if HAVE_TERMIOS_H</span></div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="keyword">struct </span>termios tty;</div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    <span class="keywordflow">if</span> (tcgetattr(0, &amp;tty) == 0) {</div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="writing__filters_8txt.html#a95df7a7ff85fb8f73f62d3c5d2d325f8">on</a>) tty.c_lflag |= <a class="code" href="af__aecho_8c.html#aa74d656b4802f55ddf3d3a7a1ea23502">ECHO</a>;</div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;        <span class="keywordflow">else</span>    tty.c_lflag &amp;= ~<a class="code" href="af__aecho_8c.html#aa74d656b4802f55ddf3d3a7a1ea23502">ECHO</a>;</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;        tcsetattr(0, TCSANOW, &amp;tty);</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    }</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;}</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160; </div>
<div class="line"><a name="l03943"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a17f085393f3e2cd51d665ab899282b81"> 3943</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a17f085393f3e2cd51d665ab899282b81">check_keyboard_interaction</a>(int64_t cur_time)</div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;{</div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a>;</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;    <span class="keyword">static</span> int64_t last_time;</div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a>)</div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a>;</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;    <span class="comment">/* read_key() returns 0 on EOF */</span></div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;    <span class="keywordflow">if</span>(cur_time - last_time &gt;= 100000 &amp;&amp; !<a class="code" href="ffmpeg_8c.html#aedf8e88653afe069ede914d844f5121c">run_as_daemon</a>){</div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;        <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> =  <a class="code" href="ffmpeg_8c.html#a888998656da528d50f125b39dcd1067a">read_key</a>();</div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;        last_time = cur_time;</div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    }<span class="keywordflow">else</span></div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;        <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> = -1;</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;q&#39;</span>)</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a>;</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;+&#39;</span>) <a class="code" href="group__lavu__log.html#ga1fd32c74db581e3e2e7f35d277bb1e24">av_log_set_level</a>(<a class="code" href="group__lavu__log.html#gae8ada5cc5722548d8698650b05207904">av_log_get_level</a>()+10);</div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;-&#39;</span>) <a class="code" href="group__lavu__log.html#ga1fd32c74db581e3e2e7f35d277bb1e24">av_log_set_level</a>(<a class="code" href="group__lavu__log.html#gae8ada5cc5722548d8698650b05207904">av_log_get_level</a>()-10);</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;s&#39;</span>) <a class="code" href="ffmpeg_8h.html#a6a23996c235371236b38622e17c4f4c1">qp_hist</a>     ^= 1;</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;h&#39;</span>){</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a3263927c45363b7cc52c9db3358dc413">do_hex_dump</a>){</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;            <a class="code" href="ffmpeg_8h.html#a3263927c45363b7cc52c9db3358dc413">do_hex_dump</a> = <a class="code" href="ffmpeg_8h.html#af7f6087971c265c7b0bed250b03a4624">do_pkt_dump</a> = 0;</div>
<div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="ffmpeg_8h.html#af7f6087971c265c7b0bed250b03a4624">do_pkt_dump</a>){</div>
<div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;            <a class="code" href="ffmpeg_8h.html#a3263927c45363b7cc52c9db3358dc413">do_hex_dump</a> = 1;</div>
<div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;            <a class="code" href="ffmpeg_8h.html#af7f6087971c265c7b0bed250b03a4624">do_pkt_dump</a> = 1;</div>
<div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;        <a class="code" href="group__lavu__log.html#ga1fd32c74db581e3e2e7f35d277bb1e24">av_log_set_level</a>(<a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>);</div>
<div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    }</div>
<div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;c&#39;</span> || <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;C&#39;</span>){</div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;        <span class="keywordtype">char</span> buf[4096], target[64], <a class="code" href="vf__drawtext_8c.html#af1aa66a39e65b3eb23cf9bfe8da01e20">command</a>[256], <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>[256] = {0};</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;        <span class="keywordtype">double</span> time;</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;        <span class="keywordtype">int</span> k, n = 0;</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\nEnter command: &lt;target&gt;|all &lt;time&gt;|-1 &lt;command&gt;[ &lt;argument&gt;]\n&quot;</span>);</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;        <a class="code" href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96">set_tty_echo</a>(1);</div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;        <span class="keywordflow">while</span> ((k = <a class="code" href="ffmpeg_8c.html#a888998656da528d50f125b39dcd1067a">read_key</a>()) != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; k != <span class="charliteral">&#39;\r&#39;</span> &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <span class="keyword">sizeof</span>(buf)-1)</div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;            <span class="keywordflow">if</span> (k &gt; 0)</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;                buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++] = k;</div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;        buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;        <a class="code" href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96">set_tty_echo</a>(0);</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;        <span class="keywordflow">if</span> (k &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;            (n = sscanf(buf, <span class="stringliteral">&quot;%63[^ ] %lf %255[^ ] %255[^\n]&quot;</span>, target, &amp;time, <a class="code" href="vf__drawtext_8c.html#af1aa66a39e65b3eb23cf9bfe8da01e20">command</a>, <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)) &gt;= 3) {</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;Processing command target:%s time:%f command:%s arg:%s&quot;</span>,</div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;                   target, time, <a class="code" href="vf__drawtext_8c.html#af1aa66a39e65b3eb23cf9bfe8da01e20">command</a>, <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>);</div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;                <a class="code" href="struct_filter_graph.html">FilterGraph</a> *fg = <a class="code" href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;                <span class="keywordflow">if</span> (fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>) {</div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;                    <span class="keywordflow">if</span> (time &lt; 0) {</div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;                        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi.html#gaaad7850fb5fe26d35e5d371ca75b79e1">avfilter_graph_send_command</a>(fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>, target, <a class="code" href="vf__drawtext_8c.html#af1aa66a39e65b3eb23cf9bfe8da01e20">command</a>, <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, buf, <span class="keyword">sizeof</span>(buf),</div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;                                                          <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;c&#39;</span> ? <a class="code" href="group__lavfi.html#gace41bae000b621fc8804a93ce9f2d6e9">AVFILTER_CMD_FLAG_ONE</a> : 0);</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;Command reply for stream %d: ret:%d res:\n%s&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, buf);</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;c&#39;</span>) {</div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;                        fprintf(stderr, <span class="stringliteral">&quot;Queuing commands only on filters supporting the specific command is unsupported\n&quot;</span>);</div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;                        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;                        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi.html#ga3140b3cd7bf9a80c2dfa868dcf7ac541">avfilter_graph_queue_command</a>(fg-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>, target, <a class="code" href="vf__drawtext_8c.html#af1aa66a39e65b3eb23cf9bfe8da01e20">command</a>, <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>, 0, time);</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;                            fprintf(stderr, <span class="stringliteral">&quot;Queuing command failed with error %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;                    }</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;                }</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;            }</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;                   <span class="stringliteral">&quot;Parse error, at least 3 arguments were expected, &quot;</span></div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;                   <span class="stringliteral">&quot;only %d given in string &#39;%s&#39;\n&quot;</span>, n, buf);</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;        }</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;    }</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;d&#39;</span> || <a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;D&#39;</span>){</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;        <span class="keywordtype">int</span> debug=0;</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;D&#39;</span>) {</div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;            debug = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[0]-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;codec-&gt;debug&lt;&lt;1;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;            <span class="keywordflow">if</span>(!debug) debug = 1;</div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;            <span class="keywordflow">while</span>(debug &amp; (<a class="code" href="avcodec_8h.html#a8dd683f65cea8e917f0124fbf6346f8b">FF_DEBUG_DCT_COEFF</a></div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;#<span class="keywordflow">if</span> <a class="code" href="libavcodec_2version_8h.html#abd910e02b1c8e616df228b856bf99cdf">FF_API_DEBUG_MV</a></div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;                                             |FF_DEBUG_VIS_QP|FF_DEBUG_VIS_MB_TYPE</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;#endif</div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;                                                                                  )) <span class="comment">//unsupported, would just crash</span></div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;                debug += debug;</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;            <span class="keywordtype">char</span> buf[32];</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;            <span class="keywordtype">int</span> k = 0;</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;            <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0;</div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;            <a class="code" href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96">set_tty_echo</a>(1);</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;            <span class="keywordflow">while</span> ((k = <a class="code" href="ffmpeg_8c.html#a888998656da528d50f125b39dcd1067a">read_key</a>()) != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; k != <span class="charliteral">&#39;\r&#39;</span> &amp;&amp; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <span class="keyword">sizeof</span>(buf)-1)</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;                <span class="keywordflow">if</span> (k &gt; 0)</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;                    buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++] = k;</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;            buf[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;            <a class="code" href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96">set_tty_echo</a>(0);</div>
<div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;            fprintf(stderr, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;            <span class="keywordflow">if</span> (k &lt;= 0 || sscanf(buf, <span class="stringliteral">&quot;%d&quot;</span>, &amp;debug)!=1)</div>
<div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;                fprintf(stderr,<span class="stringliteral">&quot;error parsing debug value\n&quot;</span>);</div>
<div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        }</div>
<div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;        <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;            <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;codec-&gt;debug = debug;</div>
<div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;        }</div>
<div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;        <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;            <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;debug = debug;</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;        }</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;        <span class="keywordflow">if</span>(debug) <a class="code" href="group__lavu__log.html#ga1fd32c74db581e3e2e7f35d277bb1e24">av_log_set_level</a>(<a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>);</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;        fprintf(stderr,<span class="stringliteral">&quot;debug=%d\n&quot;</span>, debug);</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;    }</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a> == <span class="charliteral">&#39;?&#39;</span>){</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;        fprintf(stderr, <span class="stringliteral">&quot;key    function\n&quot;</span></div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;                        <span class="stringliteral">&quot;?      show this help\n&quot;</span></div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;                        <span class="stringliteral">&quot;+      increase verbosity\n&quot;</span></div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;                        <span class="stringliteral">&quot;-      decrease verbosity\n&quot;</span></div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;                        <span class="stringliteral">&quot;c      Send command to first matching filter supporting it\n&quot;</span></div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;                        <span class="stringliteral">&quot;C      Send/Queue command to all matching filters\n&quot;</span></div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;                        <span class="stringliteral">&quot;D      cycle through available debug modes\n&quot;</span></div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;                        <span class="stringliteral">&quot;h      dump packets/hex press to cycle through the 3 states\n&quot;</span></div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;                        <span class="stringliteral">&quot;q      quit\n&quot;</span></div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                        <span class="stringliteral">&quot;s      Show QP histogram\n&quot;</span></div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;        );</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;    }</div>
<div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;}</div>
<div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160; </div>
<div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *input_thread(<span class="keywordtype">void</span> *<a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>)</div>
<div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;{</div>
<div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a>;</div>
<div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;non_blocking ? <a class="code" href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a> : 0;</div>
<div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160; </div>
<div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;    <span class="keywordflow">while</span> (1) {</div>
<div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;        <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__decoding.html#ga4fdb3084415a82e3810de6ee60e46a61">av_read_frame</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160; </div>
<div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;            <a class="code" href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a>(10000);</div>
<div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;        }</div>
<div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;            <a class="code" href="threadmessage_8c.html#a6b2b6c47728e7d442b31a49ca8f9f971">av_thread_message_queue_set_err_recv</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;        }</div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="threadmessage_8c.html#a873d588ed106d8dde339c4a16411e0b8">av_thread_message_queue_send</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;            <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> = 0;</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="threadmessage_8c.html#a873d588ed106d8dde339c4a16411e0b8">av_thread_message_queue_send</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>);</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;                   <span class="stringliteral">&quot;Thread message queue blocking; consider raising the &quot;</span></div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;                   <span class="stringliteral">&quot;thread_queue_size option (current value: %d)\n&quot;</span>,</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;                   <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread_queue_size);</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        }</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>)</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;                       <span class="stringliteral">&quot;Unable to send packet to main thread: %s\n&quot;</span>,</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;                       <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;            <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;            <a class="code" href="threadmessage_8c.html#a6b2b6c47728e7d442b31a49ca8f9f971">av_thread_message_queue_set_err_recv</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;        }</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;    }</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160; </div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;}</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160; </div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> free_input_thread(<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;{</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160; </div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> || !<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue)</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    <a class="code" href="threadmessage_8c.html#a01981ed85e713e682912ee6e063403ad">av_thread_message_queue_set_err_send</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>);</div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="threadmessage_8c.html#a0fb9f4909ad77c541f8ba4409b253111">av_thread_message_queue_recv</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 0) &gt;= 0)</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;        <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160; </div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;    <a class="code" href="os2threads_8h.html#a5a76bdbebd80f3d24df2a42cf08e98d6">pthread_join</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;joined = 1;</div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;    <a class="code" href="threadmessage_8c.html#a95727669f1ebba16a6a49ea8b9f2276e">av_thread_message_queue_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue);</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;}</div>
<div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160; </div>
<div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> free_input_threads(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;{</div>
<div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160; </div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;        free_input_thread(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;}</div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160; </div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> init_input_thread(<span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;{</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160; </div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread_queue_size &lt; 0)</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread_queue_size = (<a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a> &gt; 1 ? 8 : 0);</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread_queue_size)</div>
<div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160; </div>
<div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx-&gt;pb ? !<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx-&gt;pb-&gt;seekable :</div>
<div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;        strcmp(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx-&gt;iformat-&gt;name, <span class="stringliteral">&quot;lavfi&quot;</span>))</div>
<div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;non_blocking = 1;</div>
<div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="threadmessage_8c.html#a1734b65da48a88e7c78e8a29b1eee139">av_thread_message_queue_alloc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue,</div>
<div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;                                        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread_queue_size, <span class="keyword">sizeof</span>(<a class="code" href="struct_a_v_packet.html">AVPacket</a>));</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160; </div>
<div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="os2threads_8h.html#a9b6e74e145dcb6f426dd83bcc51aa217">pthread_create</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, input_thread, <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>))) {</div>
<div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;pthread_create failed: %s. Try to increase `ulimit -v` or decrease `ulimit -s`.\n&quot;</span>, strerror(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;        <a class="code" href="threadmessage_8c.html#a95727669f1ebba16a6a49ea8b9f2276e">av_thread_message_queue_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue);</div>
<div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    }</div>
<div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160; </div>
<div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;}</div>
<div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160; </div>
<div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> init_input_threads(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;{</div>
<div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160; </div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = init_input_thread(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;    }</div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;}</div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160; </div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> get_input_packet_mt(<a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;{</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="threadmessage_8c.html#a0fb9f4909ad77c541f8ba4409b253111">av_thread_message_queue_recv</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;in_thread_queue, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>,</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;                                        <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;non_blocking ?</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;                                        <a class="code" href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a> : 0);</div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;}</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160; </div>
<div class="line"><a name="l04173"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a98b27cc5411736ca4aaca78ff137cc53"> 4173</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a98b27cc5411736ca4aaca78ff137cc53">get_input_packet</a>(<a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>)</div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;{</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;rate_emu) {</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;            <a class="code" href="struct_input_stream.html">InputStream</a> *ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ist_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;            int64_t <a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> = <a class="code" href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>, 1000000, <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>);</div>
<div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            int64_t now = <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>() - ist-&gt;<a class="code" href="struct_input_stream.html#a6718f5f7b2206b2848af5e35ae3a9186">start</a>;</div>
<div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a> &gt; now)</div>
<div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        }</div>
<div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;    }</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160; </div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;thread_queue_size)</div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;        <span class="keywordflow">return</span> get_input_packet_mt(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavf__decoding.html#ga4fdb3084415a82e3810de6ee60e46a61">av_read_frame</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;ctx, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;}</div>
<div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160; </div>
<div class="line"><a name="l04193"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a94a52b0309bc05208e547d00c4ad3cba"> 4193</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a94a52b0309bc05208e547d00c4ad3cba">got_eagain</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;{</div>
<div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;unavailable)</div>
<div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;}</div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160; </div>
<div class="line"><a name="l04202"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a5e7569f8c8012ff719b112431b1df091"> 4202</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a5e7569f8c8012ff719b112431b1df091">reset_eagain</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;{</div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;        <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;eagain = 0;</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;        <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;unavailable = 0;</div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;}</div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160; </div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;<span class="comment">// set duration to max(tmp, duration) in a proper time base and return duration&#39;s time_base</span></div>
<div class="line"><a name="l04212"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#ab98f0ee465a0b23b09ba22ac22f359b7"> 4212</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="ffmpeg_8c.html#ab98f0ee465a0b23b09ba22ac22f359b7">duration_max</a>(int64_t tmp, int64_t *<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, <a class="code" href="struct_a_v_rational.html">AVRational</a> tmp_time_base,</div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;                               <a class="code" href="struct_a_v_rational.html">AVRational</a> time_base)</div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;{</div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160; </div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;    <span class="keywordflow">if</span> (!*<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>) {</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;        *<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = tmp;</div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;        <span class="keywordflow">return</span> tmp_time_base;</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;    }</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160; </div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__math.html#ga151744358fff630942b926e67e67c415">av_compare_ts</a>(*<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, time_base, tmp, tmp_time_base);</div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;        *<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = tmp;</div>
<div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;        <span class="keywordflow">return</span> tmp_time_base;</div>
<div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;    }</div>
<div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160; </div>
<div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;    <span class="keywordflow">return</span> time_base;</div>
<div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;}</div>
<div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160; </div>
<div class="line"><a name="l04231"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a7a6c1b83340f00304d8ed06364edfa60"> 4231</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a7a6c1b83340f00304d8ed06364edfa60">seek_to_start</a>(<a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>, <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>)</div>
<div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;{</div>
<div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist;</div>
<div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx;</div>
<div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, has_audio = 0;</div>
<div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;    int64_t <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = 0;</div>
<div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160; </div>
<div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__decoding.html#ga3b40fc8d2fda6992ae6ea2567d71ba30">avformat_seek_file</a>(<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>, -1, INT64_MIN, <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time, <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time, 0);</div>
<div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160; </div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;        ist   = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;        avctx = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160; </div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;        <span class="comment">/* duration is the length of the last frame in a stream</span></div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;<span class="comment">         * when audio stream is present we don&#39;t care about</span></div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;<span class="comment">         * last video frame length because it&#39;s not defined exactly */</span></div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;        <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#af76c7165931c721b63008034c94d9275">nb_samples</a>)</div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;            has_audio = 1;</div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;    }</div>
<div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160; </div>
<div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;        ist   = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;        avctx = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160; </div>
<div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;        <span class="keywordflow">if</span> (has_audio) {</div>
<div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;            <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#af76c7165931c721b63008034c94d9275">nb_samples</a>) {</div>
<div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;                <a class="code" href="struct_a_v_rational.html">AVRational</a> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> = {1, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>};</div>
<div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160; </div>
<div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#af76c7165931c721b63008034c94d9275">nb_samples</a>, <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;            }</div>
<div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>) {</div>
<div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(1, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">framerate</a>), ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>.<a class="code" href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">num</a>) {</div>
<div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(1, <a class="code" href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a>(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">avg_frame_rate</a>), ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = 1;</div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;            }</div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;        }</div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;duration)</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;            <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;time_base = ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>;</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;        <span class="comment">/* the total duration of the stream, max_pts - min_pts is</span></div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;<span class="comment">         * the duration of the stream without the last frame */</span></div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a911d752902aa8d4666ccefd8c912c91e">max_pts</a> &gt; ist-&gt;<a class="code" href="struct_input_stream.html#aeb79819841b6d172faf8c108db4ffbd0">min_pts</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a911d752902aa8d4666ccefd8c912c91e">max_pts</a> - (uint64_t)ist-&gt;<a class="code" href="struct_input_stream.html#aeb79819841b6d172faf8c108db4ffbd0">min_pts</a> &lt; INT64_MAX - <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>)</div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> += ist-&gt;<a class="code" href="struct_input_stream.html#a911d752902aa8d4666ccefd8c912c91e">max_pts</a> - ist-&gt;<a class="code" href="struct_input_stream.html#aeb79819841b6d172faf8c108db4ffbd0">min_pts</a>;</div>
<div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;        <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;time_base = <a class="code" href="ffmpeg_8c.html#ab98f0ee465a0b23b09ba22ac22f359b7">duration_max</a>(<a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>, &amp;<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;duration, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>,</div>
<div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;                                        <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;time_base);</div>
<div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;    }</div>
<div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160; </div>
<div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;loop &gt; 0)</div>
<div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;        <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;loop--;</div>
<div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160; </div>
<div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;}</div>
<div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160; </div>
<div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;<span class="comment"> * Return</span></div>
<div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;<span class="comment"> * - 0 -- one packet was read and processed</span></div>
<div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;<span class="comment"> * - AVERROR(EAGAIN) -- no packets were available for selected file,</span></div>
<div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;<span class="comment"> *   this function should be called again</span></div>
<div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;<span class="comment"> * - AVERROR_EOF -- this function should not be called again</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l04297"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a79192afe1e714610704c94cca1e6601b"> 4297</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a79192afe1e714610704c94cca1e6601b">process_input</a>(<span class="keywordtype">int</span> file_index)</div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;{</div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;    <a class="code" href="struct_input_file.html">InputFile</a> *<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a> = <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[file_index];</div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>;</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist;</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;    <a class="code" href="struct_a_v_packet.html">AVPacket</a> <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>;</div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, thread_ret, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;    int64_t <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;    int64_t pkt_dts;</div>
<div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;    <span class="keywordtype">int</span> disable_discontinuity_correction = <a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a>;</div>
<div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160; </div>
<div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;    <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>  = <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ctx;</div>
<div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a98b27cc5411736ca4aaca78ff137cc53">get_input_packet</a>(<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160; </div>
<div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;        <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;eagain = 1;</div>
<div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;    }</div>
<div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; ifile-&gt;<a class="code" href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a>) {</div>
<div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;        <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx;</div>
<div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;            ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;            avctx = ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>;</div>
<div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78">process_input_packet</a>(ist, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div>
<div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>&gt;0)</div>
<div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;                <a class="code" href="group__lavc__misc.html#gaf60b0e076f822abcb2700eb601d352a6">avcodec_flush_buffers</a>(avctx);</div>
<div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;            }</div>
<div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;        }</div>
<div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;        free_input_thread(file_index);</div>
<div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a7a6c1b83340f00304d8ed06364edfa60">seek_to_start</a>(<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>, <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>);</div>
<div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;        thread_ret = init_input_thread(file_index);</div>
<div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;        <span class="keywordflow">if</span> (thread_ret &lt; 0)</div>
<div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;            <span class="keywordflow">return</span> thread_ret;</div>
<div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Seek to start failed.\n&quot;</span>);</div>
<div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a98b27cc5411736ca4aaca78ff137cc53">get_input_packet</a>(<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;            <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;eagain = 1;</div>
<div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;        }</div>
<div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;    }</div>
<div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;            <a class="code" href="cmdutils_8c.html#a2911387e778b01a25f0e65eabadf1b7b">print_error</a>(<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;url, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>);</div>
<div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;        }</div>
<div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160; </div>
<div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;            ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;                <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78">process_input_packet</a>(ist, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>&gt;0)</div>
<div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;                    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;            }</div>
<div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160; </div>
<div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;            <span class="comment">/* mark all outputs that don&#39;t go through lavfi as finished */</span></div>
<div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; j++) {</div>
<div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;                <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[j];</div>
<div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160; </div>
<div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index == <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp;&amp;</div>
<div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;                    (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;stream_copy || <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc-&gt;type == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a>))</div>
<div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;                    <a class="code" href="ffmpeg_8c.html#a603a43eb595edc7f66cf508c6815d228">finish_output_stream</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>);</div>
<div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;            }</div>
<div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;        }</div>
<div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160; </div>
<div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;        <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;eof_reached = 1;</div>
<div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN);</div>
<div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;    }</div>
<div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160; </div>
<div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;    <a class="code" href="ffmpeg_8c.html#a5e7569f8c8012ff719b112431b1df091">reset_eagain</a>();</div>
<div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160; </div>
<div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#af7f6087971c265c7b0bed250b03a4624">do_pkt_dump</a>) {</div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;        <a class="code" href="group__lavf__misc.html#gaab9fad988c28cc1c4dcbba24a36b6113">av_pkt_dump_log2</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, <a class="code" href="ffmpeg_8h.html#a3263927c45363b7cc52c9db3358dc413">do_hex_dump</a>,</div>
<div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;                         <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;streams[<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>]);</div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;    }</div>
<div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;    <span class="comment">/* the following test is needed in case new streams appear</span></div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;<span class="comment">       dynamically in stream : we ignore them */</span></div>
<div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a> &gt;= <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;nb_streams) {</div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;        <a class="code" href="ffmpeg_8c.html#ab19f077af44d4caa16ecad4d9532715a">report_new_stream</a>(file_index, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;        <span class="keywordflow">goto</span> discard_packet;</div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    }</div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160; </div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;    ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>];</div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160; </div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">data_size</a> += <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>;</div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;    ist-&gt;<a class="code" href="struct_input_stream.html#ade4b46981af499da120e4e2b30517bef">nb_packets</a>++;</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160; </div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac39249a26eeec2ed084fcc433ec9825e">discard</a>)</div>
<div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;        <span class="keywordflow">goto</span> discard_packet;</div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160; </div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">flags</a> &amp; <a class="code" href="group__lavc__packet.html#ga46187df0d7711108ece88804dcc38025">AV_PKT_FLAG_CORRUPT</a>) {</div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a> ? <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a> : <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;               <span class="stringliteral">&quot;%s: corrupt input packet in stream %d\n&quot;</span>, <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;url, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>);</div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;    }</div>
<div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160; </div>
<div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;demuxer -&gt; ist_index:%d type:%s &quot;</span></div>
<div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;               <span class="stringliteral">&quot;next_dts:%s next_dts_time:%s next_pts:%s next_pts_time:%s pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s off:%s off_time:%s\n&quot;</span>,</div>
<div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;               <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>, <a class="code" href="group__lavu__misc.html#gaf21645cfa855b2caf9699d7dc7b2d08e">av_get_media_type_string</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>),</div>
<div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>, &amp;<a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>),</div>
<div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">next_pts</a>, &amp;<a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>),</div>
<div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a098fa89f90be39e95d5e42041e8cebfb">ts_offset</a>),</div>
<div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;               <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a098fa89f90be39e95d5e42041e8cebfb">ts_offset</a>, &amp;<a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>));</div>
<div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;    }</div>
<div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160; </div>
<div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;    <span class="keywordflow">if</span>(!ist-&gt;<a class="code" href="struct_input_stream.html#a8ee44633b600f2b31541b213f0a4b322">wrap_correction_done</a> &amp;&amp; <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a> &lt; 64){</div>
<div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;        int64_t stime, stime2;</div>
<div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;        <span class="comment">// Correcting starttime based on the enabled streams</span></div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;        <span class="comment">// FIXME this ideally should be done before the first use of starttime but we do not know which are the enabled streams at that point.</span></div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;        <span class="comment">//       so we instead do it here as part of discontinuity handling</span></div>
<div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;        <span class="keywordflow">if</span> (   ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;            &amp;&amp; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset == -<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time</div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;            &amp;&amp; (<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;iformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a4d232408e799fa2b2f2705a3e8e0b4b8">AVFMT_TS_DISCONT</a>)) {</div>
<div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;            int64_t new_start_time = INT64_MAX;</div>
<div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;nb_streams; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;                <a class="code" href="struct_a_v_stream.html">AVStream</a> *st = <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;streams[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;                <span class="keywordflow">if</span>(st-&gt;<a class="code" href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">discard</a> == <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a> || st-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;                new_start_time = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(new_start_time, <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(st-&gt;<a class="code" href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">start_time</a>, st-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>));</div>
<div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;            }</div>
<div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;            <span class="keywordflow">if</span> (new_start_time &gt; <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time) {</div>
<div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;Correcting start time by %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>, new_start_time - <a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time);</div>
<div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;                <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset = -new_start_time;</div>
<div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;            }</div>
<div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;        }</div>
<div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160; </div>
<div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;        stime = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;start_time, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;        stime2= stime + (1ULL&lt;&lt;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a>);</div>
<div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a8ee44633b600f2b31541b213f0a4b322">wrap_correction_done</a> = 1;</div>
<div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160; </div>
<div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;        <span class="keywordflow">if</span>(stime2 &gt; stime &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> &gt; stime + (1LL&lt;&lt;(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a>-1))) {</div>
<div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> -= 1ULL&lt;&lt;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a>;</div>
<div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a8ee44633b600f2b31541b213f0a4b322">wrap_correction_done</a> = 0;</div>
<div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;        }</div>
<div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;        <span class="keywordflow">if</span>(stime2 &gt; stime &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> &gt; stime + (1LL&lt;&lt;(ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a>-1))) {</div>
<div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> -= 1ULL&lt;&lt;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a>;</div>
<div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;            ist-&gt;<a class="code" href="struct_input_stream.html#a8ee44633b600f2b31541b213f0a4b322">wrap_correction_done</a> = 0;</div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;        }</div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;    }</div>
<div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160; </div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;    <span class="comment">/* add the stream-global side data to the first packet */</span></div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;    <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ade4b46981af499da120e4e2b30517bef">nb_packets</a> == 1) {</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#ad2d413a504862fdfcf84105e898deb88">nb_side_data</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;            <a class="code" href="struct_a_v_packet_side_data.html">AVPacketSideData</a> *src_sd = &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a069da4bb2fba6871858065fdf25fe3b3">side_data</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst_data;</div>
<div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160; </div>
<div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;            <span class="keywordflow">if</span> (src_sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a> == <a class="code" href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a>)</div>
<div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160; </div>
<div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, src_sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div>
<div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160; </div>
<div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;            dst_data = <a class="code" href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, src_sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">type</a>, src_sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;            <span class="keywordflow">if</span> (!dst_data)</div>
<div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160; </div>
<div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;            memcpy(dst_data, src_sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7d43e1011586e6c987f418b604b57ec3">data</a>, src_sd-&gt;<a class="code" href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">size</a>);</div>
<div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;        }</div>
<div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;    }</div>
<div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160; </div>
<div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160; </div>
<div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> *= ist-&gt;<a class="code" href="struct_input_stream.html#a0dae26daa277d99147113de4ea449bc1">ts_scale</a>;</div>
<div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> *= ist-&gt;<a class="code" href="struct_input_stream.html#a0dae26daa277d99147113de4ea449bc1">ts_scale</a>;</div>
<div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160; </div>
<div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;    pkt_dts = <a class="code" href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aea95b00154ff83c740b46376dfa06e11">AV_ROUND_NEAR_INF</a>|<a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0a7fcb56631d6898b282d6c78ce6c14a43">AV_ROUND_PASS_MINMAX</a>);</div>
<div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;    <span class="keywordflow">if</span> ((ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> ||</div>
<div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;         ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) &amp;&amp;</div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;        pkt_dts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> == <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; !<a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a></div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;        &amp;&amp; (<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;iformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a4d232408e799fa2b2f2705a3e8e0b4b8">AVFMT_TS_DISCONT</a>) &amp;&amp; <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;last_ts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;        int64_t <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>   = pkt_dts - <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;last_ts;</div>
<div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &lt; -1LL*<a class="code" href="ffmpeg_8h.html#aca0cd619e806cfe0b2aeafdf94cedf40">dts_delta_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> ||</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt;  1LL*<a class="code" href="ffmpeg_8h.html#aca0cd619e806cfe0b2aeafdf94cedf40">dts_delta_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>){</div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;            <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset -= <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>;</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;                   <span class="stringliteral">&quot;Inter stream timestamp discontinuity %&quot;</span>PRId64<span class="stringliteral">&quot;, new offset= %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;                   <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset);</div>
<div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;            <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> -= <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> -= <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;        }</div>
<div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;    }</div>
<div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160; </div>
<div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a> = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;duration, <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;time_base, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>) {</div>
<div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> += <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#a911d752902aa8d4666ccefd8c912c91e">max_pts</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a911d752902aa8d4666ccefd8c912c91e">max_pts</a>);</div>
<div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;        ist-&gt;<a class="code" href="struct_input_stream.html#aeb79819841b6d172faf8c108db4ffbd0">min_pts</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#aeb79819841b6d172faf8c108db4ffbd0">min_pts</a>);</div>
<div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;    }</div>
<div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160; </div>
<div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;        <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> += <a class="code" href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a>;</div>
<div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160; </div>
<div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;    pkt_dts = <a class="code" href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aea95b00154ff83c740b46376dfa06e11">AV_ROUND_NEAR_INF</a>|<a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0a7fcb56631d6898b282d6c78ce6c14a43">AV_ROUND_PASS_MINMAX</a>);</div>
<div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160; </div>
<div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a> &amp;&amp; pkt_dts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;        (<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;iformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a4d232408e799fa2b2f2705a3e8e0b4b8">AVFMT_TS_DISCONT</a>) &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a> &lt; 60) {</div>
<div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;        int64_t wrap_dts = <a class="code" href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> + (1LL&lt;&lt;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">pts_wrap_bits</a>),</div>
<div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;                                            ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>,</div>
<div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;                                            <a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aea95b00154ff83c740b46376dfa06e11">AV_ROUND_NEAR_INF</a>|<a class="code" href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0a7fcb56631d6898b282d6c78ce6c14a43">AV_ROUND_PASS_MINMAX</a>);</div>
<div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(wrap_dts - ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>) &lt; <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(pkt_dts - ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>)/10)</div>
<div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;            disable_discontinuity_correction = 0;</div>
<div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;    }</div>
<div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160; </div>
<div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;    <span class="keywordflow">if</span> ((ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a> ||</div>
<div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;         ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a> == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>) &amp;&amp;</div>
<div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;         pkt_dts != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp; ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a> &amp;&amp;</div>
<div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;        !disable_discontinuity_correction) {</div>
<div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;        int64_t <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>   = pkt_dts - ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>;</div>
<div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a>-&gt;iformat-&gt;flags &amp; <a class="code" href="avformat_8h.html#a4d232408e799fa2b2f2705a3e8e0b4b8">AVFMT_TS_DISCONT</a>) {</div>
<div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &lt; -1LL*<a class="code" href="ffmpeg_8h.html#aca0cd619e806cfe0b2aeafdf94cedf40">dts_delta_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> ||</div>
<div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt;  1LL*<a class="code" href="ffmpeg_8h.html#aca0cd619e806cfe0b2aeafdf94cedf40">dts_delta_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> ||</div>
<div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;                pkt_dts + <a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>/10 &lt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">dts</a>)) {</div>
<div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;                <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset -= <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>;</div>
<div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;                       <span class="stringliteral">&quot;timestamp discontinuity for stream #%d:%d &quot;</span></div>
<div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;                       <span class="stringliteral">&quot;(id=%d, type=%s): %&quot;</span>PRId64<span class="stringliteral">&quot;, new offset= %&quot;</span>PRId64<span class="stringliteral">&quot;\n&quot;</span>,</div>
<div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;                       ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">index</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">id</a>,</div>
<div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;                       <a class="code" href="group__lavu__misc.html#gaf21645cfa855b2caf9699d7dc7b2d08e">av_get_media_type_string</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>),</div>
<div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;                       <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ts_offset);</div>
<div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> -= <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> -= <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>);</div>
<div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;            }</div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &lt; -1LL*<a class="code" href="ffmpeg_8h.html#a484dd0b82131430527f4d4563a325e02">dts_error_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> ||</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;                 <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt;  1LL*<a class="code" href="ffmpeg_8h.html#a484dd0b82131430527f4d4563a325e02">dts_error_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>) {</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;DTS %&quot;</span>PRId64<span class="stringliteral">&quot;, next:%&quot;</span>PRId64<span class="stringliteral">&quot; st:%d invalid dropping\n&quot;</span>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>);</div>
<div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;                <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;            }</div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>){</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;                int64_t pkt_pts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>   = pkt_pts - ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>;</div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &lt; -1LL*<a class="code" href="ffmpeg_8h.html#a484dd0b82131430527f4d4563a325e02">dts_error_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a> ||</div>
<div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;                     <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> &gt;  1LL*<a class="code" href="ffmpeg_8h.html#a484dd0b82131430527f4d4563a325e02">dts_error_threshold</a>*<a class="code" href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a>) {</div>
<div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;                    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;PTS %&quot;</span>PRId64<span class="stringliteral">&quot;, next:%&quot;</span>PRId64<span class="stringliteral">&quot; invalid dropping st:%d\n&quot;</span>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">next_dts</a>, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>);</div>
<div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;                    <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a> = <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>;</div>
<div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;                }</div>
<div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;            }</div>
<div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;        }</div>
<div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;    }</div>
<div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160; </div>
<div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a> != <a class="code" href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a>)</div>
<div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;        <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;last_ts = <a class="code" href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>, <a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>);</div>
<div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160; </div>
<div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a>) {</div>
<div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;demuxer+ffmpeg -&gt; ist_index:%d type:%s pkt_pts:%s pkt_pts_time:%s pkt_dts:%s pkt_dts_time:%s off:%s off_time:%s\n&quot;</span>,</div>
<div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;               <a class="code" href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">ifile</a>-&gt;ist_index + <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">stream_index</a>, <a class="code" href="group__lavu__misc.html#gaf21645cfa855b2caf9699d7dc7b2d08e">av_get_media_type_string</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">codec_type</a>),</div>
<div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>), <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">dts</a>, &amp;ist-&gt;<a class="code" href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">st</a>-&gt;<a class="code" href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">time_base</a>),</div>
<div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;               <a class="code" href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a>(<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a098fa89f90be39e95d5e42041e8cebfb">ts_offset</a>),</div>
<div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;               <a class="code" href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a>(<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a098fa89f90be39e95d5e42041e8cebfb">ts_offset</a>, &amp;<a class="code" href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a>));</div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;    }</div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160; </div>
<div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;    <a class="code" href="ffmpeg_8c.html#a738eb950f81407f6fd85fee223606fd4">sub2video_heartbeat</a>(ist, <a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>.<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>);</div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160; </div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;    <a class="code" href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78">process_input_packet</a>(ist, &amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>, 0);</div>
<div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160; </div>
<div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;discard_packet:</div>
<div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;    <a class="code" href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a>(&amp;<a class="code" href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a>);</div>
<div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160; </div>
<div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;}</div>
<div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160; </div>
<div class="line"><a name="l04585"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a38de3252b4bb6ea13e22238efe42c015"> 4585</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a38de3252b4bb6ea13e22238efe42c015">transcode_from_filter</a>(<a class="code" href="struct_filter_graph.html">FilterGraph</a> *graph, <a class="code" href="struct_input_stream.html">InputStream</a> **best_ist)</div>
<div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;{</div>
<div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;    <span class="keywordtype">int</span> nb_requests, nb_requests_max = 0;</div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;    <a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter;</div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist;</div>
<div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160; </div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;    *best_ist = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavfi.html#gab20535e0685fb5f9b4f02e436412c3f0">avfilter_graph_request_oldest</a>(graph-&gt;<a class="code" href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">graph</a>);</div>
<div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &gt;= 0)</div>
<div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e">reap_filters</a>(0);</div>
<div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160; </div>
<div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e">reap_filters</a>(1);</div>
<div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; graph-&gt;<a class="code" href="struct_filter_graph.html#a92c7f6faf7e95b259bce1c717d43b4ee">nb_outputs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;            <a class="code" href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a>(graph-&gt;<a class="code" href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">outputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_filter.html#a2d283eee3e140f822b5eb381890ba035">ost</a>);</div>
<div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;    }</div>
<div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN))</div>
<div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160; </div>
<div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; graph-&gt;<a class="code" href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">nb_inputs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;        ifilter = graph-&gt;<a class="code" href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">inputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;        ist = ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>;</div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a03da9ae2de14fd2c6ccc0f09e7b8de84">eagain</a> ||</div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;            <a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a94be560ca078155d0948bbd1343cf33a">eof_reached</a>)</div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;        nb_requests = <a class="code" href="group__lavfi__buffersrc.html#ga996e96007a0fda870549ac3c4e1e0967">av_buffersrc_get_nb_failed_requests</a>(ifilter-&gt;<a class="code" href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">filter</a>);</div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;        <span class="keywordflow">if</span> (nb_requests &gt; nb_requests_max) {</div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;            nb_requests_max = nb_requests;</div>
<div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;            *best_ist = ist;</div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;        }</div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;    }</div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160; </div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;    <span class="keywordflow">if</span> (!*best_ist)</div>
<div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; graph-&gt;<a class="code" href="struct_filter_graph.html#a92c7f6faf7e95b259bce1c717d43b4ee">nb_outputs</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;            graph-&gt;<a class="code" href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">outputs</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_filter.html#a2d283eee3e140f822b5eb381890ba035">ost</a>-&gt;<a class="code" href="struct_output_stream.html#a4f86ebf7f573017f4010e2ccd07ffa65">unavailable</a> = 1;</div>
<div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160; </div>
<div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;}</div>
<div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160; </div>
<div class="line"><a name="l04631"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#abd1ff9b1a508070a11a26c9c3f3f455b"> 4631</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#abd1ff9b1a508070a11a26c9c3f3f455b">transcode_step</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;{</div>
<div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;    <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>;</div>
<div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a>  *ist = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160; </div>
<div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#a677a37d7ea296c85c36f131210edd44b">choose_output</a>();</div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>) {</div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a94a52b0309bc05208e547d00c4ad3cba">got_eagain</a>()) {</div>
<div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;            <a class="code" href="ffmpeg_8c.html#a5e7569f8c8012ff719b112431b1df091">reset_eagain</a>();</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;            <a class="code" href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a>(10000);</div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;        }</div>
<div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;No more inputs to read from, finishing.\n&quot;</span>);</div>
<div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>;</div>
<div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    }</div>
<div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160; </div>
<div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter &amp;&amp; !<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;graph) {</div>
<div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639">ifilter_has_all_input_formats</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph)) {</div>
<div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#adfc4727f627c5abd0aa843206d046ec6">configure_filtergraph</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph);</div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0) {</div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error reinitializing filters!\n&quot;</span>);</div>
<div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;            }</div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;        }</div>
<div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    }</div>
<div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160; </div>
<div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter &amp;&amp; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;graph) {</div>
<div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;<span class="comment">         * Similar case to the early audio initialization in reap_filters.</span></div>
<div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;<span class="comment">         * Audio is special in ffmpeg.c currently as we depend on lavfi&#39;s</span></div>
<div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;<span class="comment">         * audio frame buffering/creation to get the output audio frame size</span></div>
<div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;<span class="comment">         * in samples correct. The audio frame size for the filter chain is</span></div>
<div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;<span class="comment">         * configured during the output stream initialization.</span></div>
<div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;<span class="comment">         * Apparently avfilter_graph_request_oldest (called in</span></div>
<div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;<span class="comment">         * transcode_from_filter just down the line) peeks. Peeking already</span></div>
<div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;<span class="comment">         * puts one frame &quot;ready to be given out&quot;, which means that any</span></div>
<div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;<span class="comment">         * update in filter buffer sink configuration afterwards will not</span></div>
<div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;<span class="comment">         * help us. And yes, even if it would be utilized,</span></div>
<div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;<span class="comment">         * av_buffersink_get_samples is affected, as it internally utilizes</span></div>
<div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;<span class="comment">         * the same early exit for peeked frames.</span></div>
<div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;<span class="comment">         *</span></div>
<div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;<span class="comment">         * In other words, if avfilter_graph_request_oldest would not make</span></div>
<div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;<span class="comment">         * further filter chain configuration or usage of</span></div>
<div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;<span class="comment">         * av_buffersink_get_samples useless (by just causing the return</span></div>
<div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;<span class="comment">         * of the peeked AVFrame as-is), we could get rid of this additional</span></div>
<div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;<span class="comment">         * early encoder initialization.</span></div>
<div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__lavfi__buffersink__accessors.html#ga1eb8bbf583ffb7cc29aaa1944b1e699c">av_buffersink_get_type</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;filter) == <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>)</div>
<div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;            <a class="code" href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160; </div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a38de3252b4bb6ea13e22238efe42c015">transcode_from_filter</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph, &amp;ist)) &lt; 0)</div>
<div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;        <span class="keywordflow">if</span> (!ist)</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter) {</div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;nb_inputs; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;            <a class="code" href="struct_input_filter.html">InputFilter</a> *ifilter = <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;filter-&gt;graph-&gt;inputs[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;            <span class="keywordflow">if</span> (!ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">got_output</a> &amp;&amp; !<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a94be560ca078155d0948bbd1343cf33a">eof_reached</a>) {</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;                ist = ifilter-&gt;<a class="code" href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">ist</a>;</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;            }</div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;        }</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;        <span class="keywordflow">if</span> (!ist) {</div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;inputs_done = 1;</div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;        }</div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index &gt;= 0);</div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;        ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;source_index];</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;    }</div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160; </div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#a79192afe1e714610704c94cca1e6601b">process_input</a>(ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>);</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EAGAIN)) {</div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a03da9ae2de14fd2c6ccc0f09e7b8de84">eagain</a>)</div>
<div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;unavailable = 1;</div>
<div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;    }</div>
<div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160; </div>
<div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> == <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a> ? 0 : <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160; </div>
<div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e">reap_filters</a>(0);</div>
<div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;}</div>
<div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160; </div>
<div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;<span class="comment"> * The following code is the main loop of the file converter</span></div>
<div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l04721"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a0bbbd61fe097505cf12be11e60f07ca8"> 4721</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a0bbbd61fe097505cf12be11e60f07ca8">transcode</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;{</div>
<div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;    <a class="code" href="struct_a_v_format_context.html">AVFormatContext</a> *os;</div>
<div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;    <a class="code" href="struct_output_stream.html">OutputStream</a> *<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>;</div>
<div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;    <a class="code" href="struct_input_stream.html">InputStream</a> *ist;</div>
<div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;    int64_t timer_start;</div>
<div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;    int64_t total_packets_written = 0;</div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160; </div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#aa4af1fda1a5fc33ec74e4ae2c0dbc122">transcode_init</a>();</div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160; </div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a257632e7ed67e603a2b50e522412577d">stdin_interaction</a>) {</div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>, <span class="stringliteral">&quot;Press [q] to stop, [?] for help\n&quot;</span>);</div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;    }</div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160; </div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;    timer_start = <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>();</div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160; </div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = init_input_threads()) &lt; 0)</div>
<div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160; </div>
<div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">received_sigterm</a>) {</div>
<div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;        int64_t cur_time= <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>();</div>
<div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160; </div>
<div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;        <span class="comment">/* if &#39;q&#39; pressed, exits */</span></div>
<div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a257632e7ed67e603a2b50e522412577d">stdin_interaction</a>)</div>
<div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a17f085393f3e2cd51d665ab899282b81">check_keyboard_interaction</a>(cur_time) &lt; 0)</div>
<div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160; </div>
<div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;        <span class="comment">/* check if there&#39;s any stream where output is still needed */</span></div>
<div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a19c0b9ce7a779f9cafb2f1b639843ea2">need_output</a>()) {</div>
<div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a>, <span class="stringliteral">&quot;No more output streams to write to, finishing.\n&quot;</span>);</div>
<div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;        }</div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160; </div>
<div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8c.html#abd1ff9b1a508070a11a26c9c3f3f455b">transcode_step</a>();</div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0 &amp;&amp; <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> != <a class="code" href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a>) {</div>
<div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error while filtering: %s\n&quot;</span>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;        }</div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160; </div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;        <span class="comment">/* dump report by using the output first video and audio streams */</span></div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;        <a class="code" href="ffmpeg_8c.html#ac639722e5e5a6a26c78eca5e9122909d">print_report</a>(0, timer_start, cur_time);</div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;    }</div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;    free_input_threads();</div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160; </div>
<div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;    <span class="comment">/* at the end of stream, we must flush the decoder buffers */</span></div>
<div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;        ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a>[ist-&gt;<a class="code" href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">file_index</a>]-&gt;<a class="code" href="struct_input_file.html#a94be560ca078155d0948bbd1343cf33a">eof_reached</a>) {</div>
<div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;            <a class="code" href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78">process_input_packet</a>(ist, <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;        }</div>
<div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;    }</div>
<div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;    <a class="code" href="ffmpeg_8c.html#adfd9959ab0ec5f8d63e3f5b2cc929590">flush_encoders</a>();</div>
<div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160; </div>
<div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;    <a class="code" href="ffmpeg_8c.html#a19c97d7729be97389faaf4aaac8c3e88">term_exit</a>();</div>
<div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160; </div>
<div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;    <span class="comment">/* write the trailer if needed and close file */</span></div>
<div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;        os = <a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">ctx</a>;</div>
<div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;header_written) {</div>
<div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;                   <span class="stringliteral">&quot;Nothing was written into output file %d (%s), because &quot;</span></div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;                   <span class="stringliteral">&quot;at least one of its streams received no packets.\n&quot;</span>,</div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;                   <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, os-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>);</div>
<div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;        }</div>
<div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavf__encoding.html#ga7f14007e7dc8f481f054b21614dfec13">av_write_trailer</a>(os)) &lt; 0) {</div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Error writing trailer of %s: %s\n&quot;</span>, os-&gt;<a class="code" href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">url</a>, <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>));</div>
<div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a>)</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;                <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;        }</div>
<div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;    }</div>
<div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160; </div>
<div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;    <span class="comment">/* dump report by using the first video and audio streams */</span></div>
<div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;    <a class="code" href="ffmpeg_8c.html#ac639722e5e5a6a26c78eca5e9122909d">print_report</a>(1, timer_start, <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>());</div>
<div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160; </div>
<div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;    <span class="comment">/* close each encoder */</span></div>
<div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;        <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoding_needed) {</div>
<div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;enc_ctx-&gt;stats_in);</div>
<div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;        }</div>
<div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;        total_packets_written += <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;packets_written;</div>
<div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;packets_written &amp;&amp; (<a class="code" href="ffmpeg_8h.html#a5603b2d5752fc0d268b4422d0aa4a6e9">abort_on_flags</a> &amp; <a class="code" href="ffmpeg_8h.html#aef69b65c48b48532da4c9a99eb744a1e">ABORT_ON_FLAG_EMPTY_OUTPUT_STREAM</a>)) {</div>
<div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Empty output on stream %d.\n&quot;</span>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;            <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;        }</div>
<div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;    }</div>
<div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160; </div>
<div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;    <span class="keywordflow">if</span> (!total_packets_written &amp;&amp; (<a class="code" href="ffmpeg_8h.html#a5603b2d5752fc0d268b4422d0aa4a6e9">abort_on_flags</a> &amp; <a class="code" href="ffmpeg_8h.html#ab169b16d13871a631c18d844ca70eede">ABORT_ON_FLAG_EMPTY_OUTPUT</a>)) {</div>
<div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;Empty output\n&quot;</span>);</div>
<div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;    }</div>
<div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160; </div>
<div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;    <span class="comment">/* close each decoder */</span></div>
<div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;        ist = <a class="code" href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;        <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">decoding_needed</a>) {</div>
<div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;            <a class="code" href="group__lavc__core.html#gaf4daa92361efb3523ef5afeb0b54077f">avcodec_close</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>);</div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;            <span class="keywordflow">if</span> (ist-&gt;<a class="code" href="struct_input_stream.html#a45c7ee6dae692d19ff3d275032aeea94">hwaccel_uninit</a>)</div>
<div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;                ist-&gt;<a class="code" href="struct_input_stream.html#a45c7ee6dae692d19ff3d275032aeea94">hwaccel_uninit</a>(ist-&gt;<a class="code" href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">dec_ctx</a>);</div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;        }</div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;    }</div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160; </div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;    <a class="code" href="ffmpeg_8h.html#a7b352c0afc44da703891d7538bbcf737">hw_device_free_all</a>();</div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160; </div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;    <span class="comment">/* finished ! */</span></div>
<div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160; </div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160; <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;<span class="preprocessor">#if HAVE_THREADS</span></div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;    free_input_threads();</div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160; </div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>) {</div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;            <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a> = <a class="code" href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>) {</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile) {</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;                    <span class="keywordflow">if</span> (fclose(<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile))</div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;                        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;                               <span class="stringliteral">&quot;Error closing logfile, loss of information possible: %s\n&quot;</span>,</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;                               <a class="code" href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a>(<a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(errno)));</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;                    <a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;logfile = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;                }</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;forced_kf_pts);</div>
<div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;apad);</div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;<a class="code" href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">disposition</a>);</div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;                <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;encoder_opts);</div>
<div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;                <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;sws_dict);</div>
<div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;                <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;swr_opts);</div>
<div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;                <a class="code" href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a>(&amp;<a class="code" href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a>-&gt;resample_opts);</div>
<div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;            }</div>
<div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;        }</div>
<div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;    }</div>
<div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;}</div>
<div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160; </div>
<div class="line"><a name="l04865"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2"> 4865</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> <a class="code" href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2">get_benchmark_time_stamps</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;{</div>
<div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;    <a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> time_stamps = { <a class="code" href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a>() };</div>
<div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;<span class="preprocessor">#if HAVE_GETRUSAGE</span></div>
<div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;    <span class="keyword">struct </span>rusage rusage;</div>
<div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160; </div>
<div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;    getrusage(RUSAGE_SELF, &amp;rusage);</div>
<div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;    time_stamps.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a> =</div>
<div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;        (rusage.ru_utime.tv_sec * 1000000LL) + rusage.ru_utime.tv_usec;</div>
<div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;    time_stamps.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a> =</div>
<div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;        (rusage.ru_stime.tv_sec * 1000000LL) + rusage.ru_stime.tv_usec;</div>
<div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;<span class="preprocessor">#elif HAVE_GETPROCESSTIMES</span></div>
<div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;    HANDLE proc;</div>
<div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;    FILETIME <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, e, k, <a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>;</div>
<div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;    proc = GetCurrentProcess();</div>
<div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;    GetProcessTimes(proc, &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, &amp;e, &amp;k, &amp;<a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>);</div>
<div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;    time_stamps.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a> =</div>
<div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;        ((int64_t)<a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>.dwHighDateTime &lt;&lt; 32 | <a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a>.dwLowDateTime) / 10;</div>
<div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;    time_stamps.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a> =</div>
<div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;        ((int64_t)k.dwHighDateTime &lt;&lt; 32 | k.dwLowDateTime) / 10;</div>
<div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;    time_stamps.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a> = time_stamps.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a> = 0;</div>
<div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;    <span class="keywordflow">return</span> time_stamps;</div>
<div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;}</div>
<div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160; </div>
<div class="line"><a name="l04891"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a5be8624c1f375fb6ad9bd97bcc05f898"> 4891</a></span>&#160;<span class="keyword">static</span> int64_t <a class="code" href="ffmpeg_8c.html#a5be8624c1f375fb6ad9bd97bcc05f898">getmaxrss</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;{</div>
<div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;<span class="preprocessor">#if HAVE_GETRUSAGE &amp;&amp; HAVE_STRUCT_RUSAGE_RU_MAXRSS</span></div>
<div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;    <span class="keyword">struct </span>rusage rusage;</div>
<div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;    getrusage(RUSAGE_SELF, &amp;rusage);</div>
<div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;    <span class="keywordflow">return</span> (int64_t)rusage.ru_maxrss * 1024;</div>
<div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;<span class="preprocessor">#elif HAVE_GETPROCESSMEMORYINFO</span></div>
<div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;    HANDLE proc;</div>
<div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;    PROCESS_MEMORY_COUNTERS memcounters;</div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;    proc = GetCurrentProcess();</div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;    memcounters.cb = <span class="keyword">sizeof</span>(memcounters);</div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;    GetProcessMemoryInfo(proc, &amp;memcounters, <span class="keyword">sizeof</span>(memcounters));</div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <span class="keywordflow">return</span> memcounters.PeakPagefileUsage;</div>
<div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;}</div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160; </div>
<div class="line"><a name="l04909"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a79c04bfda90dc3b1887eeb43dd05a075"> 4909</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="ffmpeg_8c.html#a79c04bfda90dc3b1887eeb43dd05a075">log_callback_null</a>(<span class="keywordtype">void</span> *ptr, <span class="keywordtype">int</span> <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, va_list vl)</div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;{</div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;}</div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160; </div>
<div class="line"><a name="l04913"></a><span class="lineno"><a class="line" href="ffmpeg_8c.html#a3c04138a5bfe5d72780bb7e82a18e627"> 4913</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="ffmpeg_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;{</div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;    <a class="code" href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a> ti;</div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;    <a class="code" href="cmdutils_8c.html#a0f4db71e6407040a01316c537db5040c">init_dynload</a>();</div>
<div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160; </div>
<div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;    <a class="code" href="cmdutils_8c.html#aa64dcad44f54da335b337154d9e9950f">register_exit</a>(<a class="code" href="ffmpeg_8c.html#aba1cc9fe65233e8e346f8da1a6a59fa8">ffmpeg_cleanup</a>);</div>
<div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160; </div>
<div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;    setvbuf(stderr,<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,_IONBF,0); <span class="comment">/* win32 runtime needs this */</span></div>
<div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160; </div>
<div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;    <a class="code" href="group__lavu__log.html#gaf8143cc9a7cd364af1ff525c6181c0ce">av_log_set_flags</a>(<a class="code" href="group__lavu__log.html#ga6cdf5cd331b17e80e8308124f05a6db8">AV_LOG_SKIP_REPEATED</a>);</div>
<div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;    <a class="code" href="cmdutils_8c.html#a812390811ecf2673409d4d2191b3696a">parse_loglevel</a>(argc, argv, <a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>);</div>
<div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160; </div>
<div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;    <span class="keywordflow">if</span>(argc&gt;1 &amp;&amp; !strcmp(argv[1], <span class="stringliteral">&quot;-d&quot;</span>)){</div>
<div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;        <a class="code" href="ffmpeg_8c.html#aedf8e88653afe069ede914d844f5121c">run_as_daemon</a>=1;</div>
<div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;        <a class="code" href="group__lavu__log.html#ga14034761faf581a8b9ed6ef19b313708">av_log_set_callback</a>(<a class="code" href="ffmpeg_8c.html#a79c04bfda90dc3b1887eeb43dd05a075">log_callback_null</a>);</div>
<div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;        argc--;</div>
<div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;        argv++;</div>
<div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;    }</div>
<div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160; </div>
<div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;<span class="preprocessor">#if CONFIG_AVDEVICE</span></div>
<div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;    <a class="code" href="group__lavd.html#ga7c90a3585267b55941ae2f7388c006b6">avdevice_register_all</a>();</div>
<div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;    <a class="code" href="group__lavf__core.html#ga84542023693d61e8564c5d457979c932">avformat_network_init</a>();</div>
<div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160; </div>
<div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;    <a class="code" href="cmdutils_8c.html#a976c7dc9afeb4b0f6ec009a7a084e701">show_banner</a>(argc, argv, <a class="code" href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a>);</div>
<div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160; </div>
<div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;    <span class="comment">/* parse options and open all input/output files */</span></div>
<div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="ffmpeg_8h.html#aaaf7c2b3f63972f1f87face8f73cfdd6">ffmpeg_parse_options</a>(argc, argv);</div>
<div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160; </div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a> &lt;= 0 &amp;&amp; <a class="code" href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a> == 0) {</div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;        <a class="code" href="ffmpeg_8h.html#a5ca4ba3ead2e600e7a6bada7396a5e4d">show_usage</a>();</div>
<div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;Use -h to get full help or, even better, run &#39;man %s&#39;\n&quot;</span>, <a class="code" href="ffmpeg_8c.html#a01a73e823e0892841a4fd2f900b85688">program_name</a>);</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;    }</div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160; </div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;    <span class="comment">/* file converter / grab */</span></div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a> &lt;= 0) {</div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a>, <span class="stringliteral">&quot;At least one output file must be specified\n&quot;</span>);</div>
<div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;    }</div>
<div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160; </div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;        <span class="keywordflow">if</span> (strcmp(<a class="code" href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">oformat</a>-&gt;<a class="code" href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">name</a>, <span class="stringliteral">&quot;rtp&quot;</span>))</div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;            <a class="code" href="ffmpeg_8c.html#a9b608e8190714ba5feee307c53a74028">want_sdp</a> = 0;</div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;    }</div>
<div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160; </div>
<div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;    <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a> = ti = <a class="code" href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2">get_benchmark_time_stamps</a>();</div>
<div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8c.html#a0bbbd61fe097505cf12be11e60f07ca8">transcode</a>() &lt; 0)</div>
<div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(1);</div>
<div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ffmpeg_8h.html#a2b9cc93533df33a5f103f70a005cafd1">do_benchmark</a>) {</div>
<div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;        int64_t utime, stime, rtime;</div>
<div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;        <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a> = <a class="code" href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2">get_benchmark_time_stamps</a>();</div>
<div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;        utime = <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a> - ti.<a class="code" href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">user_usec</a>;</div>
<div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;        stime = <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a>  - ti.<a class="code" href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">sys_usec</a>;</div>
<div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;        rtime = <a class="code" href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a>.<a class="code" href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">real_usec</a> - ti.<a class="code" href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">real_usec</a>;</div>
<div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a>,</div>
<div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;               <span class="stringliteral">&quot;bench: utime=%0.3fs stime=%0.3fs rtime=%0.3fs\n&quot;</span>,</div>
<div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;               utime / 1000000.0, stime / 1000000.0, rtime / 1000000.0);</div>
<div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;    }</div>
<div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;%&quot;</span>PRIu64<span class="stringliteral">&quot; frames successfully decoded, %&quot;</span>PRIu64<span class="stringliteral">&quot; decoding errors\n&quot;</span>,</div>
<div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;           <a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[0], <a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[1]);</div>
<div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[0] + <a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[1]) * <a class="code" href="ffmpeg_8h.html#a084ef220571b6cb993893e49c9b2105e">max_error_rate</a> &lt; <a class="code" href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a>[1])</div>
<div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;        <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(69);</div>
<div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160; </div>
<div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;    <a class="code" href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a>(<a class="code" href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a> ? 255 : <a class="code" href="ffmpeg_8c.html#a478cd4ca45f6d24dd443138f3bc4a11a">main_return_code</a>);</div>
<div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ffmpeg_8c.html#a478cd4ca45f6d24dd443138f3bc4a11a">main_return_code</a>;</div>
<div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="atarget__bsf__fuzzer_8c_html_aa3d85a3469f60990fdff296efb86a9c2"><div class="ttname"><a href="target__bsf__fuzzer_8c.html#aa3d85a3469f60990fdff296efb86a9c2">error</a></div><div class="ttdeci">static void error(const char *err)</div><div class="ttdef"><b>Definition:</b> <a href="target__bsf__fuzzer_8c_source.html#l00030">target_bsf_fuzzer.c:30</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abee943e65d98f9763fa6602a356e774f"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abee943e65d98f9763fa6602a356e774f">AVCodecParameters::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00084">codec_par.h:84</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_af9920fc3fbfa347b8943ae461b50d18b"><div class="ttname"><a href="struct_a_v_frame.html#af9920fc3fbfa347b8943ae461b50d18b">AVFrame::pict_type</a></div><div class="ttdeci">enum AVPictureType pict_type</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00386">frame.h:391</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aa2e51f604857d33adbb56b536f4d7718"><div class="ttname"><a href="ffmpeg_8c.html#aa2e51f604857d33adbb56b536f4d7718">sub2video_copy_rect</a></div><div class="ttdeci">static void sub2video_copy_rect(uint8_t *dst, int dst_linesize, int w, int h, AVSubtitleRect *r)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00191">ffmpeg.c:191</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2e002b603f4f756cbe614fb2e5cbb0dd"><div class="ttname"><a href="ffmpeg_8c.html#a2e002b603f4f756cbe614fb2e5cbb0dd">print_sdp</a></div><div class="ttdeci">static void print_sdp(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02773">ffmpeg.c:2773</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaf4daa92361efb3523ef5afeb0b54077f"><div class="ttname"><a href="group__lavc__core.html#gaf4daa92361efb3523ef5afeb0b54077f">avcodec_close</a></div><div class="ttdeci">int avcodec_close(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01137">utils.c:1137</a></div></div>
<div class="ttc" id="agroup__lavc__encoding_html_ga37be256d85d78f665df27ad6c8f1d65b"><div class="ttname"><a href="group__lavc__encoding.html#ga37be256d85d78f665df27ad6c8f1d65b">avcodec_encode_subtitle</a></div><div class="ttdeci">int avcodec_encode_subtitle(AVCodecContext *avctx, uint8_t *buf, int buf_size, const AVSubtitle *sub)</div><div class="ttdef"><b>Definition:</b> <a href="encode_8c_source.html#l00093">encode.c:93</a></div></div>
<div class="ttc" id="astruct_input_stream_html_aa43597e5120768ad60b4dc1819942907"><div class="ttname"><a href="struct_input_stream.html#aa43597e5120768ad60b4dc1819942907">InputStream::filter_frame</a></div><div class="ttdeci">AVFrame * filter_frame</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00310">ffmpeg.h:310</a></div></div>
<div class="ttc" id="astruct_input_file_html_a03da9ae2de14fd2c6ccc0f09e7b8de84"><div class="ttname"><a href="struct_input_file.html#a03da9ae2de14fd2c6ccc0f09e7b8de84">InputFile::eagain</a></div><div class="ttdeci">int eagain</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00400">ffmpeg.h:400</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga63d5a489b419bd5d45cfd09091cbcbc2"><div class="ttname"><a href="group__lavc__packet.html#ga63d5a489b419bd5d45cfd09091cbcbc2">av_packet_unref</a></div><div class="ttdeci">void av_packet_unref(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00606">avpacket.c:606</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a5a76bdbebd80f3d24df2a42cf08e98d6"><div class="ttname"><a href="os2threads_8h.html#a5a76bdbebd80f3d24df2a42cf08e98d6">pthread_join</a></div><div class="ttdeci">static av_always_inline int pthread_join(pthread_t thread, void **value_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00094">os2threads.h:94</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48aa64a67386a9c53360744b86e4707b831">AVMEDIA_TYPE_SUBTITLE</a></div><div class="ttdeci">@ AVMEDIA_TYPE_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00204">avutil.h:204</a></div></div>
<div class="ttc" id="atime_8c_html_adf0e36df54426fa167e3cc5a3406f3b7"><div class="ttname"><a href="time_8c.html#adf0e36df54426fa167e3cc5a3406f3b7">av_gettime_relative</a></div><div class="ttdeci">int64_t av_gettime_relative(void)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00056">time.c:56</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_ga27b89fa8286af6efb5a69e8db4033b09"><div class="ttname"><a href="group__lavf__misc.html#ga27b89fa8286af6efb5a69e8db4033b09">av_codec_get_id</a></div><div class="ttdeci">enum AVCodecID av_codec_get_id(const struct AVCodecTag *const *tags, unsigned int tag)</div></div>
<div class="ttc" id="agroup__lavfi_html_gace41bae000b621fc8804a93ce9f2d6e9"><div class="ttname"><a href="group__lavfi.html#gace41bae000b621fc8804a93ce9f2d6e9">AVFILTER_CMD_FLAG_ONE</a></div><div class="ttdeci">#define AVFILTER_CMD_FLAG_ONE</div><div class="ttdoc">Stop once a filter understood the command (for target=all for example), fast filters are favored auto...</div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00706">avfilter.h:706</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="affmpeg_8c_html_af46fcadeb44ca81755a251c59bd3d78f"><div class="ttname"><a href="ffmpeg_8c.html#af46fcadeb44ca81755a251c59bd3d78f">ifilter_parameters_from_codecpar</a></div><div class="ttdeci">static void ifilter_parameters_from_codecpar(InputFilter *ifilter, AVCodecParameters *par)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01883">ffmpeg.c:1883</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a19c0b9ce7a779f9cafb2f1b639843ea2"><div class="ttname"><a href="ffmpeg_8c.html#a19c0b9ce7a779f9cafb2f1b639843ea2">need_output</a></div><div class="ttdeci">static int need_output(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03874">ffmpeg.c:3874</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a8d030f80a6336997e85f819eba6e1b2c"><div class="ttname"><a href="ffmpeg_8h.html#a8d030f80a6336997e85f819eba6e1b2c">audio_sync_method</a></div><div class="ttdeci">int audio_sync_method</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00154">ffmpeg_opt.c:154</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a8058514ce4db47327793e924526a39ed"><div class="ttname"><a href="ffmpeg_8c.html#a8058514ce4db47327793e924526a39ed">check_output_constraints</a></div><div class="ttdeci">static int check_output_constraints(InputStream *ist, OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02006">ffmpeg.c:2006</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5">AVPixelFormat</a></div><div class="ttdeci">AVPixelFormat</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00064">pixfmt.h:64</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_gaa38ee33e1c7f6f7cb190bd2330e5f848"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#gaa38ee33e1c7f6f7cb190bd2330e5f848">av_buffersink_get_sample_aspect_ratio</a></div><div class="ttdeci">AVRational av_buffersink_get_sample_aspect_ratio(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="affmpeg_8c_html_a3da49e34ea9fb9a212c4929d2ba403e2"><div class="ttname"><a href="ffmpeg_8c.html#a3da49e34ea9fb9a212c4929d2ba403e2">psnr</a></div><div class="ttdeci">static double psnr(double d)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01412">ffmpeg.c:1412</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga3d2f16ec410d409c19e3547673b8469b"><div class="ttname"><a href="group__lavu__error.html#ga3d2f16ec410d409c19e3547673b8469b">AVERROR_EXPERIMENTAL</a></div><div class="ttdeci">#define AVERROR_EXPERIMENTAL</div><div class="ttdoc">Requested feature is flagged experimental. Set strict_std_compliance if you really want to use it.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00072">error.h:72</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a7d6ef91120ffe80040c699e747a1ad68"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a7d6ef91120ffe80040c699e747a1ad68">AVCodecParameters::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00136">codec_par.h:136</a></div></div>
<div class="ttc" id="astruct_a_v_program_html_a9c7a07c08a1f960aaa49f3f47633af5c"><div class="ttname"><a href="struct_a_v_program.html#a9c7a07c08a1f960aaa49f3f47633af5c">AVProgram::discard</a></div><div class="ttdeci">enum AVDiscard discard</div><div class="ttdoc">selects which program to discard and which to feed to the caller</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01147">avformat.h:1148</a></div></div>
<div class="ttc" id="asvq3_8c_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00205">svq3.c:205</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab649e8c599f5a0e2a30448e67a36deb6"><div class="ttname"><a href="struct_a_v_codec_context.html#ab649e8c599f5a0e2a30448e67a36deb6">AVCodecContext::color_trc</a></div><div class="ttdeci">enum AVColorTransferCharacteristic color_trc</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1147</a></div></div>
<div class="ttc" id="astruct_input_filter_html_a09efa5b4f05e3ca7c08c7ac949466556"><div class="ttname"><a href="struct_input_filter.html#a09efa5b4f05e3ca7c08c7ac949466556">InputFilter::name</a></div><div class="ttdeci">uint8_t * name</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00242">ffmpeg.h:242</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac87e37dcf0240ae87c9004d10a14f1a0">AV_CODEC_ID_AC3</a></div><div class="ttdeci">@ AV_CODEC_ID_AC3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00421">codec_id.h:421</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aec57f0d859a6df8b479cd93ca3a44a33"><div class="ttname"><a href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">AVCodecContext::frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01206">avcodec.h:1206</a></div></div>
<div class="ttc" id="aintrax8_8c_html_ab7fb8460bc7af9e005bc1369f710bfbd"><div class="ttname"><a href="intrax8_8c.html#ab7fb8460bc7af9e005bc1369f710bfbd">extra_bits</a></div><div class="ttdeci">#define extra_bits(eb)</div><div class="ttdef"><b>Definition:</b> <a href="intrax8_8c_source.html#l00159">intrax8.c:159</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aa21f6f0cd9174b2bb6223cbd15b83508aa4cb3dbc7a44f39776072f4349d1facc"><div class="ttname"><a href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508aa4cb3dbc7a44f39776072f4349d1facc">FKF_PREV_FORCED_T</a></div><div class="ttdeci">@ FKF_PREV_FORCED_T</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00432">ffmpeg.h:432</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a0241b1f231c55cdf092b2d509e8d83df"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a0241b1f231c55cdf092b2d509e8d83df">atomic_store</a></div><div class="ttdeci">#define atomic_store(object, desired)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00085">stdatomic.h:85</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a5e7569f8c8012ff719b112431b1df091"><div class="ttname"><a href="ffmpeg_8c.html#a5e7569f8c8012ff719b112431b1df091">reset_eagain</a></div><div class="ttdeci">static void reset_eagain(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04202">ffmpeg.c:4202</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga5b8eff59cf259747cf0b31563e38ded6"><div class="ttname"><a href="group__lavc__decoding.html#ga5b8eff59cf259747cf0b31563e38ded6">avcodec_receive_packet</a></div><div class="ttdeci">int avcodec_receive_packet(AVCodecContext *avctx, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="encode_8c_source.html#l00338">encode.c:338</a></div></div>
<div class="ttc" id="astruct_benchmark_time_stamps_html_a8639f0bbe9044fc765f4ec5b3968a488"><div class="ttname"><a href="struct_benchmark_time_stamps.html#a8639f0bbe9044fc765f4ec5b3968a488">BenchmarkTimeStamps::real_usec</a></div><div class="ttdeci">int64_t real_usec</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00124">ffmpeg.c:124</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a7a6c1b83340f00304d8ed06364edfa60"><div class="ttname"><a href="ffmpeg_8c.html#a7a6c1b83340f00304d8ed06364edfa60">seek_to_start</a></div><div class="ttdeci">static int seek_to_start(InputFile *ifile, AVFormatContext *is)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04231">ffmpeg.c:4231</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ad997d298e58562365e7011c3d2fdd811"><div class="ttname"><a href="ffmpeg_8h.html#ad997d298e58562365e7011c3d2fdd811">VSYNC_PASSTHROUGH</a></div><div class="ttdeci">#define VSYNC_PASSTHROUGH</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00050">ffmpeg.h:50</a></div></div>
<div class="ttc" id="avf__curves_8c_html_a33ac7b8ce37a3a60855883424fcf8b62"><div class="ttname"><a href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a></div><div class="ttdeci">const char * r</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00114">vf_curves.c:114</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="affmpeg_8c_html_a5f5fcdd4b6cea118793d38dfa2da4741"><div class="ttname"><a href="ffmpeg_8c.html#a5f5fcdd4b6cea118793d38dfa2da4741">nb_input_files</a></div><div class="ttdeci">int nb_input_files</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00150">ffmpeg.c:150</a></div></div>
<div class="ttc" id="aopt_8h_html"><div class="ttname"><a href="opt_8h.html">opt.h</a></div></div>
<div class="ttc" id="affmpeg_8h_html_adfc4727f627c5abd0aa843206d046ec6"><div class="ttname"><a href="ffmpeg_8h.html#adfc4727f627c5abd0aa843206d046ec6">configure_filtergraph</a></div><div class="ttdeci">int configure_filtergraph(FilterGraph *fg)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l01012">ffmpeg_filter.c:1012</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_html"><div class="ttname"><a href="struct_a_v_dictionary.html">AVDictionary</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00030">dict.c:30</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a7e7ee2a0542150203a78fc135a15674b"><div class="ttname"><a href="ffmpeg_8c.html#a7e7ee2a0542150203a78fc135a15674b">ffmpeg_exited</a></div><div class="ttdeci">static volatile int ffmpeg_exited</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00345">ffmpeg.c:345</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_program_html"><div class="ttname"><a href="struct_a_v_program.html">AVProgram</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01145">avformat.h:1145</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a1cd18e061e07695c0547d09e3dd4dcce"><div class="ttname"><a href="ffmpeg_8c.html#a1cd18e061e07695c0547d09e3dd4dcce">forced_keyframes_const_names</a></div><div class="ttdeci">const char *const forced_keyframes_const_names[]</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00114">ffmpeg.c:114</a></div></div>
<div class="ttc" id="alibavcodec_2version_8h_html_a391ab92645796653bdc9eed09e1f8e0b"><div class="ttname"><a href="libavcodec_2version_8h.html#a391ab92645796653bdc9eed09e1f8e0b">LIBAVCODEC_IDENT</a></div><div class="ttdeci">#define LIBAVCODEC_IDENT</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2version_8h_source.html#l00042">version.h:42</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga151744358fff630942b926e67e67c415"><div class="ttname"><a href="group__lavu__math.html#ga151744358fff630942b926e67e67c415">av_compare_ts</a></div><div class="ttdeci">int av_compare_ts(int64_t ts_a, AVRational tb_a, int64_t ts_b, AVRational tb_b)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00147">mathematics.c:147</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ab539ca86026d043803c24ba06fa84197"><div class="ttname"><a href="struct_a_v_codec.html#ab539ca86026d043803c24ba06fa84197">AVCodec::type</a></div><div class="ttdeci">enum AVMediaType type</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00202">codec.h:203</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_aeecdbc3f86c3bcbf9c42ac7a867e91db"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#aeecdbc3f86c3bcbf9c42ac7a867e91db">InputStream::sub2video::h</a></div><div class="ttdeci">int h</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00354">ffmpeg.h:354</a></div></div>
<div class="ttc" id="astruct_output_stream_html_a2cb215b02eb510c4b19947063a5d5bd8"><div class="ttname"><a href="struct_output_stream.html#a2cb215b02eb510c4b19947063a5d5bd8">OutputStream::finished</a></div><div class="ttdeci">OSTFinished finished</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00517">ffmpeg.h:517</a></div></div>
<div class="ttc" id="alibm_8h_html"><div class="ttname"><a href="libm_8h.html">libm.h</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ac5cead16ad413ab4833f0b66071e1014"><div class="ttname"><a href="ffmpeg_8h.html#ac5cead16ad413ab4833f0b66071e1014">video_sync_method</a></div><div class="ttdeci">int video_sync_method</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00155">ffmpeg_opt.c:155</a></div></div>
<div class="ttc" id="astruct_input_file_html_a9a4fc2543b5db4e4a2b8b11294565dde"><div class="ttname"><a href="struct_input_file.html#a9a4fc2543b5db4e4a2b8b11294565dde">InputFile::nb_streams_warn</a></div><div class="ttdeci">int nb_streams_warn</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00415">ffmpeg.h:415</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_ae95c15dcdd266b4005f8919e4f571180"><div class="ttname"><a href="libavutil_2fifo_8c.html#ae95c15dcdd266b4005f8919e4f571180">av_fifo_generic_write</a></div><div class="ttdeci">int av_fifo_generic_write(AVFifoBuffer *f, void *src, int size, int(*func)(void *, void *, int))</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00122">fifo.c:122</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_adc5f65d6099fd8339c1580c091777223"><div class="ttname"><a href="struct_a_v_codec_context.html#adc5f65d6099fd8339c1580c091777223">AVCodecContext::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:536</a></div></div>
<div class="ttc" id="abprint_8c_html_a3fd45f50d9d4f7cc8fed5331a37f47ea"><div class="ttname"><a href="bprint_8c.html#a3fd45f50d9d4f7cc8fed5331a37f47ea">av_bprint_finalize</a></div><div class="ttdeci">int av_bprint_finalize(AVBPrint *buf, char **ret_str)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00235">bprint.c:235</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a62f9c20541a83d37db7072126ff0060d"><div class="ttname"><a href="struct_a_v_frame.html#a62f9c20541a83d37db7072126ff0060d">AVFrame::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00396">frame.h:396</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga6b1acbfa82c79bf7fd78d868572f0ceb"><div class="ttname"><a href="group__lavu__frame.html#ga6b1acbfa82c79bf7fd78d868572f0ceb">av_frame_get_buffer</a></div><div class="ttdeci">int av_frame_get_buffer(AVFrame *frame, int align)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00337">frame.c:337</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a906f8498cdec75ab84457f6b929115c6"><div class="ttname"><a href="ffmpeg_8c.html#a906f8498cdec75ab84457f6b929115c6">init_output_stream</a></div><div class="ttdeci">static int init_output_stream(OutputStream *ost, AVFrame *frame, char *error, int error_len)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03486">ffmpeg.c:3486</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aa21f6f0cd9174b2bb6223cbd15b83508a522165f39cb8f0acf7c4bdebd1beb18a"><div class="ttname"><a href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a522165f39cb8f0acf7c4bdebd1beb18a">FKF_PREV_FORCED_N</a></div><div class="ttdeci">@ FKF_PREV_FORCED_N</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00431">ffmpeg.h:431</a></div></div>
<div class="ttc" id="abprint_8c_html_a26abc84daea3189592c511fc26067d66"><div class="ttname"><a href="bprint_8c.html#a26abc84daea3189592c511fc26067d66">av_bprint_init</a></div><div class="ttdeci">void av_bprint_init(AVBPrint *buf, unsigned size_init, unsigned size_max)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00069">bprint.c:69</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a58c663568a99c1477c163e64858b3fef"><div class="ttname"><a href="struct_a_v_frame.html#a58c663568a99c1477c163e64858b3fef">AVFrame::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00614">frame.h:614</a></div></div>
<div class="ttc" id="aswscale_8txt_html_a723c667eda7f9b65ec345ca1e08ab17a"><div class="ttname"><a href="swscale_8txt.html#a723c667eda7f9b65ec345ca1e08ab17a">is</a></div><div class="ttdeci">The official guide to swscale for confused that is</div><div class="ttdef"><b>Definition:</b> <a href="swscale_8txt_source.html#l00028">swscale.txt:28</a></div></div>
<div class="ttc" id="astruct_a_v_filter_context_html"><div class="ttname"><a href="struct_a_v_filter_context.html">AVFilterContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avfilter_8h_source.html#l00341">avfilter.h:341</a></div></div>
<div class="ttc" id="acbs__h2645_8c_html_a134a0c87e88a327dcbeee6de7b0d6282"><div class="ttname"><a href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a></div><div class="ttdeci">#define u(width, name, range_min, range_max)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h2645_8c_source.html#l00262">cbs_h2645.c:262</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga11e329935b59b83ca722b66674f37fd4"><div class="ttname"><a href="group__lavu__log__constants.html#ga11e329935b59b83ca722b66674f37fd4">AV_LOG_QUIET</a></div><div class="ttdeci">#define AV_LOG_QUIET</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00176">log.h:176</a></div></div>
<div class="ttc" id="adnn__backend__native__layer__mathbinary_8c_html_aec238e230db0cd41b80558db403931dd"><div class="ttname"><a href="dnn__backend__native__layer__mathbinary_8c.html#aec238e230db0cd41b80558db403931dd">sub</a></div><div class="ttdeci">static float sub(float src0, float src1)</div><div class="ttdef"><b>Definition:</b> <a href="dnn__backend__native__layer__mathbinary_8c_source.html#l00033">dnn_backend_native_layer_mathbinary.c:33</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="apixdesc_8c_html_afe0c3e8aef5173de28bbdaea4298f5f0"><div class="ttname"><a href="pixdesc_8c.html#afe0c3e8aef5173de28bbdaea4298f5f0">av_pix_fmt_desc_get</a></div><div class="ttdeci">const AVPixFmtDescriptor * av_pix_fmt_desc_get(enum AVPixelFormat pix_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02573">pixdesc.c:2573</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gab4faa0afdf35076914824200331defff"><div class="ttname"><a href="group__lavu__error.html#gab4faa0afdf35076914824200331defff">AVERROR_EOF</a></div><div class="ttdeci">#define AVERROR_EOF</div><div class="ttdoc">End of file.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00055">error.h:55</a></div></div>
<div class="ttc" id="aavformat_8h_html_a4d9f21e76a3bf919c74ea40957ef21a7"><div class="ttname"><a href="avformat_8h.html#a4d9f21e76a3bf919c74ea40957ef21a7">AVFMT_VARIABLE_FPS</a></div><div class="ttdeci">#define AVFMT_VARIABLE_FPS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00465">avformat.h:465</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="aavformat_8h_html_ab54a3e54e88a8f7d7760e60b49944e44"><div class="ttname"><a href="avformat_8h.html#ab54a3e54e88a8f7d7760e60b49944e44">AV_DISPOSITION_ATTACHED_PIC</a></div><div class="ttdeci">#define AV_DISPOSITION_ATTACHED_PIC</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00837">avformat.h:837</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ggae01fa7e427274293aacdf2adc17076bca4848fd3952b4c2e1c1b85acb628c78a6"><div class="ttname"><a href="group__lavu__frame.html#ggae01fa7e427274293aacdf2adc17076bca4848fd3952b4c2e1c1b85acb628c78a6">AV_FRAME_DATA_A53_CC</a></div><div class="ttdeci">@ AV_FRAME_DATA_A53_CC</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00058">frame.h:58</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink_html_ga71ae9c529c8da51681e12faa37d1a395"><div class="ttname"><a href="group__lavfi__buffersink.html#ga71ae9c529c8da51681e12faa37d1a395">av_buffersink_get_frame_flags</a></div><div class="ttdeci">int attribute_align_arg av_buffersink_get_frame_flags(AVFilterContext *ctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffersink_8c_source.html#l00140">buffersink.c:140</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a738eb950f81407f6fd85fee223606fd4"><div class="ttname"><a href="ffmpeg_8c.html#a738eb950f81407f6fd85fee223606fd4">sub2video_heartbeat</a></div><div class="ttdeci">static void sub2video_heartbeat(InputStream *ist, int64_t pts)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00280">ffmpeg.c:280</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html_acb8452e99cd75074b93800b532c6ea4b"><div class="ttname"><a href="struct_a_v_buffer_ref.html#acb8452e99cd75074b93800b532c6ea4b">AVBufferRef::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00089">buffer.h:89</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga0c7058f764778615e7978a1821ab3cfe"><div class="ttname"><a href="group__lavc__core.html#ga0c7058f764778615e7978a1821ab3cfe">avcodec_parameters_from_context</a></div><div class="ttdeci">int avcodec_parameters_from_context(AVCodecParameters *par, const AVCodecContext *codec)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l02095">utils.c:2095</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aa34a84957adf117f712efcb6cbfd834f"><div class="ttname"><a href="ffmpeg_8c.html#aa34a84957adf117f712efcb6cbfd834f">remove_avoptions</a></div><div class="ttdeci">void remove_avoptions(AVDictionary **a, AVDictionary *b)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00650">ffmpeg.c:650</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a0dae26daa277d99147113de4ea449bc1"><div class="ttname"><a href="struct_input_stream.html#a0dae26daa277d99147113de4ea449bc1">InputStream::ts_scale</a></div><div class="ttdeci">double ts_scale</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00333">ffmpeg.h:333</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a604ca5401ed734e8b1acb1f416f3210f"><div class="ttname"><a href="struct_input_stream.html#a604ca5401ed734e8b1acb1f416f3210f">InputStream::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00380">ffmpeg.h:380</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a5b01f541872e13c9a239486b77ae218e"><div class="ttname"><a href="ffmpeg_8h.html#a5b01f541872e13c9a239486b77ae218e">frame_drop_threshold</a></div><div class="ttdeci">float frame_drop_threshold</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00156">ffmpeg_opt.c:156</a></div></div>
<div class="ttc" id="aavformat_8h_html_ae4418d32b17890be22da9c5f95087168"><div class="ttname"><a href="avformat_8h.html#ae4418d32b17890be22da9c5f95087168">AVFMT_NOTIMESTAMPS</a></div><div class="ttdeci">#define AVFMT_NOTIMESTAMPS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00462">avformat.h:462</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gafd07a13a4ddaa6015275cad6022d9ee3"><div class="ttname"><a href="group__lavu__time.html#gafd07a13a4ddaa6015275cad6022d9ee3">AV_TIME_BASE_Q</a></div><div class="ttdeci">#define AV_TIME_BASE_Q</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00260">avutil.h:260</a></div></div>
<div class="ttc" id="affmpeg_8c_html_abd1ff9b1a508070a11a26c9c3f3f455b"><div class="ttname"><a href="ffmpeg_8c.html#abd1ff9b1a508070a11a26c9c3f3f455b">transcode_step</a></div><div class="ttdeci">static int transcode_step(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04631">ffmpeg.c:4631</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_context_html"><div class="ttname"><a href="struct_a_v_i_o_context.html">AVIOContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00161">avio.h:161</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ac39249a26eeec2ed084fcc433ec9825e"><div class="ttname"><a href="struct_input_stream.html#ac39249a26eeec2ed084fcc433ec9825e">InputStream::discard</a></div><div class="ttdeci">int discard</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00301">ffmpeg.h:301</a></div></div>
<div class="ttc" id="aavformat_8h_html_af09f200b4cd9bf0baa05671436eef2fb"><div class="ttname"><a href="avformat_8h.html#af09f200b4cd9bf0baa05671436eef2fb">AV_DISPOSITION_DEFAULT</a></div><div class="ttdeci">#define AV_DISPOSITION_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00814">avformat.h:814</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG4</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00061">codec_id.h:61</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga242529d54013acf87e94273d298a5ff2"><div class="ttname"><a href="group__lavc__core.html#ga242529d54013acf87e94273d298a5ff2">av_bsf_init</a></div><div class="ttdeci">int av_bsf_init(AVBSFContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8c_source.html#l00147">bsf.c:147</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="astruct_output_file_html_a6bfbcb8e4d6564ae0c488d58c0fb0d5f"><div class="ttname"><a href="struct_output_file.html#a6bfbcb8e4d6564ae0c488d58c0fb0d5f">OutputFile::ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00569">ffmpeg.h:569</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aaaf7c2b3f63972f1f87face8f73cfdd6"><div class="ttname"><a href="ffmpeg_8h.html#aaaf7c2b3f63972f1f87face8f73cfdd6">ffmpeg_parse_options</a></div><div class="ttdeci">int ffmpeg_parse_options(int argc, char **argv)</div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga99d0b5bb80534d13a6cc96336cf9076a"><div class="ttname"><a href="group__channel__mask__c.html#ga99d0b5bb80534d13a6cc96336cf9076a">av_get_channel_layout_string</a></div><div class="ttdeci">void av_get_channel_layout_string(char *buf, int buf_size, int nb_channels, uint64_t channel_layout)</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8c_source.html#l00217">channel_layout.c:217</a></div></div>
<div class="ttc" id="amem_8c_html_aadc230ece36ef112710b262a6601a16b"><div class="ttname"><a href="mem_8c.html#aadc230ece36ef112710b262a6601a16b">av_realloc_array</a></div><div class="ttdeci">void * av_realloc_array(void *ptr, size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00198">mem.c:198</a></div></div>
<div class="ttc" id="athreadmessage_8h_html_a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699"><div class="ttname"><a href="threadmessage_8h.html#a7fb8bd4d2b779ab5e2044a1b5a5b22f5adc72c40671a489c761960bafc41b1699">AV_THREAD_MESSAGE_NONBLOCK</a></div><div class="ttdeci">@ AV_THREAD_MESSAGE_NONBLOCK</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8h_source.html#l00031">threadmessage.h:31</a></div></div>
<div class="ttc" id="apixdesc_8h_html"><div class="ttname"><a href="pixdesc_8h.html">pixdesc.h</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_aba9ed0487b0aa23eba534648df8384c0"><div class="ttname"><a href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a></div><div class="ttdeci">uint8_t w</div><div class="ttdef"><b>Definition:</b> <a href="llviddspenc_8c_source.html#l00038">llviddspenc.c:38</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a51639f88aef9f4f283f538a0c033fbb8"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a51639f88aef9f4f283f538a0c033fbb8">AVCodecParameters::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00126">codec_par.h:126</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga47db1b7f294b9f92684401b9c66a7c4b"><div class="ttname"><a href="group__lavc__decoding.html#ga47db1b7f294b9f92684401b9c66a7c4b">avcodec_decode_subtitle2</a></div><div class="ttdeci">int avcodec_decode_subtitle2(AVCodecContext *avctx, AVSubtitle *sub, int *got_sub_ptr, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l00998">decode.c:998</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aa21f6f0cd9174b2bb6223cbd15b83508a7ea9b7f772135312dec60fcf7b0973de"><div class="ttname"><a href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508a7ea9b7f772135312dec60fcf7b0973de">FKF_T</a></div><div class="ttdeci">@ FKF_T</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00433">ffmpeg.h:433</a></div></div>
<div class="ttc" id="astruct_filter_graph_html_a3ec6739834ba482eacc125e05b59b246"><div class="ttname"><a href="struct_filter_graph.html#a3ec6739834ba482eacc125e05b59b246">FilterGraph::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00286">ffmpeg.h:286</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ab5bf959273aea0345c7589f15d913331"><div class="ttname"><a href="ffmpeg_8c.html#ab5bf959273aea0345c7589f15d913331">current_time</a></div><div class="ttdeci">static BenchmarkTimeStamps current_time</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00142">ffmpeg.c:142</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a603a43eb595edc7f66cf508c6815d228"><div class="ttname"><a href="ffmpeg_8c.html#a603a43eb595edc7f66cf508c6815d228">finish_output_stream</a></div><div class="ttdeci">static void finish_output_stream(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01460">ffmpeg.c:1460</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a492fcecc45dbbd8da51edd0124e9dd30"><div class="ttname"><a href="struct_a_v_stream.html#a492fcecc45dbbd8da51edd0124e9dd30">AVStream::discard</a></div><div class="ttdeci">enum AVDiscard discard</div><div class="ttdoc">Selects which packets can be discarded at will and do not need to be demuxed.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00922">avformat.h:924</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_ad501bafcd2074b392f630497545de87d"><div class="ttname"><a href="dummy_2stdatomic_8h.html#ad501bafcd2074b392f630497545de87d">ATOMIC_VAR_INIT</a></div><div class="ttdeci">#define ATOMIC_VAR_INIT(value)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00031">stdatomic.h:31</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersrc_html_ga8fc71cb48c1ad1aa78b48f87daa4cf19"><div class="ttname"><a href="group__lavfi__buffersrc.html#ga8fc71cb48c1ad1aa78b48f87daa4cf19">av_buffersrc_add_frame</a></div><div class="ttdeci">int attribute_align_arg av_buffersrc_add_frame(AVFilterContext *ctx, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="buffersrc_8c_source.html#l00147">buffersrc.c:147</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ad58e98727fde6229cee5d33aaec6d787"><div class="ttname"><a href="ffmpeg_8h.html#ad58e98727fde6229cee5d33aaec6d787">VSYNC_VSCFR</a></div><div class="ttdeci">#define VSYNC_VSCFR</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00053">ffmpeg.h:53</a></div></div>
<div class="ttc" id="astruct_a_v_i_o_interrupt_c_b_html"><div class="ttname"><a href="struct_a_v_i_o_interrupt_c_b.html">AVIOInterruptCB</a></div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00058">avio.h:58</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_a60b2151806275a115118e9981cc096b2"><div class="ttname"><a href="dummy_2stdatomic_8h.html#a60b2151806275a115118e9981cc096b2">atomic_int</a></div><div class="ttdeci">intptr_t atomic_int</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00055">stdatomic.h:55</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga341bbd1ea599dfb0510f419e5272fecc"><div class="ttname"><a href="group__lavu__dict.html#ga341bbd1ea599dfb0510f419e5272fecc">AV_DICT_IGNORE_SUFFIX</a></div><div class="ttdeci">#define AV_DICT_IGNORE_SUFFIX</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00071">dict.h:70</a></div></div>
<div class="ttc" id="astruct_input_stream_html"><div class="ttname"><a href="struct_input_stream.html">InputStream</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00298">ffmpeg.h:298</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a0bbbd61fe097505cf12be11e60f07ca8"><div class="ttname"><a href="ffmpeg_8c.html#a0bbbd61fe097505cf12be11e60f07ca8">transcode</a></div><div class="ttdeci">static int transcode(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04721">ffmpeg.c:4721</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a7a29c56248090da0d5fb37a87b9a695d"><div class="ttname"><a href="ffmpeg_8h.html#a7a29c56248090da0d5fb37a87b9a695d">VSYNC_AUTO</a></div><div class="ttdeci">#define VSYNC_AUTO</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00049">ffmpeg.h:49</a></div></div>
<div class="ttc" id="affmpeg_8h_html"><div class="ttname"><a href="ffmpeg_8h.html">ffmpeg.h</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga9b58b28e2d429b930b69db19877f76a8"><div class="ttname"><a href="group__lavu__log__constants.html#ga9b58b28e2d429b930b69db19877f76a8">AV_LOG_VERBOSE</a></div><div class="ttdeci">#define AV_LOG_VERBOSE</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00210">log.h:210</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a07200fa0b8654967cb39c207a6170862"><div class="ttname"><a href="ffmpeg_8c.html#a07200fa0b8654967cb39c207a6170862">progress_avio</a></div><div class="ttdeci">AVIOContext * progress_avio</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00143">ffmpeg.c:143</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a5ca4ba3ead2e600e7a6bada7396a5e4d"><div class="ttname"><a href="ffmpeg_8h.html#a5ca4ba3ead2e600e7a6bada7396a5e4d">show_usage</a></div><div class="ttdeci">void show_usage(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l03273">ffmpeg_opt.c:3273</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html"><div class="ttname"><a href="struct_a_v_dictionary_entry.html">AVDictionaryEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00081">dict.h:81</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a18033581df001bc68ef11676eb7040bd"><div class="ttname"><a href="ffmpeg_8c.html#a18033581df001bc68ef11676eb7040bd">do_audio_out</a></div><div class="ttdeci">static void do_audio_out(OutputFile *of, OutputStream *ost, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00975">ffmpeg.c:975</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_aea05abdb8e45405048d7923a68c23ef5"><div class="ttname"><a href="struct_a_v_stream.html#aea05abdb8e45405048d7923a68c23ef5">AVStream::disposition</a></div><div class="ttdeci">int disposition</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00922">avformat.h:922</a></div></div>
<div class="ttc" id="agroup__lavu__video__display_html_ga5964303bfe085ad33683bc2454768d4a"><div class="ttname"><a href="group__lavu__video__display.html#ga5964303bfe085ad33683bc2454768d4a">av_display_rotation_set</a></div><div class="ttdeci">void av_display_rotation_set(int32_t matrix[9], double angle)</div><div class="ttdef"><b>Definition:</b> <a href="display_8c_source.html#l00050">display.c:50</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_html_af7cc390bba4f9d6c32e391ca59d117a2"><div class="ttname"><a href="struct_a_v_subtitle.html#af7cc390bba4f9d6c32e391ca59d117a2">AVSubtitle::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdoc">Same as packet pts, in AV_TIME_BASE.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02700">avcodec.h:2700</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="amathematics_8h_html"><div class="ttname"><a href="mathematics_8h.html">mathematics.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a251fd522eaa0986c3d6f918783b83f4b"><div class="ttname"><a href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a></div><div class="ttdeci">filter_frame For filters that do not use the this method is called when a frame is pushed to the filter s input It can be called at any time except in a reentrant way If the input frame is enough to produce then the filter should push the output frames on the output link immediately As an exception to the previous rule if the input frame is enough to produce several output frames then the filter needs output only at least one per link The additional frames can be left buffered in the filter</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00228">filter_design.txt:228</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gac14e43b675c9a342f9c7275553d6f533"><div class="ttname"><a href="group__lavc__core.html#gac14e43b675c9a342f9c7275553d6f533">AV_CODEC_FLAG_PSNR</a></div><div class="ttdeci">#define AV_CODEC_FLAG_PSNR</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00312">avcodec.h:312</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2fc10262dc3c90f4c4d0cdac1fdd8991"><div class="ttname"><a href="ffmpeg_8c.html#a2fc10262dc3c90f4c4d0cdac1fdd8991">check_recording_time</a></div><div class="ttdeci">static int check_recording_time(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00894">ffmpeg.c:894</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a55f456dcb9eef4dae3472d86039ab92e"><div class="ttname"><a href="ffmpeg_8h.html#a55f456dcb9eef4dae3472d86039ab92e">VSYNC_CFR</a></div><div class="ttdeci">#define VSYNC_CFR</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00051">ffmpeg.h:51</a></div></div>
<div class="ttc" id="agroup__lavf__decoding_html_ga4fdb3084415a82e3810de6ee60e46a61"><div class="ttname"><a href="group__lavf__decoding.html#ga4fdb3084415a82e3810de6ee60e46a61">av_read_frame</a></div><div class="ttdeci">int av_read_frame(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l01712">utils.c:1712</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a159db49b7f730d2869253cd4ff0411aa"><div class="ttname"><a href="ffmpeg_8c.html#a159db49b7f730d2869253cd4ff0411aa">decode_audio</a></div><div class="ttdeci">static int decode_audio(InputStream *ist, AVPacket *pkt, int *got_output, int *decode_failed)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02303">ffmpeg.c:2303</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_ab708d2f19b7a9592caa278256787adb6"><div class="ttname"><a href="libavutil_2fifo_8c.html#ab708d2f19b7a9592caa278256787adb6">av_fifo_generic_read</a></div><div class="ttdeci">int av_fifo_generic_read(AVFifoBuffer *f, void *dest, int buf_size, void(*func)(void *, void *, int))</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00213">fifo.c:213</a></div></div>
<div class="ttc" id="affmpeg_8c_html_adb047c8ef284577de88f3a64fe7638e0"><div class="ttname"><a href="ffmpeg_8c.html#adb047c8ef284577de88f3a64fe7638e0">program_birth_year</a></div><div class="ttdeci">const int program_birth_year</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00110">ffmpeg.c:110</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga936c6ae1b3d24d7504f0a9aea1a24c74"><div class="ttname"><a href="group__lavc__core.html#ga936c6ae1b3d24d7504f0a9aea1a24c74">AV_CODEC_FLAG_INTERLACED_ME</a></div><div class="ttdeci">#define AV_CODEC_FLAG_INTERLACED_ME</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00342">avcodec.h:342</a></div></div>
<div class="ttc" id="affmpeg_8c_html_adfd9959ab0ec5f8d63e3f5b2cc929590"><div class="ttname"><a href="ffmpeg_8c.html#adfd9959ab0ec5f8d63e3f5b2cc929590">flush_encoders</a></div><div class="ttdeci">static void flush_encoders(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01896">ffmpeg.c:1896</a></div></div>
<div class="ttc" id="aavio_8h_html_a375f057e315dd2273579555128a070fb"><div class="ttname"><a href="avio_8h.html#a375f057e315dd2273579555128a070fb">avio_size</a></div><div class="ttdeci">int64_t avio_size(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00346">aviobuf.c:346</a></div></div>
<div class="ttc" id="avaapi__transcode_8c_html_a3e44252189bdae5212c5d1171bcd7cf4"><div class="ttname"><a href="vaapi__transcode_8c.html#a3e44252189bdae5212c5d1171bcd7cf4">ost</a></div><div class="ttdeci">static AVStream * ost</div><div class="ttdef"><b>Definition:</b> <a href="vaapi__transcode_8c_source.html#l00045">vaapi_transcode.c:45</a></div></div>
<div class="ttc" id="aos__support_8h_html"><div class="ttname"><a href="os__support_8h.html">os_support.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga75603d7c2b8adf5829f4fd2fb860168f"><div class="ttname"><a href="group__lavc__packet.html#ga75603d7c2b8adf5829f4fd2fb860168f">AV_PKT_FLAG_KEY</a></div><div class="ttdeci">#define AV_PKT_FLAG_KEY</div><div class="ttdoc">The packet contains a keyframe.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00401">packet.h:401</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a9feef5270e0e54f103868362df0cd27a"><div class="ttname"><a href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a></div><div class="ttdeci">sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a98b27cc5411736ca4aaca78ff137cc53"><div class="ttname"><a href="ffmpeg_8c.html#a98b27cc5411736ca4aaca78ff137cc53">get_input_packet</a></div><div class="ttdeci">static int get_input_packet(InputFile *f, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04173">ffmpeg.c:4173</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a6a23996c235371236b38622e17c4f4c1"><div class="ttname"><a href="ffmpeg_8h.html#a6a23996c235371236b38622e17c4f4c1">qp_hist</a></div><div class="ttdeci">int qp_hist</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00169">ffmpeg_opt.c:169</a></div></div>
<div class="ttc" id="astruct_input_stream_html_af577e45cb148e174ef437f3cbaa8b628"><div class="ttname"><a href="struct_input_stream.html#af577e45cb148e174ef437f3cbaa8b628">InputStream::hwaccel_device_type</a></div><div class="ttdeci">enum AVHWDeviceType hwaccel_device_type</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00365">ffmpeg.h:369</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a9ff329d05aff252a944b937bb80d16e1"><div class="ttname"><a href="ffmpeg_8c.html#a9ff329d05aff252a944b937bb80d16e1">term_exit_sigsafe</a></div><div class="ttdeci">static void term_exit_sigsafe(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00328">ffmpeg.c:328</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a44476e48d5e06f4ee53c6e2fdbb62ca0"><div class="ttname"><a href="ffmpeg_8c.html#a44476e48d5e06f4ee53c6e2fdbb62ca0">init_output_stream_encode</a></div><div class="ttdeci">static int init_output_stream_encode(OutputStream *ost, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03310">ffmpeg.c:3310</a></div></div>
<div class="ttc" id="aaf__aecho_8c_html_aa74d656b4802f55ddf3d3a7a1ea23502"><div class="ttname"><a href="af__aecho_8c.html#aa74d656b4802f55ddf3d3a7a1ea23502">ECHO</a></div><div class="ttdeci">#define ECHO(name, type, min, max)</div><div class="ttdef"><b>Definition:</b> <a href="af__aecho_8c_source.html#l00188">af_aecho.c:188</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_html"><div class="ttname"><a href="struct_a_v_codec_h_w_config.html">AVCodecHWConfig</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00423">codec.h:423</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a9b608e8190714ba5feee307c53a74028"><div class="ttname"><a href="ffmpeg_8c.html#a9b608e8190714ba5feee307c53a74028">want_sdp</a></div><div class="ttdeci">static int want_sdp</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00140">ffmpeg.c:140</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="agroup__lavfi_html_ga871684449dac05050df238a18d0d493b"><div class="ttname"><a href="group__lavfi.html#ga871684449dac05050df238a18d0d493b">avfilter_graph_free</a></div><div class="ttdeci">void avfilter_graph_free(AVFilterGraph **graph)</div><div class="ttdef"><b>Definition:</b> <a href="avfiltergraph_8c_source.html#l00120">avfiltergraph.c:120</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3649a81e8414a193d685a6eee06ce902"><div class="ttname"><a href="struct_a_v_frame.html#a3649a81e8414a193d685a6eee06ce902">AVFrame::key_frame</a></div><div class="ttdeci">int key_frame</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00386">frame.h:386</a></div></div>
<div class="ttc" id="aeval_8c_html_ad3bf8f3330d1fd139de2ca156c313f34"><div class="ttname"><a href="eval_8c.html#ad3bf8f3330d1fd139de2ca156c313f34">av_expr_parse</a></div><div class="ttdeci">int av_expr_parse(AVExpr **expr, const char *s, const char *const *const_names, const char *const *func1_names, double(*const *funcs1)(void *, double), const char *const *func2_names, double(*const *funcs2)(void *, double, double), int log_offset, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00685">eval.c:685</a></div></div>
<div class="ttc" id="acmdutils_8c_html_a00fcf983c7dd20dd65568b3ebc20ed44"><div class="ttname"><a href="cmdutils_8c.html#a00fcf983c7dd20dd65568b3ebc20ed44">exit_program</a></div><div class="ttdeci">void exit_program(int ret)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l00133">cmdutils.c:133</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a03fa459ccdc19be15cc273ff6dc4714e"><div class="ttname"><a href="ffmpeg_8h.html#a03fa459ccdc19be15cc273ff6dc4714e">debug_ts</a></div><div class="ttdeci">int debug_ts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00165">ffmpeg_opt.c:165</a></div></div>
<div class="ttc" id="agroup__lavf__decoding_html_gae804b99aec044690162b8b9b110236a4"><div class="ttname"><a href="group__lavf__decoding.html#gae804b99aec044690162b8b9b110236a4">avformat_close_input</a></div><div class="ttdeci">void avformat_close_input(AVFormatContext **s)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04425">utils.c:4425</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a94a52b0309bc05208e547d00c4ad3cba"><div class="ttname"><a href="ffmpeg_8c.html#a94a52b0309bc05208e547d00c4ad3cba">got_eagain</a></div><div class="ttdeci">static int got_eagain(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04193">ffmpeg.c:4193</a></div></div>
<div class="ttc" id="astruct_a_v_packet_side_data_html_a7a708e643a56c21bf117ee058991558f"><div class="ttname"><a href="struct_a_v_packet_side_data.html#a7a708e643a56c21bf117ee058991558f">AVPacketSideData::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00308">packet.h:308</a></div></div>
<div class="ttc" id="affmpeg_8c_html_af6db4eeaee5d848f75aebb60927cc9d4"><div class="ttname"><a href="ffmpeg_8c.html#af6db4eeaee5d848f75aebb60927cc9d4">ifilter_send_eof</a></div><div class="ttdeci">static int ifilter_send_eof(InputFilter *ifilter, int64_t pts)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02227">ffmpeg.c:2227</a></div></div>
<div class="ttc" id="astruct_a_v_program_html_a7967d41af4812ed61a28762e988c7a02"><div class="ttname"><a href="struct_a_v_program.html#a7967d41af4812ed61a28762e988c7a02">AVProgram::stream_index</a></div><div class="ttdeci">unsigned int * stream_index</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01149">avformat.h:1149</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a01cdb97efd4a42d9aceeeff3bd431c86"><div class="ttname"><a href="ffmpeg_8c.html#a01cdb97efd4a42d9aceeeff3bd431c86">nb_frames_drop</a></div><div class="ttdeci">static int nb_frames_drop</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00137">ffmpeg.c:137</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aef79333a4c6abf1628c55d75ec82bede"><div class="ttname"><a href="struct_a_v_codec_context.html#aef79333a4c6abf1628c55d75ec82bede">AVCodecContext::get_buffer2</a></div><div class="ttdeci">int(* get_buffer2)(struct AVCodecContext *s, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01341">avcodec.h:1341</a></div></div>
<div class="ttc" id="acmdutils_8c_html_a2911387e778b01a25f0e65eabadf1b7b"><div class="ttname"><a href="cmdutils_8c.html#a2911387e778b01a25f0e65eabadf1b7b">print_error</a></div><div class="ttdeci">void print_error(const char *filename, int err)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l01086">cmdutils.c:1086</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink_html_ga359d7d1e42c27ca14c07559d4e9adba7"><div class="ttname"><a href="group__lavfi__buffersink.html#ga359d7d1e42c27ca14c07559d4e9adba7">av_buffersink_set_frame_size</a></div><div class="ttdeci">void av_buffersink_set_frame_size(AVFilterContext *ctx, unsigned frame_size)</div><div class="ttdef"><b>Definition:</b> <a href="buffersink_8c_source.html#l00198">buffersink.c:198</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aca0cd619e806cfe0b2aeafdf94cedf40"><div class="ttname"><a href="ffmpeg_8h.html#aca0cd619e806cfe0b2aeafdf94cedf40">dts_delta_threshold</a></div><div class="ttdeci">float dts_delta_threshold</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00150">ffmpeg_opt.c:150</a></div></div>
<div class="ttc" id="afifo_8h_html"><div class="ttname"><a href="fifo_8h.html">fifo.h</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca236b46495cd9254b4030d36fc6f27f23">AV_FIELD_TT</a></div><div class="ttdeci">@ AV_FIELD_TT</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00039">codec_par.h:39</a></div></div>
<div class="ttc" id="aavio_8h_html_ade8a63980569494c99593ebf0d1e891b"><div class="ttname"><a href="avio_8h.html#ade8a63980569494c99593ebf0d1e891b">avio_open2</a></div><div class="ttdeci">int avio_open2(AVIOContext **s, const char *url, int flags, const AVIOInterruptCB *int_cb, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l01167">aviobuf.c:1167</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_ac36dbec917251f24fb626e4e09e1b056"><div class="ttname"><a href="tests_2movenc_8c.html#ac36dbec917251f24fb626e4e09e1b056">finish</a></div><div class="ttdeci">static void finish(void)</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00345">movenc.c:345</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a12826d21779289356722971d362c583c"><div class="ttname"><a href="struct_a_v_stream.html#a12826d21779289356722971d362c583c">AVStream::codecpar</a></div><div class="ttdeci">AVCodecParameters * codecpar</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01034">avformat.h:1034</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a950c8da55b8112077e640b6a0cb8cf36"><div class="ttname"><a href="codec__par_8h.html#a950c8da55b8112077e640b6a0cb8cf36">avcodec_parameters_free</a></div><div class="ttdeci">void avcodec_parameters_free(AVCodecParameters **par)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l02066">utils.c:2066</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a825bfbd9e324635efff526253289806d"><div class="ttname"><a href="ffmpeg_8h.html#a825bfbd9e324635efff526253289806d">vstats_version</a></div><div class="ttdeci">int vstats_version</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00175">ffmpeg_opt.c:175</a></div></div>
<div class="ttc" id="astruct_input_filter_html"><div class="ttname"><a href="struct_input_filter.html">InputFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00238">ffmpeg.h:238</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ae4051148bbc3f89a78b6de3f6eddb997"><div class="ttname"><a href="ffmpeg_8h.html#ae4051148bbc3f89a78b6de3f6eddb997">hwaccels</a></div><div class="ttdeci">const HWAccel hwaccels[]</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00135">ffmpeg_opt.c:135</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a6f49309998ba92804b9d16761817811e"><div class="ttname"><a href="struct_input_stream.html#a6f49309998ba92804b9d16761817811e">InputStream::data_size</a></div><div class="ttdeci">uint64_t data_size</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00384">ffmpeg.h:384</a></div></div>
<div class="ttc" id="astruct_benchmark_time_stamps_html_ad0f18c644b145f2ef6c7bd37c22d7cd6"><div class="ttname"><a href="struct_benchmark_time_stamps.html#ad0f18c644b145f2ef6c7bd37c22d7cd6">BenchmarkTimeStamps::user_usec</a></div><div class="ttdeci">int64_t user_usec</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00125">ffmpeg.c:125</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac60a0209642b5d74068cab0ac35a78b2"><div class="ttname"><a href="struct_a_v_codec_context.html#ac60a0209642b5d74068cab0ac35a78b2">AVCodecContext::chroma_sample_location</a></div><div class="ttdeci">enum AVChromaLocation chroma_sample_location</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1168</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3a41b3e5bde23b877799f6e72dac8ef3"><div class="ttname"><a href="struct_a_v_codec_context.html#a3a41b3e5bde23b877799f6e72dac8ef3">AVCodecContext::color_primaries</a></div><div class="ttdeci">enum AVColorPrimaries color_primaries</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1140</a></div></div>
<div class="ttc" id="apixdesc_8h_html_a76f6211b2404231bd7d206ebf4ae46f6"><div class="ttname"><a href="pixdesc_8h.html#a76f6211b2404231bd7d206ebf4ae46f6">AV_PIX_FMT_FLAG_HWACCEL</a></div><div class="ttdeci">#define AV_PIX_FMT_FLAG_HWACCEL</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00140">pixdesc.h:140</a></div></div>
<div class="ttc" id="acommon_8h_html_af5e4ff7761996bc901e59bd59756268d"><div class="ttname"><a href="common_8h.html#af5e4ff7761996bc901e59bd59756268d">FFSIGN</a></div><div class="ttdeci">#define FFSIGN(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00073">common.h:73</a></div></div>
<div class="ttc" id="astruct_input_stream_html_abc71c343e0ade7e102adb45badfc6243"><div class="ttname"><a href="struct_input_stream.html#abc71c343e0ade7e102adb45badfc6243">InputStream::top_field_first</a></div><div class="ttdeci">int top_field_first</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00337">ffmpeg.h:337</a></div></div>
<div class="ttc" id="asamplefmt_8h_html"><div class="ttname"><a href="samplefmt_8h.html">samplefmt.h</a></div></div>
<div class="ttc" id="astruct_benchmark_time_stamps_html_a06a44cae9b837e8481ba86a648cbcc95"><div class="ttname"><a href="struct_benchmark_time_stamps.html#a06a44cae9b837e8481ba86a648cbcc95">BenchmarkTimeStamps::sys_usec</a></div><div class="ttdeci">int64_t sys_usec</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00126">ffmpeg.c:126</a></div></div>
<div class="ttc" id="aavio_8h_html_a63157a668f29b8f5a89f00bc24838b8e"><div class="ttname"><a href="avio_8h.html#a63157a668f29b8f5a89f00bc24838b8e">avio_tell</a></div><div class="ttdeci">static av_always_inline int64_t avio_tell(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00557">avio.h:557</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a88ac1fa670df56643b51e4face274d51"><div class="ttname"><a href="ffmpeg_8c.html#a88ac1fa670df56643b51e4face274d51">check_init_output_file</a></div><div class="ttdeci">static int check_init_output_file(OutputFile *of, int file_index)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02992">ffmpeg.c:2992</a></div></div>
<div class="ttc" id="abprint_8h_html_a0e07836126dff024ac10acbc744ebe8f"><div class="ttname"><a href="bprint_8h.html#a0e07836126dff024ac10acbc744ebe8f">AV_BPRINT_SIZE_AUTOMATIC</a></div><div class="ttdeci">#define AV_BPRINT_SIZE_AUTOMATIC</div></div>
<div class="ttc" id="astruct_input_stream_html_a7c2c9b58a4db2101414f2d106f4244b0"><div class="ttname"><a href="struct_input_stream.html#a7c2c9b58a4db2101414f2d106f4244b0">InputStream::nb_filters</a></div><div class="ttdeci">int nb_filters</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00363">ffmpeg.h:363</a></div></div>
<div class="ttc" id="affmpeg_8c_html_adf36095ece065987e766e291e863f0d6"><div class="ttname"><a href="ffmpeg_8c.html#adf36095ece065987e766e291e863f0d6">sub2video_get_blank_frame</a></div><div class="ttdeci">static int sub2video_get_blank_frame(InputStream *ist)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00176">ffmpeg.c:176</a></div></div>
<div class="ttc" id="aavformat_8h_html_aa72fcb393482cb6bb302d4995990bf3b"><div class="ttname"><a href="avformat_8h.html#aa72fcb393482cb6bb302d4995990bf3b">AV_DISPOSITION_FORCED</a></div><div class="ttdeci">#define AV_DISPOSITION_FORCED</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00826">avformat.h:826</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a860450fba1f740387dc082792ad89517"><div class="ttname"><a href="writing__filters_8txt.html#a860450fba1f740387dc082792ad89517">type</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf type</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="atranscode__aac_8c_html_a4fbb704fb96c36a78a36eee010306ce7"><div class="ttname"><a href="transcode__aac_8c.html#a4fbb704fb96c36a78a36eee010306ce7">pts</a></div><div class="ttdeci">static int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="transcode__aac_8c_source.html#l00647">transcode_aac.c:647</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a0fb9f4909ad77c541f8ba4409b253111"><div class="ttname"><a href="threadmessage_8c.html#a0fb9f4909ad77c541f8ba4409b253111">av_thread_message_queue_recv</a></div><div class="ttdeci">int av_thread_message_queue_recv(AVThreadMessageQueue *mq, void *msg, unsigned flags)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00172">threadmessage.c:172</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a77e8d12a4bdb9110a2d815b9aa5f8d02"><div class="ttname"><a href="ffmpeg_8h.html#a77e8d12a4bdb9110a2d815b9aa5f8d02">hw_device_setup_for_decode</a></div><div class="ttdeci">int hw_device_setup_for_decode(InputStream *ist)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__hw_8c_source.html#l00303">ffmpeg_hw.c:303</a></div></div>
<div class="ttc" id="acbs__h2645_8c_html_a4a02756a337012b1d96221b0a2f98128"><div class="ttname"><a href="cbs__h2645_8c.html#a4a02756a337012b1d96221b0a2f98128">us</a></div><div class="ttdeci">#define us(width, name, range_min, range_max, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h2645_8c_source.html#l00276">cbs_h2645.c:276</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97aab8c149a1e6c67aad340733becec87e1">AV_PKT_DATA_DISPLAYMATRIX</a></div><div class="ttdeci">@ AV_PKT_DATA_DISPLAYMATRIX</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00108">packet.h:108</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gae381631ba4fb14f4124575d9ceacb87e"><div class="ttname"><a href="group__lavc__core.html#gae381631ba4fb14f4124575d9ceacb87e">avcodec_copy_context</a></div><div class="ttdeci">attribute_deprecated int avcodec_copy_context(AVCodecContext *dest, const AVCodecContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2options_8c_source.html#l00231">options.c:231</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaed6f7acd6cf30c059f2e32515bd19bc4">AV_CODEC_ID_MP3</a></div><div class="ttdeci">@ AV_CODEC_ID_MP3</div><div class="ttdoc">preferred ID for decoding MPEG audio layer 1, 2 or 3</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00419">codec_id.h:419</a></div></div>
<div class="ttc" id="acommon_8h_html_af6afbffa12562b076c34055bdcb3ad65"><div class="ttname"><a href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a></div><div class="ttdeci">#define FFMIN3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00097">common.h:97</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_gabe1a7b6824078229c69b75c71053c035"><div class="ttname"><a href="group__lavf__misc.html#gabe1a7b6824078229c69b75c71053c035">av_codec_get_tag2</a></div><div class="ttdeci">int av_codec_get_tag2(const struct AVCodecTag *const *tags, enum AVCodecID id, unsigned int *tag)</div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02cae1efa8b010ca5331f1f845104e7c0667"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02cae1efa8b010ca5331f1f845104e7c0667">AV_FIELD_TB</a></div><div class="ttdeci">@ AV_FIELD_TB</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00041">codec_par.h:41</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga4fd9c0b8e663cf3d55e89fbc6ce71602"><div class="ttname"><a href="group__lavu__math__rational.html#ga4fd9c0b8e663cf3d55e89fbc6ce71602">av_reduce</a></div><div class="ttdeci">int av_reduce(int *dst_num, int *dst_den, int64_t num, int64_t den, int64_t max)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00035">rational.c:35</a></div></div>
<div class="ttc" id="affplay_8c_html_ad667f040f2932c8097435492fbd10d76"><div class="ttname"><a href="ffplay_8c.html#ad667f040f2932c8097435492fbd10d76">loop</a></div><div class="ttdeci">static int loop</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00341">ffplay.c:341</a></div></div>
<div class="ttc" id="astruct_output_stream_html_a2a77c9bd86203478143c85e26e67df3d"><div class="ttname"><a href="struct_output_stream.html#a2a77c9bd86203478143c85e26e67df3d">OutputStream::source_index</a></div><div class="ttdeci">int source_index</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00450">ffmpeg.h:450</a></div></div>
<div class="ttc" id="affmpeg_8h_html_af7f6087971c265c7b0bed250b03a4624"><div class="ttname"><a href="ffmpeg_8h.html#af7f6087971c265c7b0bed250b03a4624">do_pkt_dump</a></div><div class="ttdeci">int do_pkt_dump</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00161">ffmpeg_opt.c:161</a></div></div>
<div class="ttc" id="aeval_8c_html_a01c05d7049a9208c2b22147a3f16c58c"><div class="ttname"><a href="eval_8c.html#a01c05d7049a9208c2b22147a3f16c58c">av_expr_free</a></div><div class="ttdeci">void av_expr_free(AVExpr *e)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00336">eval.c:336</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_aaf500e3a36c6e6a6920a8e18c6478a8e"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#aaf500e3a36c6e6a6920a8e18c6478a8e">InputStream::sub2video::end_pts</a></div><div class="ttdeci">int64_t end_pts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00351">ffmpeg.h:351</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_ga84542023693d61e8564c5d457979c932"><div class="ttname"><a href="group__lavf__core.html#ga84542023693d61e8564c5d457979c932">avformat_network_init</a></div><div class="ttdeci">int avformat_network_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04982">utils.c:4982</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba680870b80f0ed65e9ba97ea0905eb2fa"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba680870b80f0ed65e9ba97ea0905eb2fa">AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX</a></div><div class="ttdeci">@ AV_CODEC_HW_CONFIG_METHOD_HW_DEVICE_CTX</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00391">codec.h:391</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga502225f65e2092fbc45945247892cb0f"><div class="ttname"><a href="group__lavc__core.html#ga502225f65e2092fbc45945247892cb0f">AV_CODEC_FLAG_INTERLACED_DCT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_INTERLACED_DCT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00321">avcodec.h:321</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ac6e13f95a03d441765f0e4645cc8cf7e"><div class="ttname"><a href="ffmpeg_8c.html#ac6e13f95a03d441765f0e4645cc8cf7e">init_output_stream_streamcopy</a></div><div class="ttdeci">static int init_output_stream_streamcopy(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03068">ffmpeg.c:3068</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaa2c3e02a761d9fc0c5c9b2340408c332"><div class="ttname"><a href="group__lavc__core.html#gaa2c3e02a761d9fc0c5c9b2340408c332">avsubtitle_free</a></div><div class="ttdeci">void avsubtitle_free(AVSubtitle *sub)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01118">utils.c:1118</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga7a9a991cb7837b10ffd44725263de425"><div class="ttname"><a href="group__lavu__dict.html#ga7a9a991cb7837b10ffd44725263de425">AV_DICT_DONT_STRDUP_VAL</a></div><div class="ttdeci">#define AV_DICT_DONT_STRDUP_VAL</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00075">dict.h:74</a></div></div>
<div class="ttc" id="astruct_output_filter_html"><div class="ttname"><a href="struct_output_filter.html">OutputFilter</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00262">ffmpeg.h:262</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea1a3f67e556cc61335c6f001ae3c7069f"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea1a3f67e556cc61335c6f001ae3c7069f">AV_CODEC_ID_DVB_SUBTITLE</a></div><div class="ttdeci">@ AV_CODEC_ID_DVB_SUBTITLE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00518">codec_id.h:518</a></div></div>
<div class="ttc" id="astruct_input_filter_html_aaf4487a0c41b756199c9dde4ea8962b8"><div class="ttname"><a href="struct_input_filter.html#aaf4487a0c41b756199c9dde4ea8962b8">InputFilter::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00255">ffmpeg.h:255</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ae37fb0410a65c6b2e5a38614f4481f07"><div class="ttname"><a href="struct_input_stream.html#ae37fb0410a65c6b2e5a38614f4481f07">InputStream::subtitle</a></div><div class="ttdeci">AVSubtitle subtitle</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00346">ffmpeg.h:346</a></div></div>
<div class="ttc" id="aavformat_8h_html_a9b09132b5af7f7f6fe54d61782373bc7"><div class="ttname"><a href="avformat_8h.html#a9b09132b5af7f7f6fe54d61782373bc7">AV_DISPOSITION_CLEAN_EFFECTS</a></div><div class="ttdeci">#define AV_DISPOSITION_CLEAN_EFFECTS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00829">avformat.h:829</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aba1cc9fe65233e8e346f8da1a6a59fa8"><div class="ttname"><a href="ffmpeg_8c.html#aba1cc9fe65233e8e346f8da1a6a59fa8">ffmpeg_cleanup</a></div><div class="ttdeci">static void ffmpeg_cleanup(int ret)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00492">ffmpeg.c:492</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_ac55f4c21dd75c8c48b9de5080681eed4"><div class="ttname"><a href="struct_a_v_output_format.html#ac55f4c21dd75c8c48b9de5080681eed4">AVOutputFormat::codec_tag</a></div><div class="ttdeci">const struct AVCodecTag *const  * codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00516">avformat.h:516</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a0d1cb9b5a32b00fb6edc81ea3aae2a49"><div class="ttname"><a href="struct_a_v_packet.html#a0d1cb9b5a32b00fb6edc81ea3aae2a49">AVPacket::stream_index</a></div><div class="ttdeci">int stream_index</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00365">packet.h:365</a></div></div>
<div class="ttc" id="agroup__lavfi_html_ga294500a9856260eb1552354fd9d9a6c4"><div class="ttname"><a href="group__lavfi.html#ga294500a9856260eb1552354fd9d9a6c4">avfilter_inout_free</a></div><div class="ttdeci">void avfilter_inout_free(AVFilterInOut **inout)</div><div class="ttdef"><b>Definition:</b> <a href="graphparser_8c_source.html#l00212">graphparser.c:212</a></div></div>
<div class="ttc" id="astruct_output_file_html_a7f831b66ccff154c4e9d880d900e5b3f"><div class="ttname"><a href="struct_output_file.html#a7f831b66ccff154c4e9d880d900e5b3f">OutputFile::header_written</a></div><div class="ttdeci">int header_written</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00578">ffmpeg.h:578</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a1492e008c195bbd4e2c84bccbc5ee216"><div class="ttname"><a href="struct_input_stream.html#a1492e008c195bbd4e2c84bccbc5ee216">InputStream::decoded_frame</a></div><div class="ttdeci">AVFrame * decoded_frame</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00309">ffmpeg.h:309</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_ac1e0d8ee7f1568cb40fa95a740c60f13"><div class="ttname"><a href="libavutil_2fifo_8c.html#ac1e0d8ee7f1568cb40fa95a740c60f13">av_fifo_space</a></div><div class="ttdeci">int av_fifo_space(const AVFifoBuffer *f)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00082">fifo.c:82</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a6bab4f8e73c6062a21d53e4c16036681"><div class="ttname"><a href="struct_input_stream.html#a6bab4f8e73c6062a21d53e4c16036681">InputStream::prev_sub</a></div><div class="ttdeci">struct InputStream::@0 prev_sub</div></div>
<div class="ttc" id="astruct_a_v_stream_html_a9db755451f14e2bf590d4b85d82b32e6"><div class="ttname"><a href="struct_a_v_stream.html#a9db755451f14e2bf590d4b85d82b32e6">AVStream::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00898">avformat.h:898</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aef69b65c48b48532da4c9a99eb744a1e"><div class="ttname"><a href="ffmpeg_8h.html#aef69b65c48b48532da4c9a99eb744a1e">ABORT_ON_FLAG_EMPTY_OUTPUT_STREAM</a></div><div class="ttdeci">#define ABORT_ON_FLAG_EMPTY_OUTPUT_STREAM</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00438">ffmpeg.h:438</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga46187df0d7711108ece88804dcc38025"><div class="ttname"><a href="group__lavc__packet.html#ga46187df0d7711108ece88804dcc38025">AV_PKT_FLAG_CORRUPT</a></div><div class="ttdeci">#define AV_PKT_FLAG_CORRUPT</div><div class="ttdoc">The packet content is corrupted.</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00402">packet.h:402</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_gae2645941f2dc779c307eb6314fd39f10"><div class="ttname"><a href="group__lavf__misc.html#gae2645941f2dc779c307eb6314fd39f10">av_dump_format</a></div><div class="ttdeci">void av_dump_format(AVFormatContext *ic, int index, const char *url, int is_output)</div><div class="ttdef"><b>Definition:</b> <a href="dump_8c_source.html#l00640">dump.c:640</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a873d588ed106d8dde339c4a16411e0b8"><div class="ttname"><a href="threadmessage_8c.html#a873d588ed106d8dde339c4a16411e0b8">av_thread_message_queue_send</a></div><div class="ttdeci">int av_thread_message_queue_send(AVThreadMessageQueue *mq, void *msg, unsigned flags)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00156">threadmessage.c:156</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a686a77363668795c15c87b532cc455fa"><div class="ttname"><a href="struct_a_v_codec_context.html#a686a77363668795c15c87b532cc455fa">AVCodecContext::has_b_frames</a></div><div class="ttdeci">int has_b_frames</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00816">avcodec.h:816</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a677a37d7ea296c85c36f131210edd44b"><div class="ttname"><a href="ffmpeg_8c.html#a677a37d7ea296c85c36f131210edd44b">choose_output</a></div><div class="ttdeci">static OutputStream * choose_output(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03904">ffmpeg.c:3904</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html_a17569c9349766c3b5201b33f84f19a25"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html#a17569c9349766c3b5201b33f84f19a25">AVPixFmtDescriptor::comp</a></div><div class="ttdeci">AVComponentDescriptor comp[4]</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00117">pixdesc.h:117</a></div></div>
<div class="ttc" id="acmdutils_8h_html_a1d155f9f5addbe58b32c5c180831caa9"><div class="ttname"><a href="cmdutils_8h.html#a1d155f9f5addbe58b32c5c180831caa9">media_type_string</a></div><div class="ttdeci">#define media_type_string</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8h_source.html#l00617">cmdutils.h:617</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1f342e4e3615abc9314684ce6b4819c0"><div class="ttname"><a href="tests_2movenc_8c.html#a1f342e4e3615abc9314684ce6b4819c0">duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00063">movenc.c:63</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_ga55614fd28de2fa05b04f427390061d5b"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#ga55614fd28de2fa05b04f427390061d5b">av_buffersink_get_frame_rate</a></div><div class="ttdeci">AVRational av_buffersink_get_frame_rate(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="agroup__lavf__core_html_gae324697cedd36e7b47a1e142dc24b805"><div class="ttname"><a href="group__lavf__core.html#gae324697cedd36e7b47a1e142dc24b805">av_stream_new_side_data</a></div><div class="ttdeci">uint8_t * av_stream_new_side_data(AVStream *stream, enum AVPacketSideDataType type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05484">utils.c:5484</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gae67f143237b2cb2936c9b147aa6dfde3"><div class="ttname"><a href="group__lavu__dict.html#gae67f143237b2cb2936c9b147aa6dfde3">av_dict_get</a></div><div class="ttdeci">AVDictionaryEntry * av_dict_get(const AVDictionary *m, const char *key, const AVDictionaryEntry *prev, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00040">dict.c:40</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gaf1a88e8f152d7835f111b1ef8813fb2e"><div class="ttname"><a href="group__avoptions.html#gaf1a88e8f152d7835f111b1ef8813fb2e">av_opt_set_dict</a></div><div class="ttdeci">int av_opt_set_dict(void *obj, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01655">opt.c:1655</a></div></div>
<div class="ttc" id="astruct_h_w_accel_html_a34f08a5231e54a2fb677aa07bfc2f2b8"><div class="ttname"><a href="struct_h_w_accel.html#a34f08a5231e54a2fb677aa07bfc2f2b8">HWAccel::id</a></div><div class="ttdeci">enum HWAccelID id</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00068">ffmpeg.h:69</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba24758c8f4deed09b04b1be6c2e66a14e"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba24758c8f4deed09b04b1be6c2e66a14e">AV_BUFFERSRC_FLAG_KEEP_REF</a></div><div class="ttdeci">@ AV_BUFFERSRC_FLAG_KEEP_REF</div><div class="ttdef"><b>Definition:</b> <a href="buffersrc_8h_source.html#l00053">buffersrc.h:53</a></div></div>
<div class="ttc" id="astruct_input_stream_html_abcb8222561f1ee84a2f7a2157bed356c"><div class="ttname"><a href="struct_input_stream.html#abcb8222561f1ee84a2f7a2157bed356c">InputStream::autorotate</a></div><div class="ttdeci">int autorotate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00340">ffmpeg.h:340</a></div></div>
<div class="ttc" id="astruct_a_v_codec_descriptor_html_a9949288403a12812cd6e3892ac45f40f"><div class="ttname"><a href="struct_a_v_codec_descriptor.html#a9949288403a12812cd6e3892ac45f40f">AVCodecDescriptor::props</a></div><div class="ttdeci">int props</div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8h_source.html#l00054">codec_desc.h:54</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a0804b6530666fd8d5f4e4193ee1d205fab96d67115af909300a442d76232c0362"><div class="ttname"><a href="ffmpeg_8h.html#a0804b6530666fd8d5f4e4193ee1d205fab96d67115af909300a442d76232c0362">HWACCEL_GENERIC</a></div><div class="ttdeci">@ HWACCEL_GENERIC</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00061">ffmpeg.h:61</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_ad2b2360342940822238e5ba6c1f48718"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#ad2b2360342940822238e5ba6c1f48718">InputStream::sub2video::sub_queue</a></div><div class="ttdeci">AVFifoBuffer * sub_queue</div><div class="ttdoc">queue of AVSubtitle* before filter init</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00352">ffmpeg.h:352</a></div></div>
<div class="ttc" id="astruct_filter_graph_html_aa88faf44822ec4e04597a6eef12a7760"><div class="ttname"><a href="struct_filter_graph.html#aa88faf44822ec4e04597a6eef12a7760">FilterGraph::nb_inputs</a></div><div class="ttdeci">int nb_inputs</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00293">ffmpeg.h:293</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_html"><div class="ttname"><a href="struct_a_v_subtitle.html">AVSubtitle</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02694">avcodec.h:2694</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a49020cc320b8fb1f5449167b6c97515b"><div class="ttname"><a href="struct_a_v_frame.html#a49020cc320b8fb1f5449167b6c97515b">AVFrame::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00545">frame.h:545</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aa80f29f39afa7345065ee7019c879980"><div class="ttname"><a href="ffmpeg_8c.html#aa80f29f39afa7345065ee7019c879980">input_streams</a></div><div class="ttdeci">InputStream ** input_streams</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00147">ffmpeg.c:147</a></div></div>
<div class="ttc" id="alibm_8h_html_af1370021d215283273ef203f8260b7ee"><div class="ttname"><a href="libm_8h.html#af1370021d215283273ef203f8260b7ee">llrintf</a></div><div class="ttdeci">#define llrintf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00399">libm.h:399</a></div></div>
<div class="ttc" id="acommon_8h_html_a013fdaa079045ec5632fe121e211e516"><div class="ttname"><a href="common_8h.html#a013fdaa079045ec5632fe121e211e516">FFMAX3</a></div><div class="ttdeci">#define FFMAX3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00095">common.h:95</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a4d418b807283607a231d2d8cdf559f00"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a4d418b807283607a231d2d8cdf559f00">AVCodecParameters::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00166">codec_par.h:166</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html"><div class="ttname"><a href="intreadwrite_8h.html">intreadwrite.h</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a18d3980caddd835d0192f7ff2ed1b9b2"><div class="ttname"><a href="ffmpeg_8c.html#a18d3980caddd835d0192f7ff2ed1b9b2">get_benchmark_time_stamps</a></div><div class="ttdeci">static BenchmarkTimeStamps get_benchmark_time_stamps(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04865">ffmpeg.c:4865</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a888da811ed2e3af55edb9d9d49d4295f"><div class="ttname"><a href="ffmpeg_8h.html#a888da811ed2e3af55edb9d9d49d4295f">vstats_filename</a></div><div class="ttdeci">char * vstats_filename</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00146">ffmpeg_opt.c:146</a></div></div>
<div class="ttc" id="affmpeg_8c_html_abe27a2d9d065be49e6580984bfe80639"><div class="ttname"><a href="ffmpeg_8c.html#abe27a2d9d065be49e6580984bfe80639">ifilter_has_all_input_formats</a></div><div class="ttdeci">static int ifilter_has_all_input_formats(FilterGraph *fg)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02139">ffmpeg.c:2139</a></div></div>
<div class="ttc" id="astruct_output_file_html_aac74ddf07f90ad30cd5ddf80583468ec"><div class="ttname"><a href="struct_output_file.html#aac74ddf07f90ad30cd5ddf80583468ec">OutputFile::opts</a></div><div class="ttdeci">AVDictionary * opts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00570">ffmpeg.h:570</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html_aa38678f2cad36f120d42e56449c5edb4"><div class="ttname"><a href="struct_a_v_dictionary_entry.html#aa38678f2cad36f120d42e56449c5edb4">AVDictionaryEntry::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00083">dict.h:83</a></div></div>
<div class="ttc" id="astruct_a_v_component_descriptor_html_ae504ab46ea3719e9930f91491af593dc"><div class="ttname"><a href="struct_a_v_component_descriptor.html#ae504ab46ea3719e9930f91491af593dc">AVComponentDescriptor::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00058">pixdesc.h:58</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aaa6a0a6aa50128ba9996c2ea923a34c3"><div class="ttname"><a href="ffmpeg_8c.html#aaa6a0a6aa50128ba9996c2ea923a34c3">copy_ts_first_pts</a></div><div class="ttdeci">static int64_t copy_ts_first_pts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00347">ffmpeg.c:347</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a89c049f6683542b855326a6c2d5c3d7d"><div class="ttname"><a href="ffmpeg_8c.html#a89c049f6683542b855326a6c2d5c3d7d">close_output_stream</a></div><div class="ttdeci">static void close_output_stream(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00846">ffmpeg.c:846</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7"><div class="ttname"><a href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31acd6c6d4f0864009dfe2fb65c496f39a7">ENCODER_FINISHED</a></div><div class="ttdeci">@ ENCODER_FINISHED</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00443">ffmpeg.h:443</a></div></div>
<div class="ttc" id="amxfenc_8c_html_ad662aa56c1696f09c0ac6b97abafac6d"><div class="ttname"><a href="mxfenc_8c.html#ad662aa56c1696f09c0ac6b97abafac6d">frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="mxfenc_8c_source.html#l02166">mxfenc.c:2166</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaedab7fb3a1647fbdc114ad0447105c72">AV_CODEC_ID_VP9</a></div><div class="ttdeci">@ AV_CODEC_ID_VP9</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00217">codec_id.h:217</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9f76f2475ef24ff4c9771dd53072d040"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9f76f2475ef24ff4c9771dd53072d040">AVCodecParameters::codec_id</a></div><div class="ttdeci">enum AVCodecID codec_id</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:60</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga935dbbf6bde8dfe5fa7ddb1da582eb07"><div class="ttname"><a href="group__lavu__math__rational.html#ga935dbbf6bde8dfe5fa7ddb1da582eb07">av_q2d</a></div><div class="ttdeci">static double av_q2d(AVRational a)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00104">rational.h:104</a></div></div>
<div class="ttc" id="astruct_input_filter_html_a495a9bf2659a91ffa184a4cd9395469b"><div class="ttname"><a href="struct_input_filter.html#a495a9bf2659a91ffa184a4cd9395469b">InputFilter::ist</a></div><div class="ttdeci">struct InputStream * ist</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00240">ffmpeg.h:240</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ae4fb6d6ec74b5529f4cfe5f4f2bddbd9"><div class="ttname"><a href="ffmpeg_8c.html#ae4fb6d6ec74b5529f4cfe5f4f2bddbd9">get_input_stream</a></div><div class="ttdeci">static InputStream * get_input_stream(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02979">ffmpeg.c:2979</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_ga402ddbef6f7347869725696846ac81eb"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#ga402ddbef6f7347869725696846ac81eb">av_buffersink_get_format</a></div><div class="ttdeci">int av_buffersink_get_format(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga11e6542c4e66d3028668788a1a74217c"><div class="ttname"><a href="group__lavc__decoding.html#ga11e6542c4e66d3028668788a1a74217c">avcodec_receive_frame</a></div><div class="ttdeci">int avcodec_receive_frame(AVCodecContext *avctx, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l00669">decode.c:669</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_gabc82f65ec7f4fa47c5216260639258a1"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#gabc82f65ec7f4fa47c5216260639258a1">av_buffersink_get_time_base</a></div><div class="ttdeci">AVRational av_buffersink_get_time_base(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0f5bec27a856369ac81ccc9784f52e86"><div class="ttname"><a href="struct_a_v_codec_context.html#a0f5bec27a856369ac81ccc9784f52e86">AVCodecContext::stats_out</a></div><div class="ttdeci">char * stats_out</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01545">avcodec.h:1545</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ac7072b9c76dd77ce9900197d0133b0ba"><div class="ttname"><a href="ffmpeg_8c.html#ac7072b9c76dd77ce9900197d0133b0ba">term_init</a></div><div class="ttdeci">void term_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00396">ffmpeg.c:396</a></div></div>
<div class="ttc" id="affmpeg_8c_html_adb98afa9c4922dc9f61b7130c3beb183"><div class="ttname"><a href="ffmpeg_8c.html#adb98afa9c4922dc9f61b7130c3beb183">do_streamcopy</a></div><div class="ttdeci">static void do_streamcopy(InputStream *ist, OutputStream *ost, const AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02023">ffmpeg.c:2023</a></div></div>
<div class="ttc" id="alibkvazaar_8c_html_aa1219ee396a270ba57fd4f2306b64c6e"><div class="ttname"><a href="libkvazaar_8c.html#aa1219ee396a270ba57fd4f2306b64c6e">pix_fmts</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="libkvazaar_8c_source.html#l00162">libkvazaar.c:300</a></div></div>
<div class="ttc" id="aavio_8h_html_a5c9308f296545a8f3b7687d277a6dabc"><div class="ttname"><a href="avio_8h.html#a5c9308f296545a8f3b7687d277a6dabc">AVIO_FLAG_WRITE</a></div><div class="ttdeci">#define AVIO_FLAG_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00675">avio.h:675</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5252d34fbce300228d4dbda19a8c3293"><div class="ttname"><a href="struct_a_v_codec_context.html#a5252d34fbce300228d4dbda19a8c3293">AVCodecContext::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00905">avcodec.h:905</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a3a0034bb2959a06111810d2813975b24"><div class="ttname"><a href="struct_input_stream.html#a3a0034bb2959a06111810d2813975b24">InputStream::cfr_next_pts</a></div><div class="ttdeci">int64_t cfr_next_pts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00329">ffmpeg.h:329</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a54e97364f74d8bf15062a8ea185f1c31ae8b7f720076ace3e8c20648c8b77835b"><div class="ttname"><a href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31ae8b7f720076ace3e8c20648c8b77835b">MUXER_FINISHED</a></div><div class="ttdeci">@ MUXER_FINISHED</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00444">ffmpeg.h:444</a></div></div>
<div class="ttc" id="astruct_a_v_option_html"><div class="ttname"><a href="struct_a_v_option.html">AVOption</a></div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00248">opt.h:248</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parser_context_html_a813780022f0a6abd1b7ab075264ffc3f"><div class="ttname"><a href="struct_a_v_codec_parser_context.html#a813780022f0a6abd1b7ab075264ffc3f">AVCodecParserContext::repeat_pict</a></div><div class="ttdeci">int repeat_pict</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l03371">avcodec.h:3371</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a33407e9015714983ecce9cfd2c3bb41f"><div class="ttname"><a href="ffmpeg_8c.html#a33407e9015714983ecce9cfd2c3bb41f">abort_codec_experimental</a></div><div class="ttdeci">static void abort_codec_experimental(AVCodec *c, int encoder)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00668">ffmpeg.c:668</a></div></div>
<div class="ttc" id="astruct_input_filter_html_aa033b48aa4612dc26aa8e66e83f932bc"><div class="ttname"><a href="struct_input_filter.html#aa033b48aa4612dc26aa8e66e83f932bc">InputFilter::type</a></div><div class="ttdeci">enum AVMediaType type</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00242">ffmpeg.h:243</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a1ed159d9bc9d71428699968505629b38"><div class="ttname"><a href="struct_input_stream.html#a1ed159d9bc9d71428699968505629b38">InputStream::fix_sub_duration</a></div><div class="ttdeci">int fix_sub_duration</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00342">ffmpeg.h:342</a></div></div>
<div class="ttc" id="alimits_8h_html"><div class="ttname"><a href="limits_8h.html">limits.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a889b84d5b3657df4a4e45b17b87848f5"><div class="ttname"><a href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">AVCodecContext::bits_per_raw_sample</a></div><div class="ttdeci">int bits_per_raw_sample</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01757">avcodec.h:1757</a></div></div>
<div class="ttc" id="aeval_8c_html_a569b6171b99e02f899d9ba8b5545cc27"><div class="ttname"><a href="eval_8c.html#a569b6171b99e02f899d9ba8b5545cc27">av_expr_eval</a></div><div class="ttdeci">double av_expr_eval(AVExpr *e, const double *const_values, void *opaque)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00766">eval.c:766</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a408a0502c42d26b196c524812d70a7e8"><div class="ttname"><a href="struct_input_stream.html#a408a0502c42d26b196c524812d70a7e8">InputStream::got_output</a></div><div class="ttdeci">int got_output</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00344">ffmpeg.h:344</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga46d6d32f6482a3e9c19203db5877105b"><div class="ttname"><a href="group__lavu__frame.html#ga46d6d32f6482a3e9c19203db5877105b">av_frame_clone</a></div><div class="ttdeci">AVFrame * av_frame_clone(const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00540">frame.c:540</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gaf02994a8bbeaa91d4757df179cbe567f"><div class="ttname"><a href="group__lavu__math.html#gaf02994a8bbeaa91d4757df179cbe567f">av_rescale_q</a></div><div class="ttdeci">int64_t av_rescale_q(int64_t a, AVRational bq, AVRational cq)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00142">mathematics.c:142</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a084ef220571b6cb993893e49c9b2105e"><div class="ttname"><a href="ffmpeg_8h.html#a084ef220571b6cb993893e49c9b2105e">max_error_rate</a></div><div class="ttdeci">float max_error_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00172">ffmpeg_opt.c:172</a></div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a7331e302ea7bb48e0b605a069576e135"><div class="ttname"><a href="demuxing__decoding_8c.html#a7331e302ea7bb48e0b605a069576e135">pix_fmt</a></div><div class="ttdeci">static enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00039">demuxing_decoding.c:40</a></div></div>
<div class="ttc" id="astruct_input_filter_html_aa3127396f27743175651a8d86e7d0770"><div class="ttname"><a href="struct_input_filter.html#aa3127396f27743175651a8d86e7d0770">InputFilter::frame_queue</a></div><div class="ttdeci">AVFifoBuffer * frame_queue</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00245">ffmpeg.h:245</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_a95df7a7ff85fb8f73f62d3c5d2d325f8"><div class="ttname"><a href="writing__filters_8txt.html#a95df7a7ff85fb8f73f62d3c5d2d325f8">on</a></div><div class="ttdeci">s EdgeDetect Foobar g libavfilter vf_edgedetect c libavfilter vf_foobar c edit libavfilter and add an entry for foobar following the pattern of the other filters edit libavfilter allfilters and add an entry for foobar following the pattern of the other filters configure make j&lt; whatever &gt; ffmpeg ffmpeg i you should get a foobar png with Lena edge detected That s your new playground is ready Some little details about what s going on</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00033">writing_filters.txt:34</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a19c97d7729be97389faaf4aaac8c3e88"><div class="ttname"><a href="ffmpeg_8c.html#a19c97d7729be97389faaf4aaac8c3e88">term_exit</a></div><div class="ttdeci">void term_exit(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00336">ffmpeg.c:336</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5bd9a6f252d615243d01198fd3957fd8"><div class="ttname"><a href="struct_a_v_codec_context.html#a5bd9a6f252d615243d01198fd3957fd8">AVCodecContext::thread_safe_callbacks</a></div><div class="ttdeci">int thread_safe_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01814">avcodec.h:1814</a></div></div>
<div class="ttc" id="ahwcontext_8c_html_afb2b99a15f3fdde25a2fd19353ac5a67"><div class="ttname"><a href="hwcontext_8c.html#afb2b99a15f3fdde25a2fd19353ac5a67">av_hwdevice_get_type_name</a></div><div class="ttdeci">const char * av_hwdevice_get_type_name(enum AVHWDeviceType type)</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext_8c_source.html#l00092">hwcontext.c:92</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a69b0f920b4d91360bd5cd5da5842e282"><div class="ttname"><a href="ffmpeg_8c.html#a69b0f920b4d91360bd5cd5da5842e282">compare_int64</a></div><div class="ttdeci">static int compare_int64(const void *a, const void *b)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02986">ffmpeg.c:2986</a></div></div>
<div class="ttc" id="astruct_input_file_html"><div class="ttname"><a href="struct_input_file.html">InputFile</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00397">ffmpeg.h:397</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea8ea61c837be9e734549f53754cef2cb2"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea8ea61c837be9e734549f53754cef2cb2">AV_CODEC_ID_CODEC2</a></div><div class="ttdeci">@ AV_CODEC_ID_CODEC2</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00485">codec_id.h:485</a></div></div>
<div class="ttc" id="astruct_output_filter_html_a7713667d07c3f7605e6dd24f0ca19940"><div class="ttname"><a href="struct_output_filter.html#a7713667d07c3f7605e6dd24f0ca19940">OutputFilter::name</a></div><div class="ttdeci">uint8_t * name</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00266">ffmpeg.h:266</a></div></div>
<div class="ttc" id="ahwcontext__opencl_8c_html_acd3d88da3c0e0313c3645ff34f62f542"><div class="ttname"><a href="hwcontext__opencl_8c.html#acd3d88da3c0e0313c3645ff34f62f542">key</a></div><div class="ttdeci">const char * key</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__opencl_8c_source.html#l00168">hwcontext_opencl.c:168</a></div></div>
<div class="ttc" id="atime_8c_html_a4eee9c65835652a808973f4bc1641a51"><div class="ttname"><a href="time_8c.html#a4eee9c65835652a808973f4bc1641a51">av_usleep</a></div><div class="ttdeci">int av_usleep(unsigned usec)</div><div class="ttdef"><b>Definition:</b> <a href="time_8c_source.html#l00084">time.c:84</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ae3df4d77c6908fb626293c2fed215d52">AVMEDIA_TYPE_DATA</a></div><div class="ttdeci">@ AVMEDIA_TYPE_DATA</div><div class="ttdoc">Opaque data information usually continuous.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00203">avutil.h:203</a></div></div>
<div class="ttc" id="astruct_filter_graph_html_ad45139bb5ec5c7766be0b216f9c8c2c4"><div class="ttname"><a href="struct_filter_graph.html#ad45139bb5ec5c7766be0b216f9c8c2c4">FilterGraph::graph_desc</a></div><div class="ttdeci">const char * graph_desc</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00287">ffmpeg.h:287</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a1e7893cdf661d9ad7c24fdccc60fa05e"><div class="ttname"><a href="struct_input_stream.html#a1e7893cdf661d9ad7c24fdccc60fa05e">InputStream::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdoc">dts of the last packet read for this stream (in AV_TIME_BASE units)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00316">ffmpeg.h:316</a></div></div>
<div class="ttc" id="adummy_2stdatomic_8h_html_acced2a78b2a440317feed51f3e505d1d"><div class="ttname"><a href="dummy_2stdatomic_8h.html#acced2a78b2a440317feed51f3e505d1d">atomic_load</a></div><div class="ttdeci">#define atomic_load(object)</div><div class="ttdef"><b>Definition:</b> <a href="dummy_2stdatomic_8h_source.html#l00093">stdatomic.h:93</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_aeaf7aa802f3b18fef86bb72445eff5d8"><div class="ttname"><a href="libavutil_2fifo_8c.html#aeaf7aa802f3b18fef86bb72445eff5d8">av_fifo_realloc2</a></div><div class="ttdeci">int av_fifo_realloc2(AVFifoBuffer *f, unsigned int new_size)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00087">fifo.c:87</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02caba81a12143ed2cea06438739a7caaafb"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02caba81a12143ed2cea06438739a7caaafb">AV_FIELD_BT</a></div><div class="ttdeci">@ AV_FIELD_BT</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00042">codec_par.h:42</a></div></div>
<div class="ttc" id="amathematics_8h_html_a8abfcc76130f3f991d124dd22d7e69bc"><div class="ttname"><a href="mathematics_8h.html#a8abfcc76130f3f991d124dd22d7e69bc">NAN</a></div><div class="ttdeci">#define NAN</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00064">mathematics.h:64</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aeceadb162c07ff048a54d0d70cc851fb"><div class="ttname"><a href="ffmpeg_8c.html#aeceadb162c07ff048a54d0d70cc851fb">assert_avoptions</a></div><div class="ttdeci">void assert_avoptions(AVDictionary *m)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00659">ffmpeg.c:659</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3d4c051c8b18a3c18750676a308c10be">AV_CODEC_ID_H264</a></div><div class="ttdeci">@ AV_CODEC_ID_H264</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00076">codec_id.h:76</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac59f9714ac34774b43b3797c80b06c68"><div class="ttname"><a href="group__lavc__packet.html#gac59f9714ac34774b43b3797c80b06c68">av_packet_new_side_data</a></div><div class="ttdeci">uint8_t * av_packet_new_side_data(AVPacket *pkt, enum AVPacketSideDataType type, int size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00332">avpacket.c:332</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a280fede5cdf5e514980ee8b629303c78"><div class="ttname"><a href="ffmpeg_8c.html#a280fede5cdf5e514980ee8b629303c78">process_input_packet</a></div><div class="ttdeci">static int process_input_packet(InputStream *ist, const AVPacket *pkt, int no_eof)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02591">ffmpeg.c:2591</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga29b7c3d60d68ef678ee1f4adc61a25dc"><div class="ttname"><a href="group__lavu__math.html#ga29b7c3d60d68ef678ee1f4adc61a25dc">av_rescale_delta</a></div><div class="ttdeci">int64_t av_rescale_delta(AVRational in_tb, int64_t in_ts, AVRational fs_tb, int duration, int64_t *last, AVRational out_tb)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00168">mathematics.c:168</a></div></div>
<div class="ttc" id="avf__drawtext_8c_html_af1aa66a39e65b3eb23cf9bfe8da01e20"><div class="ttname"><a href="vf__drawtext_8c.html#af1aa66a39e65b3eb23cf9bfe8da01e20">command</a></div><div class="ttdeci">static int command(AVFilterContext *ctx, const char *cmd, const char *arg, char *res, int res_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="vf__drawtext_8c_source.html#l00871">vf_drawtext.c:871</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a79192afe1e714610704c94cca1e6601b"><div class="ttname"><a href="ffmpeg_8c.html#a79192afe1e714610704c94cca1e6601b">process_input</a></div><div class="ttdeci">static int process_input(int file_index)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04297">ffmpeg.c:4297</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga18b7b10bb5b94c4842de18166bc677cb"><div class="ttname"><a href="group__lavf__encoding.html#ga18b7b10bb5b94c4842de18166bc677cb">avformat_write_header</a></div><div class="ttdeci">av_warn_unused_result int avformat_write_header(AVFormatContext *s, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l00505">mux.c:505</a></div></div>
<div class="ttc" id="astruct_a_v_class_html_aa8883e113a3f2965abd008f7667db7eb"><div class="ttname"><a href="struct_a_v_class.html#aa8883e113a3f2965abd008f7667db7eb">AVClass::class_name</a></div><div class="ttdeci">const char * class_name</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00072">log.h:72</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a6fed1803386760e0d661709f2d199673"><div class="ttname"><a href="ffmpeg_8c.html#a6fed1803386760e0d661709f2d199673">init_output_stream_wrapper</a></div><div class="ttdeci">static int init_output_stream_wrapper(OutputStream *ost, AVFrame *frame, unsigned int fatal)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00954">ffmpeg.c:954</a></div></div>
<div class="ttc" id="astruct_output_file_html_acfef99893985d28ae7f7f6a92e6d1bd7"><div class="ttname"><a href="struct_output_file.html#acfef99893985d28ae7f7f6a92e6d1bd7">OutputFile::shortest</a></div><div class="ttdeci">int shortest</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00576">ffmpeg.h:576</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga77a800026abd6dc2f4ac1e0ad7e3e999"><div class="ttname"><a href="group__lavc__packet.html#ga77a800026abd6dc2f4ac1e0ad7e3e999">av_packet_get_side_data</a></div><div class="ttdeci">uint8_t * av_packet_get_side_data(const AVPacket *pkt, enum AVPacketSideDataType type, int *size)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00353">avpacket.c:353</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gae31ae7fb20113b00108d0ecf53f25664"><div class="ttname"><a href="group__avoptions.html#gae31ae7fb20113b00108d0ecf53f25664">av_opt_find</a></div><div class="ttdeci">const AVOption * av_opt_find(void *obj, const char *name, const char *unit, int opt_flags, int search_flags)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l01660">opt.c:1660</a></div></div>
<div class="ttc" id="alibavcodec_2jacosubdec_8c_html_ac3a73711fd7f8a50db1c4b62e41cf852"><div class="ttname"><a href="libavcodec_2jacosubdec_8c.html#ac3a73711fd7f8a50db1c4b62e41cf852">arg</a></div><div class="ttdeci">const char * arg</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2jacosubdec_8c_source.html#l00066">jacosubdec.c:66</a></div></div>
<div class="ttc" id="aos2threads_8h_html_a9b6e74e145dcb6f426dd83bcc51aa217"><div class="ttname"><a href="os2threads_8h.html#a9b6e74e145dcb6f426dd83bcc51aa217">pthread_create</a></div><div class="ttdeci">static av_always_inline int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine)(void *), void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="os2threads_8h_source.html#l00080">os2threads.h:80</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="aavio_8h_html_ad88b866a118c17c95663f7782b2e8946"><div class="ttname"><a href="avio_8h.html#ad88b866a118c17c95663f7782b2e8946">avio_flush</a></div><div class="ttdeci">void avio_flush(AVIOContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00245">aviobuf.c:245</a></div></div>
<div class="ttc" id="astruct_a_v_packet_side_data_html_a7d43e1011586e6c987f418b604b57ec3"><div class="ttname"><a href="struct_a_v_packet_side_data.html#a7d43e1011586e6c987f418b604b57ec3">AVPacketSideData::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00307">packet.h:307</a></div></div>
<div class="ttc" id="affmpeg_8c_html_acab4b2fa7160415e392ae27ce59dce60"><div class="ttname"><a href="ffmpeg_8c.html#acab4b2fa7160415e392ae27ce59dce60">output_streams</a></div><div class="ttdeci">OutputStream ** output_streams</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00152">ffmpeg.c:152</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a38de3252b4bb6ea13e22238efe42c015"><div class="ttname"><a href="ffmpeg_8c.html#a38de3252b4bb6ea13e22238efe42c015">transcode_from_filter</a></div><div class="ttdeci">static int transcode_from_filter(FilterGraph *graph, InputStream **best_ist)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04585">ffmpeg.c:4585</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga6eff035c271caa5a533987a1e00ad43e"><div class="ttname"><a href="group__lavu__math__rational.html#ga6eff035c271caa5a533987a1e00ad43e">AVRational</a></div><div class="ttdeci">struct AVRational AVRational</div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a></div><div class="ttdeci">@ AVDISCARD_ALL</div><div class="ttdoc">discard all</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00236">avcodec.h:236</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_gae8ada5cc5722548d8698650b05207904"><div class="ttname"><a href="group__lavu__log.html#gae8ada5cc5722548d8698650b05207904">av_log_get_level</a></div><div class="ttdeci">int av_log_get_level(void)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00435">log.c:435</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a91ede117e78922c63c5fbd0c5793449f"><div class="ttname"><a href="tableprint__vlc_8h.html#a91ede117e78922c63c5fbd0c5793449f">av_realloc_f</a></div><div class="ttdeci">#define av_realloc_f(p, o, n)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00033">tableprint_vlc.h:33</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a7243fc5f2d9fcbb9249c8a036dc4eb1b"><div class="ttname"><a href="struct_input_stream.html#a7243fc5f2d9fcbb9249c8a036dc4eb1b">InputStream::hwaccel_get_buffer</a></div><div class="ttdeci">int(* hwaccel_get_buffer)(AVCodecContext *s, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00376">ffmpeg.h:376</a></div></div>
<div class="ttc" id="acmdutils_8c_html_a0f4db71e6407040a01316c537db5040c"><div class="ttname"><a href="cmdutils_8c.html#a0f4db71e6407040a01316c537db5040c">init_dynload</a></div><div class="ttdeci">void init_dynload(void)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l00117">cmdutils.c:117</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_af540b728145b614e34c4e10930354b93"><div class="ttname"><a href="tests_2movenc_8c.html#af540b728145b614e34c4e10930354b93">opts</a></div><div class="ttdeci">AVDictionary * opts</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00050">movenc.c:50</a></div></div>
<div class="ttc" id="astruct_output_file_html_ad160ce6520aad386bead7eb45f6f55a0"><div class="ttname"><a href="struct_output_file.html#ad160ce6520aad386bead7eb45f6f55a0">OutputFile::recording_time</a></div><div class="ttdeci">int64_t recording_time</div><div class="ttdoc">desired length of the resulting file in microseconds == AV_TIME_BASE units</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00572">ffmpeg.h:572</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aedf8e88653afe069ede914d844f5121c"><div class="ttname"><a href="ffmpeg_8c.html#aedf8e88653afe069ede914d844f5121c">run_as_daemon</a></div><div class="ttdeci">static int run_as_daemon</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00134">ffmpeg.c:134</a></div></div>
<div class="ttc" id="astruct_a_v_packet_side_data_html"><div class="ttname"><a href="struct_a_v_packet_side_data.html">AVPacketSideData</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00306">packet.h:306</a></div></div>
<div class="ttc" id="agroup__lavu__ver_html_ga36e17e3fc9bcbe5c55820a8ac8b47e3c"><div class="ttname"><a href="group__lavu__ver.html#ga36e17e3fc9bcbe5c55820a8ac8b47e3c">LIBAVUTIL_VERSION_INT</a></div><div class="ttdeci">#define LIBAVUTIL_VERSION_INT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2version_8h_source.html#l00085">version.h:85</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a379e18554a7d7ecb27d37c0dc6f3ebba"><div class="ttname"><a href="ffmpeg_8c.html#a379e18554a7d7ecb27d37c0dc6f3ebba">print_final_stats</a></div><div class="ttdeci">static void print_final_stats(int64_t total_size)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01559">ffmpeg.c:1559</a></div></div>
<div class="ttc" id="astruct_a_v_packet_side_data_html_ae943cb6d9d40d6a5d49e590bc20f2652"><div class="ttname"><a href="struct_a_v_packet_side_data.html#ae943cb6d9d40d6a5d49e590bc20f2652">AVPacketSideData::type</a></div><div class="ttdeci">enum AVPacketSideDataType type</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00308">packet.h:309</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a437be96a9da675f12caa228a9c81bd82"><div class="ttname"><a href="struct_a_v_packet.html#a437be96a9da675f12caa228a9c81bd82">AVPacket::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00369">packet.h:369</a></div></div>
<div class="ttc" id="aaacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00592">aacdec_template.c:592</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_a992c9fe5de3acf5dce388cffda4fdce8"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#a992c9fe5de3acf5dce388cffda4fdce8">InputStream::sub2video::last_pts</a></div><div class="ttdeci">int64_t last_pts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00350">ffmpeg.h:350</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_ga135e9e929b5033bb8f68322497b2effc"><div class="ttname"><a href="group__lavu__buffer.html#ga135e9e929b5033bb8f68322497b2effc">av_buffer_unref</a></div><div class="ttdeci">void av_buffer_unref(AVBufferRef **buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00125">buffer.c:125</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad2d413a504862fdfcf84105e898deb88"><div class="ttname"><a href="struct_a_v_stream.html#ad2d413a504862fdfcf84105e898deb88">AVStream::nb_side_data</a></div><div class="ttdeci">int nb_side_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00975">avformat.h:975</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="ffmpeg_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04913">ffmpeg.c:4913</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ab8ed239c7a9be61521f08c4adaa9d4f3"><div class="ttname"><a href="ffmpeg_8c.html#ab8ed239c7a9be61521f08c4adaa9d4f3">update_benchmark</a></div><div class="ttdeci">static void update_benchmark(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00673">ffmpeg.c:673</a></div></div>
<div class="ttc" id="aavio_8h_html_a4933ebf30594f9ebb9f929271eb6b027"><div class="ttname"><a href="avio_8h.html#a4933ebf30594f9ebb9f929271eb6b027">avio_print</a></div><div class="ttdeci">#define avio_print(s,...)</div><div class="ttdef"><b>Definition:</b> <a href="avio_8h_source.html#l00594">avio.h:594</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a4981f23e6d794110daa5408fc9a9f0fb"><div class="ttname"><a href="ffmpeg_8c.html#a4981f23e6d794110daa5408fc9a9f0fb">send_frame_to_filters</a></div><div class="ttdeci">static int send_frame_to_filters(InputStream *ist, AVFrame *decoded_frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02277">ffmpeg.c:2277</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a71dd0984704d7f70065c6b97edc7069e"><div class="ttname"><a href="ffmpeg_8c.html#a71dd0984704d7f70065c6b97edc7069e">decode_video</a></div><div class="ttdeci">static int decode_video(InputStream *ist, AVPacket *pkt, int *got_output, int64_t *duration_pts, int eof, int *decode_failed)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02365">ffmpeg.c:2365</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaf869d0829ed607cec3a4a02a1c7026b3"><div class="ttname"><a href="group__lavc__core.html#gaf869d0829ed607cec3a4a02a1c7026b3">avcodec_free_context</a></div><div class="ttdeci">void avcodec_free_context(AVCodecContext **avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2options_8c_source.html#l00187">options.c:187</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a5be8624c1f375fb6ad9bd97bcc05f898"><div class="ttname"><a href="ffmpeg_8c.html#a5be8624c1f375fb6ad9bd97bcc05f898">getmaxrss</a></div><div class="ttdeci">static int64_t getmaxrss(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04891">ffmpeg.c:4891</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a374bbecd984df3a5da8a67cc6e9a7aa7"><div class="ttname"><a href="ffmpeg_8h.html#a374bbecd984df3a5da8a67cc6e9a7aa7">frame_bits_per_raw_sample</a></div><div class="ttdeci">int frame_bits_per_raw_sample</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00171">ffmpeg_opt.c:171</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a6f3ee0596312c90a2ef2ad160c991188"><div class="ttname"><a href="struct_a_v_frame.html#a6f3ee0596312c90a2ef2ad160c991188">AVFrame::top_field_first</a></div><div class="ttdeci">int top_field_first</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00460">frame.h:460</a></div></div>
<div class="ttc" id="astruct_input_file_html_a4062ac530db413964aa76090995b85cd"><div class="ttname"><a href="struct_input_file.html#a4062ac530db413964aa76090995b85cd">InputFile::ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00398">ffmpeg.h:398</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_a4b838e76f70c011eda1fa44695041c75"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#a4b838e76f70c011eda1fa44695041c75">AV_RL64</a></div><div class="ttdeci">#define AV_RL64</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00173">intreadwrite.h:173</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a556ba3dffaac6f6e98a41a843baf898b"><div class="ttname"><a href="ffmpeg_8c.html#a556ba3dffaac6f6e98a41a843baf898b">BenchmarkTimeStamps</a></div><div class="ttdeci">struct BenchmarkTimeStamps BenchmarkTimeStamps</div></div>
<div class="ttc" id="aavformat_8h_html_a3fd17d972522f10a6d73937482225482"><div class="ttname"><a href="avformat_8h.html#a3fd17d972522f10a6d73937482225482">AV_DISPOSITION_COMMENT</a></div><div class="ttdeci">#define AV_DISPOSITION_COMMENT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00817">avformat.h:817</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a3f19c60ac6da237cd10e4d97150c118e"><div class="ttname"><a href="struct_a_v_stream.html#a3f19c60ac6da237cd10e4d97150c118e">AVStream::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00931">avformat.h:931</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a17f085393f3e2cd51d665ab899282b81"><div class="ttname"><a href="ffmpeg_8c.html#a17f085393f3e2cd51d665ab899282b81">check_keyboard_interaction</a></div><div class="ttdeci">static int check_keyboard_interaction(int64_t cur_time)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03943">ffmpeg.c:3943</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga791fcd0dba1d19fe0c3677509344328e"><div class="ttname"><a href="group__lavu__log.html#ga791fcd0dba1d19fe0c3677509344328e">av_default_item_name</a></div><div class="ttdeci">const char * av_default_item_name(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00235">log.c:235</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_I</div><div class="ttdoc">Intra.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_gaf8143cc9a7cd364af1ff525c6181c0ce"><div class="ttname"><a href="group__lavu__log.html#gaf8143cc9a7cd364af1ff525c6181c0ce">av_log_set_flags</a></div><div class="ttdeci">void av_log_set_flags(int arg)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00445">log.c:445</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a911d752902aa8d4666ccefd8c912c91e"><div class="ttname"><a href="struct_input_stream.html#a911d752902aa8d4666ccefd8c912c91e">InputStream::max_pts</a></div><div class="ttdeci">int64_t max_pts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00325">ffmpeg.h:325</a></div></div>
<div class="ttc" id="astruct_a_v_dictionary_entry_html_a38fc80176f8f839282bb61c03392e194"><div class="ttname"><a href="struct_a_v_dictionary_entry.html#a38fc80176f8f839282bb61c03392e194">AVDictionaryEntry::key</a></div><div class="ttdeci">char * key</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00082">dict.h:82</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gac0dfb59ee63132c9a064696a741419f6"><div class="ttname"><a href="group__lavc__core.html#gac0dfb59ee63132c9a064696a741419f6">AV_CODEC_PROP_BITMAP_SUB</a></div><div class="ttdeci">#define AV_CODEC_PROP_BITMAP_SUB</div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8h_source.html#l00097">codec_desc.h:97</a></div></div>
<div class="ttc" id="aparseutils_8h_html"><div class="ttname"><a href="parseutils_8h.html">parseutils.h</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a1e341587fa92b173a0d6ae73fadb0409"><div class="ttname"><a href="struct_a_v_stream.html#a1e341587fa92b173a0d6ae73fadb0409">AVStream::first_dts</a></div><div class="ttdeci">int64_t first_dts</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01061">avformat.h:1061</a></div></div>
<div class="ttc" id="amathops_8h_html"><div class="ttname"><a href="mathops_8h.html">mathops.h</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ab98f0ee465a0b23b09ba22ac22f359b7"><div class="ttname"><a href="ffmpeg_8c.html#ab98f0ee465a0b23b09ba22ac22f359b7">duration_max</a></div><div class="ttdeci">static AVRational duration_max(int64_t tmp, int64_t *duration, AVRational tmp_time_base, AVRational time_base)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04212">ffmpeg.c:4212</a></div></div>
<div class="ttc" id="astruct_filter_graph_html_a92c7f6faf7e95b259bce1c717d43b4ee"><div class="ttname"><a href="struct_filter_graph.html#a92c7f6faf7e95b259bce1c717d43b4ee">FilterGraph::nb_outputs</a></div><div class="ttdeci">int nb_outputs</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00295">ffmpeg.h:295</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a478cd4ca45f6d24dd443138f3bc4a11a"><div class="ttname"><a href="ffmpeg_8c.html#a478cd4ca45f6d24dd443138f3bc4a11a">main_return_code</a></div><div class="ttdeci">static int main_return_code</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00346">ffmpeg.c:346</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aadf678a3a88dfccc1dc85f2fee5842fc"><div class="ttname"><a href="ffmpeg_8c.html#aadf678a3a88dfccc1dc85f2fee5842fc">vstats_file</a></div><div class="ttdeci">static FILE * vstats_file</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00112">ffmpeg.c:112</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gga921d656eaf2c4d6800a734a13af021d0aea95b00154ff83c740b46376dfa06e11"><div class="ttname"><a href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0aea95b00154ff83c740b46376dfa06e11">AV_ROUND_NEAR_INF</a></div><div class="ttdeci">@ AV_ROUND_NEAR_INF</div><div class="ttdoc">Round to nearest and halfway cases away from zero.</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00084">mathematics.h:84</a></div></div>
<div class="ttc" id="astruct_input_filter_html_abbd8721ddcadbfb453a4f5cdf6301c25"><div class="ttname"><a href="struct_input_filter.html#abbd8721ddcadbfb453a4f5cdf6301c25">InputFilter::sample_aspect_ratio</a></div><div class="ttdeci">AVRational sample_aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00251">ffmpeg.h:251</a></div></div>
<div class="ttc" id="aavformat_8h_html_a5ff7b03b405295a7a9743cfa67369759"><div class="ttname"><a href="avformat_8h.html#a5ff7b03b405295a7a9743cfa67369759">AV_DISPOSITION_METADATA</a></div><div class="ttdeci">#define AV_DISPOSITION_METADATA</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00851">avformat.h:851</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga38b16ee9a8fd4c57ffd4fef0db3481c6"><div class="ttname"><a href="group__lavc__core.html#ga38b16ee9a8fd4c57ffd4fef0db3481c6">AV_CODEC_CAP_VARIABLE_FRAME_SIZE</a></div><div class="ttdeci">#define AV_CODEC_CAP_VARIABLE_FRAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00122">codec.h:122</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aa4af1fda1a5fc33ec74e4ae2c0dbc122"><div class="ttname"><a href="ffmpeg_8c.html#aa4af1fda1a5fc33ec74e4ae2c0dbc122">transcode_init</a></div><div class="ttdeci">static int transcode_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03692">ffmpeg.c:3692</a></div></div>
<div class="ttc" id="agroup__lavfi_html_gab20535e0685fb5f9b4f02e436412c3f0"><div class="ttname"><a href="group__lavfi.html#gab20535e0685fb5f9b4f02e436412c3f0">avfilter_graph_request_oldest</a></div><div class="ttdeci">int avfilter_graph_request_oldest(AVFilterGraph *graph)</div><div class="ttdef"><b>Definition:</b> <a href="avfiltergraph_8c_source.html#l01346">avfiltergraph.c:1346</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a360baf543db2a3aa9b2a91740eefdbd3"><div class="ttname"><a href="ffmpeg_8c.html#a360baf543db2a3aa9b2a91740eefdbd3">get_format</a></div><div class="ttdeci">static enum AVPixelFormat get_format(AVCodecContext *s, const enum AVPixelFormat *pix_fmts)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02773">ffmpeg.c:2818</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga8ed4237acfc3d68484301a5d1859936c"><div class="ttname"><a href="group__lavu__dict.html#ga8ed4237acfc3d68484301a5d1859936c">AV_DICT_DONT_OVERWRITE</a></div><div class="ttdeci">#define AV_DICT_DONT_OVERWRITE</div><div class="ttdoc">Don't overwrite existing entries.</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00076">dict.h:76</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga11f785a188d7d9df71621001465b0f1d"><div class="ttname"><a href="group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d">avcodec_open2</a></div><div class="ttdeci">int avcodec_open2(AVCodecContext *avctx, const AVCodec *codec, AVDictionary **options)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l00550">utils.c:550</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2c1506f84f74e9af9fabdf8cc1f86b89"><div class="ttname"><a href="ffmpeg_8c.html#a2c1506f84f74e9af9fabdf8cc1f86b89">sub2video_push_ref</a></div><div class="ttdeci">static void sub2video_push_ref(InputStream *ist, int64_t pts)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00222">ffmpeg.c:222</a></div></div>
<div class="ttc" id="atime_8h_html"><div class="ttname"><a href="time_8h.html">time.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a16e4be8873bd93ac84c7b7d86455d518"><div class="ttname"><a href="struct_a_v_codec.html#a16e4be8873bd93ac84c7b7d86455d518">AVCodec::defaults</a></div><div class="ttdeci">const AVCodecDefault * defaults</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00259">codec.h:259</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ac237321f98a7041c9f6004d2ce8a425c"><div class="ttname"><a href="ffmpeg_8c.html#ac237321f98a7041c9f6004d2ce8a425c">close_all_output_streams</a></div><div class="ttdeci">static void close_all_output_streams(OutputStream *ost, OSTFinished this_stream, OSTFinished others)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00694">ffmpeg.c:694</a></div></div>
<div class="ttc" id="astruct_input_stream_html_aa8aa609acb39eb21da43f02cdfb036eb"><div class="ttname"><a href="struct_input_stream.html#aa8aa609acb39eb21da43f02cdfb036eb">InputStream::samples_decoded</a></div><div class="ttdeci">uint64_t samples_decoded</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00389">ffmpeg.h:389</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aa67220b3d47d990ba75e7099f11cfa68"><div class="ttname"><a href="ffmpeg_8c.html#aa67220b3d47d990ba75e7099f11cfa68">received_nb_signals</a></div><div class="ttdeci">static volatile int received_nb_signals</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00343">ffmpeg.c:343</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ad87050cf933e8938bd511dbd295a8848"><div class="ttname"><a href="ffmpeg_8h.html#ad87050cf933e8938bd511dbd295a8848">do_benchmark_all</a></div><div class="ttdeci">int do_benchmark_all</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00159">ffmpeg_opt.c:159</a></div></div>
<div class="ttc" id="astruct_a_v_pix_fmt_descriptor_html"><div class="ttname"><a href="struct_a_v_pix_fmt_descriptor.html">AVPixFmtDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8h_source.html#l00081">pixdesc.h:81</a></div></div>
<div class="ttc" id="aavformat_8h_html_aed1d78ae5604930f7465e5f48220941e"><div class="ttname"><a href="avformat_8h.html#aed1d78ae5604930f7465e5f48220941e">AV_DISPOSITION_ORIGINAL</a></div><div class="ttdeci">#define AV_DISPOSITION_ORIGINAL</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00816">avformat.h:816</a></div></div>
<div class="ttc" id="astruct_input_filter_html_ab1730578ae74132f67d2e847df4cc624"><div class="ttname"><a href="struct_input_filter.html#ab1730578ae74132f67d2e847df4cc624">InputFilter::graph</a></div><div class="ttdeci">struct FilterGraph * graph</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00241">ffmpeg.h:241</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a4d798d73986e80662044e710a8fb4984"><div class="ttname"><a href="ffmpeg_8c.html#a4d798d73986e80662044e710a8fb4984">nb_input_streams</a></div><div class="ttdeci">int nb_input_streams</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00148">ffmpeg.c:148</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_ga87e21bf198fd932c30cc3cdc6b16bff1"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#ga87e21bf198fd932c30cc3cdc6b16bff1">av_buffersink_get_channel_layout</a></div><div class="ttdeci">uint64_t av_buffersink_get_channel_layout(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="agroup__lavc__packet_html_gadb05d71fa2ea7b7fd3e8cfc6d9065a47"><div class="ttname"><a href="group__lavc__packet.html#gadb05d71fa2ea7b7fd3e8cfc6d9065a47">av_packet_ref</a></div><div class="ttdeci">int av_packet_ref(AVPacket *dst, const AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00615">avpacket.c:615</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga91dbb1359f99547adb544ee96a406b21"><div class="ttname"><a href="group__lavc__packet.html#ga91dbb1359f99547adb544ee96a406b21">av_packet_move_ref</a></div><div class="ttdeci">void av_packet_move_ref(AVPacket *dst, AVPacket *src)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00664">avpacket.c:664</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_html_a89491b1f6998eceb6221791fd50087df"><div class="ttname"><a href="struct_a_v_subtitle.html#a89491b1f6998eceb6221791fd50087df">AVSubtitle::num_rects</a></div><div class="ttdeci">unsigned num_rects</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02698">avcodec.h:2698</a></div></div>
<div class="ttc" id="astruct_input_filter_html_a2ad802636d7a1f6b3be4eaaa21929c3f"><div class="ttname"><a href="struct_input_filter.html#a2ad802636d7a1f6b3be4eaaa21929c3f">InputFilter::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00250">ffmpeg.h:250</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_a15e606590596931e88ebd0b4626bfe97"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#a15e606590596931e88ebd0b4626bfe97">InputStream::sub2video::initialize</a></div><div class="ttdeci">unsigned int initialize</div><div class="ttdoc">marks if sub2video_update should force an initialization</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00355">ffmpeg.h:355</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a0943e85eb624c2191490862ececd319d"><div class="ttname"><a href="struct_a_v_frame.html#a0943e85eb624c2191490862ececd319d">AVFrame::best_effort_timestamp</a></div><div class="ttdeci">int64_t best_effort_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00572">frame.h:572</a></div></div>
<div class="ttc" id="aswresample_8h_html"><div class="ttname"><a href="swresample_8h.html">swresample.h</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a4382c3064df1c9eb232ac198dec067f9"><div class="ttname"><a href="struct_a_v_stream.html#a4382c3064df1c9eb232ac198dec067f9">AVStream::nb_frames</a></div><div class="ttdeci">int64_t nb_frames</div><div class="ttdoc">number of frames in this stream if known or 0</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00920">avformat.h:920</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a0b748d924898b08b89ff4974afd17285"><div class="ttname"><a href="struct_a_v_format_context.html#a0b748d924898b08b89ff4974afd17285">AVFormatContext::nb_streams</a></div><div class="ttdeci">unsigned int nb_streams</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01279">avformat.h:1279</a></div></div>
<div class="ttc" id="agroup__opt__set__funcs_html_ga3adf7185c21cc080890a5ec02c2e56b2"><div class="ttname"><a href="group__opt__set__funcs.html#ga3adf7185c21cc080890a5ec02c2e56b2">av_opt_set_int</a></div><div class="ttdeci">int av_opt_set_int(void *obj, const char *name, int64_t val, int search_flags)</div><div class="ttdef"><b>Definition:</b> <a href="opt_8c_source.html#l00586">opt.c:586</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_rect_html"><div class="ttname"><a href="struct_a_v_subtitle_rect.html">AVSubtitleRect</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02659">avcodec.h:2659</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a8aeefb8cf55cb147f930424c488f9693"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a8aeefb8cf55cb147f930424c488f9693">AVCodecParameters::video_delay</a></div><div class="ttdeci">int video_delay</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00155">codec_par.h:155</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a30b4858540ac444ef7dab2ec3b7f5be0"><div class="ttname"><a href="ffmpeg_8c.html#a30b4858540ac444ef7dab2ec3b7f5be0">input_files</a></div><div class="ttdeci">InputFile ** input_files</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00149">ffmpeg.c:149</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3f89733f429c98ba5bc64373fb0a3f13"><div class="ttname"><a href="struct_a_v_frame.html#a3f89733f429c98ba5bc64373fb0a3f13">AVFrame::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a946e1e9b89eeeae4cab8a833b482c1ad"><div class="ttname"><a href="struct_a_v_stream.html#a946e1e9b89eeeae4cab8a833b482c1ad">AVStream::avg_frame_rate</a></div><div class="ttdeci">AVRational avg_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00942">avformat.h:942</a></div></div>
<div class="ttc" id="astruct_output_filter_html_a9f66eff9402b2790dfcea63a0010aecc"><div class="ttname"><a href="struct_output_filter.html#a9f66eff9402b2790dfcea63a0010aecc">OutputFilter::sample_rates</a></div><div class="ttdeci">int * sample_rates</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00282">ffmpeg.h:282</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_a0bd83c4ad9f5301d63e49a9f94b8cf7d"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#a0bd83c4ad9f5301d63e49a9f94b8cf7d">InputStream::sub2video::w</a></div><div class="ttdeci">int w</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00354">ffmpeg.h:354</a></div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a9b6f7d220d100ba73defab295623356b"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a9b6f7d220d100ba73defab295623356b">AVCodecParameters::codec_tag</a></div><div class="ttdeci">uint32_t codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00064">codec_par.h:64</a></div></div>
<div class="ttc" id="astruct_input_file_html_afee3292b7b58207fe6fd91c8127fac19"><div class="ttname"><a href="struct_input_file.html#afee3292b7b58207fe6fd91c8127fac19">InputFile::nb_streams</a></div><div class="ttdeci">int nb_streams</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00413">ffmpeg.h:413</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a21a0be842e8fa2c780fa87f45bd5d17e"><div class="ttname"><a href="ffmpeg_8h.html#a21a0be842e8fa2c780fa87f45bd5d17e">print_stats</a></div><div class="ttdeci">int print_stats</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00168">ffmpeg_opt.c:168</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a3dd46fd353a405f6e9b91c11d9c5b736"><div class="ttname"><a href="struct_a_v_frame.html#a3dd46fd353a405f6e9b91c11d9c5b736">AVFrame::decode_error_flags</a></div><div class="ttdeci">int decode_error_flags</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00603">frame.h:603</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a8e3eb32799f4637fcdd75bb9099142ff"><div class="ttname"><a href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a></div><div class="ttdeci">#define ff_dlog(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00029">tableprint_vlc.h:29</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ae4d5327ac60265779027253e0f6ca4dc"><div class="ttname"><a href="ffmpeg_8h.html#ae4d5327ac60265779027253e0f6ca4dc">VSYNC_VFR</a></div><div class="ttdeci">#define VSYNC_VFR</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00052">ffmpeg.h:52</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a9beebdd76e933c60de0e18629bc9fc2e"><div class="ttname"><a href="ffmpeg_8c.html#a9beebdd76e933c60de0e18629bc9fc2e">decode_interrupt_cb</a></div><div class="ttdeci">static int decode_interrupt_cb(void *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00485">ffmpeg.c:485</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersrc_html_ga828fc86955dc0530ea53c123862e3da6"><div class="ttname"><a href="group__lavfi__buffersrc.html#ga828fc86955dc0530ea53c123862e3da6">av_buffersrc_close</a></div><div class="ttdeci">int av_buffersrc_close(AVFilterContext *ctx, int64_t pts, unsigned flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffersrc_8c_source.html#l00255">buffersrc.c:255</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a385c44d7cafe80cad82fe46e25cab221"><div class="ttname"><a href="struct_a_v_frame.html#a385c44d7cafe80cad82fe46e25cab221">AVFrame::pkt_duration</a></div><div class="ttdeci">int64_t pkt_duration</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00587">frame.h:587</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_html_a9352b11d6d6b315fe3c61b65447d5174"><div class="ttname"><a href="struct_a_v_codec_h_w_config.html#a9352b11d6d6b315fe3c61b65447d5174">AVCodecHWConfig::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00328">codec.h:432</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a8dd683f65cea8e917f0124fbf6346f8b"><div class="ttname"><a href="avcodec_8h.html#a8dd683f65cea8e917f0124fbf6346f8b">FF_DEBUG_DCT_COEFF</a></div><div class="ttdeci">#define FF_DEBUG_DCT_COEFF</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01623">avcodec.h:1623</a></div></div>
<div class="ttc" id="affmpeg_8h_html_affee77914991e4f6048c708556a7edbe"><div class="ttname"><a href="ffmpeg_8h.html#affee77914991e4f6048c708556a7edbe">options</a></div><div class="ttdeci">const OptionDef options[]</div></div>
<div class="ttc" id="astruct_filter_graph_html_ae222203d54c99d90f4308f5fd2285ee5"><div class="ttname"><a href="struct_filter_graph.html#ae222203d54c99d90f4308f5fd2285ee5">FilterGraph::graph</a></div><div class="ttdeci">AVFilterGraph * graph</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00289">ffmpeg.h:289</a></div></div>
<div class="ttc" id="aavformat_8h_html_a51efe44185491ba0a214fe2bc92ac2a1"><div class="ttname"><a href="avformat_8h.html#a51efe44185491ba0a214fe2bc92ac2a1">AV_DISPOSITION_CAPTIONS</a></div><div class="ttdeci">#define AV_DISPOSITION_CAPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00849">avformat.h:849</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a1ec57ee84f19cf65d00eaa4d2a2253ce"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a1ec57ee84f19cf65d00eaa4d2a2253ce">AVCodecParameters::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00127">codec_par.h:127</a></div></div>
<div class="ttc" id="astruct_output_filter_html_acd4f04cfb3db05beef2507e397aef9aa"><div class="ttname"><a href="struct_output_filter.html#acd4f04cfb3db05beef2507e397aef9aa">OutputFilter::formats</a></div><div class="ttdeci">int * formats</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00280">ffmpeg.h:280</a></div></div>
<div class="ttc" id="atimestamp_8h_html_ad344b91ede6b86fc0a530611293f42da"><div class="ttname"><a href="timestamp_8h.html#ad344b91ede6b86fc0a530611293f42da">av_ts2timestr</a></div><div class="ttdeci">#define av_ts2timestr(ts, tb)</div><div class="ttdef"><b>Definition:</b> <a href="timestamp_8h_source.html#l00076">timestamp.h:76</a></div></div>
<div class="ttc" id="astruct_input_filter_html_a572505eef6ba5714df813d454185019d"><div class="ttname"><a href="struct_input_filter.html#a572505eef6ba5714df813d454185019d">InputFilter::filter</a></div><div class="ttdeci">AVFilterContext * filter</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00239">ffmpeg.h:239</a></div></div>
<div class="ttc" id="astruct_input_stream_html_afbaeaac6e0b1fc3095bb90f17d58621d"><div class="ttname"><a href="struct_input_stream.html#afbaeaac6e0b1fc3095bb90f17d58621d">InputStream::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00336">ffmpeg.h:336</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_ga9a84bba4713dfced21a1a56163be1f48"><div class="ttname"><a href="group__lavu__misc.html#ga9a84bba4713dfced21a1a56163be1f48">AVMediaType</a></div><div class="ttdeci">AVMediaType</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00199">avutil.h:199</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga14034761faf581a8b9ed6ef19b313708"><div class="ttname"><a href="group__lavu__log.html#ga14034761faf581a8b9ed6ef19b313708">av_log_set_callback</a></div><div class="ttdeci">void av_log_set_callback(void(*callback)(void *, int, const char *, va_list))</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00455">log.c:455</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_html_a208c924c3f626b01bf2020eef9eb4905"><div class="ttname"><a href="struct_a_v_codec_h_w_config.html#a208c924c3f626b01bf2020eef9eb4905">AVCodecHWConfig::methods</a></div><div class="ttdeci">int methods</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00437">codec.h:437</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a8ee44633b600f2b31541b213f0a4b322"><div class="ttname"><a href="struct_input_stream.html#a8ee44633b600f2b31541b213f0a4b322">InputStream::wrap_correction_done</a></div><div class="ttdeci">int wrap_correction_done</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00320">ffmpeg.h:320</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a81453d8c452e8ee794daf7fde1c80b5b"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a81453d8c452e8ee794daf7fde1c80b5b">AVDISCARD_DEFAULT</a></div><div class="ttdeci">@ AVDISCARD_DEFAULT</div><div class="ttdoc">discard useless packets like 0 size packets in avi</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00231">avcodec.h:231</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga88b0ecbc4eb3453eef3fbefa3bddeb7c"><div class="ttname"><a href="group__lavu__frame.html#ga88b0ecbc4eb3453eef3fbefa3bddeb7c">av_frame_ref</a></div><div class="ttdeci">int av_frame_ref(AVFrame *dst, const AVFrame *src)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00443">frame.c:443</a></div></div>
<div class="ttc" id="athreadmessage_8h_html"><div class="ttname"><a href="threadmessage_8h.html">threadmessage.h</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a33a912b98c7c73e52a0ab9cc4e11b995"><div class="ttname"><a href="ffmpeg_8c.html#a33a912b98c7c73e52a0ab9cc4e11b995">do_video_out</a></div><div class="ttdeci">static void do_video_out(OutputFile *of, OutputStream *ost, AVFrame *next_picture)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01120">ffmpeg.c:1120</a></div></div>
<div class="ttc" id="affmpeg_8c_html_adc4bdebb5c8ece97d332af967e83e2e3"><div class="ttname"><a href="ffmpeg_8c.html#adc4bdebb5c8ece97d332af967e83e2e3">output_files</a></div><div class="ttdeci">OutputFile ** output_files</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00154">ffmpeg.c:154</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a64d2227a8af6a247040fc50ab547dc0e"><div class="ttname"><a href="ffmpeg_8c.html#a64d2227a8af6a247040fc50ab547dc0e">parse_forced_key_frames</a></div><div class="ttdeci">static void parse_forced_key_frames(char *kf, OutputStream *ost, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03223">ffmpeg.c:3223</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gac4f6e109c242c81aeee21868d3f35e12"><div class="ttname"><a href="group__lavu__error.html#gac4f6e109c242c81aeee21868d3f35e12">av_err2str</a></div><div class="ttdeci">#define av_err2str(errnum)</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00119">error.h:119</a></div></div>
<div class="ttc" id="astruct_filter_graph_html_aa078de74cae0940747ba826567b74aef"><div class="ttname"><a href="struct_filter_graph.html#aa078de74cae0940747ba826567b74aef">FilterGraph::outputs</a></div><div class="ttdeci">OutputFilter ** outputs</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00294">ffmpeg.h:294</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a1a9c2c01a83c8bbcd4eb7a8af9a0b160"><div class="ttname"><a href="ffmpeg_8c.html#a1a9c2c01a83c8bbcd4eb7a8af9a0b160">received_sigterm</a></div><div class="ttdeci">static volatile int received_sigterm</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00342">ffmpeg.c:342</a></div></div>
<div class="ttc" id="affplay_8c_html_aff091f79e1f4daabe108ee1262892f9f"><div class="ttname"><a href="ffplay_8c.html#aff091f79e1f4daabe108ee1262892f9f">start_time</a></div><div class="ttdeci">static int64_t start_time</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00332">ffplay.c:332</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a9b8d7a73907fc2dd36f4bd0cce4f2f0d"><div class="ttname"><a href="ffmpeg_8c.html#a9b8d7a73907fc2dd36f4bd0cce4f2f0d">send_filter_eof</a></div><div class="ttdeci">static int send_filter_eof(InputStream *ist)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02575">ffmpeg.c:2575</a></div></div>
<div class="ttc" id="astruct_filter_graph_html_afb2dea711d92a8a8cb94eebecd9c1e13"><div class="ttname"><a href="struct_filter_graph.html#afb2dea711d92a8a8cb94eebecd9c1e13">FilterGraph::inputs</a></div><div class="ttdeci">InputFilter ** inputs</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00292">ffmpeg.h:292</a></div></div>
<div class="ttc" id="acmdutils_8c_html_ac58552bde3a215ae94a3bd114577cbee"><div class="ttname"><a href="cmdutils_8c.html#ac58552bde3a215ae94a3bd114577cbee">uninit_opts</a></div><div class="ttdeci">void uninit_opts(void)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l00087">cmdutils.c:87</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a01a53d07936f4c7ee280444793b6967b"><div class="ttname"><a href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">AVCodec::id</a></div><div class="ttdeci">enum AVCodecID id</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00202">codec.h:204</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ad4fabc73fffad91c2bfb9fa9954228a8"><div class="ttname"><a href="ffmpeg_8h.html#ad4fabc73fffad91c2bfb9fa9954228a8">copy_ts</a></div><div class="ttdeci">int copy_ts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00162">ffmpeg_opt.c:162</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga7778b1d209ceb3e4bf34e40150d3b882"><div class="ttname"><a href="group__lavu__math__rational.html#ga7778b1d209ceb3e4bf34e40150d3b882">av_make_q</a></div><div class="ttdeci">static AVRational av_make_q(int num, int den)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00071">rational.h:71</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a4848e7de1c64c52dd179fdb4a7395567"><div class="ttname"><a href="ffmpeg_8c.html#a4848e7de1c64c52dd179fdb4a7395567">subtitle_out</a></div><div class="ttdeci">static uint8_t * subtitle_out</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00145">ffmpeg.c:145</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a8e4ab3fbd5ee2de7cd51ff1a033db4b3"><div class="ttname"><a href="ffmpeg_8h.html#a8e4ab3fbd5ee2de7cd51ff1a033db4b3">copy_tb</a></div><div class="ttdeci">int copy_tb</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00164">ffmpeg_opt.c:164</a></div></div>
<div class="ttc" id="astruct_input_file_html_a098fa89f90be39e95d5e42041e8cebfb"><div class="ttname"><a href="struct_input_file.html#a098fa89f90be39e95d5e42041e8cebfb">InputFile::ts_offset</a></div><div class="ttdeci">int64_t ts_offset</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00408">ffmpeg.h:408</a></div></div>
<div class="ttc" id="agroup__lavfi_html_ga3140b3cd7bf9a80c2dfa868dcf7ac541"><div class="ttname"><a href="group__lavfi.html#ga3140b3cd7bf9a80c2dfa868dcf7ac541">avfilter_graph_queue_command</a></div><div class="ttdeci">int avfilter_graph_queue_command(AVFilterGraph *graph, const char *target, const char *cmd, const char *arg, int flags, double ts)</div><div class="ttdef"><b>Definition:</b> <a href="avfiltergraph_8c_source.html#l01266">avfiltergraph.c:1266</a></div></div>
<div class="ttc" id="agroup__lavf__decoding_html_ga3b40fc8d2fda6992ae6ea2567d71ba30"><div class="ttname"><a href="group__lavf__decoding.html#ga3b40fc8d2fda6992ae6ea2567d71ba30">avformat_seek_file</a></div><div class="ttdeci">int avformat_seek_file(AVFormatContext *s, int stream_index, int64_t min_ts, int64_t ts, int64_t max_ts, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l02482">utils.c:2482</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_ga2eaefe702f95f619ea6f2d08afa01be1"><div class="ttname"><a href="group__lavu__time.html#ga2eaefe702f95f619ea6f2d08afa01be1">AV_NOPTS_VALUE</a></div><div class="ttdeci">#define AV_NOPTS_VALUE</div><div class="ttdoc">Undefined timestamp value.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00248">avutil.h:248</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a4d08b297e97eefd66c714df4fff493c8"><div class="ttname"><a href="struct_a_v_codec_context.html#a4d08b297e97eefd66c714df4fff493c8">AVCodecContext::framerate</a></div><div class="ttdeci">AVRational framerate</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02069">avcodec.h:2069</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6873ed62f196c24e8bf282609231786f"><div class="ttname"><a href="struct_a_v_stream.html#a6873ed62f196c24e8bf282609231786f">AVStream::id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00876">avformat.h:876</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a518f7a9a1bd1b5544a39fdbd1d925663"><div class="ttname"><a href="ffmpeg_8h.html#a518f7a9a1bd1b5544a39fdbd1d925663">hwaccel_decode_init</a></div><div class="ttdeci">int hwaccel_decode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__hw_8c_source.html#l00516">ffmpeg_hw.c:516</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_ga64b609bbdda09ec7b29534a30656eb1a"><div class="ttname"><a href="group__lavf__misc.html#ga64b609bbdda09ec7b29534a30656eb1a">av_stream_get_codec_timebase</a></div><div class="ttdeci">AVRational av_stream_get_codec_timebase(const AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05776">utils.c:5776</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_abb01e291550fa3fb96188af4d494587e"><div class="ttname"><a href="struct_a_v_codec_context.html#abb01e291550fa3fb96188af4d494587e">AVCodecContext::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00606">avcodec.h:606</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ac19c669906e50a4be81b78eb8777ca8c"><div class="ttname"><a href="ffmpeg_8h.html#ac19c669906e50a4be81b78eb8777ca8c">DECODING_FOR_OST</a></div><div class="ttdeci">#define DECODING_FOR_OST</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00304">ffmpeg.h:304</a></div></div>
<div class="ttc" id="acommon_8h_html_add8913a6f8e5714b6174eeaad5751006"><div class="ttname"><a href="common_8h.html#add8913a6f8e5714b6174eeaad5751006">FFDIFFSIGN</a></div><div class="ttdeci">#define FFDIFFSIGN(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00092">common.h:92</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a8d9e8224d0a2f354635fcaacce63acd4"><div class="ttname"><a href="ffmpeg_8c.html#a8d9e8224d0a2f354635fcaacce63acd4">sub2video_update</a></div><div class="ttdeci">void sub2video_update(InputStream *ist, int64_t heartbeat_pts, AVSubtitle *sub)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00240">ffmpeg.c:240</a></div></div>
<div class="ttc" id="aavformat_8h_html_a752cce390d480521919aa5d8be24ac0b"><div class="ttname"><a href="avformat_8h.html#a752cce390d480521919aa5d8be24ac0b">AVFMT_NOFILE</a></div><div class="ttdeci">#define AVFMT_NOFILE</div><div class="ttdoc">Demuxer will use avio_open, no opened file should be provided by the caller.</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00458">avformat.h:458</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a85dbbd306b44b02390cd91c45e6a0f76"><div class="ttname"><a href="struct_a_v_packet.html#a85dbbd306b44b02390cd91c45e6a0f76">AVPacket::dts</a></div><div class="ttdeci">int64_t dts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00362">packet.h:362</a></div></div>
<div class="ttc" id="aavformat_8h_html_a5bf41aa870351bd4e912725bcaf87031"><div class="ttname"><a href="avformat_8h.html#a5bf41aa870351bd4e912725bcaf87031">AV_DISPOSITION_DUB</a></div><div class="ttdeci">#define AV_DISPOSITION_DUB</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00815">avformat.h:815</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab7bfeb9fa5840aac090e2b0bd0ef7589"><div class="ttname"><a href="struct_a_v_codec_context.html#ab7bfeb9fa5840aac090e2b0bd0ef7589">AVCodecContext::time_base</a></div><div class="ttdeci">AVRational time_base</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00649">avcodec.h:649</a></div></div>
<div class="ttc" id="atablegen_8txt_html_a934618af0084fc36af687c3b11489b27"><div class="ttname"><a href="tablegen_8txt.html#a934618af0084fc36af687c3b11489b27">printf</a></div><div class="ttdeci">printf(&quot;static const uint8_t my_array[100] = {\n&quot;)</div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea33183189d771e3325ccdd36fa980b6f6"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea33183189d771e3325ccdd36fa980b6f6">AV_PICTURE_TYPE_NONE</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_NONE</div><div class="ttdoc">Undefined.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00273">avutil.h:273</a></div></div>
<div class="ttc" id="astruct_a_v_class_html"><div class="ttname"><a href="struct_a_v_class.html">AVClass</a></div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00067">log.h:67</a></div></div>
<div class="ttc" id="astruct_input_stream_html_acf438e2a33238676cb3f68b39ae18049"><div class="ttname"><a href="struct_input_stream.html#acf438e2a33238676cb3f68b39ae18049">InputStream::st</a></div><div class="ttdeci">AVStream * st</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00300">ffmpeg.h:300</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a05769ba0518105626a6d64386795b48f"><div class="ttname"><a href="struct_input_stream.html#a05769ba0518105626a6d64386795b48f">InputStream::hwaccel_pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat hwaccel_pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00377">ffmpeg.h:378</a></div></div>
<div class="ttc" id="aavdevice_8h_html"><div class="ttname"><a href="avdevice_8h.html">avdevice.h</a></div></div>
<div class="ttc" id="astruct_input_filter_html_ad3e4e5041c3312bb70cc4d1f0bbd4726"><div class="ttname"><a href="struct_input_filter.html#ad3e4e5041c3312bb70cc4d1f0bbd4726">InputFilter::eof</a></div><div class="ttdeci">int eof</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00259">ffmpeg.h:259</a></div></div>
<div class="ttc" id="aavformat_8h_html_a1500ed92d07addf13d1e9dfd0fff6672"><div class="ttname"><a href="avformat_8h.html#a1500ed92d07addf13d1e9dfd0fff6672">AVFMT_NOSTREAMS</a></div><div class="ttdeci">#define AVFMT_NOSTREAMS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00467">avformat.h:467</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a4e04af7a5a4d8298649850df798dd0bc"><div class="ttname"><a href="struct_a_v_stream.html#a4e04af7a5a4d8298649850df798dd0bc">AVStream::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00918">avformat.h:918</a></div></div>
<div class="ttc" id="aavformat_8h_html_a39ba22fdf89ec823243ba92bfd35c189"><div class="ttname"><a href="avformat_8h.html#a39ba22fdf89ec823243ba92bfd35c189">AV_DISPOSITION_HEARING_IMPAIRED</a></div><div class="ttdeci">#define AV_DISPOSITION_HEARING_IMPAIRED</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00827">avformat.h:827</a></div></div>
<div class="ttc" id="astruct_h_w_accel_html"><div class="ttname"><a href="struct_h_w_accel.html">HWAccel</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00066">ffmpeg.h:66</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a54e97364f74d8bf15062a8ea185f1c31"><div class="ttname"><a href="ffmpeg_8h.html#a54e97364f74d8bf15062a8ea185f1c31">OSTFinished</a></div><div class="ttdeci">OSTFinished</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00442">ffmpeg.h:442</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga132d6c01d0a21e5b48b96cd7c988de91"><div class="ttname"><a href="group__lavu__frame.html#ga132d6c01d0a21e5b48b96cd7c988de91">av_frame_remove_side_data</a></div><div class="ttdeci">void av_frame_remove_side_data(AVFrame *frame, enum AVFrameSideDataType type)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00812">frame.c:812</a></div></div>
<div class="ttc" id="aavio_8h_html_acc3626afc6aa3964b75d02811457164e"><div class="ttname"><a href="avio_8h.html#acc3626afc6aa3964b75d02811457164e">avio_write</a></div><div class="ttdeci">void avio_write(AVIOContext *s, const unsigned char *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l00225">aviobuf.c:225</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga234d986d58043b694dd518e2312b4cbe"><div class="ttname"><a href="group__lavc__core.html#ga234d986d58043b694dd518e2312b4cbe">AV_CODEC_FLAG_PASS2</a></div><div class="ttdeci">#define AV_CODEC_FLAG_PASS2</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00300">avcodec.h:300</a></div></div>
<div class="ttc" id="apixfmt_8h_html_afa47a1e5163830c51665a3da04a318a0"><div class="ttname"><a href="pixfmt_8h.html#afa47a1e5163830c51665a3da04a318a0">AV_PIX_FMT_RGB32</a></div><div class="ttdeci">#define AV_PIX_FMT_RGB32</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00372">pixfmt.h:372</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a550ceee60cb995b284b52962dcba6597"><div class="ttname"><a href="struct_input_stream.html#a550ceee60cb995b284b52962dcba6597">InputStream::dec_ctx</a></div><div class="ttdeci">AVCodecContext * dec_ctx</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00307">ffmpeg.h:307</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a651c97cb2dcd2241d42f0062a0bbd4e3"><div class="ttname"><a href="struct_a_v_format_context.html#a651c97cb2dcd2241d42f0062a0bbd4e3">AVFormatContext::url</a></div><div class="ttdeci">char * url</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01319">avformat.h:1319</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="astruct_input_file_html_a94be560ca078155d0948bbd1343cf33a"><div class="ttname"><a href="struct_input_file.html#a94be560ca078155d0948bbd1343cf33a">InputFile::eof_reached</a></div><div class="ttdeci">int eof_reached</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00399">ffmpeg.h:399</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a6e50fb6ee72b2eb86923d914ce0d5394"><div class="ttname"><a href="ffmpeg_8c.html#a6e50fb6ee72b2eb86923d914ce0d5394">dup_warning</a></div><div class="ttdeci">static unsigned dup_warning</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00136">ffmpeg.c:136</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_gaa2a7353a6bb0c8726797abd56b176af0"><div class="ttname"><a href="group__lavf__misc.html#gaa2a7353a6bb0c8726797abd56b176af0">av_sdp_create</a></div><div class="ttdeci">int av_sdp_create(AVFormatContext *ac[], int n_files, char *buf, int size)</div><div class="ttdef"><b>Definition:</b> <a href="sdp_8c_source.html#l00846">sdp.c:846</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a069da4bb2fba6871858065fdf25fe3b3"><div class="ttname"><a href="struct_a_v_stream.html#a069da4bb2fba6871858065fdf25fe3b3">AVStream::side_data</a></div><div class="ttdeci">AVPacketSideData * side_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00971">avformat.h:971</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_ga8a6deff6c1809029037ffd760db3e0d4"><div class="ttname"><a href="group__lavc__packet.html#ga8a6deff6c1809029037ffd760db3e0d4">av_packet_make_refcounted</a></div><div class="ttdeci">int av_packet_make_refcounted(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00672">avpacket.c:672</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga1bafd682b1fbb90e48a4cc3814b820f7"><div class="ttname"><a href="group__lavu__dict.html#ga1bafd682b1fbb90e48a4cc3814b820f7">av_dict_free</a></div><div class="ttdeci">void av_dict_free(AVDictionary **pm)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00203">dict.c:203</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a2b9cc93533df33a5f103f70a005cafd1"><div class="ttname"><a href="ffmpeg_8h.html#a2b9cc93533df33a5f103f70a005cafd1">do_benchmark</a></div><div class="ttdeci">int do_benchmark</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00158">ffmpeg_opt.c:158</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a8aac50e0d8fe8a1bb2d79b56b9e57b0a"><div class="ttname"><a href="ffmpeg_8c.html#a8aac50e0d8fe8a1bb2d79b56b9e57b0a">get_buffer</a></div><div class="ttdeci">static int get_buffer(AVCodecContext *s, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02904">ffmpeg.c:2904</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a1e71ce60cedd5f3b6811714a9f7f9e0a"><div class="ttname"><a href="struct_a_v_frame.html#a1e71ce60cedd5f3b6811714a9f7f9e0a">AVFrame::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00366">frame.h:366</a></div></div>
<div class="ttc" id="atests_2h264__levels_8c_html_a7ead09ba2ff985f7f74ab0f40ee7eecc"><div class="ttname"><a href="tests_2h264__levels_8c.html#a7ead09ba2ff985f7f74ab0f40ee7eecc">bitrate</a></div><div class="ttdeci">int64_t bitrate</div><div class="ttdef"><b>Definition:</b> <a href="tests_2h264__levels_8c_source.html#l00131">h264_levels.c:131</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55ba361be31bba170d5ec5bac19ce962ceb5"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55ba361be31bba170d5ec5bac19ce962ceb5">AV_BUFFERSRC_FLAG_PUSH</a></div><div class="ttdeci">@ AV_BUFFERSRC_FLAG_PUSH</div><div class="ttdef"><b>Definition:</b> <a href="buffersrc_8h_source.html#l00046">buffersrc.h:46</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ab14ac8d1cdb5c1dd6472dd4c13867368"><div class="ttname"><a href="struct_input_stream.html#ab14ac8d1cdb5c1dd6472dd4c13867368">InputStream::next_pts</a></div><div class="ttdeci">int64_t next_pts</div><div class="ttdoc">synthetic pts for the next decode frame (in AV_TIME_BASE units)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00318">ffmpeg.h:318</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gae5c86e4d93f6e7aa62ef2c60763ea67e"><div class="ttname"><a href="group__lavc__packet.html#gae5c86e4d93f6e7aa62ef2c60763ea67e">av_packet_rescale_ts</a></div><div class="ttdeci">void av_packet_rescale_ts(AVPacket *pkt, AVRational src_tb, AVRational dst_tb)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00713">avpacket.c:713</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_ga1eb8bbf583ffb7cc29aaa1944b1e699c"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#ga1eb8bbf583ffb7cc29aaa1944b1e699c">av_buffersink_get_type</a></div><div class="ttdeci">enum AVMediaType av_buffersink_get_type(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="affmpeg_8c_html_a7327043132cd8fc6043a82eb04a375a1"><div class="ttname"><a href="ffmpeg_8c.html#a7327043132cd8fc6043a82eb04a375a1">ifilter_send_frame</a></div><div class="ttdeci">static int ifilter_send_frame(InputFilter *ifilter, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02150">ffmpeg.c:2150</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ad983487b3e7c29f53bb3336190f14051"><div class="ttname"><a href="struct_input_stream.html#ad983487b3e7c29f53bb3336190f14051">InputStream::hwaccel_retrieve_data</a></div><div class="ttdeci">int(* hwaccel_retrieve_data)(AVCodecContext *s, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00377">ffmpeg.h:377</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gga828218dcb8874ab2c5af8d486c365421a0e577aa36b52d777c6ec5bef8625dde4"><div class="ttname"><a href="group__lavc__core.html#gga828218dcb8874ab2c5af8d486c365421a0e577aa36b52d777c6ec5bef8625dde4">SUBTITLE_BITMAP</a></div><div class="ttdeci">@ SUBTITLE_BITMAP</div><div class="ttdoc">A bitmap, pict will be set.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02642">avcodec.h:2642</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gad172eacfed8653e454c6fdcbe53baab3"><div class="ttname"><a href="group__lavu__log__constants.html#gad172eacfed8653e454c6fdcbe53baab3">AV_LOG_INFO</a></div><div class="ttdeci">#define AV_LOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00205">log.h:205</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6cdb0c90a69899f4e1e54704bb654936"><div class="ttname"><a href="struct_a_v_stream.html#a6cdb0c90a69899f4e1e54704bb654936">AVStream::pts_wrap_bits</a></div><div class="ttdeci">int pts_wrap_bits</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01051">avformat.h:1051</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a786f81429bb25853af449fe5737bf2c7"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a786f81429bb25853af449fe5737bf2c7">AVCodecParameters::block_align</a></div><div class="ttdeci">int block_align</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00177">codec_par.h:177</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_ab5793d8195cf4789dfb3913b7a693903"><div class="ttname"><a href="struct_a_v_packet.html#ab5793d8195cf4789dfb3913b7a693903">AVPacket::pos</a></div><div class="ttdeci">int64_t pos</div><div class="ttdoc">byte position in stream, -1 if unknown</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00383">packet.h:383</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a1734b65da48a88e7c78e8a29b1eee139"><div class="ttname"><a href="threadmessage_8c.html#a1734b65da48a88e7c78e8a29b1eee139">av_thread_message_queue_alloc</a></div><div class="ttdeci">int av_thread_message_queue_alloc(AVThreadMessageQueue **mq, unsigned nelem, unsigned elsize)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00040">threadmessage.c:40</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a22b853326688d8b01baa28b9aad668d8"><div class="ttname"><a href="ffmpeg_8c.html#a22b853326688d8b01baa28b9aad668d8">decode</a></div><div class="ttdeci">static int decode(AVCodecContext *avctx, AVFrame *frame, int *got_frame, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02254">ffmpeg.c:2254</a></div></div>
<div class="ttc" id="abuffersink_8h_html"><div class="ttname"><a href="buffersink_8h.html">buffersink.h</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2c6d81c909bf3abbf4685cfadd458a87"><div class="ttname"><a href="ffmpeg_8c.html#a2c6d81c909bf3abbf4685cfadd458a87">guess_input_channel_layout</a></div><div class="ttdeci">int guess_input_channel_layout(InputStream *ist)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02100">ffmpeg.c:2100</a></div></div>
<div class="ttc" id="acmdutils_8c_html_a976c7dc9afeb4b0f6ec009a7a084e701"><div class="ttname"><a href="cmdutils_8c.html#a976c7dc9afeb4b0f6ec009a7a084e701">show_banner</a></div><div class="ttdeci">void show_banner(int argc, char **argv, const OptionDef *options)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l01185">cmdutils.c:1185</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a8507683cee9accbbda79588659abcea8"><div class="ttname"><a href="ffmpeg_8c.html#a8507683cee9accbbda79588659abcea8">write_packet</a></div><div class="ttdeci">static void write_packet(OutputFile *of, AVPacket *pkt, OutputStream *ost, int unqueue)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00703">ffmpeg.c:703</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2af61470284cfd849344d6a5fdd3257c"><div class="ttname"><a href="ffmpeg_8c.html#a2af61470284cfd849344d6a5fdd3257c">do_subtitle_out</a></div><div class="ttdeci">static void do_subtitle_out(OutputFile *of, OutputStream *ost, AVSubtitle *sub)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01037">ffmpeg.c:1037</a></div></div>
<div class="ttc" id="astruct_input_file_html_ac2f5772aebd0118a4c464a268dbb4d9c"><div class="ttname"><a href="struct_input_file.html#ac2f5772aebd0118a4c464a268dbb4d9c">InputFile::ist_index</a></div><div class="ttdeci">int ist_index</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00401">ffmpeg.h:401</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga63d5ef1c2f77a5fdccb2b3a1c8cc77f5"><div class="ttname"><a href="group__lavu__math__rational.html#ga63d5ef1c2f77a5fdccb2b3a1c8cc77f5">av_find_nearest_q_idx</a></div><div class="ttdeci">int av_find_nearest_q_idx(AVRational q, const AVRational *q_list)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00142">rational.c:142</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_gacbf2ea8b2b89924c890ef8ec10a3d922"><div class="ttname"><a href="group__lavu__picture.html#gacbf2ea8b2b89924c890ef8ec10a3d922">av_get_picture_type_char</a></div><div class="ttdeci">char av_get_picture_type_char(enum AVPictureType pict_type)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2utils_8c_source.html#l00088">utils.c:88</a></div></div>
<div class="ttc" id="acmdutils_8c_html_aa64dcad44f54da335b337154d9e9950f"><div class="ttname"><a href="cmdutils_8c.html#aa64dcad44f54da335b337154d9e9950f">register_exit</a></div><div class="ttdeci">void register_exit(void(*cb)(int ret))</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l00128">cmdutils.c:128</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ad97d709b57b2a391fedb2890e6e317d2"><div class="ttname"><a href="ffmpeg_8c.html#ad97d709b57b2a391fedb2890e6e317d2">do_video_stats</a></div><div class="ttdeci">static void do_video_stats(OutputStream *ost, int frame_size)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01417">ffmpeg.c:1417</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga2016a52e94f867ebe5113bdf448e182d"><div class="ttname"><a href="group__lavc__core.html#ga2016a52e94f867ebe5113bdf448e182d">avcodec_get_name</a></div><div class="ttdeci">const char * avcodec_get_name(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01204">utils.c:1204</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca7bf84c3d1e2714ddee42b3e94826fca4">AV_FIELD_BB</a></div><div class="ttdeci">@ AV_FIELD_BB</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00040">codec_par.h:40</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a0804b6530666fd8d5f4e4193ee1d205faf30c0c6c4434db4f22346cdcbd909a02"><div class="ttname"><a href="ffmpeg_8h.html#a0804b6530666fd8d5f4e4193ee1d205faf30c0c6c4434db4f22346cdcbd909a02">HWACCEL_AUTO</a></div><div class="ttdeci">@ HWACCEL_AUTO</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00060">ffmpeg.h:60</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ac9fc51324b931c1db5c5c1445fe70c3b"><div class="ttname"><a href="struct_input_stream.html#ac9fc51324b931c1db5c5c1445fe70c3b">InputStream::decoding_needed</a></div><div class="ttdeci">int decoding_needed</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00303">ffmpeg.h:303</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceadaaf3a9acfa91bd739c50299f6779409">AV_CODEC_ID_MJPEG</a></div><div class="ttdeci">@ AV_CODEC_ID_MJPEG</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00056">codec_id.h:56</a></div></div>
<div class="ttc" id="astruct_input_filter_html_ae704ff879704d2ab90dad159526785e2"><div class="ttname"><a href="struct_input_filter.html#ae704ff879704d2ab90dad159526785e2">InputFilter::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00248">ffmpeg.h:248</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga09dee227d3666720eff1f6913d11699d"><div class="ttname"><a href="group__lavc__decoding.html#ga09dee227d3666720eff1f6913d11699d">avcodec_default_get_buffer2</a></div><div class="ttdeci">int avcodec_default_get_buffer2(AVCodecContext *s, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01668">decode.c:1668</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga58bc4bf1e0ac59e27362597e467efff3"><div class="ttname"><a href="group__lavc__decoding.html#ga58bc4bf1e0ac59e27362597e467efff3">avcodec_send_packet</a></div><div class="ttdeci">int avcodec_send_packet(AVCodecContext *avctx, const AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l00606">decode.c:606</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_gac8c86515d2ef56090395dfd74854c835"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#gac8c86515d2ef56090395dfd74854c835">av_buffersink_get_w</a></div><div class="ttdeci">int av_buffersink_get_w(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="aavio_8h_html_ae118a1f37f1e48617609ead9910aac15"><div class="ttname"><a href="avio_8h.html#ae118a1f37f1e48617609ead9910aac15">avio_closep</a></div><div class="ttdeci">int avio_closep(AVIOContext **s)</div><div class="ttdef"><b>Definition:</b> <a href="aviobuf_8c_source.html#l01196">aviobuf.c:1196</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga7f14007e7dc8f481f054b21614dfec13"><div class="ttname"><a href="group__lavf__encoding.html#ga7f14007e7dc8f481f054b21614dfec13">av_write_trailer</a></div><div class="ttdeci">int av_write_trailer(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01251">mux.c:1251</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga1fd32c74db581e3e2e7f35d277bb1e24"><div class="ttname"><a href="group__lavu__log.html#ga1fd32c74db581e3e2e7f35d277bb1e24">av_log_set_level</a></div><div class="ttdeci">void av_log_set_level(int level)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00440">log.c:440</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a7ea46e61c666f21e7e770dc14e7e36e5"><div class="ttname"><a href="struct_a_v_format_context.html#a7ea46e61c666f21e7e770dc14e7e36e5">AVFormatContext::oformat</a></div><div class="ttdeci">ff_const59 struct AVOutputFormat * oformat</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01242">avformat.h:1242</a></div></div>
<div class="ttc" id="abprint_8h_html"><div class="ttname"><a href="bprint_8h.html">bprint.h</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_acfefb6b6cf21e87a0dcbd1a547ba2348"><div class="ttname"><a href="struct_a_v_format_context.html#acfefb6b6cf21e87a0dcbd1a547ba2348">AVFormatContext::streams</a></div><div class="ttdeci">AVStream ** streams</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01291">avformat.h:1291</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_a_v_subtitle_html_a354cdfa51cda54c914a569ee3f7493c0"><div class="ttname"><a href="struct_a_v_subtitle.html#a354cdfa51cda54c914a569ee3f7493c0">AVSubtitle::end_display_time</a></div><div class="ttdeci">uint32_t end_display_time</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02697">avcodec.h:2697</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a69301b0986380d3c18feb65b0ac128c4"><div class="ttname"><a href="ffmpeg_8h.html#a69301b0986380d3c18feb65b0ac128c4">DECODING_FOR_FILTER</a></div><div class="ttdeci">#define DECODING_FOR_FILTER</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00305">ffmpeg.h:305</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a09d78f4795c4ff17dd54204450f2d394"><div class="ttname"><a href="struct_input_stream.html#a09d78f4795c4ff17dd54204450f2d394">InputStream::saw_first_ts</a></div><div class="ttdeci">int saw_first_ts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00334">ffmpeg.h:334</a></div></div>
<div class="ttc" id="alibm__mips_8h_html_acf57fc15cac2891669e0f0a0be2fb155"><div class="ttname"><a href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a></div><div class="ttdeci">#define lrintf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm__mips_8h_source.html#l00070">libm_mips.h:70</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga7fffb6c87b91250956e7a2367af56b38"><div class="ttname"><a href="group__lavc__core.html#ga7fffb6c87b91250956e7a2367af56b38">av_bsf_receive_packet</a></div><div class="ttdeci">int av_bsf_receive_packet(AVBSFContext *ctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8c_source.html#l00226">bsf.c:226</a></div></div>
<div class="ttc" id="agroup__lavu__frame__flags_html_gadddbce4ec0cc2ad4298cf6f266f97f6a"><div class="ttname"><a href="group__lavu__frame__flags.html#gadddbce4ec0cc2ad4298cf6f266f97f6a">AV_FRAME_FLAG_CORRUPT</a></div><div class="ttdeci">#define AV_FRAME_FLAG_CORRUPT</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00533">frame.h:533</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_af51f7ff3dac8b730f46b9713e49a2518"><div class="ttname"><a href="struct_a_v_codec.html#af51f7ff3dac8b730f46b9713e49a2518">AVCodec::capabilities</a></div><div class="ttdeci">int capabilities</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00209">codec.h:209</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ga0c3c218e1dd570ad4917c69a35a6c77d"><div class="ttname"><a href="group__lavu__sampfmts.html#ga0c3c218e1dd570ad4917c69a35a6c77d">av_get_bytes_per_sample</a></div><div class="ttdeci">int av_get_bytes_per_sample(enum AVSampleFormat sample_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8c_source.html#l00106">samplefmt.c:106</a></div></div>
<div class="ttc" id="astruct_input_filter_html_a1c8870375203b3594e67e632119bbc10"><div class="ttname"><a href="struct_input_filter.html#a1c8870375203b3594e67e632119bbc10">InputFilter::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00253">ffmpeg.h:253</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aa1b7dcf7df1f398b1e33d121695b79c7"><div class="ttname"><a href="ffmpeg_8c.html#aa1b7dcf7df1f398b1e33d121695b79c7">sub2video_flush</a></div><div class="ttdeci">static void sub2video_flush(InputStream *ist)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00312">ffmpeg.c:312</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_aad55a00e728a020c1dcfaaf695320445"><div class="ttname"><a href="struct_a_v_output_format.html#aad55a00e728a020c1dcfaaf695320445">AVOutputFormat::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00510">avformat.h:510</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gac7b282f51540ca7a99416a3ba6ee0d16"><div class="ttname"><a href="group__lavc__core.html#gac7b282f51540ca7a99416a3ba6ee0d16">avcodec_parameters_to_context</a></div><div class="ttdeci">int avcodec_parameters_to_context(AVCodecContext *codec, const AVCodecParameters *par)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l02152">utils.c:2152</a></div></div>
<div class="ttc" id="agroup__lavu__time_html_gaa11ed202b70e1f52bac809811a910e2a"><div class="ttname"><a href="group__lavu__time.html#gaa11ed202b70e1f52bac809811a910e2a">AV_TIME_BASE</a></div><div class="ttdeci">#define AV_TIME_BASE</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00254">avutil.h:254</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a02f45ab8191aea1660159f1e464237ea"><div class="ttname"><a href="struct_a_v_frame.html#a02f45ab8191aea1660159f1e464237ea">AVFrame::nb_samples</a></div><div class="ttdeci">int nb_samples</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00374">frame.h:374</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a99e6bf56ec091f8af11744e4b0499327"><div class="ttname"><a href="struct_input_stream.html#a99e6bf56ec091f8af11744e4b0499327">InputStream::guess_layout_max</a></div><div class="ttdeci">int guess_layout_max</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00338">ffmpeg.h:338</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersrc_html_ga73ed90c3c3407f36e54d65f91faaaed9"><div class="ttname"><a href="group__lavfi__buffersrc.html#ga73ed90c3c3407f36e54d65f91faaaed9">av_buffersrc_add_frame_flags</a></div><div class="ttdeci">int attribute_align_arg av_buffersrc_add_frame_flags(AVFilterContext *ctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="buffersrc_8c_source.html#l00155">buffersrc.c:155</a></div></div>
<div class="ttc" id="adisplay_8h_html"><div class="ttname"><a href="display_8h.html">display.h</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a01981ed85e713e682912ee6e063403ad"><div class="ttname"><a href="threadmessage_8c.html#a01981ed85e713e682912ee6e063403ad">av_thread_message_queue_set_err_send</a></div><div class="ttdeci">void av_thread_message_queue_set_err_send(AVThreadMessageQueue *mq, int err)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00188">threadmessage.c:188</a></div></div>
<div class="ttc" id="asnprintf_8h_html_a00ba2ca988495904efc418acbf0627d7"><div class="ttname"><a href="snprintf_8h.html#a00ba2ca988495904efc418acbf0627d7">vsnprintf</a></div><div class="ttdeci">#define vsnprintf</div><div class="ttdef"><b>Definition:</b> <a href="snprintf_8h_source.html#l00036">snprintf.h:36</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aed2383d940c4a4e3f0b4ed8f5702cb6a"><div class="ttname"><a href="ffmpeg_8h.html#aed2383d940c4a4e3f0b4ed8f5702cb6a">exit_on_error</a></div><div class="ttdeci">int exit_on_error</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00166">ffmpeg_opt.c:166</a></div></div>
<div class="ttc" id="affmpeg_8c_html_af80faacdb2157777c247deee29765d79"><div class="ttname"><a href="ffmpeg_8c.html#af80faacdb2157777c247deee29765d79">sigterm_handler</a></div><div class="ttdeci">static void sigterm_handler(int sig)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00350">ffmpeg.c:350</a></div></div>
<div class="ttc" id="aavassert_8h_html_a557ed9c8df70c282bf6b7e0e07d7d5b0"><div class="ttname"><a href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a></div><div class="ttdeci">#define av_assert1(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00053">avassert.h:53</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a6ca823054632821e085377f7d371a2d1"><div class="ttname"><a href="struct_a_v_stream.html#a6ca823054632821e085377f7d371a2d1">AVStream::index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00870">avformat.h:870</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_a1ee4a05b54419bfadd66ee351d05812e"><div class="ttname"><a href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a></div><div class="ttdeci">float delta</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00457">vorbis_enc_data.h:457</a></div></div>
<div class="ttc" id="aavformat_8h_html_a4e6b75c4d996642d88b98241f0ad2979"><div class="ttname"><a href="avformat_8h.html#a4e6b75c4d996642d88b98241f0ad2979">AV_DISPOSITION_KARAOKE</a></div><div class="ttdeci">#define AV_DISPOSITION_KARAOKE</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00819">avformat.h:819</a></div></div>
<div class="ttc" id="astruct_output_file_html_ac09855bfd066c44eb761f84e28f00dce"><div class="ttname"><a href="struct_output_file.html#ac09855bfd066c44eb761f84e28f00dce">OutputFile::ost_index</a></div><div class="ttdeci">int ost_index</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00571">ffmpeg.h:571</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga0a2b687f9c1c5ed0089b01fd61227108"><div class="ttname"><a href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a></div><div class="ttdeci">void av_frame_unref(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00553">frame.c:553</a></div></div>
<div class="ttc" id="agroup__lavc__misc_html_ga3266a8c3df0790c62259f91afcde45a9"><div class="ttname"><a href="group__lavc__misc.html#ga3266a8c3df0790c62259f91afcde45a9">av_get_audio_frame_duration</a></div><div class="ttdeci">int av_get_audio_frame_duration(AVCodecContext *avctx, int frame_bytes)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01792">utils.c:1792</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a0c4f43b9ed5f99a30210c6ef7191a89e"><div class="ttname"><a href="ffmpeg_8c.html#a0c4f43b9ed5f99a30210c6ef7191a89e">transcode_subtitles</a></div><div class="ttdeci">static int transcode_subtitles(InputStream *ist, AVPacket *pkt, int *got_output, int *decode_failed)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02498">ffmpeg.c:2498</a></div></div>
<div class="ttc" id="aregdef_8h_html_a70597aa9a5baaa4676f9f8cbe306dae0"><div class="ttname"><a href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a></div><div class="ttdeci">#define tb</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00068">regdef.h:68</a></div></div>
<div class="ttc" id="astruct_a_v_codec_descriptor_html"><div class="ttname"><a href="struct_a_v_codec_descriptor.html">AVCodecDescriptor</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8h_source.html#l00038">codec_desc.h:38</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_gab646f0a7cc30af543ba4a91b37f9de6e"><div class="ttname"><a href="group__lavu__math__rational.html#gab646f0a7cc30af543ba4a91b37f9de6e">av_inv_q</a></div><div class="ttdeci">static av_always_inline AVRational av_inv_q(AVRational q)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00159">rational.h:159</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97ad1bb4c48001b980f2563da3f969060d3"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97ad1bb4c48001b980f2563da3f969060d3">AV_PKT_DATA_CPB_PROPERTIES</a></div><div class="ttdeci">@ AV_PKT_DATA_CPB_PROPERTIES</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00145">packet.h:145</a></div></div>
<div class="ttc" id="aavformat_8h_html_a791257b925684cc144e626be83ff0ade"><div class="ttname"><a href="avformat_8h.html#a791257b925684cc144e626be83ff0ade">AV_DISPOSITION_DEPENDENT</a></div><div class="ttdeci">#define AV_DISPOSITION_DEPENDENT</div><div class="ttdoc">dependent audio stream (mix_type=0 in mpegts)</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00852">avformat.h:852</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_abfc9b0aa975206f7e77a125e6b78536e"><div class="ttname"><a href="struct_a_v_codec_parameters.html#abfc9b0aa975206f7e77a125e6b78536e">AVCodecParameters::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00170">codec_par.h:170</a></div></div>
<div class="ttc" id="astruct_output_file_html_a4482c7ccf1b6d9f56a7b02490a60fbd8"><div class="ttname"><a href="struct_output_file.html#a4482c7ccf1b6d9f56a7b02490a60fbd8">OutputFile::limit_filesize</a></div><div class="ttdeci">uint64_t limit_filesize</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00574">ffmpeg.h:574</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a360a2b8508a67c4234d97f4c13ba1bb5"><div class="ttname"><a href="struct_a_v_codec_context.html#a360a2b8508a67c4234d97f4c13ba1bb5">AVCodecContext::get_format</a></div><div class="ttdeci">enum AVPixelFormat(* get_format)(struct AVCodecContext *s, const enum AVPixelFormat *fmt)</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00761">avcodec.h:778</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a69604b80f08f69c2870b8b97da11c931"><div class="ttname"><a href="ffmpeg_8c.html#a69604b80f08f69c2870b8b97da11c931">filtergraphs</a></div><div class="ttdeci">FilterGraph ** filtergraphs</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00157">ffmpeg.c:157</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_ga3daf97178dd1b08b5e916be381cd33e4"><div class="ttname"><a href="group__lavu__math.html#ga3daf97178dd1b08b5e916be381cd33e4">av_rescale</a></div><div class="ttdeci">int64_t av_rescale(int64_t a, int64_t b, int64_t c)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00129">mathematics.c:129</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a3a2cd7c4434c215577d8a317cad8e3ff"><div class="ttname"><a href="ffmpeg_8c.html#a3a2cd7c4434c215577d8a317cad8e3ff">int_cb</a></div><div class="ttdeci">const AVIOInterruptCB int_cb</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00490">ffmpeg.c:490</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga9395cb802a5febf1f00df31497779169"><div class="ttname"><a href="group__lavc__decoding.html#ga9395cb802a5febf1f00df31497779169">avcodec_send_frame</a></div><div class="ttdeci">int avcodec_send_frame(AVCodecContext *avctx, const AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="encode_8c_source.html#l00307">encode.c:307</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html"><div class="ttname"><a href="struct_a_v_codec_parameters.html">AVCodecParameters</a></div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00052">codec_par.h:52</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a821eae86a7d18bdd5792636a8ee31d8d"><div class="ttname"><a href="ffmpeg_8c.html#a821eae86a7d18bdd5792636a8ee31d8d">nb_output_files</a></div><div class="ttdeci">int nb_output_files</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00155">ffmpeg.c:155</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ade4b46981af499da120e4e2b30517bef"><div class="ttname"><a href="struct_input_stream.html#ade4b46981af499da120e4e2b30517bef">InputStream::nb_packets</a></div><div class="ttdeci">uint64_t nb_packets</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00386">ffmpeg.h:386</a></div></div>
<div class="ttc" id="astruct_input_stream_html_aeb79819841b6d172faf8c108db4ffbd0"><div class="ttname"><a href="struct_input_stream.html#aeb79819841b6d172faf8c108db4ffbd0">InputStream::min_pts</a></div><div class="ttdeci">int64_t min_pts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00324">ffmpeg.h:324</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a7ff433fc7a48e7b58a4b91e8ff05cf25"><div class="ttname"><a href="struct_input_stream.html#a7ff433fc7a48e7b58a4b91e8ff05cf25">InputStream::filter_in_rescale_delta_last</a></div><div class="ttdeci">int64_t filter_in_rescale_delta_last</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00322">ffmpeg.h:322</a></div></div>
<div class="ttc" id="acmdutils_8c_html_a812390811ecf2673409d4d2191b3696a"><div class="ttname"><a href="cmdutils_8c.html#a812390811ecf2673409d4d2191b3696a">parse_loglevel</a></div><div class="ttdeci">void parse_loglevel(int argc, char **argv, const OptionDef *options)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l00504">cmdutils.c:504</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_ga955ecf3680e71e10429d7500343be25c"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#ga955ecf3680e71e10429d7500343be25c">av_buffersink_get_h</a></div><div class="ttdeci">int av_buffersink_get_h(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="aavformat_8h_html_a918dc7abf0d4f7abd36a2ea2a594feaf"><div class="ttname"><a href="avformat_8h.html#a918dc7abf0d4f7abd36a2ea2a594feaf">AVFMT_TS_NONSTRICT</a></div><div class="ttdeci">#define AVFMT_TS_NONSTRICT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00474">avformat.h:472</a></div></div>
<div class="ttc" id="agroup__opt__eval__funcs_html_gae245940b870e13b759354d570decf3dc"><div class="ttname"><a href="group__opt__eval__funcs.html#gae245940b870e13b759354d570decf3dc">av_opt_eval_flags</a></div><div class="ttdeci">int av_opt_eval_flags(void *obj, const AVOption *o, const char *val, int *flags_out)</div></div>
<div class="ttc" id="amathops_8h_html_a6948a24017ba60d76640f7587429a9f6"><div class="ttname"><a href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a></div><div class="ttdeci">#define mid_pred</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00097">mathops.h:97</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink_html_gade670e86ece8d740194c916fa1ea6cc0"><div class="ttname"><a href="group__lavfi__buffersink.html#gade670e86ece8d740194c916fa1ea6cc0">AV_BUFFERSINK_FLAG_NO_REQUEST</a></div><div class="ttdeci">#define AV_BUFFERSINK_FLAG_NO_REQUEST</div><div class="ttdef"><b>Definition:</b> <a href="buffersink_8h_source.html#l00096">buffersink.h:96</a></div></div>
<div class="ttc" id="aavformat_8h_html_aa8e9704bcc842236ad048062dcf45d45"><div class="ttname"><a href="avformat_8h.html#aa8e9704bcc842236ad048062dcf45d45">AV_DISPOSITION_VISUAL_IMPAIRED</a></div><div class="ttdeci">#define AV_DISPOSITION_VISUAL_IMPAIRED</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00828">avformat.h:828</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a88671bff50a32c1b508afe31eabacfb3"><div class="ttname"><a href="ffmpeg_8c.html#a88671bff50a32c1b508afe31eabacfb3">decode_error_stat</a></div><div class="ttdeci">static int64_t decode_error_stat[2]</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00138">ffmpeg.c:138</a></div></div>
<div class="ttc" id="astruct_h_w_accel_html_a82d8cefa2fe98d73edc28eb129b9c510"><div class="ttname"><a href="struct_h_w_accel.html#a82d8cefa2fe98d73edc28eb129b9c510">HWAccel::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00067">ffmpeg.h:67</a></div></div>
<div class="ttc" id="astruct_input_stream_1_1sub2video_html_a0e7ca3e0eebc5db360ae15f2dac3d622"><div class="ttname"><a href="struct_input_stream_1_1sub2video.html#a0e7ca3e0eebc5db360ae15f2dac3d622">InputStream::sub2video::frame</a></div><div class="ttdeci">AVFrame * frame</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00353">ffmpeg.h:353</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a50d250a128a3da9ce3d135e84213fb82"><div class="ttname"><a href="struct_a_v_stream.html#a50d250a128a3da9ce3d135e84213fb82">AVStream::metadata</a></div><div class="ttdeci">AVDictionary * metadata</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00933">avformat.h:933</a></div></div>
<div class="ttc" id="aavformat_8h_html_a2fa1d95841e62af509ba733a11c1b25b"><div class="ttname"><a href="avformat_8h.html#a2fa1d95841e62af509ba733a11c1b25b">AVFMT_FLAG_BITEXACT</a></div><div class="ttdeci">#define AVFMT_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01371">avformat.h:1371</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga96970a2980bf6ad28cd403e7dc52d6c5"><div class="ttname"><a href="group__lavu__log__constants.html#ga96970a2980bf6ad28cd403e7dc52d6c5">AV_LOG_FATAL</a></div><div class="ttdeci">#define AV_LOG_FATAL</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00188">log.h:188</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a5603b2d5752fc0d268b4422d0aa4a6e9"><div class="ttname"><a href="ffmpeg_8h.html#a5603b2d5752fc0d268b4422d0aa4a6e9">abort_on_flags</a></div><div class="ttdeci">int abort_on_flags</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00167">ffmpeg_opt.c:167</a></div></div>
<div class="ttc" id="agroup__lavc__misc_html_gaf60b0e076f822abcb2700eb601d352a6"><div class="ttname"><a href="group__lavc__misc.html#gaf60b0e076f822abcb2700eb601d352a6">avcodec_flush_buffers</a></div><div class="ttdeci">void avcodec_flush_buffers(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01069">utils.c:1069</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ae1db4cbd8e2d2dd46fa384e1c93835fc"><div class="ttname"><a href="ffmpeg_8c.html#ae1db4cbd8e2d2dd46fa384e1c93835fc">output_packet</a></div><div class="ttdeci">static void output_packet(OutputFile *of, AVPacket *pkt, OutputStream *ost, int eof)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00868">ffmpeg.c:868</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a45c7ee6dae692d19ff3d275032aeea94"><div class="ttname"><a href="struct_input_stream.html#a45c7ee6dae692d19ff3d275032aeea94">InputStream::hwaccel_uninit</a></div><div class="ttdeci">void(* hwaccel_uninit)(AVCodecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00375">ffmpeg.h:375</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a1e7324262b6b78522e52064daaa7bc87"><div class="ttname"><a href="struct_a_v_format_context.html#a1e7324262b6b78522e52064daaa7bc87">AVFormatContext::pb</a></div><div class="ttdeci">AVIOContext * pb</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01265">avformat.h:1265</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga193877ba459faf314c3d285b6082cf73"><div class="ttname"><a href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a></div><div class="ttdeci">size_t av_strlcat(char *dst, const char *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00093">avstring.c:93</a></div></div>
<div class="ttc" id="anamespacenormalize_html_a8e665926b251eb361d2db61ce22e1cde"><div class="ttname"><a href="namespacenormalize.html#a8e665926b251eb361d2db61ce22e1cde">normalize.ifile</a></div><div class="ttdeci">ifile</div><div class="ttdef"><b>Definition:</b> <a href="normalize_8py_source.html#l00006">normalize.py:6</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a20f244d86fd0a7190400a50689f3524a"><div class="ttname"><a href="ffmpeg_8h.html#a20f244d86fd0a7190400a50689f3524a">sdp_filename</a></div><div class="ttdeci">char * sdp_filename</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00147">ffmpeg_opt.c:147</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a1690691cd9bdc598717be8aa911b01ad"><div class="ttname"><a href="struct_input_stream.html#a1690691cd9bdc598717be8aa911b01ad">InputStream::dts_buffer</a></div><div class="ttdeci">int64_t * dts_buffer</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00391">ffmpeg.h:391</a></div></div>
<div class="ttc" id="astruct_output_file_html"><div class="ttname"><a href="struct_output_file.html">OutputFile</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00568">ffmpeg.h:568</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad552f602c2113bd5152cff3c58ba1f9f"><div class="ttname"><a href="struct_a_v_stream.html#ad552f602c2113bd5152cff3c58ba1f9f">AVStream::cur_dts</a></div><div class="ttdeci">int64_t cur_dts</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01062">avformat.h:1062</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_ae9a98c10a301c5e937095105b6f0fdb9"><div class="ttname"><a href="struct_a_v_rational.html#ae9a98c10a301c5e937095105b6f0fdb9">AVRational::num</a></div><div class="ttdeci">int num</div><div class="ttdoc">Numerator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00059">rational.h:59</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gae1c276095faaece7c097f8fd9f1184db"><div class="ttname"><a href="group__lavc__core.html#gae1c276095faaece7c097f8fd9f1184db">AV_CODEC_PROP_TEXT_SUB</a></div><div class="ttdeci">#define AV_CODEC_PROP_TEXT_SUB</div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8h_source.html#l00102">codec_desc.h:102</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a7b352c0afc44da703891d7538bbcf737"><div class="ttname"><a href="ffmpeg_8h.html#a7b352c0afc44da703891d7538bbcf737">hw_device_free_all</a></div><div class="ttdeci">void hw_device_free_all(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__hw_8c_source.html#l00274">ffmpeg_hw.c:274</a></div></div>
<div class="ttc" id="aavformat_8h_html"><div class="ttname"><a href="avformat_8h.html">avformat.h</a></div></div>
<div class="ttc" id="affmpeg_8c_html_abc5e61273039380ac14ed7b0a3cce725"><div class="ttname"><a href="ffmpeg_8c.html#abc5e61273039380ac14ed7b0a3cce725">adjust_frame_pts_to_encoder_tb</a></div><div class="ttdeci">static double adjust_frame_pts_to_encoder_tb(OutputFile *of, OutputStream *ost, AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00907">ffmpeg.c:907</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_a7c67ae70632c91df8b0f721658ec5377"><div class="ttname"><a href="struct_a_v_stream.html#a7c67ae70632c91df8b0f721658ec5377">AVStream::start_time</a></div><div class="ttdeci">int64_t start_time</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00908">avformat.h:908</a></div></div>
<div class="ttc" id="abprint_8c_html_a123a83f3ad2f3c370ed18592d0299fd6"><div class="ttname"><a href="bprint_8c.html#a123a83f3ad2f3c370ed18592d0299fd6">av_bprintf</a></div><div class="ttdeci">void av_bprintf(AVBPrint *buf, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="bprint_8c_source.html#l00094">bprint.c:94</a></div></div>
<div class="ttc" id="adict_8h_html"><div class="ttname"><a href="dict_8h.html">dict.h</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a6ae65382f22317b94b7ccfe00024d31a"><div class="ttname"><a href="struct_input_stream.html#a6ae65382f22317b94b7ccfe00024d31a">InputStream::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00345">ffmpeg.h:345</a></div></div>
<div class="ttc" id="aavformat_8h_html_ae578ee8b851860926955855d1234f93f"><div class="ttname"><a href="avformat_8h.html#ae578ee8b851860926955855d1234f93f">AV_DISPOSITION_DESCRIPTIONS</a></div><div class="ttdeci">#define AV_DISPOSITION_DESCRIPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00850">avformat.h:850</a></div></div>
<div class="ttc" id="agroup__lavu__log_html_ga6cdf5cd331b17e80e8308124f05a6db8"><div class="ttname"><a href="group__lavu__log.html#ga6cdf5cd331b17e80e8308124f05a6db8">AV_LOG_SKIP_REPEATED</a></div><div class="ttdeci">#define AV_LOG_SKIP_REPEATED</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00384">log.h:384</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaada9ea8f08d3dcf23c14564dbc88992c"><div class="ttname"><a href="group__lavc__core.html#gaada9ea8f08d3dcf23c14564dbc88992c">av_bsf_send_packet</a></div><div class="ttdeci">int av_bsf_send_packet(AVBSFContext *ctx, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8c_source.html#l00200">bsf.c:200</a></div></div>
<div class="ttc" id="asinewin__tablegen__template_8c_html_a3508a98d3ee7e2c9a4841fe264cf70f7"><div class="ttname"><a href="sinewin__tablegen__template_8c.html#a3508a98d3ee7e2c9a4841fe264cf70f7">FF_ARRAY_ELEMS</a></div><div class="ttdeci">#define FF_ARRAY_ELEMS(a)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen__template_8c_source.html#l00038">sinewin_tablegen_template.c:38</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_gad9cbc53cec515b72ae7caa2e194c6bc0"><div class="ttname"><a href="group__lavu__dict.html#gad9cbc53cec515b72ae7caa2e194c6bc0">AV_DICT_MATCH_CASE</a></div><div class="ttdeci">#define AV_DICT_MATCH_CASE</div><div class="ttdef"><b>Definition:</b> <a href="dict_8h_source.html#l00069">dict.h:69</a></div></div>
<div class="ttc" id="astruct_a_v_program_html_a136cf29d2aa5b0e4c6d743406c5e39d1"><div class="ttname"><a href="struct_a_v_program.html#a136cf29d2aa5b0e4c6d743406c5e39d1">AVProgram::nb_stream_indexes</a></div><div class="ttdeci">unsigned int nb_stream_indexes</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01150">avformat.h:1150</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_ga245f2875f80ce67ec3d1e0f54dacf2c4"><div class="ttname"><a href="group__lavf__core.html#ga245f2875f80ce67ec3d1e0f54dacf2c4">avformat_network_deinit</a></div><div class="ttdeci">int avformat_network_deinit(void)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04994">utils.c:4994</a></div></div>
<div class="ttc" id="astruct_h_w_accel_html_a6524d8c42550b3b71408c216d0c8698a"><div class="ttname"><a href="struct_h_w_accel.html#a6524d8c42550b3b71408c216d0c8698a">HWAccel::init</a></div><div class="ttdeci">int(* init)(AVCodecContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00068">ffmpeg.h:68</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a0e8b6e753bb0f299b554d18f3589944a"><div class="ttname"><a href="ffmpeg_8h.html#a0e8b6e753bb0f299b554d18f3589944a">ifilter_parameters_from_frame</a></div><div class="ttdeci">int ifilter_parameters_from_frame(InputFilter *ifilter, const AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l01186">ffmpeg_filter.c:1186</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5d222eeeb0b54ab462af363bcb9273bc"><div class="ttname"><a href="struct_a_v_codec_context.html#a5d222eeeb0b54ab462af363bcb9273bc">AVCodecContext::field_order</a></div><div class="ttdeci">enum AVFieldOrder field_order</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01177">avcodec.h:1183</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gaf21645cfa855b2caf9699d7dc7b2d08e"><div class="ttname"><a href="group__lavu__misc.html#gaf21645cfa855b2caf9699d7dc7b2d08e">av_get_media_type_string</a></div><div class="ttdeci">const char * av_get_media_type_string(enum AVMediaType media_type)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2utils_8c_source.html#l00076">utils.c:76</a></div></div>
<div class="ttc" id="astruct_benchmark_time_stamps_html"><div class="ttname"><a href="struct_benchmark_time_stamps.html">BenchmarkTimeStamps</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00123">ffmpeg.c:123</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a6d02e640ccc12c783841ce51d09b9fa7"><div class="ttname"><a href="codec__par_8h.html#a6d02e640ccc12c783841ce51d09b9fa7">avcodec_parameters_copy</a></div><div class="ttdeci">int avcodec_parameters_copy(AVCodecParameters *dst, const AVCodecParameters *src)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l02077">utils.c:2077</a></div></div>
<div class="ttc" id="affmpeg_8c_html_aff9e7184fccecd0ffcd55379bc93d477"><div class="ttname"><a href="ffmpeg_8c.html#aff9e7184fccecd0ffcd55379bc93d477">transcode_init_done</a></div><div class="ttdeci">static atomic_int transcode_init_done</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00344">ffmpeg.c:344</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_gae35832b110d26ffa3e8805b3d55e8f36"><div class="ttname"><a href="group__lavf__misc.html#gae35832b110d26ffa3e8805b3d55e8f36">avformat_transfer_internal_stream_timing_info</a></div><div class="ttdeci">int avformat_transfer_internal_stream_timing_info(const AVOutputFormat *ofmt, AVStream *ost, const AVStream *ist, enum AVTimebaseSource copy_tb)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l05704">utils.c:5704</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a01128ebf95f6a3b130f446b13b171c52"><div class="ttname"><a href="ffmpeg_8h.html#a01128ebf95f6a3b130f446b13b171c52">hw_device_setup_for_encode</a></div><div class="ttdeci">int hw_device_setup_for_encode(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__hw_8c_source.html#l00419">ffmpeg_hw.c:419</a></div></div>
<div class="ttc" id="astruct_output_stream_html_a4f86ebf7f573017f4010e2ccd07ffa65"><div class="ttname"><a href="struct_output_stream.html#a4f86ebf7f573017f4010e2ccd07ffa65">OutputStream::unavailable</a></div><div class="ttdeci">int unavailable</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00518">ffmpeg.h:518</a></div></div>
<div class="ttc" id="achannel__layout_8h_html"><div class="ttname"><a href="channel__layout_8h.html">channel_layout.h</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_ga2af714e82f48759551acdbc4488ded4a"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#ga2af714e82f48759551acdbc4488ded4a">av_buffersink_get_sample_rate</a></div><div class="ttdeci">int av_buffersink_get_sample_rate(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="ademuxing__decoding_8c_html_a3d4c6562f0b27cf0cacbbea5c038c090"><div class="ttname"><a href="demuxing__decoding_8c.html#a3d4c6562f0b27cf0cacbbea5c038c090">pkt</a></div><div class="ttdeci">static AVPacket pkt</div><div class="ttdef"><b>Definition:</b> <a href="demuxing__decoding_8c_source.html#l00054">demuxing_decoding.c:54</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_ace46e41b9bd6cac88fb7109ffd657f9a"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a></div><div class="ttdeci">#define AV_RL32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00146">intreadwrite.h:146</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aed14fa772ce46881020fd1545c86432c"><div class="ttname"><a href="struct_a_v_frame.html#aed14fa772ce46881020fd1545c86432c">AVFrame::format</a></div><div class="ttdeci">int format</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00381">frame.h:381</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ab19f077af44d4caa16ecad4d9532715a"><div class="ttname"><a href="ffmpeg_8c.html#ab19f077af44d4caa16ecad4d9532715a">report_new_stream</a></div><div class="ttdeci">static void report_new_stream(int input_index, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03677">ffmpeg.c:3677</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a3f99ca3115c44e6d7772c9384faf15e6"><div class="ttname"><a href="struct_a_v_codec_context.html#a3f99ca3115c44e6d7772c9384faf15e6">AVCodecContext::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00532">avcodec.h:534</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="aavformat_8h_html_aea2211b21ee4a9a443886c2e0a63be1c"><div class="ttname"><a href="avformat_8h.html#aea2211b21ee4a9a443886c2e0a63be1c">av_stream_get_end_pts</a></div><div class="ttdeci">int64_t av_stream_get_end_pts(const AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l00137">utils.c:137</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a733571df1f9d2cdd5aca9e933919a237"><div class="ttname"><a href="ffmpeg_8c.html#a733571df1f9d2cdd5aca9e933919a237">check_decode_result</a></div><div class="ttdeci">static void check_decode_result(InputStream *ist, int *got_output, int ret)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02120">ffmpeg.c:2120</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ae48685e82826c6b5922014d47e2cb6bb"><div class="ttname"><a href="struct_input_stream.html#ae48685e82826c6b5922014d47e2cb6bb">InputStream::hwaccel_device</a></div><div class="ttdeci">char * hwaccel_device</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00370">ffmpeg.h:370</a></div></div>
<div class="ttc" id="astruct_input_filter_html_ae65ce297679c894d4536e8eaaf623b84"><div class="ttname"><a href="struct_input_filter.html#ae65ce297679c894d4536e8eaaf623b84">InputFilter::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00254">ffmpeg.h:254</a></div></div>
<div class="ttc" id="aavfilter_8h_html"><div class="ttname"><a href="avfilter_8h.html">avfilter.h</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html"><div class="ttname"><a href="struct_a_v_format_context.html">AVFormatContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01223">avformat.h:1223</a></div></div>
<div class="ttc" id="agroup__lavf__core_html_gac2990b13b68e831a408fce8e1d0d6445"><div class="ttname"><a href="group__lavf__core.html#gac2990b13b68e831a408fce8e1d0d6445">avformat_free_context</a></div><div class="ttdeci">void avformat_free_context(AVFormatContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l04382">utils.c:4382</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersink__accessors_html_gace78881c41bf449527826b95d21279a2"><div class="ttname"><a href="group__lavfi__buffersink__accessors.html#gace78881c41bf449527826b95d21279a2">av_buffersink_get_channels</a></div><div class="ttdeci">int av_buffersink_get_channels(const AVFilterContext *ctx)</div></div>
<div class="ttc" id="astruct_input_stream_html_a6c3473c28e30500adb3fa7886e6d7c3e"><div class="ttname"><a href="struct_input_stream.html#a6c3473c28e30500adb3fa7886e6d7c3e">InputStream::hwaccel_id</a></div><div class="ttdeci">enum HWAccelID hwaccel_id</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00365">ffmpeg.h:368</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a4b6db5d0fb15c8262b1ba543495fe628"><div class="ttname"><a href="struct_input_stream.html#a4b6db5d0fb15c8262b1ba543495fe628">InputStream::nb_dts_buffer</a></div><div class="ttdeci">int nb_dts_buffer</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00392">ffmpeg.h:392</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a01a73e823e0892841a4fd2f900b85688"><div class="ttname"><a href="ffmpeg_8c.html#a01a73e823e0892841a4fd2f900b85688">program_name</a></div><div class="ttdeci">const char program_name[]</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00109">ffmpeg.c:109</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga3f55f5bcfbb12e06c7cb1195028855e6"><div class="ttname"><a href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a></div><div class="ttdeci">#define AV_CODEC_CAP_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00075">codec.h:75</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a6147a2f3e7cfec58b3f790dfc318e4bc"><div class="ttname"><a href="struct_input_stream.html#a6147a2f3e7cfec58b3f790dfc318e4bc">InputStream::dec</a></div><div class="ttdeci">AVCodec * dec</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00308">ffmpeg.h:308</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a91c6f154cc61c348f644987044423e57"><div class="ttname"><a href="struct_input_stream.html#a91c6f154cc61c348f644987044423e57">InputStream::hwaccel_retrieved_pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat hwaccel_retrieved_pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00377">ffmpeg.h:379</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga3f9c69432582e2857147bcba3c75dc32"><div class="ttname"><a href="group__lavu__math__rational.html#ga3f9c69432582e2857147bcba3c75dc32">av_mul_q</a></div><div class="ttdeci">AVRational av_mul_q(AVRational b, AVRational c)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00080">rational.c:80</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00093">buffer.c:93</a></div></div>
<div class="ttc" id="astruct_output_filter_html_a1571021ae59382241c925f7ee613cd7d"><div class="ttname"><a href="struct_output_filter.html#a1571021ae59382241c925f7ee613cd7d">OutputFilter::out_tmp</a></div><div class="ttdeci">AVFilterInOut * out_tmp</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00269">ffmpeg.h:269</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga4f80582a2ea9c0e141de5d6f6152008f"><div class="ttname"><a href="group__lavc__core.html#ga4f80582a2ea9c0e141de5d6f6152008f">avcodec_get_hw_config</a></div><div class="ttdeci">const AVCodecHWConfig * avcodec_get_hw_config(const AVCodec *codec, int index)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01839">utils.c:1839</a></div></div>
<div class="ttc" id="affmpeg_8c_html_ac639722e5e5a6a26c78eca5e9122909d"><div class="ttname"><a href="ffmpeg_8c.html#ac639722e5e5a6a26c78eca5e9122909d">print_report</a></div><div class="ttdeci">static void print_report(int is_last_report, int64_t timer_start, int64_t cur_time)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01676">ffmpeg.c:1676</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gad15ae1ecff401c3d2dc5ac44030a9900"><div class="ttname"><a href="group__lavc__core.html#gad15ae1ecff401c3d2dc5ac44030a9900">AV_CODEC_CAP_PARAM_CHANGE</a></div><div class="ttdeci">#define AV_CODEC_CAP_PARAM_CHANGE</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00114">codec.h:114</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a09f9a9d01896da35cc60744e7ebe14b0"><div class="ttname"><a href="ffmpeg_8c.html#a09f9a9d01896da35cc60744e7ebe14b0">nb_frames_dup</a></div><div class="ttdeci">static int nb_frames_dup</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00135">ffmpeg.c:135</a></div></div>
<div class="ttc" id="alibsvtav1_8c_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="libsvtav1_8c.html#a710bce51374aba96ab04912897666c35">desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="libsvtav1_8c_source.html#l00079">libsvtav1.c:79</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48ac1a46f59be5c6c2d3412ab172d6b8cf5">AVMEDIA_TYPE_VIDEO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00201">avutil.h:201</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ad76700001c97c3ce465539f0c698e6bc"><div class="ttname"><a href="struct_input_stream.html#ad76700001c97c3ce465539f0c698e6bc">InputStream::filters</a></div><div class="ttdeci">InputFilter ** filters</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00362">ffmpeg.h:362</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aab9c4495feeedde28c1e908d76b7b9f5"><div class="ttname"><a href="struct_a_v_codec_context.html#aab9c4495feeedde28c1e908d76b7b9f5">AVCodecContext::opaque</a></div><div class="ttdeci">void * opaque</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00568">avcodec.h:568</a></div></div>
<div class="ttc" id="agroup__lavfi__buffersrc_html_ga996e96007a0fda870549ac3c4e1e0967"><div class="ttname"><a href="group__lavfi__buffersrc.html#ga996e96007a0fda870549ac3c4e1e0967">av_buffersrc_get_nb_failed_requests</a></div><div class="ttdeci">unsigned av_buffersrc_get_nb_failed_requests(AVFilterContext *buffer_src)</div><div class="ttdef"><b>Definition:</b> <a href="buffersrc_8c_source.html#l00287">buffersrc.c:287</a></div></div>
<div class="ttc" id="aavformat_8h_html_a4d232408e799fa2b2f2705a3e8e0b4b8"><div class="ttname"><a href="avformat_8h.html#a4d232408e799fa2b2f2705a3e8e0b4b8">AVFMT_TS_DISCONT</a></div><div class="ttdeci">#define AVFMT_TS_DISCONT</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00464">avformat.h:464</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html"><div class="ttname"><a href="struct_a_v_rational.html">AVRational</a></div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00058">rational.h:58</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a13213d6339827ff18b6af3f0ec13db5e"><div class="ttname"><a href="ffmpeg_8h.html#a13213d6339827ff18b6af3f0ec13db5e">audio_volume</a></div><div class="ttdeci">int audio_volume</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00153">ffmpeg_opt.c:153</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga17ae68044f725fd5ba26c54162b96490"><div class="ttname"><a href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00333">avcodec.h:333</a></div></div>
<div class="ttc" id="astruct_input_stream_html_af76c7165931c721b63008034c94d9275"><div class="ttname"><a href="struct_input_stream.html#af76c7165931c721b63008034c94d9275">InputStream::nb_samples</a></div><div class="ttdeci">int64_t nb_samples</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00331">ffmpeg.h:331</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gacb84f3e93a583e1f84a5283162a606a2"><div class="ttname"><a href="group__channel__mask__c.html#gacb84f3e93a583e1f84a5283162a606a2">av_get_default_channel_layout</a></div><div class="ttdeci">int64_t av_get_default_channel_layout(int nb_channels)</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8c_source.html#l00231">channel_layout.c:231</a></div></div>
<div class="ttc" id="astruct_output_stream_html_ab7b674f9a0c60e3e02526d560a83f583"><div class="ttname"><a href="struct_output_stream.html#ab7b674f9a0c60e3e02526d560a83f583">OutputStream::enc_ctx</a></div><div class="ttdeci">AVCodecContext * enc_ctx</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00469">ffmpeg.h:469</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_a81f4cea70d96846df7111daccc5ecce2"><div class="ttname"><a href="libavutil_2fifo_8c.html#a81f4cea70d96846df7111daccc5ecce2">av_fifo_size</a></div><div class="ttdeci">int av_fifo_size(const AVFifoBuffer *f)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00077">fifo.c:77</a></div></div>
<div class="ttc" id="acodec__par_8h_html_a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2"><div class="ttname"><a href="codec__par_8h.html#a957ef25581a6b3c98589817b1cbed02ca9165cfa953463411e28670a9d06af2e2">AV_FIELD_PROGRESSIVE</a></div><div class="ttdeci">@ AV_FIELD_PROGRESSIVE</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00038">codec_par.h:38</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html"><div class="ttname"><a href="struct_a_v_stream.html">AVStream</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00869">avformat.h:869</a></div></div>
<div class="ttc" id="astruct_a_v_output_format_html_ac3abc5f47f3465b6b7eec89c9476351c"><div class="ttname"><a href="struct_a_v_output_format.html#ac3abc5f47f3465b6b7eec89c9476351c">AVOutputFormat::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00491">avformat.h:491</a></div></div>
<div class="ttc" id="alibm_8h_html_a220c7fd7006446ff6f373833bdc847ba"><div class="ttname"><a href="libm_8h.html#a220c7fd7006446ff6f373833bdc847ba">llrint</a></div><div class="ttdeci">#define llrint(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00394">libm.h:394</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a861b24f5520382037a477a313641b1cf"><div class="ttname"><a href="ffmpeg_8c.html#a861b24f5520382037a477a313641b1cf">set_encoder_id</a></div><div class="ttdeci">static void set_encoder_id(OutputFile *of, OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03182">ffmpeg.c:3182</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a5e77505bdc5afbc6ab5cf613894925b4"><div class="ttname"><a href="struct_input_stream.html#a5e77505bdc5afbc6ab5cf613894925b4">InputStream::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdoc">current pts of the decoded frame (in AV_TIME_BASE units)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00319">ffmpeg.h:319</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a0452833e3ab6ddd7acbf82817a7818a4"><div class="ttname"><a href="struct_a_v_frame.html#a0452833e3ab6ddd7acbf82817a7818a4">AVFrame::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00401">frame.h:401</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0425c77b3d06d71e5db88b1d7e1b37f2"><div class="ttname"><a href="struct_a_v_codec_context.html#a0425c77b3d06d71e5db88b1d7e1b37f2">AVCodecContext::pix_fmt</a></div><div class="ttdeci">enum AVPixelFormat pix_fmt</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00721">avcodec.h:736</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a58369c3a8a986935b572df5aa6361ce2"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a58369c3a8a986935b572df5aa6361ce2">AVCodecParameters::codec_type</a></div><div class="ttdeci">enum AVMediaType codec_type</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00222">codec_par.h:56</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_a612be59edb6ab388a82d1487d1bd0c4d"><div class="ttname"><a href="libavutil_2fifo_8c.html#a612be59edb6ab388a82d1487d1bd0c4d">av_fifo_freep</a></div><div class="ttdeci">void av_fifo_freep(AVFifoBuffer **f)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00063">fifo.c:63</a></div></div>
<div class="ttc" id="astruct_a_v_codec_parameters_html_a18e0af4b263443a6c4d2d5304dbd537e"><div class="ttname"><a href="struct_a_v_codec_parameters.html#a18e0af4b263443a6c4d2d5304dbd537e">AVCodecParameters::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="codec__par_8h_source.html#l00162">codec_par.h:162</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aa21f6f0cd9174b2bb6223cbd15b83508af7bb0577a3c487398eaf009668f9c531"><div class="ttname"><a href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508af7bb0577a3c487398eaf009668f9c531">FKF_N_FORCED</a></div><div class="ttdeci">@ FKF_N_FORCED</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00430">ffmpeg.h:430</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a5b37acfe4024d92ee510064e80920b40"><div class="ttname"><a href="struct_a_v_format_context.html#a5b37acfe4024d92ee510064e80920b40">AVFormatContext::interrupt_callback</a></div><div class="ttdeci">AVIOInterruptCB interrupt_callback</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01501">avformat.h:1501</a></div></div>
<div class="ttc" id="agroup__lavu__math__rational_html_ga2eb3a275aabacd8421f140a12bab4a91"><div class="ttname"><a href="group__lavu__math__rational.html#ga2eb3a275aabacd8421f140a12bab4a91">av_add_q</a></div><div class="ttdeci">AVRational av_add_q(AVRational b, AVRational c)</div><div class="ttdef"><b>Definition:</b> <a href="rational_8c_source.html#l00093">rational.c:93</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a209f5ec60cb5f0b0a4962f4c5c5bb541"><div class="ttname"><a href="struct_a_v_codec_context.html#a209f5ec60cb5f0b0a4962f4c5c5bb541">AVCodecContext::global_quality</a></div><div class="ttdeci">int global_quality</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00592">avcodec.h:592</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a257632e7ed67e603a2b50e522412577d"><div class="ttname"><a href="ffmpeg_8h.html#a257632e7ed67e603a2b50e522412577d">stdin_interaction</a></div><div class="ttdeci">int stdin_interaction</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00170">ffmpeg_opt.c:170</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a3263927c45363b7cc52c9db3358dc413"><div class="ttname"><a href="ffmpeg_8h.html#a3263927c45363b7cc52c9db3358dc413">do_hex_dump</a></div><div class="ttdeci">int do_hex_dump</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00160">ffmpeg_opt.c:160</a></div></div>
<div class="ttc" id="astruct_input_stream_html_acc9fee6e45ff302a2c1a06a053cbaa22"><div class="ttname"><a href="struct_input_stream.html#acc9fee6e45ff302a2c1a06a053cbaa22">InputStream::sub2video</a></div><div class="ttdeci">struct InputStream::sub2video sub2video</div></div>
<div class="ttc" id="agroup__lavu__math_html_gga921d656eaf2c4d6800a734a13af021d0a7fcb56631d6898b282d6c78ce6c14a43"><div class="ttname"><a href="group__lavu__math.html#gga921d656eaf2c4d6800a734a13af021d0a7fcb56631d6898b282d6c78ce6c14a43">AV_ROUND_PASS_MINMAX</a></div><div class="ttdeci">@ AV_ROUND_PASS_MINMAX</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00108">mathematics.h:108</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ad47d834630eee2dca258aa449fb1df47"><div class="ttname"><a href="struct_input_stream.html#ad47d834630eee2dca258aa449fb1df47">InputStream::file_index</a></div><div class="ttdeci">int file_index</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00299">ffmpeg.h:299</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a95727669f1ebba16a6a49ea8b9f2276e"><div class="ttname"><a href="threadmessage_8c.html#a95727669f1ebba16a6a49ea8b9f2276e">av_thread_message_queue_free</a></div><div class="ttdeci">void av_thread_message_queue_free(AVThreadMessageQueue **mq)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00091">threadmessage.c:91</a></div></div>
<div class="ttc" id="astruct_output_file_html_aa4fee66db612c26276b5de30d834d5e0"><div class="ttname"><a href="struct_output_file.html#aa4fee66db612c26276b5de30d834d5e0">OutputFile::start_time</a></div><div class="ttdeci">int64_t start_time</div><div class="ttdoc">start time in microseconds == AV_TIME_BASE units</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00573">ffmpeg.h:573</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_ac17d5fc2dcdb00806cc83b02d9f940f3"><div class="ttname"><a href="struct_a_v_format_context.html#ac17d5fc2dcdb00806cc83b02d9f940f3">AVFormatContext::chapters</a></div><div class="ttdeci">AVChapter ** chapters</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01453">avformat.h:1453</a></div></div>
<div class="ttc" id="agroup__lavf__encoding_html_ga37352ed2c63493c38219d935e71db6c1"><div class="ttname"><a href="group__lavf__encoding.html#ga37352ed2c63493c38219d935e71db6c1">av_interleaved_write_frame</a></div><div class="ttdeci">int av_interleaved_write_frame(AVFormatContext *s, AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="mux_8c_source.html#l01236">mux.c:1236</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="agroup__lavu__dict_html_ga8d9c2de72b310cef8e6a28c9cd3acbbe"><div class="ttname"><a href="group__lavu__dict.html#ga8d9c2de72b310cef8e6a28c9cd3acbbe">av_dict_set</a></div><div class="ttdeci">int av_dict_set(AVDictionary **pm, const char *key, const char *value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00070">dict.c:70</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2b55a894aa10247fb5d5e065bc1b1655"><div class="ttname"><a href="ffmpeg_8c.html#a2b55a894aa10247fb5d5e065bc1b1655">init_input_stream</a></div><div class="ttdeci">static int init_input_stream(int ist_index, char *error, int error_len)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l02914">ffmpeg.c:2914</a></div></div>
<div class="ttc" id="acmdutils_8h_html"><div class="ttname"><a href="cmdutils_8h.html">cmdutils.h</a></div></div>
<div class="ttc" id="astruct_a_v_chapter_html"><div class="ttname"><a href="struct_a_v_chapter.html">AVChapter</a></div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01180">avformat.h:1180</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a622e758be29fd500aed0ffdc069550f7"><div class="ttname"><a href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">AVPacket::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00381">packet.h:381</a></div></div>
<div class="ttc" id="astruct_filter_graph_html"><div class="ttname"><a href="struct_filter_graph.html">FilterGraph</a></div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00285">ffmpeg.h:285</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga08d53431e76355f88e27763b1940df4f"><div class="ttname"><a href="group__lavc__core.html#ga08d53431e76355f88e27763b1940df4f">av_bsf_free</a></div><div class="ttdeci">void av_bsf_free(AVBSFContext **pctx)</div><div class="ttdef"><b>Definition:</b> <a href="bsf_8c_source.html#l00040">bsf.c:40</a></div></div>
<div class="ttc" id="astruct_output_stream_html"><div class="ttname"><a href="struct_output_stream.html">OutputStream</a></div><div class="ttdef"><b>Definition:</b> <a href="muxing_8c_source.html#l00053">muxing.c:53</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a25562f714212eb22a94a33c076126461"><div class="ttname"><a href="ffmpeg_8c.html#a25562f714212eb22a94a33c076126461">nb_filtergraphs</a></div><div class="ttdeci">int nb_filtergraphs</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00158">ffmpeg.c:158</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a7aaeee142b88a3078ddc57c644b49a7e">AV_OPT_TYPE_FLAGS</a></div><div class="ttdeci">@ AV_OPT_TYPE_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00224">opt.h:224</a></div></div>
<div class="ttc" id="alibavutil_2fifo_8c_html_adae9b18c5eed14fe851c5bb984ce374b"><div class="ttname"><a href="libavutil_2fifo_8c.html#adae9b18c5eed14fe851c5bb984ce374b">av_fifo_alloc</a></div><div class="ttdeci">AVFifoBuffer * av_fifo_alloc(unsigned int size)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2fifo_8c_source.html#l00043">fifo.c:43</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a6718f5f7b2206b2848af5e35ae3a9186"><div class="ttname"><a href="struct_input_stream.html#a6718f5f7b2206b2848af5e35ae3a9186">InputStream::start</a></div><div class="ttdeci">int64_t start</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00312">ffmpeg.h:312</a></div></div>
<div class="ttc" id="acmdutils_8c_html_aa60d6deab0047c29fc1f6602f812774f"><div class="ttname"><a href="cmdutils_8c.html#aa60d6deab0047c29fc1f6602f812774f">parse_time_or_die</a></div><div class="ttdeci">int64_t parse_time_or_die(const char *context, const char *timestr, int is_duration)</div><div class="ttdef"><b>Definition:</b> <a href="cmdutils_8c_source.html#l00162">cmdutils.c:162</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gga9a80bfcacc586b483a973272800edb97a8b58774a0ff03f493edda6685967ad51"><div class="ttname"><a href="group__lavc__packet.html#gga9a80bfcacc586b483a973272800edb97a8b58774a0ff03f493edda6685967ad51">AV_PKT_DATA_QUALITY_STATS</a></div><div class="ttdeci">@ AV_PKT_DATA_QUALITY_STATS</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00132">packet.h:132</a></div></div>
<div class="ttc" id="atimestamp_8h_html"><div class="ttname"><a href="timestamp_8h.html">timestamp.h</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="ahwcontext_8h_html"><div class="ttname"><a href="hwcontext_8h.html">hwcontext.h</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa102cde7ec5acbc099c3bcbb58556a18"><div class="ttname"><a href="group__lavu__error.html#gaa102cde7ec5acbc099c3bcbb58556a18">AVERROR_BUG</a></div><div class="ttdeci">#define AVERROR_BUG</div><div class="ttdoc">Internal bug, also see AVERROR_BUG2.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00050">error.h:50</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_a791c071afd3e95fcae14cb781829754d"><div class="ttname"><a href="struct_a_v_frame.html#a791c071afd3e95fcae14cb781829754d">AVFrame::quality</a></div><div class="ttdeci">int quality</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00431">frame.h:431</a></div></div>
<div class="ttc" id="athreadmessage_8c_html_a6b2b6c47728e7d442b31a49ca8f9f971"><div class="ttname"><a href="threadmessage_8c.html#a6b2b6c47728e7d442b31a49ca8f9f971">av_thread_message_queue_set_err_recv</a></div><div class="ttdeci">void av_thread_message_queue_set_err_recv(AVThreadMessageQueue *mq, int err)</div><div class="ttdef"><b>Definition:</b> <a href="threadmessage_8c_source.html#l00199">threadmessage.c:199</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga716447ae73b612bcf3a405b9b4608f6c"><div class="ttname"><a href="group__lavu__string.html#ga716447ae73b612bcf3a405b9b4608f6c">av_strlcpy</a></div><div class="ttdeci">size_t av_strlcpy(char *dst, const char *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00083">avstring.c:83</a></div></div>
<div class="ttc" id="agroup__lavfi_html_gaaad7850fb5fe26d35e5d371ca75b79e1"><div class="ttname"><a href="group__lavfi.html#gaaad7850fb5fe26d35e5d371ca75b79e1">avfilter_graph_send_command</a></div><div class="ttdeci">int avfilter_graph_send_command(AVFilterGraph *graph, const char *target, const char *cmd, const char *arg, char *res, int res_len, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="avfiltergraph_8c_source.html#l01236">avfiltergraph.c:1236</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="acafenc_8c_html_aa3e4f4f7b65f0f74ddcb4907e1993d92"><div class="ttname"><a href="cafenc_8c.html#aa3e4f4f7b65f0f74ddcb4907e1993d92">codec_flags</a></div><div class="ttdeci">static uint32_t codec_flags(enum AVCodecID codec_id)</div><div class="ttdef"><b>Definition:</b> <a href="cafenc_8c_source.html#l00037">cafenc.c:37</a></div></div>
<div class="ttc" id="astruct_input_filter_html_af86da4dd2e5092c08e8b171b52c6fa66"><div class="ttname"><a href="struct_input_filter.html#af86da4dd2e5092c08e8b171b52c6fa66">InputFilter::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00250">ffmpeg.h:250</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a484dd0b82131430527f4d4563a325e02"><div class="ttname"><a href="ffmpeg_8h.html#a484dd0b82131430527f4d4563a325e02">dts_error_threshold</a></div><div class="ttdeci">float dts_error_threshold</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__opt_8c_source.html#l00151">ffmpeg_opt.c:151</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a255bf7100a4ba6dcb6ee5d87740a4f35"><div class="ttname"><a href="struct_a_v_codec_context.html#a255bf7100a4ba6dcb6ee5d87740a4f35">AVCodecContext::color_range</a></div><div class="ttdeci">enum AVColorRange color_range</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1161</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a6f60043baf4abd0d201ccefc27bb4306"><div class="ttname"><a href="struct_a_v_format_context.html#a6f60043baf4abd0d201ccefc27bb4306">AVFormatContext::nb_chapters</a></div><div class="ttdeci">unsigned int nb_chapters</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01452">avformat.h:1452</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="aavformat_8h_html_a125e78a8250557501479986fead28a43"><div class="ttname"><a href="avformat_8h.html#a125e78a8250557501479986fead28a43">av_stream_get_parser</a></div><div class="ttdeci">struct AVCodecParserContext * av_stream_get_parser(const AVStream *s)</div><div class="ttdef"><b>Definition:</b> <a href="libavformat_2utils_8c_source.html#l00145">utils.c:145</a></div></div>
<div class="ttc" id="atimestamp_8h_html_a86d797e907fa454ed5fd34bfb0bcd747"><div class="ttname"><a href="timestamp_8h.html#a86d797e907fa454ed5fd34bfb0bcd747">av_ts2str</a></div><div class="ttdeci">#define av_ts2str(ts)</div><div class="ttdef"><b>Definition:</b> <a href="timestamp_8h_source.html#l00054">timestamp.h:54</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga334ea23fd9e492cd0e718330f2353b6b"><div class="ttname"><a href="group__lavu__error.html#ga334ea23fd9e492cd0e718330f2353b6b">AVERROR_EXIT</a></div><div class="ttdeci">#define AVERROR_EXIT</div><div class="ttdoc">Immediate exit was requested; the called function should not be restarted.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00056">error.h:56</a></div></div>
<div class="ttc" id="agroup__lavf__misc_html_gaab9fad988c28cc1c4dcbba24a36b6113"><div class="ttname"><a href="group__lavf__misc.html#gaab9fad988c28cc1c4dcbba24a36b6113">av_pkt_dump_log2</a></div><div class="ttdeci">void av_pkt_dump_log2(void *avcl, int level, const AVPacket *pkt, int dump_payload, const AVStream *st)</div><div class="ttdef"><b>Definition:</b> <a href="dump_8c_source.html#l00115">dump.c:115</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gac09f8ddc2d4b36c5a85c6befba0d0888"><div class="ttname"><a href="group__lavc__core.html#gac09f8ddc2d4b36c5a85c6befba0d0888">avcodec_descriptor_get</a></div><div class="ttdeci">const AVCodecDescriptor * avcodec_descriptor_get(enum AVCodecID id)</div><div class="ttdef"><b>Definition:</b> <a href="codec__desc_8c_source.html#l03457">codec_desc.c:3457</a></div></div>
<div class="ttc" id="astruct_a_v_b_s_f_context_html"><div class="ttname"><a href="struct_a_v_b_s_f_context.html">AVBSFContext</a></div><div class="ttdef"><b>Definition:</b> <a href="bsf_8h_source.html#l00049">bsf.h:49</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a12f098a569b8925e9a2bc92aba7bae96"><div class="ttname"><a href="ffmpeg_8c.html#a12f098a569b8925e9a2bc92aba7bae96">set_tty_echo</a></div><div class="ttdeci">static void set_tty_echo(int on)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03931">ffmpeg.c:3931</a></div></div>
<div class="ttc" id="aavstring_8h_html"><div class="ttname"><a href="avstring_8h.html">avstring.h</a></div></div>
<div class="ttc" id="agroup__lavu__enc_html_gad6ce86405f7381daad36ccf516b4da98"><div class="ttname"><a href="group__lavu__enc.html#gad6ce86405f7381daad36ccf516b4da98">FF_QP2LAMBDA</a></div><div class="ttdeci">#define FF_QP2LAMBDA</div><div class="ttdoc">factor to convert from H.263 QP to lambda</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00227">avutil.h:227</a></div></div>
<div class="ttc" id="astruct_input_filter_html_a05a22838e8069f8fdabba7686809494c"><div class="ttname"><a href="struct_input_filter.html#a05a22838e8069f8fdabba7686809494c">InputFilter::hw_frames_ctx</a></div><div class="ttdeci">AVBufferRef * hw_frames_ctx</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00257">ffmpeg.h:257</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6e606effa68724cae2ef5cc05f7fd9cb"><div class="ttname"><a href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">AVCodecContext::codec</a></div><div class="ttdeci">const struct AVCodec * codec</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:535</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ae73dddf18b49b6660263bc3a73a44290"><div class="ttname"><a href="struct_input_stream.html#ae73dddf18b49b6660263bc3a73a44290">InputStream::decoder_opts</a></div><div class="ttdeci">AVDictionary * decoder_opts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00335">ffmpeg.h:335</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a8026af86b300d31432bc1bf74910aea5"><div class="ttname"><a href="struct_input_stream.html#a8026af86b300d31432bc1bf74910aea5">InputStream::next_dts</a></div><div class="ttdeci">int64_t next_dts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00315">ffmpeg.h:315</a></div></div>
<div class="ttc" id="affmpeg_8h_html_aa21f6f0cd9174b2bb6223cbd15b83508affb3715058142056c2f602c81e52c15b"><div class="ttname"><a href="ffmpeg_8h.html#aa21f6f0cd9174b2bb6223cbd15b83508affb3715058142056c2f602c81e52c15b">FKF_N</a></div><div class="ttdeci">@ FKF_N</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00429">ffmpeg.h:429</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a79c04bfda90dc3b1887eeb43dd05a075"><div class="ttname"><a href="ffmpeg_8c.html#a79c04bfda90dc3b1887eeb43dd05a075">log_callback_null</a></div><div class="ttdeci">static void log_callback_null(void *ptr, int level, const char *fmt, va_list vl)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l04909">ffmpeg.c:4909</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_acb7a609f77fd8876c8433c3673e9f9d5"><div class="ttname"><a href="struct_a_v_codec_context.html#acb7a609f77fd8876c8433c3673e9f9d5">AVCodecContext::error</a></div><div class="ttdeci">uint64_t error[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01709">avcodec.h:1709</a></div></div>
<div class="ttc" id="agroup__avoptions_html_ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329"><div class="ttname"><a href="group__avoptions.html#ggabd75aa30eb8ad6387672df9a1fa79444a0fa9f07d428bdc32495fe55c365c5329">AV_OPT_TYPE_CONST</a></div><div class="ttdeci">@ AV_OPT_TYPE_CONST</div><div class="ttdef"><b>Definition:</b> <a href="opt_8h_source.html#l00234">opt.h:234</a></div></div>
<div class="ttc" id="asnprintf_8h_html_aa367b75c5aed883fef5befbdf04835a4"><div class="ttname"><a href="snprintf_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a></div><div class="ttdeci">#define snprintf</div><div class="ttdef"><b>Definition:</b> <a href="snprintf_8h_source.html#l00034">snprintf.h:34</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ab169b16d13871a631c18d844ca70eede"><div class="ttname"><a href="ffmpeg_8h.html#ab169b16d13871a631c18d844ca70eede">ABORT_ON_FLAG_EMPTY_OUTPUT</a></div><div class="ttdeci">#define ABORT_ON_FLAG_EMPTY_OUTPUT</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00437">ffmpeg.h:437</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a888998656da528d50f125b39dcd1067a"><div class="ttname"><a href="ffmpeg_8c.html#a888998656da528d50f125b39dcd1067a">read_key</a></div><div class="ttdeci">static int read_key(void)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00434">ffmpeg.c:434</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a2fb313e7b4b1ef89bd7e8fff6f85d71e"><div class="ttname"><a href="ffmpeg_8c.html#a2fb313e7b4b1ef89bd7e8fff6f85d71e">reap_filters</a></div><div class="ttdeci">static int reap_filters(int flush)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l01479">ffmpeg.c:1479</a></div></div>
<div class="ttc" id="affmpeg_8h_html_a16386b3f2344042c2a72b9143f09fcfa"><div class="ttname"><a href="ffmpeg_8h.html#a16386b3f2344042c2a72b9143f09fcfa">VSYNC_DROP</a></div><div class="ttdeci">#define VSYNC_DROP</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00054">ffmpeg.h:54</a></div></div>
<div class="ttc" id="abuffersrc_8h_html"><div class="ttname"><a href="buffersrc_8h.html">buffersrc.h</a></div></div>
<div class="ttc" id="astruct_a_v_rational_html_aee46bdac67d965ac0a4204e753f910c3"><div class="ttname"><a href="struct_a_v_rational.html#aee46bdac67d965ac0a4204e753f910c3">AVRational::den</a></div><div class="ttdeci">int den</div><div class="ttdoc">Denominator.</div><div class="ttdef"><b>Definition:</b> <a href="rational_8h_source.html#l00060">rational.h:60</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a33a289c990bc3fbcad01c4a09f34da38"><div class="ttname"><a href="struct_a_v_codec_context.html#a33a289c990bc3fbcad01c4a09f34da38">AVCodecContext::pkt_timebase</a></div><div class="ttdeci">AVRational pkt_timebase</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l02083">avcodec.h:2083</a></div></div>
<div class="ttc" id="astruct_output_filter_html_a2d283eee3e140f822b5eb381890ba035"><div class="ttname"><a href="struct_output_filter.html#a2d283eee3e140f822b5eb381890ba035">OutputFilter::ost</a></div><div class="ttdeci">struct OutputStream * ost</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00264">ffmpeg.h:264</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5c62b9c1528a272923ea2a4b86dea31a"><div class="ttname"><a href="struct_a_v_codec_context.html#a5c62b9c1528a272923ea2a4b86dea31a">AVCodecContext::ticks_per_frame</a></div><div class="ttdeci">int ticks_per_frame</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00658">avcodec.h:658</a></div></div>
<div class="ttc" id="astruct_output_filter_html_a4f141db3516fc737c8876f817a68b16b"><div class="ttname"><a href="struct_output_filter.html#a4f141db3516fc737c8876f817a68b16b">OutputFilter::channel_layouts</a></div><div class="ttdeci">uint64_t * channel_layouts</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00281">ffmpeg.h:281</a></div></div>
<div class="ttc" id="agroup__lavu__math_html_gab706bfec9bf56534e02ca9564cb968f6"><div class="ttname"><a href="group__lavu__math.html#gab706bfec9bf56534e02ca9564cb968f6">av_rescale_q_rnd</a></div><div class="ttdeci">int64_t av_rescale_q_rnd(int64_t a, AVRational bq, AVRational cq, enum AVRounding rnd)</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8c_source.html#l00134">mathematics.c:134</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a433b8659111b2f6ae74ab1fa29445f2c"><div class="ttname"><a href="ffmpeg_8c.html#a433b8659111b2f6ae74ab1fa29445f2c">init_output_bsfs</a></div><div class="ttdeci">static int init_output_bsfs(OutputStream *ost)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03039">ffmpeg.c:3039</a></div></div>
<div class="ttc" id="affmpeg_8h_html_ad60a50ce02efbab762effbbdd7eda05e"><div class="ttname"><a href="ffmpeg_8h.html#ad60a50ce02efbab762effbbdd7eda05e">filtergraph_is_simple</a></div><div class="ttdeci">int filtergraph_is_simple(FilterGraph *fg)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l01218">ffmpeg_filter.c:1218</a></div></div>
<div class="ttc" id="astruct_input_file_html_a4ffe49e7403ae36ac4bdff5a7a0a3486"><div class="ttname"><a href="struct_input_file.html#a4ffe49e7403ae36ac4bdff5a7a0a3486">InputFile::input_ts_offset</a></div><div class="ttdeci">int64_t input_ts_offset</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00406">ffmpeg.h:406</a></div></div>
<div class="ttc" id="affmpeg_8c_html_af347e179754a8ebece457e4a9985717b"><div class="ttname"><a href="ffmpeg_8c.html#af347e179754a8ebece457e4a9985717b">init_encoder_time_base</a></div><div class="ttdeci">static void init_encoder_time_base(OutputStream *ost, AVRational default_time_base)</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l03286">ffmpeg.c:3286</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8cd8caa7d40319324ce3d879a2edbd9f"><div class="ttname"><a href="struct_a_v_codec_context.html#a8cd8caa7d40319324ce3d879a2edbd9f">AVCodecContext::colorspace</a></div><div class="ttdeci">enum AVColorSpace colorspace</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01132">avcodec.h:1154</a></div></div>
<div class="ttc" id="astruct_input_stream_html_ac61e0f854402b58a64e676bdcfa75dfd"><div class="ttname"><a href="struct_input_stream.html#ac61e0f854402b58a64e676bdcfa75dfd">InputStream::frames_decoded</a></div><div class="ttdeci">uint64_t frames_decoded</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00388">ffmpeg.h:388</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="afiltering__audio_8c_html_ac2bf6798f37e95d3d2ff2d44e4ab3c12"><div class="ttname"><a href="filtering__audio_8c.html#ac2bf6798f37e95d3d2ff2d44e4ab3c12">dec_ctx</a></div><div class="ttdeci">static AVCodecContext * dec_ctx</div><div class="ttdef"><b>Definition:</b> <a href="filtering__audio_8c_source.html#l00043">filtering_audio.c:43</a></div></div>
<div class="ttc" id="affmpeg_8c_html_a18762b95222ff37bcce3933bf75c0ea6"><div class="ttname"><a href="ffmpeg_8c.html#a18762b95222ff37bcce3933bf75c0ea6">nb_output_streams</a></div><div class="ttdeci">int nb_output_streams</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8c_source.html#l00153">ffmpeg.c:153</a></div></div>
<div class="ttc" id="astruct_a_v_stream_html_ad63fb11cc1415e278e09ddc676e8a1ad"><div class="ttname"><a href="struct_a_v_stream.html#ad63fb11cc1415e278e09ddc676e8a1ad">AVStream::r_frame_rate</a></div><div class="ttdeci">AVRational r_frame_rate</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01011">avformat.h:1011</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8ff0b000c463361e234af48d03aadfc0"><div class="ttname"><a href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">AVCodecContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdoc">samples per second</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01186">avcodec.h:1186</a></div></div>
<div class="ttc" id="astruct_input_stream_html_a809d93e64e76fe2f142102e58dc82a1e"><div class="ttname"><a href="struct_input_stream.html#a809d93e64e76fe2f142102e58dc82a1e">InputStream::reinit_filters</a></div><div class="ttdeci">int reinit_filters</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg_8h_source.html#l00365">ffmpeg.h:365</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga81bc0a84e8866ecff68e6d8a82781936"><div class="ttname"><a href="group__lavc__core.html#ga81bc0a84e8866ecff68e6d8a82781936">AV_CODEC_FLAG_PASS1</a></div><div class="ttdeci">#define AV_CODEC_FLAG_PASS1</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00296">avcodec.h:296</a></div></div>
<div class="ttc" id="agroup__lavc__packet_html_gac9cb9756175b96e7441575803757fb73"><div class="ttname"><a href="group__lavc__packet.html#gac9cb9756175b96e7441575803757fb73">av_init_packet</a></div><div class="ttdeci">void av_init_packet(AVPacket *pkt)</div><div class="ttdef"><b>Definition:</b> <a href="avpacket_8c_source.html#l00035">avpacket.c:35</a></div></div>
<div class="ttc" id="aavformat_8h_html_a07792fd9060493192a4d4f25714a56d6"><div class="ttname"><a href="avformat_8h.html#a07792fd9060493192a4d4f25714a56d6">AV_DISPOSITION_LYRICS</a></div><div class="ttdeci">#define AV_DISPOSITION_LYRICS</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l00818">avformat.h:818</a></div></div>
<div class="ttc" id="agroup__lavd_html_ga7c90a3585267b55941ae2f7388c006b6"><div class="ttname"><a href="group__lavd.html#ga7c90a3585267b55941ae2f7388c006b6">avdevice_register_all</a></div><div class="ttdeci">void avdevice_register_all(void)</div><div class="ttdef"><b>Definition:</b> <a href="alldevices_8c_source.html#l00066">alldevices.c:66</a></div></div>
<div class="ttc" id="alibavcodec_2version_8h_html_abd910e02b1c8e616df228b856bf99cdf"><div class="ttname"><a href="libavcodec_2version_8h.html#abd910e02b1c8e616df228b856bf99cdf">FF_API_DEBUG_MV</a></div><div class="ttdeci">#define FF_API_DEBUG_MV</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2version_8h_source.html#l00058">version.h:58</a></div></div>
<div class="ttc" id="astruct_a_v_codec_h_w_config_html_a1474cb73c1f41e377dc5070ae373ac40"><div class="ttname"><a href="struct_a_v_codec_h_w_config.html#a1474cb73c1f41e377dc5070ae373ac40">AVCodecHWConfig::device_type</a></div><div class="ttdeci">enum AVHWDeviceType device_type</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00437">codec.h:444</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
