<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/h264_direct.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">h264_direct.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="h264__direct_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * H.26L/H.264/AVC/JVT/14496-10/... direct mb/block decoding</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2003 Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264dec_8h.html">h264dec.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264__ps_8h.html">h264_ps.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegutils_8h.html">mpegutils.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rectangle_8h.html">rectangle.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">thread.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="h264__direct_8c.html#a45c0b582c95445115841635f90e9eca5">   38</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="h264__direct_8c.html#a45c0b582c95445115841635f90e9eca5">get_scale_factor</a>(<a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                            <span class="keywordtype">int</span> poc, <span class="keywordtype">int</span> poc1, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">int</span> poc0 = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_ref.html#a68870b34f122a60f87e85a12143deba9">poc</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    int64_t pocdiff = poc1 - (int64_t)poc0;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a> = av_clip_int8(pocdiff);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (pocdiff != (<span class="keywordtype">int</span>)pocdiff)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(sl-&gt;<a class="code" href="struct_h264_slice_context.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>-&gt;<a class="code" href="struct_h264_context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <span class="stringliteral">&quot;pocdiff overflow&quot;</span>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a> == 0 || sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a>) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> 256;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        int64_t pocdiff0 = poc - (int64_t)poc0;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a> = av_clip_int8(pocdiff0);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordtype">int</span> tx = (16384 + (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>) &gt;&gt; 1)) / <a class="code" href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">if</span> (pocdiff0 != (<span class="keywordtype">int</span>)pocdiff0)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(sl-&gt;<a class="code" href="struct_h264_slice_context.html#a62d72421e3e1fa2d53e12416be3800fa">h264</a>-&gt;<a class="code" href="struct_h264_context.html#a4ffe05fa45bcaf7998889085ebce941a">avctx</a>, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;pocdiff0 overflow\n&quot;</span>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keywordflow">return</span> av_clip_intp2((<a class="code" href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a> * tx + 32) &gt;&gt; 6, 10);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="h264dec_8h.html#a8212d9afa9c7cdb1d19923b6627c6a6f">   62</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#a8212d9afa9c7cdb1d19923b6627c6a6f">ff_h264_direct_dist_scale_factor</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<span class="keyword">const</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                      <a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> poc  = <a class="code" href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>) ? <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;cur_pic_ptr-&gt;field_poc[<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>]</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                      : <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;cur_pic_ptr-&gt;poc;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> poc1 = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a68870b34f122a60f87e85a12143deba9">poc</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>))</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a> = 0; <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a> &lt; 2; <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>++) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> poc  = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;cur_pic_ptr-&gt;field_poc[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>];</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> poc1 = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>];</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2 * sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                sl-&gt;<a class="code" href="struct_h264_slice_context.html#a187006167d123abe26b073f46d9a6e57">dist_scale_factor_field</a>[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ^ <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>] =</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                    <a class="code" href="h264__direct_8c.html#a45c0b582c95445115841635f90e9eca5">get_scale_factor</a>(sl, poc, poc1, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 16);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        sl-&gt;<a class="code" href="struct_h264_slice_context.html#a3a065739b3fb2d039d0053d75b582612">dist_scale_factor</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="h264__direct_8c.html#a45c0b582c95445115841635f90e9eca5">get_scale_factor</a>(sl, poc, poc1, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="h264__direct_8c.html#a705b825e81aa73b3a7b8d1afcc06bc43">   83</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#a705b825e81aa73b3a7b8d1afcc06bc43">fill_colmap</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>[2][16 + 32], <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>, <span class="keywordtype">int</span> colfield, <span class="keywordtype">int</span> mbafi)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="struct_h264_picture.html">H264Picture</a> *<span class="keyword">const</span> ref1 = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">int</span> j, old_ref, rfield;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">int</span> start  = mbafi ? 16                       : 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>    = mbafi ? 16 + 2 * sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0] : sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[0];</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">int</span> interl = mbafi || <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;picture_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">/* bogus; fills in for missing frames */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    memset(<a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>], 0, <span class="keyword">sizeof</span>(<a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]));</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">for</span> (rfield = 0; rfield &lt; 2; rfield++) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordflow">for</span> (old_ref = 0; old_ref &lt; ref1-&gt;<a class="code" href="struct_h264_picture.html#a08d7ad8fce1e049cb3e98c1254d2adb2">ref_count</a>[colfield][<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]; old_ref++) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordtype">int</span> poc = ref1-&gt;<a class="code" href="struct_h264_picture.html#a827572dd93bb80a37111b779e071429b">ref_poc</a>[colfield][<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][old_ref];</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">if</span> (!interl)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                poc |= 3;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="comment">// FIXME: store all MBAFF references so this is not needed</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (interl &amp;&amp; (poc &amp; 3) == 3)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                poc = (poc &amp; ~3) + rfield + 1;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            <span class="keywordflow">for</span> (j = start; j &lt; <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>; j++) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordflow">if</span> (4 * sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][j].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a> +</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    (sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[0][j].<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> &amp; 3) == poc) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="keywordtype">int</span> cur_ref = mbafi ? (j - 16) ^ <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a> : j;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    <span class="keywordflow">if</span> (ref1-&gt;<a class="code" href="struct_h264_picture.html#ac8aa9307c1f4519f99ab9b562e00cbbf">mbaff</a>)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                        <a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][2 * old_ref + (rfield ^ <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>) + 16] = cur_ref;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <span class="keywordflow">if</span> (rfield == <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a> || !interl)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                        <a class="code" href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][old_ref] = cur_ref;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="h264dec_8h.html#a0cd0942db98ece2d9390787b87f4fd55">  121</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#a0cd0942db98ece2d9390787b87f4fd55">ff_h264_direct_ref_list_init</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<span class="keyword">const</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="struct_h264_ref.html">H264Ref</a> *<span class="keyword">const</span> ref1 = &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0];</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="struct_h264_picture.html">H264Picture</a> *<span class="keyword">const</span> cur = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;cur_pic_ptr;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>, j, <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">int</span> sidx     = (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;picture_structure &amp; 1) ^ 1;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">int</span> ref1sidx = (ref1-&gt;<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a>      &amp; 1) ^ 1;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = 0; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> &lt; sl-&gt;<a class="code" href="struct_h264_slice_context.html#a0c7c424a1526d27d6d359719c0bea391">list_count</a>; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>++) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        cur-&gt;<a class="code" href="struct_h264_picture.html#a08d7ad8fce1e049cb3e98c1254d2adb2">ref_count</a>[sidx][<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>];</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]; j++)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            cur-&gt;<a class="code" href="struct_h264_picture.html#a827572dd93bb80a37111b779e071429b">ref_poc</a>[sidx][<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][j] = 4 * sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][j].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a806ce72c8b3846d309941335be5f417a">frame_num</a> +</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                          (sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][j].<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> &amp; 3);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        memcpy(cur-&gt;<a class="code" href="struct_h264_picture.html#a08d7ad8fce1e049cb3e98c1254d2adb2">ref_count</a>[1], cur-&gt;<a class="code" href="struct_h264_picture.html#a08d7ad8fce1e049cb3e98c1254d2adb2">ref_count</a>[0], <span class="keyword">sizeof</span>(cur-&gt;<a class="code" href="struct_h264_picture.html#a08d7ad8fce1e049cb3e98c1254d2adb2">ref_count</a>[0]));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        memcpy(cur-&gt;<a class="code" href="struct_h264_picture.html#a827572dd93bb80a37111b779e071429b">ref_poc</a>[1],   cur-&gt;<a class="code" href="struct_h264_picture.html#a827572dd93bb80a37111b779e071429b">ref_poc</a>[0],   <span class="keyword">sizeof</span>(cur-&gt;<a class="code" href="struct_h264_picture.html#a827572dd93bb80a37111b779e071429b">ref_poc</a>[0]));</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;current_slice == 0) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        cur-&gt;<a class="code" href="struct_h264_picture.html#ac8aa9307c1f4519f99ab9b562e00cbbf">mbaff</a> = <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(cur-&gt;<a class="code" href="struct_h264_picture.html#ac8aa9307c1f4519f99ab9b562e00cbbf">mbaff</a> == <a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>));</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">col_fieldoff</a> = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="struct_h264_slice_context.html#a0c7c424a1526d27d6d359719c0bea391">list_count</a> != 2 || !sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[1])</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordtype">int</span> cur_poc  = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;cur_pic_ptr-&gt;poc;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordtype">int</span> *col_poc = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#aaa21cecff3d0b95715b2f173859997e2">field_poc</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">if</span> (col_poc[0] == INT_MAX &amp;&amp; col_poc[1] == INT_MAX) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;co located POCs unavailable\n&quot;</span>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a> = 1;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a> = (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(col_poc[0] - (int64_t)cur_poc) &gt;=</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                              <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(col_poc[1] - (int64_t)cur_poc));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        ref1sidx =</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        sidx     = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// FL -&gt; FL &amp; differ parity</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;picture_structure &amp; sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a>) &amp;&amp;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;               !sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#ac8aa9307c1f4519f99ab9b562e00cbbf">mbaff</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">col_fieldoff</a> = 2 * sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> - 3;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="struct_h264_slice_context.html#a7d4edb499bdf58f6a023773eceaa9af7">slice_type_nos</a> != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> || sl-&gt;<a class="code" href="struct_h264_slice_context.html#a9ad3dcddcd056cd92a0b18bd10339370">direct_spatial_mv_pred</a>)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = 0; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> &lt; 2; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>++) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="h264__direct_8c.html#a705b825e81aa73b3a7b8d1afcc06bc43">fill_colmap</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, sl, sl-&gt;<a class="code" href="struct_h264_slice_context.html#a783d02faef3f89af863d0b5c4c60c4b1">map_col_to_list0</a>, <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>, sidx, ref1sidx, 0);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>))</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a> = 0; <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a> &lt; 2; <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>++)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <a class="code" href="h264__direct_8c.html#a705b825e81aa73b3a7b8d1afcc06bc43">fill_colmap</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, sl, sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab28531ff9e94cc96ad02fc6f64e96d18">map_col_to_list0_field</a>[<a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>], <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>, <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                            <a class="code" href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a>, 1);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">  181</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">await_reference_mb_row</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<span class="keyword">const</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="struct_h264_ref.html">H264Ref</a> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                   <span class="keywordtype">int</span> mb_y)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">int</span> ref_field         = <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;reference - 1;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">int</span> ref_field_picture = <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;parent-&gt;field_picture;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">int</span> ref_height        = 16 * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_height &gt;&gt; ref_field_picture;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (!HAVE_THREADS || !(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>))</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">/* FIXME: It can be safe to access mb stuff</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">     * even if pixels aren&#39;t deblocked yet. */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(&amp;<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;parent-&gt;tf,</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                             <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(16 * mb_y &gt;&gt; ref_field_picture,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                   ref_height - 1),</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                             ref_field_picture &amp;&amp; ref_field);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="h264__direct_8c.html#a5c5cac14c3cb93cf5e64564e8ae6b3e3">  200</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#a5c5cac14c3cb93cf5e64564e8ae6b3e3">pred_spatial_direct_motion</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<span class="keyword">const</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                       <span class="keywordtype">int</span> *mb_type)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">int</span> b8_stride = 2;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">int</span> b4_stride = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;b_stride;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">int</span> mb_xy = sl-&gt;<a class="code" href="struct_h264_slice_context.html#aec4803c68b3153315c802f3c4c5a856b">mb_xy</a>, mb_y = sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">int</span> mb_type_col[2];</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keyword">const</span> int16_t (*l1mv0)[2], (*l1mv1)[2];</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keyword">const</span> int8_t *l1ref0, *l1ref1;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> is_b8x8 = <a class="code" href="mpegutils_8h.html#ab8c5b21d0da9f13a58e04abc7c612a70">IS_8X8</a>(*mb_type);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sub_mb_type = <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">int</span> i8, i4;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[2];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[2];</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    assert(sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> &amp; 3);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">await_reference_mb_row</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0],</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                           sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> + !!<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type));</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">#define MB_TYPE_16x16_OR_INTRA (MB_TYPE_16x16 | MB_TYPE_INTRA4x4 | \</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">                                MB_TYPE_INTRA16x16 | MB_TYPE_INTRA_PCM)</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">/* ref = min(neighbors) */</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> = 0; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a> &lt; 2; <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>++) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordtype">int</span> left_ref     = sl-&gt;ref_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0] - 1];</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <span class="keywordtype">int</span> top_ref      = sl-&gt;ref_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0] - 8];</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordtype">int</span> refc         = sl-&gt;ref_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0] - 8 + 4];</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keyword">const</span> int16_t *<a class="code" href="writing__filters_8txt.html#ac6aa34a4d5a2730cb4a78b73983c6398">C</a> = sl-&gt;mv_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]  - 8 + 4];</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span> (refc == <a class="code" href="h264dec_8h.html#a9ff34a3861518bd7b108ade43f3af1e7">PART_NOT_AVAILABLE</a>) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            refc = sl-&gt;ref_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0] - 8 - 1];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="writing__filters_8txt.html#ac6aa34a4d5a2730cb4a78b73983c6398">C</a>    = sl-&gt;mv_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]  - 8 - 1];</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = <a class="code" href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a>((<span class="keywordtype">unsigned</span>)left_ref,</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                           (<span class="keywordtype">unsigned</span>)top_ref,</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                           (<span class="keywordtype">unsigned</span>)refc);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] &gt;= 0) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">/* This is just pred_motion() but with the cases removed that</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">             * cannot happen for direct blocks. */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keyword">const</span> int16_t *<span class="keyword">const</span> <a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a> = sl-&gt;mv_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0] - 1];</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="keyword">const</span> int16_t *<span class="keyword">const</span> <a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a> = sl-&gt;mv_cache[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0] - 8];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordtype">int</span> match_count = (left_ref == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]) +</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                              (top_ref  == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]) +</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                              (refc     == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (match_count &gt; 1) { <span class="comment">// most common</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(<a class="code" href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a>(<a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>[0], <a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>[0], <a class="code" href="writing__filters_8txt.html#ac6aa34a4d5a2730cb4a78b73983c6398">C</a>[0]),</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                      <a class="code" href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a>(<a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>[1], <a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>[1], <a class="code" href="writing__filters_8txt.html#ac6aa34a4d5a2730cb4a78b73983c6398">C</a>[1]));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                assert(match_count == 1);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">if</span> (left_ref == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>])</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = <a class="code" href="intreadwrite_8h.html#aac5f469c36afd41f4635ae16ef99aaeb">AV_RN32A</a>(<a class="code" href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (top_ref == <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>])</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = <a class="code" href="intreadwrite_8h.html#aac5f469c36afd41f4635ae16ef99aaeb">AV_RN32A</a>(<a class="code" href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = <a class="code" href="intreadwrite_8h.html#aac5f469c36afd41f4635ae16ef99aaeb">AV_RN32A</a>(<a class="code" href="writing__filters_8txt.html#ac6aa34a4d5a2730cb4a78b73983c6398">C</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] &lt; (sl-&gt;<a class="code" href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">ref_count</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] &lt;&lt; !!<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)));</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = ~(<a class="code" href="mpegutils_8h.html#ac8cac1ccad39ddfc2ac2914b11faebf8">MB_TYPE_L0</a> &lt;&lt; (2 * <a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>));</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>]  = 0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[<a class="code" href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a>] = -1;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">if</span> (!is_b8x8)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                *mb_type &amp;= <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            sub_mb_type &amp;= <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0] &lt; 0 &amp;&amp; <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1] &lt; 0) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0] = <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1] = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> (!is_b8x8)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            *mb_type |= <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        sub_mb_type |= <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (!(is_b8x8 | <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[0] | <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[1])) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0], 1);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1], 1);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, 0, 4);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, 0, 4);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        *mb_type = (*mb_type &amp; ~(<a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> | <a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a> |</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                 <a class="code" href="mpegutils_8h.html#acfcf00a5345306d113725407b2a85819">MB_TYPE_P1L0</a> | <a class="code" href="mpegutils_8h.html#add0e64565de0e508b1fdf5602da614e4">MB_TYPE_P1L1</a>)) |</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                   <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy])) { <span class="comment">// AFL/AFR/FR/FL -&gt; AFL/FL</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type)) {                    <span class="comment">//     AFR/FR    -&gt; AFL/FL</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            mb_y  = (sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1) + sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            mb_xy = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> +</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    ((sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1) + sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a>) * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            b8_stride = 0;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            mb_y  += sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">col_fieldoff</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            mb_xy += <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride * sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">col_fieldoff</a>; <span class="comment">// non-zero for FL -&gt; FL &amp; differ parity</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">goto</span> single_col;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    } <span class="keywordflow">else</span> {                                             <span class="comment">// AFL/AFR/FR/FL -&gt; AFR/FR</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type)) {                   <span class="comment">// AFL       /FL -&gt; AFR/FR</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            mb_y           =  sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            mb_xy          = (sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1) * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride + sl-&gt;<a class="code" href="struct_h264_slice_context.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            mb_type_col[0] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy];</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            mb_type_col[1] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            b8_stride      = 2 + 4 * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            b4_stride     *= 6;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type_col[0]) !=</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type_col[1])) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                mb_type_col[0] &amp;= ~<a class="code" href="mpegutils_8h.html#abbac64c154ced42f44fdcf6398e4611f">MB_TYPE_INTERLACED</a>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                mb_type_col[1] &amp;= ~<a class="code" href="mpegutils_8h.html#abbac64c154ced42f44fdcf6398e4611f">MB_TYPE_INTERLACED</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            sub_mb_type |= <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>; <span class="comment">/* B_SUB_8x8 */</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <span class="keywordflow">if</span> ((mb_type_col[0] &amp; <a class="code" href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a>) &amp;&amp;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                (mb_type_col[1] &amp; <a class="code" href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a>) &amp;&amp;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                !is_b8x8) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;  <span class="comment">/* B_16x8 */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        } <span class="keywordflow">else</span> {                                         <span class="comment">//     AFR/FR    -&gt; AFR/FR</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;single_col:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            mb_type_col[0] =</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            mb_type_col[1] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy];</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            sub_mb_type |= <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>; <span class="comment">/* B_SUB_8x8 */</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keywordflow">if</span> (!is_b8x8 &amp;&amp; (mb_type_col[0] &amp; <a class="code" href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a>)) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>; <span class="comment">/* B_16x16 */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_b8x8 &amp;&amp;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                       (mb_type_col[0] &amp; (<a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a>))) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a> |</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                            (mb_type_col[0] &amp; (<a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a>));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;ps.sps-&gt;direct_8x8_inference_flag) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    <span class="comment">/* FIXME: Save sub mb types from previous frames (or derive</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">                     * from MVs) so we know exactly what block size to use. */</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    sub_mb_type += (<a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> - <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a>); <span class="comment">/* B_SUB_4x4 */</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">await_reference_mb_row</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0], mb_y);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    l1mv0  = (<span class="keywordtype">void</span>*)&amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[0][<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb2b_xy[mb_xy]];</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    l1mv1  = (<span class="keywordtype">void</span>*)&amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[1][<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb2b_xy[mb_xy]];</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    l1ref0 = &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[0][4 * mb_xy];</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    l1ref1 = &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[1][4 * mb_xy];</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (!b8_stride) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            l1ref0 += 2;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            l1ref1 += 2;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            l1mv0  += 2 * b4_stride;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            l1mv1  += 2 * b4_stride;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        }</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type) != <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type_col[0])) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">for</span> (i8 = 0; i8 &lt; 4; i8++) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordtype">int</span> x8  = i8 &amp; 1;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordtype">int</span> y8  = i8 &gt;&gt; 1;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordtype">int</span> xy8 = x8     + y8 * b8_stride;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordtype">int</span> xy4 = x8 * 3 + y8 * b4_stride;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">if</span> (is_b8x8 &amp;&amp; !<a class="code" href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a>(sl-&gt;sub_mb_type[i8]))</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            sl-&gt;sub_mb_type[i8] = sub_mb_type;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                           (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0], 1);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                           (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1], 1);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type_col[y8]) &amp;&amp; !sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a> &amp;&amp;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                ((l1ref0[xy8] == 0 &amp;&amp;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                  <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv0[xy4][0]) &lt;= 1 &amp;&amp;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                  <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv0[xy4][1]) &lt;= 1) ||</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                 (l1ref0[xy8] &lt; 0 &amp;&amp;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                  l1ref1[xy8] == 0 &amp;&amp;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                  <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv1[xy4][0]) &lt;= 1 &amp;&amp;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                  <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv1[xy4][1]) &lt;= 1))) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> =</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = 0;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0] &gt; 0)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[0];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1] &gt; 0)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[1];</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                n++;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[0];</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[1];</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, 4);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, 4);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">if</span> (!is_b8x8 &amp;&amp; !(n &amp; 3))</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            *mb_type = (*mb_type &amp; ~(<a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> | <a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a> |</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                     <a class="code" href="mpegutils_8h.html#acfcf00a5345306d113725407b2a85819">MB_TYPE_P1L0</a> | <a class="code" href="mpegutils_8h.html#add0e64565de0e508b1fdf5602da614e4">MB_TYPE_P1L1</a>)) |</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                       <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#aa7e2fc946da7d2037cac3aef1ed5c194">IS_16X16</a>(*mb_type)) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0], 1);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1], 1);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type_col[0]) &amp;&amp; !sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a> &amp;&amp;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            ((l1ref0[0] == 0 &amp;&amp;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;              <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv0[0][0]) &lt;= 1 &amp;&amp;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;              <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv0[0][1]) &lt;= 1) ||</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;             (l1ref0[0] &lt; 0 &amp;&amp; !l1ref1[0] &amp;&amp;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;              <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv1[0][0]) &lt;= 1 &amp;&amp;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;              <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(l1mv1[0][1]) &lt;= 1 &amp;&amp;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;              <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;x264_build &gt; 33<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>))) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = 0;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0] &gt; 0)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[0];</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1] &gt; 0)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[1];</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[0];</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a> = <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[1];</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, <a class="code" href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a>, 4);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, <a class="code" href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a>, 4);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">for</span> (i8 = 0; i8 &lt; 4; i8++) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> x8 = i8 &amp; 1;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> y8 = i8 &gt;&gt; 1;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;            <span class="keywordflow">if</span> (is_b8x8 &amp;&amp; !<a class="code" href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a>(sl-&gt;sub_mb_type[i8]))</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            sl-&gt;sub_mb_type[i8] = sub_mb_type;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[0], 4);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, <a class="code" href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a>[1], 4);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                           (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0], 1);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                           (<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>)<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1], 1);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            assert(b8_stride == 2);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="comment">/* col_zero_flag */</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type_col[0]) &amp;&amp; !sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a80b4dc0bced803a4daef543a4c23c791">long_ref</a> &amp;&amp;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                (l1ref0[i8] == 0 ||</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                 (l1ref0[i8] &lt; 0 &amp;&amp;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                  l1ref1[i8] == 0 &amp;&amp;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                  <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;x264_build &gt; 33<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>))) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                <span class="keyword">const</span> int16_t (*l1mv)[2] = l1ref0[i8] == 0 ? l1mv0 : l1mv1;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a212a3cf22dab1c07ce1482996ad28481">IS_SUB_8X8</a>(sub_mb_type)) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    <span class="keyword">const</span> int16_t *mv_col = l1mv[x8 * 3 + y8 * 3 * b4_stride];</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(mv_col[0]) &lt;= 1 &amp;&amp; <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(mv_col[1]) &lt;= 1) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0] == 0)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                           8, 0, 4);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1] == 0)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2,</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                           8, 0, 4);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                        n += 4;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    <span class="keywordtype">int</span> m = 0;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    <span class="keywordflow">for</span> (i4 = 0; i4 &lt; 4; i4++) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                        <span class="keyword">const</span> int16_t *mv_col = l1mv[x8 * 2 + (i4 &amp; 1) +</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                                     (y8 * 2 + (i4 &gt;&gt; 1)) * b4_stride];</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(mv_col[0]) &lt;= 1 &amp;&amp; <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(mv_col[1]) &lt;= 1) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[0] == 0)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                <a class="code" href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a>(sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4 + i4]]);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>[1] == 0)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                <a class="code" href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a>(sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4 + i4]]);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                            m++;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                    <span class="keywordflow">if</span> (!(m &amp; 3))</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                        sl-&gt;sub_mb_type[i8] += <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> - <a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    n += m;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">if</span> (!is_b8x8 &amp;&amp; !(n &amp; 15))</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            *mb_type = (*mb_type &amp; ~(<a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> | <a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a> |</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                     <a class="code" href="mpegutils_8h.html#acfcf00a5345306d113725407b2a85819">MB_TYPE_P1L0</a> | <a class="code" href="mpegutils_8h.html#add0e64565de0e508b1fdf5602da614e4">MB_TYPE_P1L1</a>)) |</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                       <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="h264__direct_8c.html#a80227946174bef6fd4aaddf2c2bb625f">  487</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#a80227946174bef6fd4aaddf2c2bb625f">pred_temp_direct_motion</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<span class="keyword">const</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                    <span class="keywordtype">int</span> *mb_type)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">int</span> b8_stride = 2;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">int</span> b4_stride = <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;b_stride;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordtype">int</span> mb_xy = sl-&gt;<a class="code" href="struct_h264_slice_context.html#aec4803c68b3153315c802f3c4c5a856b">mb_xy</a>, mb_y = sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">int</span> mb_type_col[2];</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keyword">const</span> int16_t (*l1mv0)[2], (*l1mv1)[2];</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keyword">const</span> int8_t *l1ref0, *l1ref1;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> is_b8x8 = <a class="code" href="mpegutils_8h.html#ab8c5b21d0da9f13a58e04abc7c612a70">IS_8X8</a>(*mb_type);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sub_mb_type;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordtype">int</span> i8, i4;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    assert(sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">reference</a> &amp; 3);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">await_reference_mb_row</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0],</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                           sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> + !!<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy])) { <span class="comment">// AFL/AFR/FR/FL -&gt; AFL/FL</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type)) {                    <span class="comment">//     AFR/FR    -&gt; AFL/FL</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            mb_y  = (sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1) + sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            mb_xy = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> +</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                    ((sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1) + sl-&gt;<a class="code" href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">col_parity</a>) * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            b8_stride = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            mb_y  += sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">col_fieldoff</a>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            mb_xy += <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride * sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">col_fieldoff</a>; <span class="comment">// non-zero for FL -&gt; FL &amp; differ parity</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">goto</span> single_col;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    } <span class="keywordflow">else</span> {                                        <span class="comment">// AFL/AFR/FR/FL -&gt; AFR/FR</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type)) {              <span class="comment">// AFL       /FL -&gt; AFR/FR</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            mb_y           = sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            mb_xy          = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a4dcbf25f47047eca66ffaefb89a69401">mb_x</a> + (sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; ~1) * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            mb_type_col[0] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy];</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            mb_type_col[1] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride];</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            b8_stride      = 2 + 4 * <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            b4_stride     *= 6;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type_col[0]) !=</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type_col[1])) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                mb_type_col[0] &amp;= ~<a class="code" href="mpegutils_8h.html#abbac64c154ced42f44fdcf6398e4611f">MB_TYPE_INTERLACED</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                mb_type_col[1] &amp;= ~<a class="code" href="mpegutils_8h.html#abbac64c154ced42f44fdcf6398e4611f">MB_TYPE_INTERLACED</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            sub_mb_type = <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#ad7bdf039c387862b3cec5b04766a2b69">MB_TYPE_P0L0</a> | <a class="code" href="mpegutils_8h.html#a0425380a8fce9552a1698fe82630d469">MB_TYPE_P0L1</a> |</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                          <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;                  <span class="comment">/* B_SUB_8x8 */</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">if</span> ((mb_type_col[0] &amp; <a class="code" href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a>) &amp;&amp;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                (mb_type_col[1] &amp; <a class="code" href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a>) &amp;&amp;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                !is_b8x8) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a> |</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                            <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;                <span class="comment">/* B_16x8 */</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> | <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        } <span class="keywordflow">else</span> {                                    <span class="comment">//     AFR/FR    -&gt; AFR/FR</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;single_col:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            mb_type_col[0]     =</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                mb_type_col[1] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">mb_type</a>[mb_xy];</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            sub_mb_type = <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#ad7bdf039c387862b3cec5b04766a2b69">MB_TYPE_P0L0</a> | <a class="code" href="mpegutils_8h.html#a0425380a8fce9552a1698fe82630d469">MB_TYPE_P0L1</a> |</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                          <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;                  <span class="comment">/* B_SUB_8x8 */</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">if</span> (!is_b8x8 &amp;&amp; (mb_type_col[0] &amp; <a class="code" href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a>)) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a> | <a class="code" href="mpegutils_8h.html#ad7bdf039c387862b3cec5b04766a2b69">MB_TYPE_P0L0</a> | <a class="code" href="mpegutils_8h.html#a0425380a8fce9552a1698fe82630d469">MB_TYPE_P0L1</a> |</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                            <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;                <span class="comment">/* B_16x16 */</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_b8x8 &amp;&amp;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                       (mb_type_col[0] &amp; (<a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a>))) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a> | <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a> |</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                            (mb_type_col[0] &amp; (<a class="code" href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a> | <a class="code" href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a>));</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;ps.sps-&gt;direct_8x8_inference_flag) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    <span class="comment">/* FIXME: save sub mb types from previous frames (or derive</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">                     * from MVs) so we know exactly what block size to use */</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    sub_mb_type = <a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> | <a class="code" href="mpegutils_8h.html#ad7bdf039c387862b3cec5b04766a2b69">MB_TYPE_P0L0</a> | <a class="code" href="mpegutils_8h.html#a0425380a8fce9552a1698fe82630d469">MB_TYPE_P0L1</a> |</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                                  <a class="code" href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a>;          <span class="comment">/* B_SUB_4x4 */</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                *mb_type |= <a class="code" href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a> | <a class="code" href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">await_reference_mb_row</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0], mb_y);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    l1mv0  = (<span class="keywordtype">void</span>*)&amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[0][<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb2b_xy[mb_xy]];</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    l1mv1  = (<span class="keywordtype">void</span>*)&amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5b7ab5627aa627e1a9938e4707316ba8">motion_val</a>[1][<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;mb2b_xy[mb_xy]];</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    l1ref0 = &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[0][4 * mb_xy];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    l1ref1 = &amp;sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#a5ba249769b6822015a3119eaf630b911">ref_index</a>[1][4 * mb_xy];</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (!b8_stride) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            l1ref0 += 2;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            l1ref1 += 2;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            l1mv0  += 2 * b4_stride;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            l1mv1  += 2 * b4_stride;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    }</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> *map_col_to_list0[2] = { sl-&gt;<a class="code" href="struct_h264_slice_context.html#a783d02faef3f89af863d0b5c4c60c4b1">map_col_to_list0</a>[0],</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                           sl-&gt;<a class="code" href="struct_h264_slice_context.html#a783d02faef3f89af863d0b5c4c60c4b1">map_col_to_list0</a>[1] };</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> *dist_scale_factor = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a3a065739b3fb2d039d0053d75b582612">dist_scale_factor</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordtype">int</span> ref_offset;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>) &amp;&amp; <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type)) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            map_col_to_list0[0] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab28531ff9e94cc96ad02fc6f64e96d18">map_col_to_list0_field</a>[sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1][0];</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            map_col_to_list0[1] = sl-&gt;<a class="code" href="struct_h264_slice_context.html#ab28531ff9e94cc96ad02fc6f64e96d18">map_col_to_list0_field</a>[sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1][1];</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            dist_scale_factor   = sl-&gt;<a class="code" href="struct_h264_slice_context.html#a187006167d123abe26b073f46d9a6e57">dist_scale_factor_field</a>[sl-&gt;<a class="code" href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">mb_y</a> &amp; 1];</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        ref_offset = (sl-&gt;<a class="code" href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">ref_list</a>[1][0].<a class="code" href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">parent</a>-&gt;<a class="code" href="struct_h264_picture.html#ac8aa9307c1f4519f99ab9b562e00cbbf">mbaff</a> &lt;&lt; 4) &amp; (mb_type_col[0] &gt;&gt; 3);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type) != <a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(mb_type_col[0])) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordtype">int</span> y_shift = 2 * !<a class="code" href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a>(*mb_type);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            assert(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>-&gt;ps.sps-&gt;direct_8x8_inference_flag);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">for</span> (i8 = 0; i8 &lt; 4; i8++) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> x8 = i8 &amp; 1;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> y8 = i8 &gt;&gt; 1;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordtype">int</span> ref0, scale;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                <span class="keyword">const</span> int16_t (*l1mv)[2] = l1mv0;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">if</span> (is_b8x8 &amp;&amp; !<a class="code" href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a>(sl-&gt;sub_mb_type[i8]))</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                sl-&gt;sub_mb_type[i8] = sub_mb_type;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 1);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type_col[y8])) {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 1);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 4);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 4);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                ref0 = l1ref0[x8 + y8 * b8_stride];</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <span class="keywordflow">if</span> (ref0 &gt;= 0)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                    ref0 = map_col_to_list0[0][ref0 + ref_offset];</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                    ref0 = map_col_to_list0[1][l1ref1[x8 + y8 * b8_stride] +</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                               ref_offset];</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    l1mv = l1mv1;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                scale = dist_scale_factor[ref0];</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                               ref0, 1);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    <span class="keyword">const</span> int16_t *mv_col = l1mv[x8 * 3 + y8 * b4_stride];</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordtype">int</span> my_col            = (mv_col[1] * (1 &lt;&lt; y_shift)) / 2;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                    <span class="keywordtype">int</span> mx                = (scale * mv_col[0] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                    <span class="keywordtype">int</span> my                = (scale * my_col    + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                   <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mx, my), 4);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                   <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mx - mv_col[0], my - my_col), 4);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="comment">/* one-to-one mv scaling */</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#aa7e2fc946da7d2037cac3aef1ed5c194">IS_16X16</a>(*mb_type)) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, mv0, mv1;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, 0, 1);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type_col[0])) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> = mv0 = mv1 = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> ref0 = l1ref0[0] &gt;= 0 ? map_col_to_list0[0][l1ref0[0] + ref_offset]</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                                                : map_col_to_list0[1][l1ref1[0] + ref_offset];</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> scale = dist_scale_factor[ref0];</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="keyword">const</span> int16_t *mv_col = l1ref0[0] &gt;= 0 ? l1mv0[0] : l1mv1[0];</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordtype">int</span> mv_l0[2];</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                mv_l0[0] = (scale * mv_col[0] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                mv_l0[1] = (scale * mv_col[1] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>      = ref0;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                mv0      = <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mv_l0[0], mv_l0[1]);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                mv1      = <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mv_l0[0] - mv_col[0], mv_l0[1] - mv_col[1]);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, 1);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, mv0, 4);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[0]], 4, 4, 8, mv1, 4);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">for</span> (i8 = 0; i8 &lt; 4; i8++) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> x8 = i8 &amp; 1;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> y8 = i8 &gt;&gt; 1;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="keywordtype">int</span> ref0, scale;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keyword">const</span> int16_t (*l1mv)[2] = l1mv0;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="keywordflow">if</span> (is_b8x8 &amp;&amp; !<a class="code" href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a>(sl-&gt;sub_mb_type[i8]))</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                sl-&gt;sub_mb_type[i8] = sub_mb_type;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 1);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a>(mb_type_col[0])) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 1);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 4);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8, 0, 4);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                assert(b8_stride == 2);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                ref0 = l1ref0[i8];</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="keywordflow">if</span> (ref0 &gt;= 0)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                    ref0 = map_col_to_list0[0][ref0 + ref_offset];</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                    ref0 = map_col_to_list0[1][l1ref1[i8] + ref_offset];</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                    l1mv = l1mv1;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                scale = dist_scale_factor[ref0];</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;ref_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                               ref0, 1);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="mpegutils_8h.html#a212a3cf22dab1c07ce1482996ad28481">IS_SUB_8X8</a>(sub_mb_type)) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                    <span class="keyword">const</span> int16_t *mv_col = l1mv[x8 * 3 + y8 * 3 * b4_stride];</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                    <span class="keywordtype">int</span> mx                = (scale * mv_col[0] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                    <span class="keywordtype">int</span> my                = (scale * mv_col[1] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                   <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mx, my), 4);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                    <a class="code" href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a>(&amp;sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4]], 2, 2, 8,</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                   <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mx - mv_col[0], my - mv_col[1]), 4);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                    <span class="keywordflow">for</span> (i4 = 0; i4 &lt; 4; i4++) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                        <span class="keyword">const</span> int16_t *mv_col = l1mv[x8 * 2 + (i4 &amp; 1) +</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                                                     (y8 * 2 + (i4 &gt;&gt; 1)) * b4_stride];</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        int16_t *mv_l0 = sl-&gt;mv_cache[0][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4 + i4]];</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                        mv_l0[0] = (scale * mv_col[0] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        mv_l0[1] = (scale * mv_col[1] + 128) &gt;&gt; 8;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        <a class="code" href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a>(sl-&gt;mv_cache[1][<a class="code" href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a>[i8 * 4 + i4]],</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                 <a class="code" href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a>(mv_l0[0] - mv_col[0],</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                            mv_l0[1] - mv_col[1]));</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="h264dec_8h.html#ad2c2d493e32587d7fff176448abc5a62">  721</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="h264__direct_8c.html#ad2c2d493e32587d7fff176448abc5a62">ff_h264_pred_direct_motion</a>(<span class="keyword">const</span> <a class="code" href="struct_h264_context.html">H264Context</a> *<span class="keyword">const</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="struct_h264_slice_context.html">H264SliceContext</a> *sl,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                <span class="keywordtype">int</span> *mb_type)</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">if</span> (sl-&gt;<a class="code" href="struct_h264_slice_context.html#a9ad3dcddcd056cd92a0b18bd10339370">direct_spatial_mv_pred</a>)</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="h264__direct_8c.html#a5c5cac14c3cb93cf5e64564e8ae6b3e3">pred_spatial_direct_motion</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, sl, mb_type);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <a class="code" href="h264__direct_8c.html#a80227946174bef6fd4aaddf2c2bb625f">pred_temp_direct_motion</a>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, sl, mb_type);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="ah264__direct_8c_html_a60869bc56a8663ac15f5d5b7b2e24e0d"><div class="ttname"><a href="h264__direct_8c.html#a60869bc56a8663ac15f5d5b7b2e24e0d">await_reference_mb_row</a></div><div class="ttdeci">static void await_reference_mb_row(const H264Context *const h, H264Ref *ref, int mb_y)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00181">h264_direct.c:181</a></div></div>
<div class="ttc" id="ampegutils_8h_html_afe9c6afe4f63cea62651c83a65644ba3"><div class="ttname"><a href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a></div><div class="ttdeci">#define PICT_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00039">mpegutils.h:39</a></div></div>
<div class="ttc" id="astruct_h264_picture_html"><div class="ttname"><a href="struct_h264_picture.html">H264Picture</a></div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00128">h264dec.h:128</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ab8c5b21d0da9f13a58e04abc7c612a70"><div class="ttname"><a href="mpegutils_8h.html#ab8c5b21d0da9f13a58e04abc7c612a70">IS_8X8</a></div><div class="ttdeci">#define IS_8X8(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00089">mpegutils.h:89</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ac8cac1ccad39ddfc2ac2914b11faebf8"><div class="ttname"><a href="mpegutils_8h.html#ac8cac1ccad39ddfc2ac2914b11faebf8">MB_TYPE_L0</a></div><div class="ttdeci">#define MB_TYPE_L0</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00067">mpegutils.h:67</a></div></div>
<div class="ttc" id="aregdef_8h_html_ab2c359e6c325062d33a4152752d8a820"><div class="ttname"><a href="regdef_8h.html#ab2c359e6c325062d33a4152752d8a820">td</a></div><div class="ttdeci">#define td</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00070">regdef.h:70</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a5ba249769b6822015a3119eaf630b911"><div class="ttname"><a href="struct_h264_picture.html#a5ba249769b6822015a3119eaf630b911">H264Picture::ref_index</a></div><div class="ttdeci">int8_t * ref_index[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00145">h264dec.h:145</a></div></div>
<div class="ttc" id="astruct_h264_ref_html_a67ab390351720b9b89cd77cbb2825e2f"><div class="ttname"><a href="struct_h264_ref.html#a67ab390351720b9b89cd77cbb2825e2f">H264Ref::parent</a></div><div class="ttdeci">H264Picture * parent</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00180">h264dec.h:180</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a08d7ad8fce1e049cb3e98c1254d2adb2"><div class="ttname"><a href="struct_h264_picture.html#a08d7ad8fce1e049cb3e98c1254d2adb2">H264Picture::ref_count</a></div><div class="ttdeci">int ref_count[2][2]</div><div class="ttdoc">number of entries in ref_poc (FIXME need per slice)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00156">h264dec.h:156</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_aaa21cecff3d0b95715b2f173859997e2"><div class="ttname"><a href="struct_h264_picture.html#aaa21cecff3d0b95715b2f173859997e2">H264Picture::field_poc</a></div><div class="ttdeci">int field_poc[2]</div><div class="ttdoc">top/bottom POC</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00147">h264dec.h:147</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="ampegutils_8h_html_aa52ac304781a69b1b1651a9fbbc465a6"><div class="ttname"><a href="mpegutils_8h.html#aa52ac304781a69b1b1651a9fbbc465a6">MB_TYPE_16x8</a></div><div class="ttdeci">#define MB_TYPE_16x8</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00055">mpegutils.h:55</a></div></div>
<div class="ttc" id="alibavcodec_24xm_8c_html_a19c59215a57cc549287f6d8481937b12"><div class="ttname"><a href="libavcodec_24xm_8c.html#a19c59215a57cc549287f6d8481937b12">mv</a></div><div class="ttdeci">static const int8_t mv[256][2]</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_24xm_8c_source.html#l00077">4xm.c:77</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a2137edc480fe7b65df1c03f0b0fbc516"><div class="ttname"><a href="struct_h264_slice_context.html#a2137edc480fe7b65df1c03f0b0fbc516">H264SliceContext::col_parity</a></div><div class="ttdeci">int col_parity</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00258">h264dec.h:258</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="ainput_8c_html_ad6cdb6a14abe3eab42eaaadc93409aec"><div class="ttname"><a href="input_8c.html#ad6cdb6a14abe3eab42eaaadc93409aec">b</a></div><div class="ttdeci">#define b</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00041">input.c:41</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a9ad3dcddcd056cd92a0b18bd10339370"><div class="ttname"><a href="struct_h264_slice_context.html#a9ad3dcddcd056cd92a0b18bd10339370">H264SliceContext::direct_spatial_mv_pred</a></div><div class="ttdeci">int direct_spatial_mv_pred</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00257">h264dec.h:257</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ac03a9d42dfb3c1cb8ef0512dde22a723"><div class="ttname"><a href="mpegutils_8h.html#ac03a9d42dfb3c1cb8ef0512dde22a723">MB_TYPE_16x16</a></div><div class="ttdeci">#define MB_TYPE_16x16</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00054">mpegutils.h:54</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ad823c61c62f9f3563c62ab33feec902d"><div class="ttname"><a href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a></div><div class="ttdeci">#define PICT_BOTTOM_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00038">mpegutils.h:38</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a83fe05faaabe74423b69af94ef8bfd59"><div class="ttname"><a href="intreadwrite_8h.html#a83fe05faaabe74423b69af94ef8bfd59">AV_WN32A</a></div><div class="ttdeci">#define AV_WN32A(p, v)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00538">intreadwrite.h:538</a></div></div>
<div class="ttc" id="ampegutils_8h_html"><div class="ttname"><a href="mpegutils_8h.html">mpegutils.h</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_ab66ca23680e500f1f51b1608e8a5419a"><div class="ttname"><a href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before ff_thread_await_progress() has been called on them. reget_buffer() and buffer age optimizations no longer work. *The contents of buffers must not be written to after ff_thread_report_progress() has been called on them. This includes draw_edges(). Porting codecs to frame threading</div></div>
<div class="ttc" id="aarm_2vp56__arith_8h_html_a3d7d1b6b25e26030cf09f680a1aa0e81"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a3d7d1b6b25e26030cf09f680a1aa0e81">A</a></div><div class="ttdeci">#define A(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00028">vp56_arith.h:28</a></div></div>
<div class="ttc" id="astruct_h264_ref_html"><div class="ttname"><a href="struct_h264_ref.html">H264Ref</a></div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00172">h264dec.h:172</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_aa86aa0d0bd703b70648f66e6163c2f5f"><div class="ttname"><a href="struct_h264_slice_context.html#aa86aa0d0bd703b70648f66e6163c2f5f">H264SliceContext::mb_y</a></div><div class="ttdeci">int mb_y</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00236">h264dec.h:236</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_aec4803c68b3153315c802f3c4c5a856b"><div class="ttname"><a href="struct_h264_slice_context.html#aec4803c68b3153315c802f3c4c5a856b">H264SliceContext::mb_xy</a></div><div class="ttdeci">int mb_xy</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00237">h264dec.h:237</a></div></div>
<div class="ttc" id="aarm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_a45c0b582c95445115841635f90e9eca5"><div class="ttname"><a href="h264__direct_8c.html#a45c0b582c95445115841635f90e9eca5">get_scale_factor</a></div><div class="ttdeci">static int get_scale_factor(H264SliceContext *sl, int poc, int poc1, int i)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00038">h264_direct.c:38</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_a5c5cac14c3cb93cf5e64564e8ae6b3e3"><div class="ttname"><a href="h264__direct_8c.html#a5c5cac14c3cb93cf5e64564e8ae6b3e3">pred_spatial_direct_motion</a></div><div class="ttdeci">static void pred_spatial_direct_motion(const H264Context *const h, H264SliceContext *sl, int *mb_type)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00200">h264_direct.c:200</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_ab28531ff9e94cc96ad02fc6f64e96d18"><div class="ttname"><a href="struct_h264_slice_context.html#ab28531ff9e94cc96ad02fc6f64e96d18">H264SliceContext::map_col_to_list0_field</a></div><div class="ttdeci">int map_col_to_list0_field[2][2][16+32]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00268">h264dec.h:268</a></div></div>
<div class="ttc" id="acommon_8h_html_af6afbffa12562b076c34055bdcb3ad65"><div class="ttname"><a href="common_8h.html#af6afbffa12562b076c34055bdcb3ad65">FFMIN3</a></div><div class="ttdeci">#define FFMIN3(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00097">common.h:97</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html"><div class="ttname"><a href="struct_h264_slice_context.html">H264SliceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00183">h264dec.h:183</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ac6aa34a4d5a2730cb4a78b73983c6398"><div class="ttname"><a href="writing__filters_8txt.html#ac6aa34a4d5a2730cb4a78b73983c6398">C</a></div><div class="ttdeci">s EdgeDetect Foobar g libavfilter vf_edgedetect c libavfilter vf_foobar c edit libavfilter and add an entry for foobar following the pattern of the other filters edit libavfilter allfilters and add an entry for foobar following the pattern of the other filters configure make j&lt; whatever &gt; ffmpeg ffmpeg i you should get a foobar png with Lena edge detected That s your new playground is ready Some little details about what s going which in turn will define variables for the build system and the C</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00035">writing_filters.txt:58</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="ampegutils_8h_html_acfcf00a5345306d113725407b2a85819"><div class="ttname"><a href="mpegutils_8h.html#acfcf00a5345306d113725407b2a85819">MB_TYPE_P1L0</a></div><div class="ttdeci">#define MB_TYPE_P1L0</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00064">mpegutils.h:64</a></div></div>
<div class="ttc" id="alzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_ae53f785906fb2fd9993189fc2f2012d1"><div class="ttname"><a href="struct_h264_slice_context.html#ae53f785906fb2fd9993189fc2f2012d1">H264SliceContext::ref_count</a></div><div class="ttdeci">unsigned int ref_count[2]</div><div class="ttdoc">counts frames or fields, depending on current mb mode</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00273">h264dec.h:273</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a80b4dc0bced803a4daef543a4c23c791"><div class="ttname"><a href="struct_h264_picture.html#a80b4dc0bced803a4daef543a4c23c791">H264Picture::long_ref</a></div><div class="ttdeci">int long_ref</div><div class="ttdoc">1-&gt;long term reference 0-&gt;short term reference</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00154">h264dec.h:154</a></div></div>
<div class="ttc" id="astruct_h264_context_html"><div class="ttname"><a href="struct_h264_context.html">H264Context</a></div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00343">h264dec.h:343</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a0bba4ee59e0894465c7aaa11c73bcbd5"><div class="ttname"><a href="intreadwrite_8h.html#a0bba4ee59e0894465c7aaa11c73bcbd5">AV_ZERO32</a></div><div class="ttdeci">#define AV_ZERO32(d)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00629">intreadwrite.h:629</a></div></div>
<div class="ttc" id="astruct_h264_context_html_a4ffe05fa45bcaf7998889085ebce941a"><div class="ttname"><a href="struct_h264_context.html#a4ffe05fa45bcaf7998889085ebce941a">H264Context::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00345">h264dec.h:345</a></div></div>
<div class="ttc" id="ah264dec_8h_html_a4c1be7397c3f96d5c7e06bc00d483eea"><div class="ttname"><a href="h264dec_8h.html#a4c1be7397c3f96d5c7e06bc00d483eea">FIELD_PICTURE</a></div><div class="ttdeci">#define FIELD_PICTURE(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00074">h264dec.h:74</a></div></div>
<div class="ttc" id="astruct_h264_ref_html_ac5e10b4e70623d55e5ab972331869786"><div class="ttname"><a href="struct_h264_ref.html#ac5e10b4e70623d55e5ab972331869786">H264Ref::reference</a></div><div class="ttdeci">int reference</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00176">h264dec.h:176</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="ahevcpred__template_8c_html_ad0133753510e9949508f0bb5af9c70d4"><div class="ttname"><a href="hevcpred__template_8c.html#ad0133753510e9949508f0bb5af9c70d4">IS_INTRA</a></div><div class="ttdeci">#define IS_INTRA(x, y)</div></div>
<div class="ttc" id="awriting__filters_8txt_html_aa377c914ccb65b694f52fc4ce9d02f03"><div class="ttname"><a href="writing__filters_8txt.html#aa377c914ccb65b694f52fc4ce9d02f03">field</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this field</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00078">writing_filters.txt:78</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_ad2c2d493e32587d7fff176448abc5a62"><div class="ttname"><a href="h264__direct_8c.html#ad2c2d493e32587d7fff176448abc5a62">ff_h264_pred_direct_motion</a></div><div class="ttdeci">void ff_h264_pred_direct_motion(const H264Context *const h, H264SliceContext *sl, int *mb_type)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00721">h264_direct.c:721</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a412bface69a437c459e5104c75d967c9"><div class="ttname"><a href="mpegutils_8h.html#a412bface69a437c459e5104c75d967c9">MB_TYPE_8x16</a></div><div class="ttdeci">#define MB_TYPE_8x16</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00056">mpegutils.h:56</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a903012300e01b131c6980a8e55752b4c"><div class="ttname"><a href="struct_h264_slice_context.html#a903012300e01b131c6980a8e55752b4c">H264SliceContext::ref_list</a></div><div class="ttdeci">H264Ref ref_list[2][48]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00275">h264dec.h:275</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a163ba4b015c25de7b8dc2132b763cfa3"><div class="ttname"><a href="mpegutils_8h.html#a163ba4b015c25de7b8dc2132b763cfa3">MB_TYPE_8x8</a></div><div class="ttdeci">#define MB_TYPE_8x8</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00057">mpegutils.h:57</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ad7bdf039c387862b3cec5b04766a2b69"><div class="ttname"><a href="mpegutils_8h.html#ad7bdf039c387862b3cec5b04766a2b69">MB_TYPE_P0L0</a></div><div class="ttdeci">#define MB_TYPE_P0L0</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00063">mpegutils.h:63</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a9f17285cc70842ab252aa590b046ecf5"><div class="ttname"><a href="filter__design_8txt.html#a9f17285cc70842ab252aa590b046ecf5">list</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining list</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00025">filter_design.txt:25</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a60ada078b2b0f8fd6504484a68df92e4"><div class="ttname"><a href="mpegutils_8h.html#a60ada078b2b0f8fd6504484a68df92e4">IS_INTERLACED</a></div><div class="ttdeci">#define IS_INTERLACED(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00083">mpegutils.h:83</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a827572dd93bb80a37111b779e071429b"><div class="ttname"><a href="struct_h264_picture.html#a827572dd93bb80a37111b779e071429b">H264Picture::ref_poc</a></div><div class="ttdeci">int ref_poc[2][2][32]</div><div class="ttdoc">POCs of the frames/fields used as reference (FIXME need per slice)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00155">h264dec.h:155</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a5b7ab5627aa627e1a9938e4707316ba8"><div class="ttname"><a href="struct_h264_picture.html#a5b7ab5627aa627e1a9938e4707316ba8">H264Picture::motion_val</a></div><div class="ttdeci">int16_t(*[2] motion_val)[2]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00136">h264dec.h:136</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a0425380a8fce9552a1698fe82630d469"><div class="ttname"><a href="mpegutils_8h.html#a0425380a8fce9552a1698fe82630d469">MB_TYPE_P0L1</a></div><div class="ttdeci">#define MB_TYPE_P0L1</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00065">mpegutils.h:65</a></div></div>
<div class="ttc" id="ah264__ps_8h_html"><div class="ttname"><a href="h264__ps_8h.html">h264_ps.h</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_a705b825e81aa73b3a7b8d1afcc06bc43"><div class="ttname"><a href="h264__direct_8c.html#a705b825e81aa73b3a7b8d1afcc06bc43">fill_colmap</a></div><div class="ttdeci">static void fill_colmap(const H264Context *h, H264SliceContext *sl, int map[2][16+32], int list, int field, int colfield, int mbafi)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00083">h264_direct.c:83</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_ac8aa9307c1f4519f99ab9b562e00cbbf"><div class="ttname"><a href="struct_h264_picture.html#ac8aa9307c1f4519f99ab9b562e00cbbf">H264Picture::mbaff</a></div><div class="ttdeci">int mbaff</div><div class="ttdoc">1 -&gt; MBAFF frame 0-&gt; not MBAFF</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00157">h264dec.h:157</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a0c7c424a1526d27d6d359719c0bea391"><div class="ttname"><a href="struct_h264_slice_context.html#a0c7c424a1526d27d6d359719c0bea391">H264SliceContext::list_count</a></div><div class="ttdeci">unsigned int list_count</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00274">h264dec.h:274</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a4dcbf25f47047eca66ffaefb89a69401"><div class="ttname"><a href="struct_h264_slice_context.html#a4dcbf25f47047eca66ffaefb89a69401">H264SliceContext::mb_x</a></div><div class="ttdeci">int mb_x</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00236">h264dec.h:236</a></div></div>
<div class="ttc" id="arectangle_8h_html"><div class="ttname"><a href="rectangle_8h.html">rectangle.h</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_a0cd0942db98ece2d9390787b87f4fd55"><div class="ttname"><a href="h264__direct_8c.html#a0cd0942db98ece2d9390787b87f4fd55">ff_h264_direct_ref_list_init</a></div><div class="ttdeci">void ff_h264_direct_ref_list_init(const H264Context *const h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00121">h264_direct.c:121</a></div></div>
<div class="ttc" id="ampegutils_8h_html_abbac64c154ced42f44fdcf6398e4611f"><div class="ttname"><a href="mpegutils_8h.html#abbac64c154ced42f44fdcf6398e4611f">MB_TYPE_INTERLACED</a></div><div class="ttdeci">#define MB_TYPE_INTERLACED</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00058">mpegutils.h:58</a></div></div>
<div class="ttc" id="aundefined_8txt_html_ad99f336d4c117c453fef82993434eb4d"><div class="ttname"><a href="undefined_8txt.html#ad99f336d4c117c453fef82993434eb4d">a</a></div><div class="ttdeci">The reader does not expect b to be semantically here and if the code is changed by maybe adding a a division or other the signedness will almost certainly be mistaken To avoid this confusion a new type was SUINT is the C unsigned type but it holds a signed int to use the same example SUINT a</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00041">undefined.txt:41</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="ah264dec_8h_html_ac849bdce122304e45cd342a1ac227aed"><div class="ttname"><a href="h264dec_8h.html#ac849bdce122304e45cd342a1ac227aed">FRAME_MBAFF</a></div><div class="ttdeci">#define FRAME_MBAFF(h)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00073">h264dec.h:73</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a65d69c01f8024fceba5f12a0a7cf0968"><div class="ttname"><a href="mpegutils_8h.html#a65d69c01f8024fceba5f12a0a7cf0968">IS_DIRECT</a></div><div class="ttdeci">#define IS_DIRECT(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00084">mpegutils.h:84</a></div></div>
<div class="ttc" id="ampegutils_8h_html_aa7e2fc946da7d2037cac3aef1ed5c194"><div class="ttname"><a href="mpegutils_8h.html#aa7e2fc946da7d2037cac3aef1ed5c194">IS_16X16</a></div><div class="ttdeci">#define IS_16X16(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00086">mpegutils.h:86</a></div></div>
<div class="ttc" id="ah264dec_8h_html_a745c1af59149cbb5eacc9b99a86610f9"><div class="ttname"><a href="h264dec_8h.html#a745c1af59149cbb5eacc9b99a86610f9">pack16to32</a></div><div class="ttdeci">static av_always_inline uint32_t pack16to32(unsigned a, unsigned b)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00666">h264dec.h:666</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a116c7fb56ac57ccca3e08b80467b2a40"><div class="ttname"><a href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a></div><div class="ttdeci">#define FF_THREAD_FRAME</div><div class="ttdoc">Decode more than one frame at once.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01796">avcodec.h:1796</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a96214067cb851c0ca98729ab22f4ef02"><div class="ttname"><a href="mpegutils_8h.html#a96214067cb851c0ca98729ab22f4ef02">MB_TYPE_L0L1</a></div><div class="ttdeci">#define MB_TYPE_L0L1</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00069">mpegutils.h:69</a></div></div>
<div class="ttc" id="ah264dec_8h_html"><div class="ttname"><a href="h264dec_8h.html">h264dec.h</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_a8212d9afa9c7cdb1d19923b6627c6a6f"><div class="ttname"><a href="h264__direct_8c.html#a8212d9afa9c7cdb1d19923b6627c6a6f">ff_h264_direct_dist_scale_factor</a></div><div class="ttdeci">void ff_h264_direct_dist_scale_factor(const H264Context *const h, H264SliceContext *sl)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00062">h264_direct.c:62</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a62d72421e3e1fa2d53e12416be3800fa"><div class="ttname"><a href="struct_h264_slice_context.html#a62d72421e3e1fa2d53e12416be3800fa">H264SliceContext::h264</a></div><div class="ttdeci">struct H264Context * h264</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00184">h264dec.h:184</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="aregdef_8h_html_a70597aa9a5baaa4676f9f8cbe306dae0"><div class="ttname"><a href="regdef_8h.html#a70597aa9a5baaa4676f9f8cbe306dae0">tb</a></div><div class="ttdeci">#define tb</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00068">regdef.h:68</a></div></div>
<div class="ttc" id="ah264dec_8h_html_a9ff34a3861518bd7b108ade43f3af1e7"><div class="ttname"><a href="h264dec_8h.html#a9ff34a3861518bd7b108ade43f3af1e7">PART_NOT_AVAILABLE</a></div><div class="ttdeci">#define PART_NOT_AVAILABLE</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00397">h264dec.h:397</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a2ec4aefad57e61e001ee485aabc79576"><div class="ttname"><a href="struct_h264_picture.html#a2ec4aefad57e61e001ee485aabc79576">H264Picture::mb_type</a></div><div class="ttdeci">uint32_t * mb_type</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00139">h264dec.h:139</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_aac5f469c36afd41f4635ae16ef99aaeb"><div class="ttname"><a href="intreadwrite_8h.html#aac5f469c36afd41f4635ae16ef99aaeb">AV_RN32A</a></div><div class="ttdeci">#define AV_RN32A(p)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00526">intreadwrite.h:526</a></div></div>
<div class="ttc" id="amathops_8h_html_a6948a24017ba60d76640f7587429a9f6"><div class="ttname"><a href="mathops_8h.html#a6948a24017ba60d76640f7587429a9f6">mid_pred</a></div><div class="ttdeci">#define mid_pred</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00097">mathops.h:97</a></div></div>
<div class="ttc" id="astruct_h264_picture_html_a806ce72c8b3846d309941335be5f417a"><div class="ttname"><a href="struct_h264_picture.html#a806ce72c8b3846d309941335be5f417a">H264Picture::frame_num</a></div><div class="ttdeci">int frame_num</div><div class="ttdoc">frame_num (raw frame_num from slice header)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00149">h264dec.h:149</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_ab841f5c876f5d492fa49e7a6a8bc2a2f"><div class="ttname"><a href="struct_h264_slice_context.html#ab841f5c876f5d492fa49e7a6a8bc2a2f">H264SliceContext::col_fieldoff</a></div><div class="ttdeci">int col_fieldoff</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00259">h264dec.h:259</a></div></div>
<div class="ttc" id="ahuffyuvdsp_8h_html_a111da81ae5883147168bbb8366377b10"><div class="ttname"><a href="huffyuvdsp_8h.html#a111da81ae5883147168bbb8366377b10">B</a></div><div class="ttdeci">#define B</div><div class="ttdef"><b>Definition:</b> <a href="huffyuvdsp_8h_source.html#l00032">huffyuvdsp.h:32</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_B</div><div class="ttdoc">Bi-dir predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00276">avutil.h:276</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_ad60d116c8a730ee61eda97d803030da6"><div class="ttname"><a href="h264__direct_8c.html#ad60d116c8a730ee61eda97d803030da6">MB_TYPE_16x16_OR_INTRA</a></div><div class="ttdeci">#define MB_TYPE_16x16_OR_INTRA</div></div>
<div class="ttc" id="affplay_8c_html_a5418f9bead37938691fa4c3d3ab21e5e"><div class="ttname"><a href="ffplay_8c.html#a5418f9bead37938691fa4c3d3ab21e5e">fill_rectangle</a></div><div class="ttdeci">static void fill_rectangle(int x, int y, int w, int h)</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00831">ffplay.c:831</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a3a065739b3fb2d039d0053d75b582612"><div class="ttname"><a href="struct_h264_slice_context.html#a3a065739b3fb2d039d0053d75b582612">H264SliceContext::dist_scale_factor</a></div><div class="ttdeci">int dist_scale_factor[32]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00265">h264dec.h:265</a></div></div>
<div class="ttc" id="ah264dec_8h_html_a21d6ce2d107485821da2cf01ce14b3b3"><div class="ttname"><a href="h264dec_8h.html#a21d6ce2d107485821da2cf01ce14b3b3">scan8</a></div><div class="ttdeci">static const uint8_t scan8[16 *3+3]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00650">h264dec.h:650</a></div></div>
<div class="ttc" id="atests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a187006167d123abe26b073f46d9a6e57"><div class="ttname"><a href="struct_h264_slice_context.html#a187006167d123abe26b073f46d9a6e57">H264SliceContext::dist_scale_factor_field</a></div><div class="ttdeci">int dist_scale_factor_field[2][32]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00266">h264dec.h:266</a></div></div>
<div class="ttc" id="ah264__direct_8c_html_a80227946174bef6fd4aaddf2c2bb625f"><div class="ttname"><a href="h264__direct_8c.html#a80227946174bef6fd4aaddf2c2bb625f">pred_temp_direct_motion</a></div><div class="ttdeci">static void pred_temp_direct_motion(const H264Context *const h, H264SliceContext *sl, int *mb_type)</div><div class="ttdef"><b>Definition:</b> <a href="h264__direct_8c_source.html#l00487">h264_direct.c:487</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adb009f1d85ac852f5a0f6da3dd88ba56"><div class="ttname"><a href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a></div><div class="ttdeci">#define avpriv_request_sample(...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00039">tableprint_vlc.h:39</a></div></div>
<div class="ttc" id="ahwcontext__vdpau_8c_html_a2996cc16b36e13c9010705bad768e866"><div class="ttname"><a href="hwcontext__vdpau_8c.html#a2996cc16b36e13c9010705bad768e866">map</a></div><div class="ttdeci">const VDPAUPixFmtMap * map</div><div class="ttdef"><b>Definition:</b> <a href="hwcontext__vdpau_8c_source.html#l00071">hwcontext_vdpau.c:71</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a783d02faef3f89af863d0b5c4c60c4b1"><div class="ttname"><a href="struct_h264_slice_context.html#a783d02faef3f89af863d0b5c4c60c4b1">H264SliceContext::map_col_to_list0</a></div><div class="ttdeci">int map_col_to_list0[2][16+32]</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00267">h264dec.h:267</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a965a4fc680cb580e5d4a862e0858c6a7"><div class="ttname"><a href="mpegutils_8h.html#a965a4fc680cb580e5d4a862e0858c6a7">MB_TYPE_DIRECT2</a></div><div class="ttdeci">#define MB_TYPE_DIRECT2</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00059">mpegutils.h:59</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="astruct_h264_slice_context_html_a7d4edb499bdf58f6a023773eceaa9af7"><div class="ttname"><a href="struct_h264_slice_context.html#a7d4edb499bdf58f6a023773eceaa9af7">H264SliceContext::slice_type_nos</a></div><div class="ttdeci">int slice_type_nos</div><div class="ttdoc">S free slice type (SI/SP are remapped to I/P)</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00190">h264dec.h:190</a></div></div>
<div class="ttc" id="astruct_h264_ref_html_a68870b34f122a60f87e85a12143deba9"><div class="ttname"><a href="struct_h264_ref.html#a68870b34f122a60f87e85a12143deba9">H264Ref::poc</a></div><div class="ttdeci">int poc</div><div class="ttdef"><b>Definition:</b> <a href="h264dec_8h_source.html#l00177">h264dec.h:177</a></div></div>
<div class="ttc" id="ampegutils_8h_html_add0e64565de0e508b1fdf5602da614e4"><div class="ttname"><a href="mpegutils_8h.html#add0e64565de0e508b1fdf5602da614e4">MB_TYPE_P1L1</a></div><div class="ttdeci">#define MB_TYPE_P1L1</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00066">mpegutils.h:66</a></div></div>
<div class="ttc" id="ampegutils_8h_html_a212a3cf22dab1c07ce1482996ad28481"><div class="ttname"><a href="mpegutils_8h.html#a212a3cf22dab1c07ce1482996ad28481">IS_SUB_8X8</a></div><div class="ttdeci">#define IS_SUB_8X8(a)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00090">mpegutils.h:90</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
