<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/wmavoice.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">wmavoice.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wmavoice_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Windows Media Audio Voice decoder.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2009 Ronald S. Bultje</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="channel__layout_8h.html">libavutil/channel_layout.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="float__dsp_8h.html">libavutil/float_dsp.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem_8h.html">libavutil/mem.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">libavutil/thread.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="get__bits_8h.html">get_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="put__bits_8h.html">put_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wmavoice__data_8h.html">wmavoice_data.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="celp__filters_8h.html">celp_filters.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__vectors_8h.html">acelp_vectors.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="acelp__filters_8h.html">acelp_filters.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lsp_8h.html">lsp.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dct_8h.html">dct.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rdft_8h.html">rdft.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sinewin_8h.html">sinewin.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#aba7f789f3266685ad8840806656e3692">   47</a></span>&#160;<span class="preprocessor">#define MAX_BLOCKS           8   </span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">   48</a></span>&#160;<span class="preprocessor">#define MAX_LSPS             16  </span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#define MAX_LSPS_ALIGN16     16  </span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a36c23679269301dc91ef8fd62348064a">   50</a></span>&#160;<span class="preprocessor">#define MAX_FRAMES           3   </span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">   52</a></span>&#160;<span class="preprocessor">#define MAX_FRAMESIZE        160 </span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">   53</a></span>&#160;<span class="preprocessor">#define MAX_SIGNAL_HISTORY   416 </span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#define MAX_SFRAMESIZE       (MAX_FRAMESIZE * MAX_FRAMES)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">   55</a></span>&#160;<span class="preprocessor">#define SFRAME_CACHE_MAXSIZE 256 </span></div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a27f0967c6f7a76ec1d49fa986eaaf3a4">   57</a></span>&#160;<span class="preprocessor">#define VLC_NBITS            6   </span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor"></span> </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a7d9d98fdebdde7bc77144e9b677ad2b8">   63</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_v_l_c.html">VLC</a> <a class="code" href="wmavoice_8c.html#a7d9d98fdebdde7bc77144e9b677ad2b8">frame_type_vlc</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">   69</a></span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a>       = 0, </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a> = 1, </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>    = 2  </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;};</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">enum</span> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a>    = 0, </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a71ab4c82225ff123f0c62a1667c3f749">FCB_TYPE_HARDCODED</a>  = 1, </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a71ab4c82225ff123f0c62a1667c3f749">   88</a></span>&#160;    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">FCB_TYPE_AW_PULSES</a>  = 2, </div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">   90</a></span>&#160;    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a> = 3, </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;};</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structframe__type__desc.html">   99</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structframe__type__desc.html">frame_type_desc</a> {</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">  100</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a>;     </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structframe__type__desc.html#a225f9bd3f88ce049b02aa092c8d1f1a5">log_n_blocks</a>; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="structframe__type__desc.html#a3f34a7aff7ebb8b3a1a0a5d62b5bf019">  103</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structframe__type__desc.html#a3f34a7aff7ebb8b3a1a0a5d62b5bf019">acb_type</a>;     </div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">  104</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">fcb_type</a>;     </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="structframe__type__desc.html#a4b717e4fef82f144658adc08b37a337e">  105</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="structframe__type__desc.html#a4b717e4fef82f144658adc08b37a337e">dbl_pulses</a>;   </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;} <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[17] = {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    { 1, 0, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a>,       <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a>,    0 },</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a>,       <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a71ab4c82225ff123f0c62a1667c3f749">FCB_TYPE_HARDCODED</a>,  0 },</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>, <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">FCB_TYPE_AW_PULSES</a>,  0 },</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>, <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 2 },</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>, <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 5 },</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    { 4, 2, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>, <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 0 },</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    { 4, 2, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>, <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 2 },</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    { 4, 2, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>, <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 5 },</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 0 },</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 2 },</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    { 2, 1, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 5 },</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    { 4, 2, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 0 },</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    { 4, 2, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 2 },</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    { 4, 2, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 5 },</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    { 8, 3, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 0 },</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    { 8, 3, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 2 },</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    { 8, 3, <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>,    <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a>, 5 }</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">  126</a></span>&#160;};</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html">  131</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> {</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a4726a2e0404cecdd28a22da8e4ed6e40">  136</a></span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> <a class="code" href="struct_w_m_a_voice_context.html#a4726a2e0404cecdd28a22da8e4ed6e40">gb</a>;             </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    int8_t <a class="code" href="struct_w_m_a_voice_context.html#a43d6376365c0222d61fb06332ef0ee40">vbm_tree</a>[25];          </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#ac5a20cc45ac66ed1bdb67e5d7a425bb7">  142</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ac5a20cc45ac66ed1bdb67e5d7a425bb7">spillover_bitsize</a>;        </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#aa6267a6def1d0bf702d8fdfd61419e7c">history_nsamples</a>;         </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">/* postfilter specific values */</span></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a95c19d1d6f9283f09a3b10e31c9dcbdc">  149</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a95c19d1d6f9283f09a3b10e31c9dcbdc">do_apf</a>;                   </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ac4f6e89c6ef6a00756ce7a561638640c">denoise_strength</a>;         </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a4a2fd5ff88f3d1a2178ad40f337eb17a">denoise_tilt_corr</a>;        </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ae746408140a150250a05bbb247ff248c">dc_level</a>;                 </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a56788029c115de85223c07b1eac91c83">  158</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a56788029c115de85223c07b1eac91c83">lsps</a>;                     </div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a1bafb7555a739d6716d460e13b1c0093">  159</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a1bafb7555a739d6716d460e13b1c0093">lsp_q_mode</a>;               </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#aa1448d185a78d73e729d196a78001bad">  160</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#aa1448d185a78d73e729d196a78001bad">lsp_def_mode</a>;             </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#ae2e13c5f7a5f85a8bbaead8aebbd4ecc">  163</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ae2e13c5f7a5f85a8bbaead8aebbd4ecc">min_pitch_val</a>;            </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a654fcf10dfc000fefee8bb87e1782c13">  164</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a654fcf10dfc000fefee8bb87e1782c13">max_pitch_val</a>;            </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a1db489f61d0438213c802e8c8216cceb">  165</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a1db489f61d0438213c802e8c8216cceb">pitch_nbits</a>;              </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a36b0c87793d0c77fa45c7fb429c236e1">block_pitch_nbits</a>;        </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a61bfe046f7d6096ba173a96284307c30">block_pitch_range</a>;        </div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a68bbef2616db7f69e39be738b7e6e408">  170</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a68bbef2616db7f69e39be738b7e6e408">block_delta_pitch_nbits</a>;  </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ac0a5a0a8535c674ede4babca5f45ff8a">block_delta_pitch_hrange</a>; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    uint16_t <a class="code" href="struct_w_m_a_voice_context.html#a300cfab82e67c4b665a4d985b93b16f4">block_conv_table</a>[4]; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#ad56e4e5e8156ebcf5c2b4a17130bb32f">  188</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ad56e4e5e8156ebcf5c2b4a17130bb32f">spillover_nbits</a>;          </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#aae96916b601e5d0778f2cc6b63939d16">has_residual_lsps</a>;        </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ad64f3a04850e82fb422fbacef6366640">skip_bits_next</a>;           </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a460e9de08921a755633c5514b54f6b70">  201</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="struct_w_m_a_voice_context.html#a460e9de08921a755633c5514b54f6b70">sframe_cache</a>[<a class="code" href="wmavoice_8c.html#a27f0967c6f7a76ec1d49fa986eaaf3a4">SFRAME_CACHE_MAXSIZE</a> + <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>];</div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a3d3bd96a4cb1f5411b4982000cc761d9">  204</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a3d3bd96a4cb1f5411b4982000cc761d9">sframe_cache_size</a>;        </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> <a class="code" href="struct_w_m_a_voice_context.html#aee2f28c3b833031d95bc70da2350e58e">pb</a>;             </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#af459d29d58661ae3855ddfeea97bf362">  220</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="struct_w_m_a_voice_context.html#af459d29d58661ae3855ddfeea97bf362">prev_lsps</a>[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>];   </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a21082e513e4a282aa0ff8724ac9ac488">last_pitch_val</a>;           </div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a37adf78d4d3225f36dd9579c924c5ae7">  223</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a37adf78d4d3225f36dd9579c924c5ae7">last_acb_type</a>;            </div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a972de675876e4e0c8ee6daf36bb07c60">  224</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a972de675876e4e0c8ee6daf36bb07c60">pitch_diff_sh16</a>;          </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a60e70e81ae96551b1edf2b83187b45ba">silence_gain</a>;           </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a3f16a750ffa0b92860e82e4cb8f70a95">  228</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a3f16a750ffa0b92860e82e4cb8f70a95">aw_idx_is_ext</a>;            </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#ae3edf4bdca13808f64d93f60ed3474c8">aw_pulse_range</a>;           </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#aef95f6af070e8731d8788f469bf4bcf3">aw_n_pulses</a>[2];           </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a0534dd02608d6e52149410be053c6ec9">aw_first_pulse_off</a>[2];    </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#abaf49729156cb5c13c2e6bb04a1cdab1">aw_next_pulse_off_cache</a>;  </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a636bebaf2722c8c2bd81f04df0dfb3e7">  247</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a636bebaf2722c8c2bd81f04df0dfb3e7">frame_cntr</a>;               </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_w_m_a_voice_context.html#a038ff3ddcd755825c4ed913a147e2718">nb_superframes</a>;           </div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#aaae41c4f28d4898e45efebb865f7f811">  250</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#aaae41c4f28d4898e45efebb865f7f811">gain_pred_err</a>[6];       </div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a77f40c3d65e456ee98332d5d0679fa2a">  251</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a77f40c3d65e456ee98332d5d0679fa2a">excitation_history</a>[<a class="code" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a>];</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a5da085e4cae75026e6baaf36ca5a12c0">  255</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a5da085e4cae75026e6baaf36ca5a12c0">synth_history</a>[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>]; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#ac7a120891ccfd07a4cb8d177ce6ff734">  265</a></span>&#160;    <a class="code" href="struct_r_d_f_t_context.html">RDFTContext</a> <a class="code" href="struct_w_m_a_voice_context.html#ac7a120891ccfd07a4cb8d177ce6ff734">rdft</a>, <a class="code" href="struct_w_m_a_voice_context.html#ae694110d132ca5164e52d54313059f0e">irdft</a>;      </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="struct_d_c_t_context.html">DCTContext</a> <a class="code" href="struct_w_m_a_voice_context.html#af0ee1155cbeea7751b6acabde777c032">dct</a>, <a class="code" href="struct_w_m_a_voice_context.html#a3bd010fad030d5a5d740df29371a2517">dst</a>;          </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#aec79a0fe1d5208132d8b0aa4010a9f9e">sin</a>[511], <a class="code" href="struct_w_m_a_voice_context.html#ab7c1844d53e76409ec793853424ad3fd">cos</a>[511];     </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a591896bd815d1c13278c063820c71bbd">postfilter_agc</a>;         </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a0aec9e3aca9b1d097e1d9e64b3cf8156">dcf_mem</a>[2];             </div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a3b2034254685785af3336312c495d2ec">  274</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a3b2034254685785af3336312c495d2ec">zero_exc_pf</a>[<a class="code" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a> + <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>];</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#a13ab940c068ce99f11bacc7520835dee">  277</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_w_m_a_voice_context.html#a13ab940c068ce99f11bacc7520835dee">denoise_filter_cache</a>[<a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a>];</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="struct_w_m_a_voice_context.html#ab19b012654fa480269b1293f317534a4">  278</a></span>&#160;    <span class="keywordtype">int</span>   <a class="code" href="struct_w_m_a_voice_context.html#ab19b012654fa480269b1293f317534a4">denoise_filter_cache_size</a>; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="group__lavu__mem__macros.html#ga7a422611f83afb33d6e0da44184b548e">DECLARE_ALIGNED</a>(32, <span class="keywordtype">float</span>, tilted_lpcs_pf)[0x80];</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="group__lavu__mem__macros.html#ga7a422611f83afb33d6e0da44184b548e">DECLARE_ALIGNED</a>(32, <span class="keywordtype">float</span>, denoise_coeffs_pf)[0x80];</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="group__lavu__mem__macros.html#ga7a422611f83afb33d6e0da44184b548e">DECLARE_ALIGNED</a>(32, <span class="keywordtype">float</span>, synth_filter_out_buf)[0x80 + <a class="code" href="wmavoice_8c.html#a36c23679269301dc91ef8fd62348064a">MAX_LSPS_ALIGN16</a>];</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a710394937fbacb00ba47833e5f2a5299">  289</a></span>&#160;} <a class="code" href="wmavoice_8c.html#a710394937fbacb00ba47833e5f2a5299">WMAVoiceContext</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a0fc8916e41d0b39c776cd753b0369c81">  300</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a0fc8916e41d0b39c776cd753b0369c81">decode_vbmtree</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, int8_t vbm_tree[25])</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">int</span> cntr[8] = { 0 }, n, res;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    memset(vbm_tree, 0xff, <span class="keyword">sizeof</span>(vbm_tree[0]) * 25);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; 17; n++) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        res = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 3);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">if</span> (cntr[res] &gt; 3) <span class="comment">// should be &gt;= 3 + (res == 7))</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        vbm_tree[res * 3 + cntr[res]++] = n;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#adb1ebc4e4e017cc5a3202cfd162c74f1">  314</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#adb1ebc4e4e017cc5a3202cfd162c74f1">wmavoice_init_static_data</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>[] = {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;         2,  2,  2,  4,  4,  4,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         6,  6,  6,  8,  8,  8,</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        10, 10, 10, 12, 12, 12,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        14, 14, 14, 14</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    };</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint16_t codes[] = {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          0x0000, 0x0001, 0x0002,        <span class="comment">//              00/01/10</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;          0x000c, 0x000d, 0x000e,        <span class="comment">//           11+00/01/10</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          0x003c, 0x003d, 0x003e,        <span class="comment">//         1111+00/01/10</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;          0x00fc, 0x00fd, 0x00fe,        <span class="comment">//       111111+00/01/10</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;          0x03fc, 0x03fd, 0x03fe,        <span class="comment">//     11111111+00/01/10</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          0x0ffc, 0x0ffd, 0x0ffe,        <span class="comment">//   1111111111+00/01/10</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;          0x3ffc, 0x3ffd, 0x3ffe, 0x3fff <span class="comment">// 111111111111+xx</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    };</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="vlc_8h.html#a233dcdd511c948256a93b3b740e18460">INIT_VLC_STATIC</a>(&amp;<a class="code" href="wmavoice_8c.html#a7d9d98fdebdde7bc77144e9b677ad2b8">frame_type_vlc</a>, <a class="code" href="wmavoice_8c.html#a8700b7e3f00e6d447fe1f2b1b23a4bbb">VLC_NBITS</a>, <span class="keyword">sizeof</span>(<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>),</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>, 1, 1, codes, 2, 2, 132);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a86da11db4e007b52da588be63d40eb5c">  336</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a86da11db4e007b52da588be63d40eb5c">wmavoice_flush</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;{</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;postfilter_agc    = 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_bits_next    = 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lsps[n] = <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (n + 1.0) / (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps + 1.0);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;excitation_history, 0,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;           <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;excitation_history) * <a class="code" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a>);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_history,      0,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;           <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_history)      * <a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err,      0,</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;           <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;do_apf) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_filter_out_buf[<a class="code" href="wmavoice_8c.html#a36c23679269301dc91ef8fd62348064a">MAX_LSPS_ALIGN16</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps], 0,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;               <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_filter_out_buf) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dcf_mem,              0,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;               <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dcf_mem)              * 2);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf,          0,</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;               <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf)          * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache));</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a1278740a8a8000645c462577e7714b16">  367</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a1278740a8a8000645c462577e7714b16">wmavoice_decode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;{</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">static</span> <a class="code" href="libavutil_2thread_8h.html#a1d348e4becc9580dfa760add5c9d1139">AVOnce</a> init_static_once = <a class="code" href="libavutil_2thread_8h.html#acfec46d8ab71dae8e901ee384378df32">AV_ONCE_INIT</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordtype">int</span> n, <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>, pitch_range, lsp16_flag;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="libavutil_2thread_8h.html#a4501e029388ab4d5750dc9875a5a2fd5">ff_thread_once</a>(&amp;init_static_once, <a class="code" href="wmavoice_8c.html#adb1ebc4e4e017cc5a3202cfd162c74f1">wmavoice_init_static_data</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;extradata_size != 46) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;               <span class="stringliteral">&quot;Invalid extradata size %d (should be 46)\n&quot;</span>,</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;extradata_size);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align &lt;= 0 || <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align &gt; (1&lt;&lt;22)) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid block alignment %d.\n&quot;</span>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a>                = <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;extradata + 18);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_bitsize = 3 + av_ceil_log2(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;do_apf            =    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; 0x1;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;do_apf) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <a class="code" href="rdft_8c.html#a0c354cdb0c8e93f34192ef33538fb1ec">ff_rdft_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft,  7, <a class="code" href="group__lavc__fft.html#gga58a704747daba49afa3611cea218a24ba417b17dd8e9f755f06a9469826e4adc9">DFT_R2C</a>);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="rdft_8c.html#a0c354cdb0c8e93f34192ef33538fb1ec">ff_rdft_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;irdft, 7, <a class="code" href="group__lavc__fft.html#gga58a704747daba49afa3611cea218a24baadf7acc2f968f4345998fef751bedc8c">IDFT_C2R</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="dct_8c.html#a5c7e329ee62da797d30b5c9ca99d6b48">ff_dct_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct,  6, <a class="code" href="group__lavc__fft.html#ggaeeabd062332b246d19bed36e041d2df6a6b14deec67dfefcbf3d873a7e55f9358">DCT_I</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="dct_8c.html#a5c7e329ee62da797d30b5c9ca99d6b48">ff_dct_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dst,  6, <a class="code" href="group__lavc__fft.html#ggaeeabd062332b246d19bed36e041d2df6aef2c0de34cd8c5582950db643ba88d53">DST_I</a>);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="sinewin_8h.html#ab1e768d3cbe7edfaa2ca87e92fa3209e">ff_sine_window_init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos, 256);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        memcpy(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sin[255], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos, 256 * <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[0]));</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; 255; n++) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sin[n]       = -<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sin[510 - n];</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[510 - n] =  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[n];</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_strength  =   (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &gt;&gt; 2) &amp; 0xF;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_strength &gt;= 12) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;               <span class="stringliteral">&quot;Invalid denoise filter strength %d (max=11)\n&quot;</span>,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_strength);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_tilt_corr = !!(<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; 0x40);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_level          =   (<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &gt;&gt; 7) &amp; 0xF;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsp_q_mode        = !!(<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; 0x2000);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsp_def_mode      = !!(<a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; 0x4000);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    lsp16_flag           =    <a class="code" href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a> &amp; 0x1000;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (lsp16_flag) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps               = 16;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps               = 10;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lsps[n] = <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (n + 1.0) / (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps + 1.0);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;extradata + 22, (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;extradata_size - 22) &lt;&lt; 3);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="wmavoice_8c.html#a0fc8916e41d0b39c776cd753b0369c81">decode_vbmtree</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vbm_tree) &lt; 0) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid VBM tree; broken extradata?\n&quot;</span>);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_rate &gt;= INT_MAX / (256 * 37))</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val    = ((<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_rate &lt;&lt; 8)      /  400 + 50) &gt;&gt; 8;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_pitch_val    = ((<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_rate &lt;&lt; 8) * 37 / 2000 + 50) &gt;&gt; 8;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    pitch_range         = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_pitch_val - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> (pitch_range &lt;= 0) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid pitch range; broken extradata?\n&quot;</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    }</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_nbits      = av_ceil_log2(pitch_range);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val   = 40;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_acb_type    = <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_pitch_val + 8;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val &lt; 1 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples &gt; <a class="code" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a>) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordtype">int</span> min_sr = ((((1 &lt;&lt; 8) - 50) * 400) + 0xFF) &gt;&gt; 8,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            max_sr = ((((<a class="code" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a> - 8) &lt;&lt; 8) + 205) * 2000 / 37) &gt;&gt; 8;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;               <span class="stringliteral">&quot;Unsupported samplerate %d (min=%d, max=%d)\n&quot;</span>,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_rate, min_sr, max_sr); <span class="comment">// 322-22097 Hz</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOSYS);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[0]      = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[1]      = (pitch_range * 25) &gt;&gt; 6;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[2]      = (pitch_range * 44) &gt;&gt; 6;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[3]      = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_pitch_val - 1;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_hrange = (pitch_range &gt;&gt; 3) &amp; ~0xF;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_hrange &lt;= 0) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid delta pitch hrange; broken extradata?\n&quot;</span>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_nbits  = 1 + av_ceil_log2(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_hrange);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pitch_range        = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[2] +</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[3] + 1 +</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                  2 * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[1] - 2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pitch_nbits        = av_ceil_log2(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pitch_range);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channels               = 1;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_layout         = <a class="code" href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_fmt             = <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a8367e26a4ae9c11905861a6c2f0d50ea">  505</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a8367e26a4ae9c11905861a6c2f0d50ea">adaptive_gain_control</a>(<span class="keywordtype">float</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                  <span class="keyword">const</span> <span class="keywordtype">float</span> *speech_synth,</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                  <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keywordtype">float</span> <a class="code" href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a>, <span class="keywordtype">float</span> *gain_mem)</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">float</span> speech_energy = 0.0, postfilter_energy = 0.0, gain_scale_factor;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">float</span> mem = *gain_mem;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        speech_energy     += <a class="code" href="cuda__runtime_8h.html#a59c4f558e259b7fd968f8626da9187f7">fabsf</a>(speech_synth[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        postfilter_energy += <a class="code" href="cuda__runtime_8h.html#a59c4f558e259b7fd968f8626da9187f7">fabsf</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    gain_scale_factor = postfilter_energy == 0.0 ? 0.0 :</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                        (1.0 - <a class="code" href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a>) * speech_energy / postfilter_energy;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        mem = <a class="code" href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a> * mem + gain_scale_factor;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * mem;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    *gain_mem = mem;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a71f41da2e5efa84d93d45b943f9ff908">  546</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a71f41da2e5efa84d93d45b943f9ff908">kalman_smoothen</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> pitch,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, <span class="keywordtype">float</span> *<a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;{</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordtype">float</span> optimal_gain = 0, dot;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *ptr = &amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[-<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val, pitch - 3)],</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                *<a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = &amp;<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[-<a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_pitch_val, pitch + 3)],</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                *best_hist_ptr = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">/* find best fitting point in history */</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        dot = <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>, ptr, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">if</span> (dot &gt; optimal_gain) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            optimal_gain  = dot;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            best_hist_ptr = ptr;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    } <span class="keywordflow">while</span> (--ptr &gt;= <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (optimal_gain &lt;= 0)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    dot = <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(best_hist_ptr, best_hist_ptr, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">if</span> (dot &lt;= 0) <span class="comment">// would be 1.0</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span> (optimal_gain &lt;= dot) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        dot = dot / (dot + 0.6 * optimal_gain); <span class="comment">// 0.625-1.000</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        dot = 0.625;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">/* actual smoothing */</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; n++)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>[n] = best_hist_ptr[n] + dot * (<a class="code" href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a>[n] - best_hist_ptr[n]);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a39044984c1edd5f14541d988bdd0f81e">  592</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="wmavoice_8c.html#a39044984c1edd5f14541d988bdd0f81e">tilt_factor</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> *lpcs, <span class="keywordtype">int</span> n_lpcs)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordtype">float</span> rh0, rh1;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    rh0 = 1.0     + <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(lpcs,  lpcs,    n_lpcs);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    rh1 = lpcs[0] + <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(lpcs, &amp;lpcs[1], n_lpcs - 1);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">return</span> rh1 / rh0;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;}</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a299e6b61042cc6e2fd2eaa8e4314bbfd">  605</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a299e6b61042cc6e2fd2eaa8e4314bbfd">calc_input_response</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">float</span> *lpcs,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                <span class="keywordtype">int</span> fcb_type, <span class="keywordtype">float</span> *coeffs, <span class="keywordtype">int</span> remainder)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;{</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="qdm2data_8h.html#af1278e6360466160dbbf24f3f6405154">last_coeff</a>, <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = 15.0, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = -15.0;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordtype">float</span> irange, angle_mul, gain_mul, range, sq;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordtype">int</span> n, idx;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">/* Create frequency power spectrum of speech input (i.e. RDFT of LPCs) */</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft.rdft_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft, lpcs);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="preprocessor">#define log_range(var, assign) do { \</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="preprocessor">        float tmp = log10f(assign);  var = tmp; \</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">        max       = FFMAX(max, tmp); min = FFMIN(min, tmp); \</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="preprocessor">    } while (0)</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="wmavoice_8c.html#a874330eb5c50149c4d367d995f11b3bb">log_range</a>(<a class="code" href="qdm2data_8h.html#af1278e6360466160dbbf24f3f6405154">last_coeff</a>,  lpcs[1]         * lpcs[1]);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">for</span> (n = 1; n &lt; 64; n++)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <a class="code" href="wmavoice_8c.html#a874330eb5c50149c4d367d995f11b3bb">log_range</a>(lpcs[n], lpcs[n * 2]     * lpcs[n * 2] +</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                           lpcs[n * 2 + 1] * lpcs[n * 2 + 1]);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="wmavoice_8c.html#a874330eb5c50149c4d367d995f11b3bb">log_range</a>(lpcs[0],     lpcs[0]         * lpcs[0]);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="preprocessor">#undef log_range</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    range    = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    lpcs[64] = <a class="code" href="qdm2data_8h.html#af1278e6360466160dbbf24f3f6405154">last_coeff</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="comment">/* Now, use this spectrum to pick out these frequencies with higher</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">     * (relative) power/energy (which we then take to be &quot;not noise&quot;),</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">     * and set up a table (still in lpc[]) of (relative) gains per frequency.</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">     * These frequencies will be maintained, while others (&quot;noise&quot;) will be</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">     * decreased in the filter output. */</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    irange    = 64.0 / range; <span class="comment">// so irange*(max-value) is in the range [0, 63]</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    gain_mul  = range * (fcb_type == <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a71ab4c82225ff123f0c62a1667c3f749">FCB_TYPE_HARDCODED</a> ? (5.0 / 13.0) :</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                                          (5.0 / 14.7));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    angle_mul = gain_mul * (8.0 * <a class="code" href="mathematics_8h.html#a0a53871497a155afe91424c28a8ec3c4">M_LN10</a> / <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt;= 64; n++) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordtype">float</span> pwr;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        idx = <a class="code" href="tablegen_8h.html#acb2450405534f2af2557e0d2487c09dc">lrint</a>((<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - lpcs[n]) * irange - 1);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        idx = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(0, idx);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        pwr = <a class="code" href="wmavoice__data_8h.html#a5f623b116d361d5d22ad9da2ae16b779">wmavoice_denoise_power_table</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_strength][idx];</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        lpcs[n] = angle_mul * pwr;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment">/* 70.57 =~ 1/log10(1.0331663) */</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        idx = av_clipf((pwr * gain_mul - 0.0295) * 70.570526123, 0, INT_MAX / 2);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordflow">if</span> (idx &gt; 127) { <span class="comment">// fall back if index falls outside table range</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            coeffs[n] = <a class="code" href="wmavoice__data_8h.html#a7ea126b085860047c273e65ea0b41398">wmavoice_energy_table</a>[127] *</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                        <a class="code" href="libm_8h.html#ad1eb6660c7377c9b02883d77c5bf91e6">powf</a>(1.0331663, idx - 127);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            coeffs[n] = <a class="code" href="wmavoice__data_8h.html#a7ea126b085860047c273e65ea0b41398">wmavoice_energy_table</a>[<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(0, idx)];</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">/* calculate the Hilbert transform of the gains, which we do (since this</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">     * is a sine input) by doing a phase shift (in theory, H(sin())=cos()).</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">     * Hilbert_Transform(RDFT(x)) = Laplace_Transform(x), which calculates the</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">     * &quot;moment&quot; of the LPCs in this filter. */</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct.dct_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct, lpcs);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dst.dct_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dst, lpcs);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">/* Split out the coefficient indexes into phase/magnitude pairs */</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    idx = 255 + av_clip(lpcs[64],               -255, 255);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    coeffs[0]  = coeffs[0]  * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[idx];</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    idx = 255 + av_clip(lpcs[64] - 2 * lpcs[63], -255, 255);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="qdm2data_8h.html#af1278e6360466160dbbf24f3f6405154">last_coeff</a> = coeffs[64] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[idx];</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">for</span> (n = 63;; n--) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        idx = 255 + av_clip(-lpcs[64] - 2 * lpcs[n - 1], -255, 255);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        coeffs[n * 2 + 1] = coeffs[n] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sin[idx];</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        coeffs[n * 2]     = coeffs[n] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[idx];</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">if</span> (!--n) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        idx = 255 + av_clip( lpcs[64] - 2 * lpcs[n - 1], -255, 255);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        coeffs[n * 2 + 1] = coeffs[n] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sin[idx];</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        coeffs[n * 2]     = coeffs[n] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cos[idx];</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    coeffs[1] = <a class="code" href="qdm2data_8h.html#af1278e6360466160dbbf24f3f6405154">last_coeff</a>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">/* move into real domain */</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;irdft.rdft_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;irdft, coeffs);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment">/* tilt correction and normalize scale */</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    memset(&amp;coeffs[remainder], 0, <span class="keyword">sizeof</span>(coeffs[0]) * (128 - remainder));</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_tilt_corr) {</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordtype">float</span> tilt_mem = 0;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        coeffs[remainder - 1] = 0;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <a class="code" href="acelp__filters_8c.html#a0d6ae4fe173d5bb07674d64592de1fa2">ff_tilt_compensation</a>(&amp;tilt_mem,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                             -1.8 * <a class="code" href="wmavoice_8c.html#a39044984c1edd5f14541d988bdd0f81e">tilt_factor</a>(coeffs, remainder - 1),</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                             coeffs, remainder);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    sq = (1.0 / 64.0) * sqrtf(1 / <a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(coeffs, coeffs,</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                                                               remainder));</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; remainder; n++)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        coeffs[n] *= sq;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a5cfe165705a0f4b68a2bb1a7bcc917ad">  724</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a5cfe165705a0f4b68a2bb1a7bcc917ad">wiener_denoise</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> fcb_type,</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                           <span class="keywordtype">float</span> *synth_pf, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                           <span class="keyword">const</span> <span class="keywordtype">float</span> *lpcs)</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordtype">int</span> remainder, lim, n;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">if</span> (fcb_type != <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a>) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordtype">float</span> *tilted_lpcs = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;tilted_lpcs_pf,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;              *coeffs = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_coeffs_pf, tilt_mem = 0;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        tilted_lpcs[0]           = 1.0;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        memcpy(&amp;tilted_lpcs[1], lpcs, <span class="keyword">sizeof</span>(lpcs[0]) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        memset(&amp;tilted_lpcs[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps + 1], 0,</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;               <span class="keyword">sizeof</span>(tilted_lpcs[0]) * (128 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps - 1));</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="acelp__filters_8c.html#a0d6ae4fe173d5bb07674d64592de1fa2">ff_tilt_compensation</a>(&amp;tilt_mem, 0.7 * <a class="code" href="wmavoice_8c.html#a39044984c1edd5f14541d988bdd0f81e">tilt_factor</a>(lpcs, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps),</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                             tilted_lpcs, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps + 2);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        <span class="comment">/* The IRDFT output (127 samples for 7-bit filter) beyond the frame</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">         * size is applied to the next frame. All input beyond this is zero,</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">         * and thus all output beyond this will go towards zero, hence we can</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">         * limit to min(size-1, 127-size) as a performance consideration. */</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        remainder = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(127 - <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - 1);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <a class="code" href="wmavoice_8c.html#a299e6b61042cc6e2fd2eaa8e4314bbfd">calc_input_response</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, tilted_lpcs, fcb_type, coeffs, remainder);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        <span class="comment">/* apply coefficients (in frequency spectrum domain), i.e. complex</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">         * number multiplication */</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        memset(&amp;synth_pf[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>], 0, <span class="keyword">sizeof</span>(synth_pf[0]) * (128 - <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>));</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft.rdft_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft, synth_pf);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft.rdft_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft, coeffs);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        synth_pf[0] *= coeffs[0];</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        synth_pf[1] *= coeffs[1];</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">for</span> (n = 1; n &lt; 64; n++) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordtype">float</span> v1 = synth_pf[n * 2], v2 = synth_pf[n * 2 + 1];</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            synth_pf[n * 2]     = v1 * coeffs[n * 2] - v2 * coeffs[n * 2 + 1];</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;            synth_pf[n * 2 + 1] = v2 * coeffs[n * 2] + v1 * coeffs[n * 2 + 1];</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;irdft.rdft_calc(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;irdft, synth_pf);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">/* merge filter output with the history of previous runs */</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache_size) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        lim = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache_size, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; lim; n++)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            synth_pf[n] += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache[n];</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache_size -= lim;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        memmove(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>],</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache[0]) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache_size);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">/* move remainder of filter output into a cache for future runs */</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span> (fcb_type != <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a>) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        lim = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(remainder, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache_size);</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; lim; n++)</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache[n] += synth_pf[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> + n];</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (lim &lt; remainder) {</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            memcpy(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache[lim], &amp;synth_pf[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> + lim],</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                   <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache[0]) * (remainder - lim));</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;denoise_filter_cache_size = remainder;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    }</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;}</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a9420654f284cf804c9c00b014a969d36">  806</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a9420654f284cf804c9c00b014a969d36">postfilter</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">const</span> <span class="keywordtype">float</span> *synth,</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                       <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>,    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                       <span class="keyword">const</span> <span class="keywordtype">float</span> *lpcs, <span class="keywordtype">float</span> *zero_exc_pf,</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                       <span class="keywordtype">int</span> fcb_type,      <span class="keywordtype">int</span> pitch)</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;{</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordtype">float</span> synth_filter_in_buf[<a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2],</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;          *synth_pf = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_filter_out_buf[<a class="code" href="wmavoice_8c.html#a36c23679269301dc91ef8fd62348064a">MAX_LSPS_ALIGN16</a>],</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;          *synth_filter_in = zero_exc_pf;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &lt;= <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">/* generate excitation from input signal */</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="celp__filters_8c.html#adb73ab3ce9b95632b89b2c80e45eb190">ff_celp_lp_zero_synthesis_filterf</a>(zero_exc_pf, lpcs, synth, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (fcb_type &gt;= <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">FCB_TYPE_AW_PULSES</a> &amp;&amp;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        !<a class="code" href="wmavoice_8c.html#a71f41da2e5efa84d93d45b943f9ff908">kalman_smoothen</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, pitch, zero_exc_pf, synth_filter_in_buf, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>))</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        synth_filter_in = synth_filter_in_buf;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">/* re-synthesize speech after smoothening, and keep history */</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="celp__filters_8c.html#a4b1d7631dad08f69e5047c8e8a7f0ef2">ff_celp_lp_synthesis_filterf</a>(synth_pf, lpcs,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                 synth_filter_in, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    memcpy(&amp;synth_pf[-<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps], &amp;synth_pf[<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps],</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;           <span class="keyword">sizeof</span>(synth_pf[0]) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="wmavoice_8c.html#a5cfe165705a0f4b68a2bb1a7bcc917ad">wiener_denoise</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, fcb_type, synth_pf, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, lpcs);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="wmavoice_8c.html#a8367e26a4ae9c11905861a6c2f0d50ea">adaptive_gain_control</a>(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, synth_pf, synth, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, 0.99,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                          &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;postfilter_agc);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_level &gt; 8) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="comment">/* remove ultra-low frequency DC noise / highpass filter;</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">         * coefficients are identical to those used in SIPR decoding,</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">         * and very closely resemble those used in AMR-NB decoding. */</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="acelp__filters_8c.html#a954ec58802fda142b84b831430c420be">ff_acelp_apply_order_2_transfer_function</a>(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>,</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            (<span class="keyword">const</span> <span class="keywordtype">float</span>[2]) { -1.99997,      1.0 },</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            (<span class="keyword">const</span> <span class="keywordtype">float</span>[2]) { -1.9330735188, 0.93589198496 },</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            0.93980580475, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dcf_mem, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div>
<div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">  860</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(<span class="keywordtype">double</span> *lsps, <span class="keywordtype">int</span> num,</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                         <span class="keyword">const</span> uint16_t *<a class="code" href="filter__design_8txt.html#ad283c679febe22c5a4d36e3764daf32b">values</a>,</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                         <span class="keyword">const</span> uint16_t *<a class="code" href="img2dec_8c.html#a98ca8d52365848dfa8cdfd76c17860e6">sizes</a>,</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                         <span class="keywordtype">int</span> n_stages, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a>,</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">double</span> *mul_q,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">double</span> *base_q)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;{</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="keywordtype">int</span> n, m;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    memset(lsps, 0, num * <span class="keyword">sizeof</span>(*lsps));</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; n_stages; n++) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *t_off = &amp;<a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a>[<a class="code" href="filter__design_8txt.html#ad283c679febe22c5a4d36e3764daf32b">values</a>[n] * num];</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a> = base_q[n], <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#a221057645509eb7f49b2acf6298be2e7">mul</a> = mul_q[n];</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">for</span> (m = 0; m &lt; num; m++)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;            lsps[m] += <a class="code" href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a> + <a class="code" href="dnn__backend__native__layer__mathbinary_8c.html#a221057645509eb7f49b2acf6298be2e7">mul</a> * t_off[m];</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <a class="code" href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a> += <a class="code" href="img2dec_8c.html#a98ca8d52365848dfa8cdfd76c17860e6">sizes</a>[n] * num;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a3e6dac1f8bb497a4947cf6a8b867d2a5">  891</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a3e6dac1f8bb497a4947cf6a8b867d2a5">dequant_lsp10i</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">double</span> *lsps)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;{</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint16_t vec_sizes[4] = { 256, 64, 32, 32 };</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> mul_lsf[4] = {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        5.2187144800e-3,    1.4626986422e-3,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        9.6179549166e-4,    1.1325736225e-3</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    };</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> base_lsf[4] = {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -2.15522e-1, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -6.1646e-2,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -3.3486e-2,  <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -5.7408e-2</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    };</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    uint16_t v[4];</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    v[0] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    v[1] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    v[2] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    v[3] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(lsps, 10, v, vec_sizes, 4, <a class="code" href="wmavoice__data_8h.html#a2b4c3d867c60d0630cad12ba3b1ecf39">wmavoice_dq_lsp10i</a>,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                 mul_lsf, base_lsf);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;}</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a4bcfe545d47ef6500c85c2ae20561562">  917</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a4bcfe545d47ef6500c85c2ae20561562">dequant_lsp10r</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                           <span class="keywordtype">double</span> *i_lsps, <span class="keyword">const</span> <span class="keywordtype">double</span> *old,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                           <span class="keywordtype">double</span> *<a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>, <span class="keywordtype">double</span> *<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>, <span class="keywordtype">int</span> q_mode)</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint16_t vec_sizes[3] = { 128, 64, 64 };</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> mul_lsf[3] = {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        2.5807601174e-3,    1.2354460219e-3,   1.1763821673e-3</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    };</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> base_lsf[3] = {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -1.07448e-1, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -5.2706e-2, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -5.1634e-2</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    };</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keyword">const</span> float (*ipol_tab)[2][10] = q_mode ?</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <a class="code" href="wmavoice__data_8h.html#a86ae9ecf877239e8d97825c26d26edf4">wmavoice_lsp10_intercoeff_b</a> : <a class="code" href="wmavoice__data_8h.html#a9dbe45210bc02af1ae3d6796c48cf9cd">wmavoice_lsp10_intercoeff_a</a>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    uint16_t <a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a>, v[3];</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="wmavoice_8c.html#a3e6dac1f8bb497a4947cf6a8b867d2a5">dequant_lsp10i</a>(gb, i_lsps);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    v[0]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    v[1]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    v[2]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; 10; n++) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = old[n] - i_lsps[n];</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[n]        = ipol_tab[<a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a>][0][n] * <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> + i_lsps[n];</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[10 + n]   = ipol_tab[<a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a>][1][n] * <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> + i_lsps[n];</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>, 20, v, vec_sizes, 3, <a class="code" href="wmavoice__data_8h.html#a249c3d74390336992ac0788271dd0506">wmavoice_dq_lsp10r</a>,</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                 mul_lsf, base_lsf);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a4680b80c57e54efb60eb738a13860c1f">  953</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a4680b80c57e54efb60eb738a13860c1f">dequant_lsp16i</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">double</span> *lsps)</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;{</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint16_t vec_sizes[5] = { 256, 64, 128, 64, 128 };</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> mul_lsf[5] = {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        3.3439586280e-3,    6.9908173703e-4,</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        3.3216608306e-3,    1.0334960326e-3,</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        3.1899104283e-3</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    };</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> base_lsf[5] = {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -1.27576e-1, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -2.4292e-2,</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -1.28094e-1, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -3.2128e-2,</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -1.29816e-1</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    };</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    uint16_t v[5];</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    v[0] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    v[1] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    v[2] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    v[3] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    v[4] = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>( lsps,     5,  v,     vec_sizes,    2,</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                 <a class="code" href="wmavoice__data_8h.html#a43b05f1a85100a759e0490b0f4a04dc6">wmavoice_dq_lsp16i1</a>,  mul_lsf,     base_lsf);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(&amp;lsps[5],  5, &amp;v[2], &amp;vec_sizes[2], 2,</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                 <a class="code" href="wmavoice__data_8h.html#a60a5eb62568d9739ec475d5b88369446">wmavoice_dq_lsp16i2</a>, &amp;mul_lsf[2], &amp;base_lsf[2]);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(&amp;lsps[10], 6, &amp;v[4], &amp;vec_sizes[4], 1,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                 <a class="code" href="wmavoice__data_8h.html#a007a311b347d7122c23144643a06a7b6">wmavoice_dq_lsp16i3</a>, &amp;mul_lsf[4], &amp;base_lsf[4]);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;}</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a07fc88d41ef7536e6d5a56d49649e9a8">  986</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a07fc88d41ef7536e6d5a56d49649e9a8">dequant_lsp16r</a>(<a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                           <span class="keywordtype">double</span> *i_lsps, <span class="keyword">const</span> <span class="keywordtype">double</span> *old,</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                           <span class="keywordtype">double</span> *<a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>, <span class="keywordtype">double</span> *<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>, <span class="keywordtype">int</span> q_mode)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;{</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> uint16_t vec_sizes[3] = { 128, 128, 128 };</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> mul_lsf[3] = {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        1.2232979501e-3,   1.4062241527e-3,   1.6114744851e-3</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    };</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> base_lsf[3] = {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -5.5830e-2, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -5.2908e-2, <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * -5.4776e-2</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    };</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keyword">const</span> float (*ipol_tab)[2][16] = q_mode ?</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <a class="code" href="wmavoice__data_8h.html#a5033d45c5cb11d1728e2383754b741ea">wmavoice_lsp16_intercoeff_b</a> : <a class="code" href="wmavoice__data_8h.html#acf9c17f954fe3493ce603ef938a335f5">wmavoice_lsp16_intercoeff_a</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    uint16_t <a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a>, v[3];</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="wmavoice_8c.html#a4680b80c57e54efb60eb738a13860c1f">dequant_lsp16i</a>(gb, i_lsps);</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 5);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    v[0]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    v[1]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    v[2]     = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; 16; n++) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordtype">double</span> <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = old[n] - i_lsps[n];</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[n]        = ipol_tab[<a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a>][0][n] * <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> + i_lsps[n];</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[16 + n]   = ipol_tab[<a class="code" href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a>][1][n] * <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> + i_lsps[n];</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>( <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>,     10,  v,     vec_sizes,    1,</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                 <a class="code" href="wmavoice__data_8h.html#a8cb7674cdff765bc814ad06417281253">wmavoice_dq_lsp16r1</a>,  mul_lsf,     base_lsf);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(&amp;<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>[10], 10, &amp;v[1], &amp;vec_sizes[1], 1,</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                 <a class="code" href="wmavoice__data_8h.html#a8f83241d4ba850289604d0bbcd036df8">wmavoice_dq_lsp16r2</a>, &amp;mul_lsf[1], &amp;base_lsf[1]);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a>(&amp;<a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>[20], 12, &amp;v[2], &amp;vec_sizes[2], 1,</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                 <a class="code" href="wmavoice__data_8h.html#a579f722aa04e380b4f88814be6ee9740">wmavoice_dq_lsp16r3</a>, &amp;mul_lsf[2], &amp;base_lsf[2]);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01036"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a14ac7cd8bbf8f0eb0ebcf299fb3903f9"> 1036</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a14ac7cd8bbf8f0eb0ebcf299fb3903f9">aw_parse_coords</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">int</span> *pitch)</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;{</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> int16_t start_offset[94] = {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        -11,  -9,  -7,  -5,  -3,  -1,   1,   3,   5,   7,   9,  11,</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;         13,  15,  18,  17,  19,  20,  21,  22,  23,  24,  25,  26,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;         27,  28,  29,  30,  31,  32,  33,  35,  37,  39,  41,  43,</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         45,  47,  49,  51,  53,  55,  57,  59,  61,  63,  65,  67,</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;         69,  71,  73,  75,  77,  79,  81,  83,  85,  87,  89,  91,</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         93,  95,  97,  99, 101, 103, 105, 107, 109, 111, 113, 115,</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        117, 119, 121, 123, 125, 127, 129, 131, 133, 135, 137, 139,</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        141, 143, 145, 147, 149, 151, 153, 155, 157, 159</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    };</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="comment">/* position of pulse */</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_idx_is_ext = 0;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6)) &gt;= 54) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_idx_is_ext = 1;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> += (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> - 54) * 3 + <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 2);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="comment">/* for a repeated pulse at pulse_off with a pitch_lag of pitch[], count</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">     * the distribution of the pulses in each block contained in this frame. */</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range        = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(pitch[0], pitch[1]) &gt; 32 ? 24 : 16;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = start_offset[<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>]; <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> &lt; 0; <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> += pitch[0]) ;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[0]        = (pitch[0] - 1 + <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2 - <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>) / pitch[0];</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[0] = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range / 2;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>                  += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[0] * pitch[0];</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[1]        = (pitch[1] - 1 + <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> - <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>) / pitch[1];</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[1] = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> - (<a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range) / 2;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="comment">/* if continuing from a position before the block, reset position to</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">     * start of block (when corrected for the range over which it can be</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">     * spread in aw_pulse_set1()). */</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="keywordflow">if</span> (start_offset[<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>] &lt; <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2) {</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[1] - pitch[1] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range &gt; 0)</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[1] -= pitch[1];</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordflow">if</span> (start_offset[<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>] &lt; 0)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[0] - pitch[0] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range &gt; 0)</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[0] -= pitch[0];</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    }</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;}</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a1d0edab9dba4e7e1e8124c1fc2d61a1c"> 1088</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a1d0edab9dba4e7e1e8124c1fc2d61a1c">aw_pulse_set2</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                         <span class="keywordtype">int</span> block_idx, <a class="code" href="struct_a_m_r_fixed.html">AMRFixed</a> *fcb)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;{</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    uint16_t use_mask_mem[9]; <span class="comment">// only 5 are used, rest is padding</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    uint16_t *use_mask = use_mask_mem + 2;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <span class="comment">/* in this function, idx is the index in the 80-bit (+ padding) use_mask</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">     * bit-array. Since use_mask consists of 16-bit values, the lower 4 bits</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment">     * of idx are the position of the bit within a particular item in the</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;<span class="comment">     * array (0 being the most significant bit, and 15 being the least</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">     * significant bit), and the remainder (&gt;&gt; 4) is the index in the</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">     * use_mask[]-array. This is faster and uses less memory than using a</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;<span class="comment">     * 80-byte/80-int array. */</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordtype">int</span> pulse_off = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[block_idx],</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;        pulse_start, n, idx, range, aidx, start_off = 0;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">/* set offset of first pulse to within this block */</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[block_idx] &gt; 0)</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordflow">while</span> (pulse_off + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range &lt; 1)</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            pulse_off += fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a>;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">/* find range per pulse */</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[0] &gt; 0) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">if</span> (block_idx == 0) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            range = 32;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        } <span class="keywordflow">else</span> <span class="comment">/* block_idx = 1 */</span> {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            range = 8;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[block_idx] &gt; 0)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                pulse_off = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_next_pulse_off_cache;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        range = 16;</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    pulse_start = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[block_idx] &gt; 0 ? pulse_off - range / 2 : 0;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">/* aw_pulse_set1() already applies pulses around pulse_off (to be exactly,</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">     * in the range of [pulse_off, pulse_off + s-&gt;aw_pulse_range], and thus</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment">     * we exclude that range from being pulsed again in this function. */</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    memset(&amp;use_mask[-2], 0, 2 * <span class="keyword">sizeof</span>(use_mask[0]));</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    memset( use_mask,   -1, 5 * <span class="keyword">sizeof</span>(use_mask[0]));</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    memset(&amp;use_mask[5], 0, 2 * <span class="keyword">sizeof</span>(use_mask[0]));</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[block_idx] &gt; 0)</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <span class="keywordflow">for</span> (idx = pulse_off; idx &lt; <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2; idx += fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a>) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <span class="keywordtype">int</span> excl_range         = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range; <span class="comment">// always 16 or 24</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;            uint16_t *use_mask_ptr = &amp;use_mask[idx &gt;&gt; 4];</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="keywordtype">int</span> first_sh           = 16 - (idx &amp; 15);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;            *use_mask_ptr++       &amp;= 0xFFFF<a class="code" href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a> &lt;&lt; first_sh;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;            excl_range            -= first_sh;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;            <span class="keywordflow">if</span> (excl_range &gt;= 16) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                *use_mask_ptr++    = 0;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                *use_mask_ptr     &amp;= 0xFFFF &gt;&gt; (excl_range - 16);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                *use_mask_ptr     &amp;= 0xFFFF &gt;&gt; excl_range;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;        }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="comment">/* find the &#39;aidx&#39;th offset that is not excluded */</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    aidx = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[0] &gt; 0 ? 5 - 2 * block_idx : 4);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt;= aidx; pulse_start++) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <span class="keywordflow">for</span> (idx = pulse_start; idx &lt; 0; idx += fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a>) ;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        <span class="keywordflow">if</span> (idx &gt;= <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2) { <span class="comment">// find from zero</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <span class="keywordflow">if</span> (use_mask[0])      idx = 0x0F;</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (use_mask[1]) idx = 0x1F;</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (use_mask[2]) idx = 0x2F;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (use_mask[3]) idx = 0x3F;</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (use_mask[4]) idx = 0x4F;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            idx -= <a class="code" href="intmath_8h.html#aef9f0f25de87ea8361407f8c7579915c">av_log2_16bit</a>(use_mask[idx &gt;&gt; 4]);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">if</span> (use_mask[idx &gt;&gt; 4] &amp; (0x8000 &gt;&gt; (idx &amp; 15))) {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            use_mask[idx &gt;&gt; 4] &amp;= ~(0x8000 &gt;&gt; (idx &amp; 15));</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;            n++;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            start_off = idx;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] = start_off;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">y</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) ? -1.0 : 1.0;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>++;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="comment">/* set offset for next block, relative to start of that block */</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    n = (<a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2 - start_off) % fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_next_pulse_off_cache = n ? fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a> - n : 0;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;}</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#ae914057aab72ae3bbd1ee78902e69bcd"> 1178</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#ae914057aab72ae3bbd1ee78902e69bcd">aw_pulse_set1</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                          <span class="keywordtype">int</span> block_idx, <a class="code" href="struct_a_m_r_fixed.html">AMRFixed</a> *fcb)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;{</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 12 - 2 * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_idx_is_ext &amp;&amp; !block_idx));</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordtype">float</span> v;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_n_pulses[block_idx] &gt; 0) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;        <span class="keywordtype">int</span> n, v_mask, i_mask, sh, n_pulses;</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_pulse_range == 24) { <span class="comment">// 3 pulses, 1:sign + 3:index each</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;            n_pulses = 3;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;            v_mask   = 8;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            i_mask   = 7;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            sh       = 4;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">// 4 pulses, 1:sign + 2:index each</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;            n_pulses = 4;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            v_mask   = 4;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            i_mask   = 3;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;            sh       = 3;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        }</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordflow">for</span> (n = n_pulses - 1; n &gt;= 0; n--, <a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> &gt;&gt;= sh) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">y</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] = (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> &amp; v_mask) ? -1.0 : 1.0;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] = (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> &amp; i_mask) * n_pulses + n +</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;aw_first_pulse_off[block_idx];</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            while (fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] &lt; 0)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] += fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            <span class="keywordflow">if</span> (fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>] &lt; <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2)</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>++;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;        }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;        <span class="keywordtype">int</span> num2 = (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> &amp; 0x1FF) &gt;&gt; 1, <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>, idx;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        <span class="keywordflow">if</span> (num2 &lt; 1 * 79)      { <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = 1; idx = num2 + 1; }</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num2 &lt; 2 * 78) { <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = 3; idx = num2 + 1 - 1 * 77; }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num2 &lt; 3 * 77) { <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = 5; idx = num2 + 1 - 2 * 76; }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">else</span>                    { <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a> = 7; idx = num2 + 1 - 3 * 75; }</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;        v = (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> &amp; 0x200) ? -1.0 : 1.0;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1ef4f00779842ca3fc5503ff2edec7e7">no_repeat_mask</a> |= 3 &lt;&lt; fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>]       = idx - <a class="code" href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">y</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>]       = v;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a> + 1]   = idx;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">y</a>[fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a> + 1]   = (<a class="code" href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a> &amp; 1) ? -v : v;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;        fcb-&gt;<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>              += 2;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;}</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#ade6f6b77a56783f281c0d7a37554130b"> 1239</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#ade6f6b77a56783f281c0d7a37554130b">pRNG</a>(<span class="keywordtype">int</span> frame_cntr, <span class="keywordtype">int</span> block_num, <span class="keywordtype">int</span> block_size)</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;{</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">/* array to simplify the calculation of z:</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="comment">     * y = (x % 9) * 5 + 6;</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="comment">     * z = (49995 * x) / y;</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">     * Since y only has 9 values, we can remove the division by using a</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">     * LUT and using FASTDIV-style divisions. For each of the 9 values</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">     * of y, we can rewrite z as:</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="comment">     * z = x * (49995 / y) + x * ((49995 % y) / y)</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">     * In this table, each col represents one possible value of y, the</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">     * first number is 49995 / y, and the second is the FASTDIV variant</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">     * of 49995 % y / y. */</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> div_tbl[9][2] = {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        { 8332,  3 * 715827883<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y =  6</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        { 4545,  0 * 390451573<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 11</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        { 3124, 11 * 268435456<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 16</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        { 2380, 15 * 204522253<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 21</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        { 1922, 23 * 165191050<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 26</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        { 1612, 23 * 138547333<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 31</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        { 1388, 27 * 119304648<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 36</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        { 1219, 16 * 104755300<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }, <span class="comment">// y = 41</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        { 1086, 39 *  93368855<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a> }  <span class="comment">// y = 46</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    };</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> z, y, x = <a class="code" href="mathops_8h.html#a22c70c3b9c3c05bad0d5ff51e7ebb3fa">MUL16</a>(block_num, 1877) + frame_cntr;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (x &gt;= 0xFFFF) x -= 0xFFFF;   <span class="comment">// max value of x is 8*1877+0xFFFE=0x13AA6,</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                                    <span class="comment">// so this is effectively a modulo (%)</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    y = x - 9 * <a class="code" href="ppc_2mathops_8h.html#ac07fc98b93b1d0818424d9239cbd7732">MULH</a>(477218589, x); <span class="comment">// x % 9</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    z = (uint16_t) (x * div_tbl[y][0] + <a class="code" href="mathops_8h.html#a4a7dad8bc1dfc37ec98764bc772e8656">UMULH</a>(x, div_tbl[y][1]));</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                                    <span class="comment">// z = x * 49995 / (y * 5 + 6)</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">return</span> z % (1000 - block_size);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;}</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#ae10409ef08a934d1d75d8ad4b2b595f4"> 1275</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#ae10409ef08a934d1d75d8ad4b2b595f4">synth_block_hardcoded</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                                 <span class="keywordtype">int</span> block_idx, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                                 <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structframe__type__desc.html">frame_type_desc</a> *frame_desc,</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                                 <span class="keywordtype">float</span> *excitation)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;{</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordtype">float</span> gain;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <span class="keywordtype">int</span> n, r_idx;</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &lt;= <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a>);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">/* Set the offset from which we start reading wmavoice_std_codebook */</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">if</span> (frame_desc-&gt;<a class="code" href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">fcb_type</a> == <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a>) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        r_idx = <a class="code" href="wmavoice_8c.html#ade6f6b77a56783f281c0d7a37554130b">pRNG</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_cntr, block_idx, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        gain  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;silence_gain;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    } <span class="keywordflow">else</span> <span class="comment">/* FCB_TYPE_HARDCODED */</span> {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        r_idx = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        gain  = <a class="code" href="wmavoice__data_8h.html#a41485bf12c66c1fa54cef473fd944538">wmavoice_gain_universal</a>[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6)];</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="comment">/* Clear gain prediction parameters */</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err));</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="comment">/* Apply gain to hardcoded codebook and use that as excitation signal */</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; n++)</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        excitation[n] = <a class="code" href="wmavoice__data_8h.html#aea5bab69cb4356f6671ff3911fa1eed4">wmavoice_std_codebook</a>[r_idx + n] * gain;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a3349235585b7e064015c911074d6dbb5"> 1306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a3349235585b7e064015c911074d6dbb5">synth_block_fcb_acb</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                                <span class="keywordtype">int</span> block_idx, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                                <span class="keywordtype">int</span> block_pitch_sh2,</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                                <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structframe__type__desc.html">frame_type_desc</a> *frame_desc,</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                                <span class="keywordtype">float</span> *excitation)</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;{</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> gain_coeff[6] = {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        0.8169, -0.06545, 0.1726, 0.0185, -0.0359, 0.0458</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    };</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>[<a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2], pred_err, acb_gain, fcb_gain;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordtype">int</span> n, idx, gain_weight;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <a class="code" href="struct_a_m_r_fixed.html">AMRFixed</a> fcb;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &lt;= <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / 2);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    memset(<a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>, 0, <span class="keyword">sizeof</span>(*<a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>) * <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    fcb.<a class="code" href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">pitch_lag</a>      = block_pitch_sh2 &gt;&gt; 2;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;    fcb.<a class="code" href="struct_a_m_r_fixed.html#a4adabf0a62d7947f08f72eca119255e6">pitch_fac</a>      = 1.0;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    fcb.<a class="code" href="struct_a_m_r_fixed.html#a1ef4f00779842ca3fc5503ff2edec7e7">no_repeat_mask</a> = 0;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    fcb.<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>              = 0;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">/* For the other frame types, this is where we apply the innovation</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">     * (fixed) codebook pulses of the speech signal. */</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="keywordflow">if</span> (frame_desc-&gt;<a class="code" href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">fcb_type</a> == <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">FCB_TYPE_AW_PULSES</a>) {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <a class="code" href="wmavoice_8c.html#ae914057aab72ae3bbd1ee78902e69bcd">aw_pulse_set1</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, block_idx, &amp;fcb);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="wmavoice_8c.html#a1d0edab9dba4e7e1e8124c1fc2d61a1c">aw_pulse_set2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, block_idx, &amp;fcb)) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            <span class="comment">/* Conceal the block with silence and return.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">             * Skip the correct amount of bits to read the next</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">             * block from the correct offset. */</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <span class="keywordtype">int</span> r_idx = <a class="code" href="wmavoice_8c.html#ade6f6b77a56783f281c0d7a37554130b">pRNG</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_cntr, block_idx, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; n++)</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                excitation[n] =</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                    <a class="code" href="wmavoice__data_8h.html#aea5bab69cb4356f6671ff3911fa1eed4">wmavoice_std_codebook</a>[r_idx + n] * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;silence_gain;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 7 + 1);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    } <span class="keywordflow">else</span> <span class="comment">/* FCB_TYPE_EXC_PULSES */</span> {</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <span class="keywordtype">int</span> offset_nbits = 5 - frame_desc-&gt;<a class="code" href="structframe__type__desc.html#a225f9bd3f88ce049b02aa092c8d1f1a5">log_n_blocks</a>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        fcb.<a class="code" href="struct_a_m_r_fixed.html#a1ef4f00779842ca3fc5503ff2edec7e7">no_repeat_mask</a> = -1;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="comment">/* similar to ff_decode_10_pulses_35bits(), but with single pulses</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">         * (instead of double) for a subset of pulses */</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; 5; n++) {</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordtype">float</span> sign;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            <span class="keywordtype">int</span> pos1, pos2;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            sign           = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb) ? 1.0 : -1.0;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            pos1           = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, offset_nbits);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            fcb.<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb.<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>]   = n + 5 * pos1;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;            fcb.<a class="code" href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">y</a>[fcb.<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>++] = sign;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;            <span class="keywordflow">if</span> (n &lt; frame_desc-&gt;dbl_pulses) {</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                pos2           = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, offset_nbits);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                fcb.<a class="code" href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">x</a>[fcb.<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>]   = n + 5 * pos2;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                fcb.<a class="code" href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">y</a>[fcb.<a class="code" href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">n</a>++] = (pos1 &lt; pos2) ? -sign : sign;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            }</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        }</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    }</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;    <a class="code" href="acelp__vectors_8c.html#ad79bdba0226bfc3171f8e088d5270526">ff_set_fixed_vector</a>(<a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>, &amp;fcb, 1.0, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160; </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="comment">/* Calculate gain for adaptive &amp; fixed codebook signal.</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">     * see ff_amr_set_fixed_gain(). */</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    idx = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 7);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    fcb_gain = <a class="code" href="libm_8h.html#a70609775e8ac20380d4382942f88c7b4">expf</a>(<a class="code" href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err,</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                                 gain_coeff, 6) -</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                    5.2409161640 + <a class="code" href="wmavoice__data_8h.html#a4e3a6a2f0250b68a09ab799748939aaa">wmavoice_gain_codebook_fcb</a>[idx]);</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    acb_gain = <a class="code" href="wmavoice__data_8h.html#af0a334142953119b9ed2eb7f889661dd">wmavoice_gain_codebook_acb</a>[idx];</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    pred_err = av_clipf(<a class="code" href="wmavoice__data_8h.html#a4e3a6a2f0250b68a09ab799748939aaa">wmavoice_gain_codebook_fcb</a>[idx],</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                        -2.9957322736 <span class="comment">/* log(0.05) */</span>,</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;                         1.6094379124 <span class="comment">/* log(5.0)  */</span>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    gain_weight = 8 &gt;&gt; frame_desc-&gt;<a class="code" href="structframe__type__desc.html#a225f9bd3f88ce049b02aa092c8d1f1a5">log_n_blocks</a>;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    memmove(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err[gain_weight], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err,</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err) * (6 - gain_weight));</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; gain_weight; n++)</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gain_pred_err[n] = pred_err;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <span class="comment">/* Calculation of adaptive codebook */</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (frame_desc-&gt;<a class="code" href="structframe__type__desc.html#a3f34a7aff7ebb8b3a1a0a5d62b5bf019">acb_type</a> == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>; n += <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;            <span class="keywordtype">int</span> next_idx_sh16;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;            <span class="keywordtype">int</span> abs_idx    = block_idx * <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> + n;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            <span class="keywordtype">int</span> pitch_sh16 = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val &lt;&lt; 16) +</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                             <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_diff_sh16 * abs_idx;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;            <span class="keywordtype">int</span> pitch      = (pitch_sh16 + 0x6FFF) &gt;&gt; 16;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            <span class="keywordtype">int</span> idx_sh16   = ((pitch &lt;&lt; 16) - pitch_sh16) * 8 + 0x58000;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;            idx            = idx_sh16 &gt;&gt; 16;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_diff_sh16) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_diff_sh16 &gt; 0) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                    next_idx_sh16 = (idx_sh16) &amp;~ 0xFFFF;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                    next_idx_sh16 = (idx_sh16 + 0x10000) &amp;~ 0xFFFF;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = av_clip((idx_sh16 - next_idx_sh16) / <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_diff_sh16 / 8,</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                              1, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - n);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> = <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            <a class="code" href="acelp__filters_8c.html#ae56e58c2d0191551a23a41f72a73d329">ff_acelp_interpolatef</a>(&amp;excitation[n], &amp;excitation[n - pitch],</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                                  <a class="code" href="wmavoice__data_8h.html#a0c63d641283610a00b9b82d869b89ea2">wmavoice_ipol1_coeffs</a>, 17,</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                                  idx, 9, <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;        }</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    } <span class="keywordflow">else</span> <span class="comment">/* ACB_TYPE_HAMMING */</span> {</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;        <span class="keywordtype">int</span> block_pitch = block_pitch_sh2 &gt;&gt; 2;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        idx             = block_pitch_sh2 &amp; 3;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> (idx) {</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;            <a class="code" href="acelp__filters_8c.html#ae56e58c2d0191551a23a41f72a73d329">ff_acelp_interpolatef</a>(excitation, &amp;excitation[-block_pitch],</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                                  <a class="code" href="wmavoice__data_8h.html#a1f4cbf0885ab4455634ebe53e76fd644">wmavoice_ipol2_coeffs</a>, 4,</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                                  idx, 8, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga3ea4736dcceab4ba033b8abd2c2a180e">av_memcpy_backptr</a>((<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *) excitation, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * block_pitch,</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                              <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    }</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    <span class="comment">/* Interpolate ACB/FCB and use as excitation signal */</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="acelp__vectors_8c.html#ae6f91c4819ad805fec298b39b860f2aa">ff_weighted_vector_sumf</a>(excitation, excitation, <a class="code" href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a>,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                            acb_gain, fcb_gain, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#af66c169b42afeaaa99f3442b3e1f53a7"> 1440</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#af66c169b42afeaaa99f3442b3e1f53a7">synth_block</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                        <span class="keywordtype">int</span> block_idx, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                        <span class="keywordtype">int</span> block_pitch_sh2,</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">double</span> *lsps, <span class="keyword">const</span> <span class="keywordtype">double</span> *prev_lsps,</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                        <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structframe__type__desc.html">frame_type_desc</a> *frame_desc,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                        <span class="keywordtype">float</span> *excitation, <span class="keywordtype">float</span> *synth)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordtype">double</span> i_lsps[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>];</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordtype">float</span> lpcs[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>];</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keywordtype">float</span> fac;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordtype">int</span> n;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="keywordflow">if</span> (frame_desc-&gt;<a class="code" href="structframe__type__desc.html#a3f34a7aff7ebb8b3a1a0a5d62b5bf019">acb_type</a> == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a>)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <a class="code" href="wmavoice_8c.html#ae10409ef08a934d1d75d8ad4b2b595f4">synth_block_hardcoded</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, block_idx, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, frame_desc, excitation);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <a class="code" href="wmavoice_8c.html#a3349235585b7e064015c911074d6dbb5">synth_block_fcb_acb</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, block_idx, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, block_pitch_sh2,</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                            frame_desc, excitation);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="comment">/* convert interpolated LSPs to LPCs */</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    fac = (block_idx + 0.5) / frame_desc-&gt;<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++) <span class="comment">// LSF -&gt; LSP</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        i_lsps[n] = cos(prev_lsps[n] + fac * (lsps[n] - prev_lsps[n]));</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="lsp_8c.html#a06d95f875a659ddbac7f219329df5a4a">ff_acelp_lspd2lpc</a>(i_lsps, lpcs, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps &gt;&gt; 1);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160; </div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="comment">/* Speech synthesis */</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <a class="code" href="celp__filters_8c.html#a4b1d7631dad08f69e5047c8e8a7f0ef2">ff_celp_lp_synthesis_filterf</a>(synth, lpcs, excitation, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a44fc87023e686e57c006acd548c62f6f"> 1482</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a44fc87023e686e57c006acd548c62f6f">synth_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> frame_idx,</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                       <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>,</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;                       <span class="keyword">const</span> <span class="keywordtype">double</span> *lsps, <span class="keyword">const</span> <span class="keywordtype">double</span> *prev_lsps,</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;                       <span class="keywordtype">float</span> *excitation, <span class="keywordtype">float</span> *synth)</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;{</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordtype">int</span> n, n_blocks_x2, log_n_blocks_x2, <a class="code" href="attributes_8h.html#a934ff195492486f0f9d22770103e757b">av_uninit</a>(cur_pitch_val);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordtype">int</span> pitch[<a class="code" href="wmavoice_8c.html#aba7f789f3266685ad8840806656e3692">MAX_BLOCKS</a>], <a class="code" href="attributes_8h.html#a934ff195492486f0f9d22770103e757b">av_uninit</a>(last_block_pitch);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; </div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="comment">/* Parse frame type (&quot;frame header&quot;), see frame_descs */</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <span class="keywordtype">int</span> bd_idx = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vbm_tree[<a class="code" href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a>(gb, <a class="code" href="wmavoice_8c.html#a7d9d98fdebdde7bc77144e9b677ad2b8">frame_type_vlc</a>.<a class="code" href="struct_v_l_c.html#acaf94f3386396a95d3e7042c444a41f7">table</a>, 6, 3)], block_nsamples;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (bd_idx &lt; 0) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;               <span class="stringliteral">&quot;Invalid frame type VLC code, skipping\n&quot;</span>);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    }</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    block_nsamples = <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> / <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a>;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160; </div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="comment">/* Pitch calculation for ACB_TYPE_ASYMMETRIC (&quot;pitch-per-frame&quot;) */</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].acb_type == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>) {</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;        <span class="comment">/* Pitch is provided per frame, which is interpreted as the pitch of</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<span class="comment">         * the last sample of the last block of this frame. We can interpolate</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment">         * the pitch of other blocks (and even pitch-per-sample) by gradually</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">         * incrementing/decrementing prev_frame_pitch to cur_pitch_val. */</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;        n_blocks_x2      = <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a> &lt;&lt; 1;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        log_n_blocks_x2  = <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#a225f9bd3f88ce049b02aa092c8d1f1a5">log_n_blocks</a> + 1;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        cur_pitch_val    = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;min_pitch_val + <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_nbits);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        cur_pitch_val    = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(cur_pitch_val, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_pitch_val - 1);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_acb_type == <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a> ||</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;            20 * <a class="code" href="cuda__runtime_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a>(cur_pitch_val - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val) &gt;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                (cur_pitch_val + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val))</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val = cur_pitch_val;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <span class="comment">/* pitch per block */</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a>; n++) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            <span class="keywordtype">int</span> fac = n * 2 + 1;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            pitch[n] = (<a class="code" href="mathops_8h.html#a22c70c3b9c3c05bad0d5ff51e7ebb3fa">MUL16</a>(fac,                 cur_pitch_val) +</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                        <a class="code" href="mathops_8h.html#a22c70c3b9c3c05bad0d5ff51e7ebb3fa">MUL16</a>((n_blocks_x2 - fac), <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val) +</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                        <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a>) &gt;&gt; log_n_blocks_x2;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160; </div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="comment">/* &quot;pitch-diff-per-sample&quot; for calculation of pitch per sample */</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pitch_diff_sh16 =</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            (cur_pitch_val - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val) * (1 &lt;&lt; 16) / <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a>;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="comment">/* Global gain (if silence) and pitch-adaptive window coordinates */</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].fcb_type) {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a>:</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;silence_gain = <a class="code" href="wmavoice__data_8h.html#a8c444190de4100976d90bf0e66550ddf">wmavoice_gain_silence</a>[<a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 8)];</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">FCB_TYPE_AW_PULSES</a>:</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <a class="code" href="wmavoice_8c.html#a14ac7cd8bbf8f0eb0ebcf299fb3903f9">aw_parse_coords</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, pitch);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a>; n++) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordtype">int</span> bl_pitch_sh2;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="comment">/* Pitch calculation for ACB_TYPE_HAMMING (&quot;pitch-per-block&quot;) */</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].acb_type) {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>: {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="comment">/* Pitch is given per block. Per-block pitches are encoded as an</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">             * absolute value for the first block, and then delta values</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">             * relative to this value) for all subsequent blocks. The scale of</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment">             * this pitch value is semi-logarithmic compared to its use in the</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">             * decoder, so we convert it to normal scale also. */</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <span class="keywordtype">int</span> block_pitch,</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                <a class="code" href="regdef_8h.html#a65f7891fccbfcf7d08964555630773b3">t1</a> = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[1] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[0]) &lt;&lt; 2,</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                <a class="code" href="regdef_8h.html#aa4652e2d6053d420dcbea07a113db5fe">t2</a> = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[2] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[1]) &lt;&lt; 1,</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                <a class="code" href="regdef_8h.html#a71a491fa5f35065b954a3001ebed0f28">t3</a> =  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[3] - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[2] + 1;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            <span class="keywordflow">if</span> (n == 0) {</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                block_pitch = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pitch_nbits);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                block_pitch = last_block_pitch - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_hrange +</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                                 <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_nbits);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            <span class="comment">/* Convert last_ so that any next delta is within _range */</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            last_block_pitch = av_clip(block_pitch,</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_hrange,</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_pitch_range -</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                                           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_delta_pitch_hrange);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;            <span class="comment">/* Convert semi-log-style scale back to normal scale */</span></div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;            <span class="keywordflow">if</span> (block_pitch &lt; <a class="code" href="regdef_8h.html#a65f7891fccbfcf7d08964555630773b3">t1</a>) {</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                bl_pitch_sh2 = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[0] &lt;&lt; 2) + block_pitch;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                block_pitch -= <a class="code" href="regdef_8h.html#a65f7891fccbfcf7d08964555630773b3">t1</a>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                <span class="keywordflow">if</span> (block_pitch &lt; <a class="code" href="regdef_8h.html#aa4652e2d6053d420dcbea07a113db5fe">t2</a>) {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                    bl_pitch_sh2 =</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                        (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[1] &lt;&lt; 2) + (block_pitch &lt;&lt; 1);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                    block_pitch -= <a class="code" href="regdef_8h.html#aa4652e2d6053d420dcbea07a113db5fe">t2</a>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                    <span class="keywordflow">if</span> (block_pitch &lt; <a class="code" href="regdef_8h.html#a71a491fa5f35065b954a3001ebed0f28">t3</a>) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                        bl_pitch_sh2 =</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                            (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[2] + block_pitch) &lt;&lt; 2;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                        bl_pitch_sh2 = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_conv_table[3] &lt;&lt; 2;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                }</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            }</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            pitch[n] = bl_pitch_sh2 &gt;&gt; 2;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>: {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            bl_pitch_sh2 = pitch[n] &lt;&lt; 2;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        <span class="keywordflow">default</span>: <span class="comment">// ACB_TYPE_NONE has no pitch</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            bl_pitch_sh2 = 0;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        }</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <a class="code" href="wmavoice_8c.html#af66c169b42afeaaa99f3442b3e1f53a7">synth_block</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, gb, n, block_nsamples, bl_pitch_sh2,</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                    lsps, prev_lsps, &amp;<a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx],</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                    &amp;excitation[n * block_nsamples],</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                    &amp;synth[n * block_nsamples]);</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    }</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;    <span class="comment">/* Averaging projection filter, if applicable. Else, just copy samples</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="comment">     * from synthesis buffer */</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;do_apf) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="keywordtype">double</span> i_lsps[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>];</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordtype">float</span> lpcs[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>];</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++) <span class="comment">// LSF -&gt; LSP</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            i_lsps[n] = cos(0.5 * (prev_lsps[n] + lsps[n]));</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <a class="code" href="lsp_8c.html#a06d95f875a659ddbac7f219329df5a4a">ff_acelp_lspd2lpc</a>(i_lsps, lpcs, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps &gt;&gt; 1);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <a class="code" href="wmavoice_8c.html#a9420654f284cf804c9c00b014a969d36">postfilter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, synth, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, 80, lpcs,</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                   &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples + <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> * frame_idx],</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                   <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">fcb_type</a>, pitch[0]);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++) <span class="comment">// LSF -&gt; LSP</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            i_lsps[n] = cos(lsps[n]);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        <a class="code" href="lsp_8c.html#a06d95f875a659ddbac7f219329df5a4a">ff_acelp_lspd2lpc</a>(i_lsps, lpcs, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps &gt;&gt; 1);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <a class="code" href="wmavoice_8c.html#a9420654f284cf804c9c00b014a969d36">postfilter</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, &amp;synth[80], &amp;<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>[80], 80, lpcs,</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                   &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples + <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a> * frame_idx + 80],</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                   <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">fcb_type</a>, pitch[0]);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        memcpy(<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, synth, 160 * <span class="keyword">sizeof</span>(synth[0]));</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">/* Cache values for next frame */</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_cntr++;</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_cntr &gt;= 0xFFFF) <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_cntr -= 0xFFFF; <span class="comment">// i.e. modulo (%)</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_acb_type = <a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#a3f34a7aff7ebb8b3a1a0a5d62b5bf019">acb_type</a>;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].acb_type) {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a>:</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val = 0;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a>:</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val = cur_pitch_val;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a>:</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pitch_val = pitch[<a class="code" href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a>[bd_idx].<a class="code" href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">n_blocks</a> - 1];</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;}</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#aa1dc384eff5b4146adff445ac964fbbe"> 1658</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#aa1dc384eff5b4146adff445ac964fbbe">stabilize_lsps</a>(<span class="keywordtype">double</span> *lsps, <span class="keywordtype">int</span> num)</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;{</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="keywordtype">int</span> n, m, l;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="comment">/* set minimum value for first, maximum value for last and minimum</span></div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">     * spacing between LSF values.</span></div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">     * Very similar to ff_set_min_dist_lsf(), but in double. */</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    lsps[0]       = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(lsps[0],       0.0015 * <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="keywordflow">for</span> (n = 1; n &lt; num; n++)</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;        lsps[n]   = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(lsps[n],       lsps[n - 1] + 0.0125 * <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    lsps[num - 1] = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(lsps[num - 1], 0.9985 * <a class="code" href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="comment">/* reorder (looks like one-time / non-recursed bubblesort).</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;<span class="comment">     * Very similar to ff_sort_nearly_sorted_floats(), but in double. */</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">for</span> (n = 1; n &lt; num; n++) {</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">if</span> (lsps[n] &lt; lsps[n - 1]) {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            <span class="keywordflow">for</span> (m = 1; m &lt; num; m++) {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                <span class="keywordtype">double</span> tmp = lsps[m];</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                <span class="keywordflow">for</span> (l = m - 1; l &gt;= 0; l--) {</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                    <span class="keywordflow">if</span> (lsps[l] &lt;= tmp) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                    lsps[l + 1] = lsps[l];</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                }</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                lsps[l + 1] = tmp;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;        }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    }</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;}</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01704"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a378d73bfe78ce4fe8d7f578a3b58dcf9"> 1704</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a378d73bfe78ce4fe8d7f578a3b58dcf9">synth_superframe</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>,</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                            <span class="keywordtype">int</span> *got_frame_ptr)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;{</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb, s_gb;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    <span class="keywordtype">int</span> n, res, n_samples = <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keywordtype">double</span> lsps[<a class="code" href="wmavoice_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a>][<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>];</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">double</span> *<a class="code" href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps == 16 ?</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <a class="code" href="wmavoice__data_8h.html#aa2fc582be9ba7a0acd3ab1407e7b271c">wmavoice_mean_lsf16</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsp_def_mode] : <a class="code" href="wmavoice__data_8h.html#ab5234d971e6cd5bd15c062003fa12fea">wmavoice_mean_lsf10</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsp_def_mode];</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="keywordtype">float</span> excitation[<a class="code" href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a> + <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a> + 12];</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordtype">float</span> synth[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a> + <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>];</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160; </div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    memcpy(synth,      <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_history,</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps             * <span class="keyword">sizeof</span>(*synth));</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    memcpy(excitation, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;excitation_history,</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples * <span class="keyword">sizeof</span>(*excitation));</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size &gt; 0) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        gb = &amp;s_gb;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        <a class="code" href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size = 0;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="comment">/* First bit is speech/music bit, it differentiates between WMAVoice</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment">     * speech samples (the actual codec) and WMAVoice music samples, which</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment">     * are really WMAPro-in-WMAVoice-superframes. I&#39;ve never seen those in</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment">     * the wild yet. */</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="stringliteral">&quot;WMAPro-in-WMAVoice&quot;</span>);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    }</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="comment">/* (optional) nr. of samples in superframe; always &lt;= 480 and &gt;= 0 */</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        <span class="keywordflow">if</span> ((n_samples = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 12)) &gt; <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                   <span class="stringliteral">&quot;Superframe encodes &gt; %d samples (%d), not allowed\n&quot;</span>,</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                   <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>, n_samples);</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; </div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="comment">/* Parse LSPs, if global for the superframe (can also be per-frame). */</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;has_residual_lsps) {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <span class="keywordtype">double</span> prev_lsps[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a>], <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a> * 2], <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>[<a class="code" href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a> * 2];</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++)</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;            prev_lsps[n] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lsps[n] - <a class="code" href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a>[n];</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps == 10) {</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            <a class="code" href="wmavoice_8c.html#a4bcfe545d47ef6500c85c2ae20561562">dequant_lsp10r</a>(gb, lsps[2], prev_lsps, <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>, <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsp_q_mode);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;        } <span class="keywordflow">else</span> <span class="comment">/* s-&gt;lsps == 16 */</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            <a class="code" href="wmavoice_8c.html#a07fc88d41ef7536e6d5a56d49649e9a8">dequant_lsp16r</a>(gb, lsps[2], prev_lsps, <a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>, <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsp_q_mode);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; n++) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;            lsps[0][n]  = <a class="code" href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a>[n] + (<a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[n]           - <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>[n * 2]);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            lsps[1][n]  = <a class="code" href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a>[n] + (<a class="code" href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a>[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps + n] - <a class="code" href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a>[n * 2 + 1]);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;            lsps[2][n] += <a class="code" href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a>[n];</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="keywordflow">for</span> (n = 0; n &lt; 3; n++)</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            <a class="code" href="wmavoice_8c.html#aa1dc384eff5b4146adff445ac964fbbe">stabilize_lsps</a>(lsps[n], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="comment">/* synth_superframe can run multiple times per packet</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">     * free potential previous frame */</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <a class="code" href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="comment">/* get output buffer */</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples = <a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">if</span> ((res = <a class="code" href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;nb_samples = n_samples;</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a> = (<span class="keywordtype">float</span> *)<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <span class="comment">/* Parse frames, optionally preceded by per-frame (independent) LSPs. */</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (n = 0; n &lt; 3; n++) {</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;has_residual_lsps) {</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            <span class="keywordtype">int</span> m;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps == 10) {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                <a class="code" href="wmavoice_8c.html#a3e6dac1f8bb497a4947cf6a8b867d2a5">dequant_lsp10i</a>(gb, lsps[n]);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            } <span class="keywordflow">else</span> <span class="comment">/* s-&gt;lsps == 16 */</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                <a class="code" href="wmavoice_8c.html#a4680b80c57e54efb60eb738a13860c1f">dequant_lsp16i</a>(gb, lsps[n]);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160; </div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            <span class="keywordflow">for</span> (m = 0; m &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps; m++)</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                lsps[n][m] += <a class="code" href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a>[m];</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <a class="code" href="wmavoice_8c.html#aa1dc384eff5b4146adff445ac964fbbe">stabilize_lsps</a>(lsps[n], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; </div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;        <span class="keywordflow">if</span> ((res = <a class="code" href="wmavoice_8c.html#a44fc87023e686e57c006acd548c62f6f">synth_frame</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, gb, n,</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                               &amp;<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>[n * <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a>],</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                               lsps[n], n == 0 ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lsps : lsps[n - 1],</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                               &amp;excitation[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples + n * <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a>],</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                               &amp;synth[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps + n * <a class="code" href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a>]))) {</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;            *got_frame_ptr = 0;</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;        }</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    }</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="comment">/* Statistics? FIXME - we don&#39;t check for length, a slight overrun</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="comment">     * will be caught by internal buffer padding, and anything else</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<span class="comment">     * will be skipped, not read. */</span></div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb)) {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        res = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 4);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 10 * (res + 1));</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    }</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 0) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <a class="code" href="wmavoice_8c.html#a86da11db4e007b52da588be63d40eb5c">wmavoice_flush</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    }</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    *got_frame_ptr = 1;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160; </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="comment">/* Update history */</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lsps,           lsps[2],</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps             * <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;prev_lsps));</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;synth_history,      &amp;synth[<a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>],</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lsps             * <span class="keyword">sizeof</span>(*synth));</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;excitation_history, &amp;excitation[<a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>],</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples * <span class="keyword">sizeof</span>(*excitation));</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;do_apf)</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        memmove(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf,       &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf[<a class="code" href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a>],</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;history_nsamples * <span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;zero_exc_pf));</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;}</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a4c38d5eab95fa47b39df7efbadda0152"> 1840</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a4c38d5eab95fa47b39df7efbadda0152">parse_packet_header</a>(<a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;{</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> res, n_superframes = 0;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160; </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, 4);          <span class="comment">// packet sequence number</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;has_residual_lsps = <a class="code" href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a>(gb);</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &lt; 6 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_bitsize)</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        res = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, 6); <span class="comment">// number of superframes per packet</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                               <span class="comment">// (minus first one if there is spillover)</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        n_superframes += res;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    } <span class="keywordflow">while</span> (res == 0x3F);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits   = <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_bitsize);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb) &gt;= 0 ? n_superframes : <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;}</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a771b5152aaa6f8df09caf6bde0d5d271"> 1875</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="wmavoice_8c.html#a771b5152aaa6f8df09caf6bde0d5d271">copy_bits</a>(<a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb,</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                      <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>,</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                      <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb, <span class="keywordtype">int</span> nbits)</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;{</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordtype">int</span> rmn_bytes, rmn_bits;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    rmn_bits = rmn_bytes = <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb);</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">if</span> (rmn_bits &lt; nbits)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span> (nbits &gt; pb-&gt;<a class="code" href="struct_put_bit_context.html#a4d66ad713a6bf455ddaed734bedd8b54">size_in_bits</a> - <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(pb))</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    rmn_bits &amp;= 7; rmn_bytes &gt;&gt;= 3;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordflow">if</span> ((rmn_bits = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(rmn_bits, nbits)) &gt; 0)</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, rmn_bits, <a class="code" href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a>(gb, rmn_bits));</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <a class="code" href="bitstream_8c.html#a8cb094c856ce761535cd9ed7e8def529">ff_copy_bits</a>(pb, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> + <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> - rmn_bytes,</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                 <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(nbits - rmn_bits, rmn_bytes &lt;&lt; 3));</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;}</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#af3471ed7311bfa1c7a0a0042cbb3164e"> 1904</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#af3471ed7311bfa1c7a0a0042cbb3164e">wmavoice_decode_packet</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">void</span> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>,</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                                  <span class="keywordtype">int</span> *got_frame_ptr, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt)</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;{</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="struct_get_bit_context.html">GetBitContext</a> *gb = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, res, <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>;</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    <span class="comment">/* Packets are sometimes a multiple of ctx-&gt;block_align, with a packet</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment">     * header at each ctx-&gt;block_align bytes. However, FFmpeg&#39;s ASF demuxer</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">     * feeds us ASF packets, which may concatenate multiple &quot;codec&quot; packets</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">     * in a single &quot;muxer&quot; packet, so we artificially emulate that by</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="comment">     * capping the packet size at ctx-&gt;block_align. */</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> &gt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align; <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> -= <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;gb, avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">/* size == ctx-&gt;block_align is used to indicate whether we are dealing with</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">     * a new packet or a packet of which we already read the packet header</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">     * previously. */</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;block_align)) { <span class="comment">// new packet header</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>) {</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits = 0;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_superframes = 0;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;            <span class="keywordflow">if</span> ((res = <a class="code" href="wmavoice_8c.html#a4c38d5eab95fa47b39df7efbadda0152">parse_packet_header</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_superframes = res;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        }</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; </div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        <span class="comment">/* If the packet header specifies a s-&gt;spillover_nbits, then we want</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment">         * to push out all data of the previous packet (+ spillover) before</span></div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">         * continuing to parse new superframes in the current packet. */</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size &gt; 0) {</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            <span class="keywordtype">int</span> cnt = <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            <span class="keywordflow">if</span> (cnt + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits &gt; avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> * 8) {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits = avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> * 8 - cnt;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;            }</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            <a class="code" href="wmavoice_8c.html#a771b5152aaa6f8df09caf6bde0d5d271">copy_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            <span class="keywordflow">if</span> ((res = <a class="code" href="wmavoice_8c.html#a378d73bfe78ce4fe8d7f578a3b58dcf9">synth_superframe</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, got_frame_ptr)) == 0 &amp;&amp;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                *got_frame_ptr) {</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                cnt += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_bits_next = cnt &amp; 7;</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                res = cnt &gt;&gt; 3;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a> (gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits - cnt +</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                                <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb)); <span class="comment">// resync</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits) {</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <a class="code" href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;spillover_nbits);  <span class="comment">// resync</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_bits_next)</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <a class="code" href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a>(gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_bits_next);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="comment">/* Try parsing superframes in current packet */</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size = 0;</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_bits_next = 0;</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a> = <a class="code" href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a>(gb);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_superframes-- == 0) {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        *got_frame_ptr = 0;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;nb_superframes &gt; 0) {</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        <span class="keywordflow">if</span> ((res = <a class="code" href="wmavoice_8c.html#a378d73bfe78ce4fe8d7f578a3b58dcf9">synth_superframe</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>, got_frame_ptr)) &lt; 0) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;            <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*got_frame_ptr) {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            <span class="keywordtype">int</span> cnt = <a class="code" href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a>(gb);</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;skip_bits_next = cnt &amp; 7;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;            res = cnt &gt;&gt; 3;</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        }</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size = <a class="code" href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a>) &gt; 0) {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="comment">/* ... cache it for spillover in next packet */</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache, <a class="code" href="wmavoice_8c.html#a27f0967c6f7a76ec1d49fa986eaaf3a4">SFRAME_CACHE_MAXSIZE</a>);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <a class="code" href="wmavoice_8c.html#a771b5152aaa6f8df09caf6bde0d5d271">copy_bits</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pb, avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, gb, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sframe_cache_size);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="comment">// FIXME bad - just copy bytes as whole and add use the</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="comment">// skip_bits_next field</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    }</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;}</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#a340d313c728574af448e7a18d2dd3240"> 1985</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="wmavoice_8c.html#a340d313c728574af448e7a18d2dd3240">wmavoice_decode_end</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;{</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <a class="code" href="struct_w_m_a_voice_context.html">WMAVoiceContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">priv_data</a>;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;do_apf) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        <a class="code" href="rdft_8c.html#a951fbcabd5915639bcd5ca185a5de7b4">ff_rdft_end</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;rdft);</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <a class="code" href="rdft_8c.html#a951fbcabd5915639bcd5ca185a5de7b4">ff_rdft_end</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;irdft);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <a class="code" href="dct_8c.html#af26e6af7b6651d5da2616de192e17ce6">ff_dct_end</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        <a class="code" href="dct_8c.html#af26e6af7b6651d5da2616de192e17ce6">ff_dct_end</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dst);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    }</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;}</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"><a class="line" href="wmavoice_8c.html#af688278c0cf0729cd0ceea015f5d6919"> 1999</a></span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="wmavoice_8c.html#af688278c0cf0729cd0ceea015f5d6919">ff_wmavoice_decoder</a> = {</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>             = <span class="stringliteral">&quot;wmavoice&quot;</span>,</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    .long_name        = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;Windows Media Audio Voice&quot;</span>),</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    .type             = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    .id               = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3b3a0eff07db4a47cdb88c1180b3ca66">AV_CODEC_ID_WMAVOICE</a>,</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    .priv_data_size   = <span class="keyword">sizeof</span>(<a class="code" href="wmavoice_8c.html#a710394937fbacb00ba47833e5f2a5299">WMAVoiceContext</a>),</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>             = <a class="code" href="wmavoice_8c.html#a1278740a8a8000645c462577e7714b16">wmavoice_decode_init</a>,</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    .close            = <a class="code" href="wmavoice_8c.html#a340d313c728574af448e7a18d2dd3240">wmavoice_decode_end</a>,</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    .<a class="code" href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a>           = <a class="code" href="wmavoice_8c.html#af3471ed7311bfa1c7a0a0042cbb3164e">wmavoice_decode_packet</a>,</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    .capabilities     = <a class="code" href="group__lavc__core.html#ga6503701220892f061eca2355cadee3c8">AV_CODEC_CAP_SUBFRAMES</a> | <a class="code" href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a> | <a class="code" href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a>,</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    .caps_internal    = <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    .<a class="code" href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a>            = <a class="code" href="wmavoice_8c.html#a86da11db4e007b52da588be63d40eb5c">wmavoice_flush</a>,</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;};</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aget__bits_8h_html_a47c3a35ba8dece0168d84181f224b55d"><div class="ttname"><a href="get__bits_8h.html#a47c3a35ba8dece0168d84181f224b55d">skip_bits_long</a></div><div class="ttdeci">static void skip_bits_long(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00291">get_bits.h:291</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_ggaeeabd062332b246d19bed36e041d2df6a6b14deec67dfefcbf3d873a7e55f9358"><div class="ttname"><a href="group__lavc__fft.html#ggaeeabd062332b246d19bed36e041d2df6a6b14deec67dfefcbf3d873a7e55f9358">DCT_I</a></div><div class="ttdeci">@ DCT_I</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00096">avfft.h:96</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_aea5bab69cb4356f6671ff3911fa1eed4"><div class="ttname"><a href="wmavoice__data_8h.html#aea5bab69cb4356f6671ff3911fa1eed4">wmavoice_std_codebook</a></div><div class="ttdeci">static const float wmavoice_std_codebook[1000]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02585">wmavoice_data.h:2585</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="avsrc__mandelbrot_8c_html_ad122b67a823bfba5b00d01ecc929a3c0"><div class="ttname"><a href="vsrc__mandelbrot_8c.html#ad122b67a823bfba5b00d01ecc929a3c0">interpol</a></div><div class="ttdeci">static int interpol(MBContext *s, uint32_t *color, int x, int y, int linesize)</div><div class="ttdef"><b>Definition:</b> <a href="vsrc__mandelbrot_8c_source.html#l00195">vsrc_mandelbrot.c:195</a></div></div>
<div class="ttc" id="awmavoice_8c_html_af969c73bce0ae0bb16d24738fb61ea26"><div class="ttname"><a href="wmavoice_8c.html#af969c73bce0ae0bb16d24738fb61ea26">MAX_LSPS</a></div><div class="ttdeci">#define MAX_LSPS</div><div class="ttdoc">maximum filter order</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00048">wmavoice.c:48</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a1d0edab9dba4e7e1e8124c1fc2d61a1c"><div class="ttname"><a href="wmavoice_8c.html#a1d0edab9dba4e7e1e8124c1fc2d61a1c">aw_pulse_set2</a></div><div class="ttdeci">static int aw_pulse_set2(WMAVoiceContext *s, GetBitContext *gb, int block_idx, AMRFixed *fcb)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01088">wmavoice.c:1088</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="aacelp__vectors_8h_html"><div class="ttname"><a href="acelp__vectors_8h.html">acelp_vectors.h</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a44d39cea027a76211f31e3bf2e3e68a4"><div class="ttname"><a href="get__bits_8h.html#a44d39cea027a76211f31e3bf2e3e68a4">get_bits_left</a></div><div class="ttdeci">static int get_bits_left(GetBitContext *gb)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00849">get_bits.h:849</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html_a1ef4f00779842ca3fc5503ff2edec7e7"><div class="ttname"><a href="struct_a_m_r_fixed.html#a1ef4f00779842ca3fc5503ff2edec7e7">AMRFixed::no_repeat_mask</a></div><div class="ttdeci">int no_repeat_mask</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00057">acelp_vectors.h:57</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aaae41c4f28d4898e45efebb865f7f811"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aaae41c4f28d4898e45efebb865f7f811">WMAVoiceContext::gain_pred_err</a></div><div class="ttdeci">float gain_pred_err[6]</div><div class="ttdoc">cache for gain prediction</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00250">wmavoice.c:250</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a2b4c3d867c60d0630cad12ba3b1ecf39"><div class="ttname"><a href="wmavoice__data_8h.html#a2b4c3d867c60d0630cad12ba3b1ecf39">wmavoice_dq_lsp10i</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp10i[0xf00]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l00033">wmavoice_data.h:33</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a710394937fbacb00ba47833e5f2a5299"><div class="ttname"><a href="wmavoice_8c.html#a710394937fbacb00ba47833e5f2a5299">WMAVoiceContext</a></div><div class="ttdeci">struct WMAVoiceContext WMAVoiceContext</div></div>
<div class="ttc" id="atests_2movenc_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="tests_2movenc_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00054">movenc.c:54</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_af459d29d58661ae3855ddfeea97bf362"><div class="ttname"><a href="struct_w_m_a_voice_context.html#af459d29d58661ae3855ddfeea97bf362">WMAVoiceContext::prev_lsps</a></div><div class="ttdeci">double prev_lsps[MAX_LSPS]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00220">wmavoice.c:220</a></div></div>
<div class="ttc" id="acbs__h2645_8c_html_a134a0c87e88a327dcbeee6de7b0d6282"><div class="ttname"><a href="cbs__h2645_8c.html#a134a0c87e88a327dcbeee6de7b0d6282">u</a></div><div class="ttdeci">#define u(width, name, range_min, range_max)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__h2645_8c_source.html#l00262">cbs_h2645.c:262</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a13ab940c068ce99f11bacc7520835dee"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a13ab940c068ce99f11bacc7520835dee">WMAVoiceContext::denoise_filter_cache</a></div><div class="ttdeci">float denoise_filter_cache[MAX_FRAMESIZE]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00277">wmavoice.c:277</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a21e9688d25be2d3a2e4d36142f3bf801"><div class="ttname"><a href="wmavoice_8c.html#a21e9688d25be2d3a2e4d36142f3bf801">frame_descs</a></div><div class="ttdeci">static const struct frame_type_desc frame_descs[17]</div></div>
<div class="ttc" id="avlc_8h_html_a233dcdd511c948256a93b3b740e18460"><div class="ttname"><a href="vlc_8h.html#a233dcdd511c948256a93b3b740e18460">INIT_VLC_STATIC</a></div><div class="ttdeci">#define INIT_VLC_STATIC(vlc, bits, a, b, c, d, e, f, g, static_size)</div><div class="ttdef"><b>Definition:</b> <a href="vlc_8h_source.html#l00084">vlc.h:84</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga53d6da2dcd56f5f87c7afd8b33fa15ba"><div class="ttname"><a href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_MONO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00090">channel_layout.h:90</a></div></div>
<div class="ttc" id="ardft_8h_html"><div class="ttname"><a href="rdft_8h.html">rdft.h</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a579f722aa04e380b4f88814be6ee9740"><div class="ttname"><a href="wmavoice__data_8h.html#a579f722aa04e380b4f88814be6ee9740">wmavoice_dq_lsp16r3</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp16r3[0x600]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l01526">wmavoice_data.h:1526</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a977a14c387f0d708db1975f703050b1b"><div class="ttname"><a href="wmavoice_8c.html#a977a14c387f0d708db1975f703050b1b">dequant_lsps</a></div><div class="ttdeci">static void dequant_lsps(double *lsps, int num, const uint16_t *values, const uint16_t *sizes, int n_stages, const uint8_t *table, const double *mul_q, const double *base_q)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00860">wmavoice.c:860</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a0bcd3e73d6c48e50b9c8fe99a51d2c91"><div class="ttname"><a href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a></div><div class="ttdeci">static void init_put_bits(PutBitContext *s, uint8_t *buffer, int buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00064">put_bits.h:64</a></div></div>
<div class="ttc" id="aget__bits_8h_html_aac3f793480c01f793f2acc9eba031ff5"><div class="ttname"><a href="get__bits_8h.html#aac3f793480c01f793f2acc9eba031ff5">get_bits_count</a></div><div class="ttdeci">static int get_bits_count(const GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00219">get_bits.h:219</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aa6267a6def1d0bf702d8fdfd61419e7c"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aa6267a6def1d0bf702d8fdfd61419e7c">WMAVoiceContext::history_nsamples</a></div><div class="ttdeci">int history_nsamples</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00145">wmavoice.c:145</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="aj2kenc_8c_html_aafc5fd946cab2b9d67be29d48099f703"><div class="ttname"><a href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a></div><div class="ttdeci">static void put_bits(Jpeg2000EncoderContext *s, int val, int n)</div><div class="ttdef"><b>Definition:</b> <a href="j2kenc_8c_source.html#l00218">j2kenc.c:218</a></div></div>
<div class="ttc" id="awmavoice_8c_html_ae914057aab72ae3bbd1ee78902e69bcd"><div class="ttname"><a href="wmavoice_8c.html#ae914057aab72ae3bbd1ee78902e69bcd">aw_pulse_set1</a></div><div class="ttdeci">static void aw_pulse_set1(WMAVoiceContext *s, GetBitContext *gb, int block_idx, AMRFixed *fcb)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01178">wmavoice.c:1178</a></div></div>
<div class="ttc" id="aacelp__filters_8c_html_a954ec58802fda142b84b831430c420be"><div class="ttname"><a href="acelp__filters_8c.html#a954ec58802fda142b84b831430c420be">ff_acelp_apply_order_2_transfer_function</a></div><div class="ttdeci">void ff_acelp_apply_order_2_transfer_function(float *out, const float *in, const float zero_coeffs[2], const float pole_coeffs[2], float gain, float mem[2], int n)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__filters_8c_source.html#l00119">acelp_filters.c:119</a></div></div>
<div class="ttc" id="awmavoice_8c_html_ade6f6b77a56783f281c0d7a37554130b"><div class="ttname"><a href="wmavoice_8c.html#ade6f6b77a56783f281c0d7a37554130b">pRNG</a></div><div class="ttdeci">static int pRNG(int frame_cntr, int block_num, int block_size)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01239">wmavoice.c:1239</a></div></div>
<div class="ttc" id="aprosumer_8c_html_a8f9d32e424405551734404b133418a22"><div class="ttname"><a href="prosumer_8c.html#a8f9d32e424405551734404b133418a22">table</a></div><div class="ttdeci">static const uint16_t table[]</div><div class="ttdef"><b>Definition:</b> <a href="prosumer_8c_source.html#l00206">prosumer.c:206</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a1bafb7555a739d6716d460e13b1c0093"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a1bafb7555a739d6716d460e13b1c0093">WMAVoiceContext::lsp_q_mode</a></div><div class="ttdeci">int lsp_q_mode</div><div class="ttdoc">defines quantizer defaults [0, 1]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00159">wmavoice.c:159</a></div></div>
<div class="ttc" id="alibm_8h_html_a70609775e8ac20380d4382942f88c7b4"><div class="ttname"><a href="libm_8h.html#a70609775e8ac20380d4382942f88c7b4">expf</a></div><div class="ttdeci">#define expf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00283">libm.h:283</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a5f623b116d361d5d22ad9da2ae16b779"><div class="ttname"><a href="wmavoice__data_8h.html#a5f623b116d361d5d22ad9da2ae16b779">wmavoice_denoise_power_table</a></div><div class="ttdeci">static const float wmavoice_denoise_power_table[12][64]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l03064">wmavoice_data.h:3064</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_af0a334142953119b9ed2eb7f889661dd"><div class="ttname"><a href="wmavoice__data_8h.html#af0a334142953119b9ed2eb7f889661dd">wmavoice_gain_codebook_acb</a></div><div class="ttdeci">static const float wmavoice_gain_codebook_acb[128]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02874">wmavoice_data.h:2874</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a3ba3e032e40fae0f98ba46a0f5201195"><div class="ttname"><a href="get__bits_8h.html#a3ba3e032e40fae0f98ba46a0f5201195">get_vlc2</a></div><div class="ttdeci">static av_always_inline int get_vlc2(GetBitContext *s, VLC_TYPE(*table)[2], int bits, int max_depth)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00797">get_bits.h:797</a></div></div>
<div class="ttc" id="avp3data_8h_html_ad44119f8ce1676a4dfac55fd4b74d09c"><div class="ttname"><a href="vp3data_8h.html#ad44119f8ce1676a4dfac55fd4b74d09c">base</a></div><div class="ttdeci">uint8_t base</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="aregdef_8h_html_a65f7891fccbfcf7d08964555630773b3"><div class="ttname"><a href="regdef_8h.html#a65f7891fccbfcf7d08964555630773b3">t1</a></div><div class="ttdeci">#define t1</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00029">regdef.h:29</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bac4700fffa45f4445bf08f90e8eb55c14">ACB_TYPE_ASYMMETRIC</a></div><div class="ttdeci">@ ACB_TYPE_ASYMMETRIC</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00074">wmavoice.c:70</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html"><div class="ttname"><a href="struct_w_m_a_voice_context.html">WMAVoiceContext</a></div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00131">wmavoice.c:131</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a038ff3ddcd755825c4ed913a147e2718"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a038ff3ddcd755825c4ed913a147e2718">WMAVoiceContext::nb_superframes</a></div><div class="ttdeci">int nb_superframes</div><div class="ttdoc">number of superframes in current packet</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00249">wmavoice.c:249</a></div></div>
<div class="ttc" id="acelp__filters_8c_html_a4b1d7631dad08f69e5047c8e8a7f0ef2"><div class="ttname"><a href="celp__filters_8c.html#a4b1d7631dad08f69e5047c8e8a7f0ef2">ff_celp_lp_synthesis_filterf</a></div><div class="ttdeci">void ff_celp_lp_synthesis_filterf(float *out, const float *filter_coeffs, const float *in, int buffer_length, int filter_length)</div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8c_source.html#l00084">celp_filters.c:84</a></div></div>
<div class="ttc" id="aget__bits_8h_html_af65c008755f74e99d139eae8b46534b5"><div class="ttname"><a href="get__bits_8h.html#af65c008755f74e99d139eae8b46534b5">init_get_bits</a></div><div class="ttdeci">static int init_get_bits(GetBitContext *s, const uint8_t *buffer, int bit_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00659">get_bits.h:659</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a43b05f1a85100a759e0490b0f4a04dc6"><div class="ttname"><a href="wmavoice__data_8h.html#a43b05f1a85100a759e0490b0f4a04dc6">wmavoice_dq_lsp16i1</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp16i1[0x640]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l00420">wmavoice_data.h:420</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="astructframe__type__desc_html_a225f9bd3f88ce049b02aa092c8d1f1a5"><div class="ttname"><a href="structframe__type__desc.html#a225f9bd3f88ce049b02aa092c8d1f1a5">frame_type_desc::log_n_blocks</a></div><div class="ttdeci">uint8_t log_n_blocks</div><div class="ttdoc">log2(n_blocks)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00102">wmavoice.c:102</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ad64f3a04850e82fb422fbacef6366640"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ad64f3a04850e82fb422fbacef6366640">WMAVoiceContext::skip_bits_next</a></div><div class="ttdeci">int skip_bits_next</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00197">wmavoice.c:197</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a610df6b7704558756ee5c30247495731"><div class="ttname"><a href="get__bits_8h.html#a610df6b7704558756ee5c30247495731">skip_bits</a></div><div class="ttdeci">static void skip_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00467">get_bits.h:467</a></div></div>
<div class="ttc" id="aget__bits_8h_html_abd82eee339b2471e5d9b4bfecfdc6b5f"><div class="ttname"><a href="get__bits_8h.html#abd82eee339b2471e5d9b4bfecfdc6b5f">get_bits</a></div><div class="ttdeci">static unsigned int get_bits(GetBitContext *s, int n)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00379">get_bits.h:379</a></div></div>
<div class="ttc" id="abitstream_8c_html_a8cb094c856ce761535cd9ed7e8def529"><div class="ttname"><a href="bitstream_8c.html#a8cb094c856ce761535cd9ed7e8def529">ff_copy_bits</a></div><div class="ttdeci">void ff_copy_bits(PutBitContext *pb, const uint8_t *src, int length)</div><div class="ttdef"><b>Definition:</b> <a href="bitstream_8c_source.html#l00069">bitstream.c:69</a></div></div>
<div class="ttc" id="awmavoice_8c_html_af3471ed7311bfa1c7a0a0042cbb3164e"><div class="ttname"><a href="wmavoice_8c.html#af3471ed7311bfa1c7a0a0042cbb3164e">wmavoice_decode_packet</a></div><div class="ttdeci">static int wmavoice_decode_packet(AVCodecContext *ctx, void *data, int *got_frame_ptr, AVPacket *avpkt)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01904">wmavoice.c:1904</a></div></div>
<div class="ttc" id="aarm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_ac4c0777e54085af2f3f1b27130e2b21b"><div class="ttname"><a href="struct_a_v_format_context.html#ac4c0777e54085af2f3f1b27130e2b21b">AVFormatContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01251">avformat.h:1251</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aef95f6af070e8731d8788f469bf4bcf3"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aef95f6af070e8731d8788f469bf4bcf3">WMAVoiceContext::aw_n_pulses</a></div><div class="ttdeci">int aw_n_pulses[2]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00236">wmavoice.c:236</a></div></div>
<div class="ttc" id="appc_2mathops_8h_html_ac07fc98b93b1d0818424d9239cbd7732"><div class="ttname"><a href="ppc_2mathops_8h.html#ac07fc98b93b1d0818424d9239cbd7732">MULH</a></div><div class="ttdeci">#define MULH</div><div class="ttdef"><b>Definition:</b> <a href="ppc_2mathops_8h_source.html#l00042">mathops.h:42</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a86da11db4e007b52da588be63d40eb5c"><div class="ttname"><a href="wmavoice_8c.html#a86da11db4e007b52da588be63d40eb5c">wmavoice_flush</a></div><div class="ttdeci">static av_cold void wmavoice_flush(AVCodecContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00336">wmavoice.c:336</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a36b0c87793d0c77fa45c7fb429c236e1"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a36b0c87793d0c77fa45c7fb429c236e1">WMAVoiceContext::block_pitch_nbits</a></div><div class="ttdeci">int block_pitch_nbits</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00167">wmavoice.c:167</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_gga58a704747daba49afa3611cea218a24baadf7acc2f968f4345998fef751bedc8c"><div class="ttname"><a href="group__lavc__fft.html#gga58a704747daba49afa3611cea218a24baadf7acc2f968f4345998fef751bedc8c">IDFT_C2R</a></div><div class="ttdeci">@ IDFT_C2R</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00073">avfft.h:73</a></div></div>
<div class="ttc" id="ardft_8c_html_a951fbcabd5915639bcd5ca185a5de7b4"><div class="ttname"><a href="rdft_8c.html#a951fbcabd5915639bcd5ca185a5de7b4">ff_rdft_end</a></div><div class="ttdeci">av_cold void ff_rdft_end(RDFTContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="rdft_8c_source.html#l00114">rdft.c:114</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a299e6b61042cc6e2fd2eaa8e4314bbfd"><div class="ttname"><a href="wmavoice_8c.html#a299e6b61042cc6e2fd2eaa8e4314bbfd">calc_input_response</a></div><div class="ttdeci">static void calc_input_response(WMAVoiceContext *s, float *lpcs, int fcb_type, float *coeffs, int remainder)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00605">wmavoice.c:605</a></div></div>
<div class="ttc" id="astructframe__type__desc_html_aa13d4251f2dac6dc431a3c70e161dee2"><div class="ttname"><a href="structframe__type__desc.html#aa13d4251f2dac6dc431a3c70e161dee2">frame_type_desc::n_blocks</a></div><div class="ttdeci">uint8_t n_blocks</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00100">wmavoice.c:100</a></div></div>
<div class="ttc" id="aaeval_8c_html_a16aca557f352132b55bbc3c4769daa8b"><div class="ttname"><a href="aeval_8c.html#a16aca557f352132b55bbc3c4769daa8b">val</a></div><div class="ttdeci">static double val(void *priv, double ch)</div><div class="ttdef"><b>Definition:</b> <a href="aeval_8c_source.html#l00076">aeval.c:76</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a3e6dac1f8bb497a4947cf6a8b867d2a5"><div class="ttname"><a href="wmavoice_8c.html#a3e6dac1f8bb497a4947cf6a8b867d2a5">dequant_lsp10i</a></div><div class="ttdeci">static void dequant_lsp10i(GetBitContext *gb, double *lsps)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00891">wmavoice.c:891</a></div></div>
<div class="ttc" id="awmavoice_8c_html_af66c169b42afeaaa99f3442b3e1f53a7"><div class="ttname"><a href="wmavoice_8c.html#af66c169b42afeaaa99f3442b3e1f53a7">synth_block</a></div><div class="ttdeci">static void synth_block(WMAVoiceContext *s, GetBitContext *gb, int block_idx, int size, int block_pitch_sh2, const double *lsps, const double *prev_lsps, const struct frame_type_desc *frame_desc, float *excitation, float *synth)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01440">wmavoice.c:1440</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55bae94ef3ea64ec150719cfe0c7e2e8fffb">ACB_TYPE_NONE</a></div><div class="ttdeci">@ ACB_TYPE_NONE</div><div class="ttdoc">no adaptive codebook (only hardcoded fixed)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00069">wmavoice.c:69</a></div></div>
<div class="ttc" id="awmavoice_8c_html_adbce7507d9f45e91c1a086119e185377"><div class="ttname"><a href="wmavoice_8c.html#adbce7507d9f45e91c1a086119e185377">MAX_SFRAMESIZE</a></div><div class="ttdeci">#define MAX_SFRAMESIZE</div><div class="ttdoc">maximum number of samples per superframe</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00055">wmavoice.c:54</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a4e3a6a2f0250b68a09ab799748939aaa"><div class="ttname"><a href="wmavoice__data_8h.html#a4e3a6a2f0250b68a09ab799748939aaa">wmavoice_gain_codebook_fcb</a></div><div class="ttdeci">static const float wmavoice_gain_codebook_fcb[128]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02893">wmavoice_data.h:2893</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a59c4f558e259b7fd968f8626da9187f7"><div class="ttname"><a href="cuda__runtime_8h.html#a59c4f558e259b7fd968f8626da9187f7">fabsf</a></div><div class="ttdeci">static __device__ float fabsf(float a)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00181">cuda_runtime.h:181</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ab7c1844d53e76409ec793853424ad3fd"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ab7c1844d53e76409ec793853424ad3fd">WMAVoiceContext::cos</a></div><div class="ttdeci">float cos[511]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00269">wmavoice.c:269</a></div></div>
<div class="ttc" id="aregdef_8h_html_ab89a77e63a7226fffaecb2e2c2ab5219"><div class="ttname"><a href="regdef_8h.html#ab89a77e63a7226fffaecb2e2c2ab5219">a1</a></div><div class="ttdeci">#define a1</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00047">regdef.h:47</a></div></div>
<div class="ttc" id="awmavoice_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049"><div class="ttname"><a href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a68fd61861b2c11a379ff488ae2fd3049">FCB_TYPE_SILENCE</a></div><div class="ttdeci">@ FCB_TYPE_SILENCE</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00086">wmavoice.c:84</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea3b3a0eff07db4a47cdb88c1180b3ca66"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea3b3a0eff07db4a47cdb88c1180b3ca66">AV_CODEC_ID_WMAVOICE</a></div><div class="ttdeci">@ AV_CODEC_ID_WMAVOICE</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00454">codec_id.h:454</a></div></div>
<div class="ttc" id="atablegen_8h_html_acb2450405534f2af2557e0d2487c09dc"><div class="ttname"><a href="tablegen_8h.html#acb2450405534f2af2557e0d2487c09dc">lrint</a></div><div class="ttdeci">#define lrint</div><div class="ttdef"><b>Definition:</b> <a href="tablegen_8h_source.html#l00053">tablegen.h:53</a></div></div>
<div class="ttc" id="amathops_8h_html_a22c70c3b9c3c05bad0d5ff51e7ebb3fa"><div class="ttname"><a href="mathops_8h.html#a22c70c3b9c3c05bad0d5ff51e7ebb3fa">MUL16</a></div><div class="ttdeci">#define MUL16(ra, rb)</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00088">mathops.h:88</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html_a4501e029388ab4d5750dc9875a5a2fd5"><div class="ttname"><a href="libavutil_2thread_8h.html#a4501e029388ab4d5750dc9875a5a2fd5">ff_thread_once</a></div><div class="ttdeci">static int ff_thread_once(char *control, void(*routine)(void))</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2thread_8h_source.html#l00175">thread.h:175</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="adct_8h_html"><div class="ttname"><a href="dct_8h.html">dct.h</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a9e54e9e2ccf671c1f79867e19ce432e9"><div class="ttname"><a href="get__bits_8h.html#a9e54e9e2ccf671c1f79867e19ce432e9">init_get_bits8</a></div><div class="ttdeci">static int init_get_bits8(GetBitContext *s, const uint8_t *buffer, int byte_size)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00677">get_bits.h:677</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a36c23679269301dc91ef8fd62348064a"><div class="ttname"><a href="wmavoice_8c.html#a36c23679269301dc91ef8fd62348064a">MAX_LSPS_ALIGN16</a></div><div class="ttdeci">#define MAX_LSPS_ALIGN16</div><div class="ttdoc">of 16 for ASM input buffer alignment</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00050">wmavoice.c:49</a></div></div>
<div class="ttc" id="astruct_r_d_f_t_context_html"><div class="ttname"><a href="struct_r_d_f_t_context.html">RDFTContext</a></div><div class="ttdef"><b>Definition:</b> <a href="rdft_8h_source.html#l00028">rdft.h:28</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga3ea4736dcceab4ba033b8abd2c2a180e"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga3ea4736dcceab4ba033b8abd2c2a180e">av_memcpy_backptr</a></div><div class="ttdeci">void av_memcpy_backptr(uint8_t *dst, int back, int cnt)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00428">mem.c:428</a></div></div>
<div class="ttc" id="adecode__audio_8c_html_a1704ae53d7f426e1b67341785b5b2b58"><div class="ttname"><a href="decode__audio_8c.html#a1704ae53d7f426e1b67341785b5b2b58">decode</a></div><div class="ttdeci">static void decode(AVCodecContext *dec_ctx, AVPacket *pkt, AVFrame *frame, FILE *outfile)</div><div class="ttdef"><b>Definition:</b> <a href="decode__audio_8c_source.html#l00071">decode_audio.c:71</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ad56e4e5e8156ebcf5c2b4a17130bb32f"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ad56e4e5e8156ebcf5c2b4a17130bb32f">WMAVoiceContext::spillover_nbits</a></div><div class="ttdeci">int spillover_nbits</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00188">wmavoice.c:188</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a249c3d74390336992ac0788271dd0506"><div class="ttname"><a href="wmavoice__data_8h.html#a249c3d74390336992ac0788271dd0506">wmavoice_dq_lsp10r</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp10r[0x1400]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l00749">wmavoice_data.h:749</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="astruct_d_c_t_context_html"><div class="ttname"><a href="struct_d_c_t_context.html">DCTContext</a></div><div class="ttdef"><b>Definition:</b> <a href="dct_8h_source.html#l00032">dct.h:32</a></div></div>
<div class="ttc" id="astructframe__type__desc_html_a90d0016b23fc720e2d97226f99c1d934"><div class="ttname"><a href="structframe__type__desc.html#a90d0016b23fc720e2d97226f99c1d934">frame_type_desc::fcb_type</a></div><div class="ttdeci">uint8_t fcb_type</div><div class="ttdoc">Fixed codebook type (FCB_TYPE_*)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00104">wmavoice.c:104</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a874330eb5c50149c4d367d995f11b3bb"><div class="ttname"><a href="wmavoice_8c.html#a874330eb5c50149c4d367d995f11b3bb">log_range</a></div><div class="ttdeci">#define log_range(var, assign)</div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_v_l_c_html_acaf94f3386396a95d3e7042c444a41f7"><div class="ttname"><a href="struct_v_l_c.html#acaf94f3386396a95d3e7042c444a41f7">VLC::table</a></div><div class="ttdeci">VLC_TYPE(* table)[2]</div><div class="ttdoc">code, bits</div><div class="ttdef"><b>Definition:</b> <a href="vlc_8h_source.html#l00028">vlc.h:28</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a3bd010fad030d5a5d740df29371a2517"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a3bd010fad030d5a5d740df29371a2517">WMAVoiceContext::dst</a></div><div class="ttdeci">DCTContext dst</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00267">wmavoice.c:267</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a0aec9e3aca9b1d097e1d9e64b3cf8156"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a0aec9e3aca9b1d097e1d9e64b3cf8156">WMAVoiceContext::dcf_mem</a></div><div class="ttdeci">float dcf_mem[2]</div><div class="ttdoc">DC filter history.</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00273">wmavoice.c:273</a></div></div>
<div class="ttc" id="avp3data_8h_html_a46a6da6b1936191571fd30b2a749f38c"><div class="ttname"><a href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a></div><div class="ttdeci">uint8_t bits</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a8367e26a4ae9c11905861a6c2f0d50ea"><div class="ttname"><a href="wmavoice_8c.html#a8367e26a4ae9c11905861a6c2f0d50ea">adaptive_gain_control</a></div><div class="ttdeci">static void adaptive_gain_control(float *out, const float *in, const float *speech_synth, int size, float alpha, float *gain_mem)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00505">wmavoice.c:505</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_acf9c17f954fe3493ce603ef938a335f5"><div class="ttname"><a href="wmavoice__data_8h.html#acf9c17f954fe3493ce603ef938a335f5">wmavoice_lsp16_intercoeff_a</a></div><div class="ttdeci">static const float wmavoice_lsp16_intercoeff_a[32][2][16]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02047">wmavoice_data.h:2047</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="aget__bits_8h_html"><div class="ttname"><a href="get__bits_8h.html">get_bits.h</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_ab5234d971e6cd5bd15c062003fa12fea"><div class="ttname"><a href="wmavoice__data_8h.html#ab5234d971e6cd5bd15c062003fa12fea">wmavoice_mean_lsf10</a></div><div class="ttdeci">static const double wmavoice_mean_lsf10[2][10]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02565">wmavoice_data.h:2565</a></div></div>
<div class="ttc" id="amathops_8h_html_a4a7dad8bc1dfc37ec98764bc772e8656"><div class="ttname"><a href="mathops_8h.html#a4a7dad8bc1dfc37ec98764bc772e8656">UMULH</a></div><div class="ttdeci">static av_always_inline unsigned UMULH(unsigned a, unsigned b)</div><div class="ttdef"><b>Definition:</b> <a href="mathops_8h_source.html#l00068">mathops.h:68</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a0534dd02608d6e52149410be053c6ec9"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a0534dd02608d6e52149410be053c6ec9">WMAVoiceContext::aw_first_pulse_off</a></div><div class="ttdeci">int aw_first_pulse_off[2]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00239">wmavoice.c:239</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_abaf49729156cb5c13c2e6bb04a1cdab1"><div class="ttname"><a href="struct_w_m_a_voice_context.html#abaf49729156cb5c13c2e6bb04a1cdab1">WMAVoiceContext::aw_next_pulse_off_cache</a></div><div class="ttdeci">int aw_next_pulse_off_cache</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00241">wmavoice.c:241</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a8c444190de4100976d90bf0e66550ddf"><div class="ttname"><a href="wmavoice__data_8h.html#a8c444190de4100976d90bf0e66550ddf">wmavoice_gain_silence</a></div><div class="ttdeci">static const float wmavoice_gain_silence[256]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02788">wmavoice_data.h:2788</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_af0ee1155cbeea7751b6acabde777c032"><div class="ttname"><a href="struct_w_m_a_voice_context.html#af0ee1155cbeea7751b6acabde777c032">WMAVoiceContext::dct</a></div><div class="ttdeci">DCTContext dct</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00267">wmavoice.c:267</a></div></div>
<div class="ttc" id="adnn__backend__native__layer__mathbinary_8c_html_a221057645509eb7f49b2acf6298be2e7"><div class="ttname"><a href="dnn__backend__native__layer__mathbinary_8c.html#a221057645509eb7f49b2acf6298be2e7">mul</a></div><div class="ttdeci">static float mul(float src0, float src1)</div><div class="ttdef"><b>Definition:</b> <a href="dnn__backend__native__layer__mathbinary_8c_source.html#l00041">dnn_backend_native_layer_mathbinary.c:41</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a007a311b347d7122c23144643a06a7b6"><div class="ttname"><a href="wmavoice__data_8h.html#a007a311b347d7122c23144643a06a7b6">wmavoice_dq_lsp16i3</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp16i3[0x300]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l00682">wmavoice_data.h:682</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a4726a2e0404cecdd28a22da8e4ed6e40"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a4726a2e0404cecdd28a22da8e4ed6e40">WMAVoiceContext::gb</a></div><div class="ttdeci">GetBitContext gb</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00136">wmavoice.c:136</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aae96916b601e5d0778f2cc6b63939d16"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aae96916b601e5d0778f2cc6b63939d16">WMAVoiceContext::has_residual_lsps</a></div><div class="ttdeci">int has_residual_lsps</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00192">wmavoice.c:192</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a9420654f284cf804c9c00b014a969d36"><div class="ttname"><a href="wmavoice_8c.html#a9420654f284cf804c9c00b014a969d36">postfilter</a></div><div class="ttdeci">static void postfilter(WMAVoiceContext *s, const float *synth, float *samples, int size, const float *lpcs, float *zero_exc_pf, int fcb_type, int pitch)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00806">wmavoice.c:806</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aec79a0fe1d5208132d8b0aa4010a9f9e"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aec79a0fe1d5208132d8b0aa4010a9f9e">WMAVoiceContext::sin</a></div><div class="ttdeci">float sin[511]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00269">wmavoice.c:269</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a77f40c3d65e456ee98332d5d0679fa2a"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a77f40c3d65e456ee98332d5d0679fa2a">WMAVoiceContext::excitation_history</a></div><div class="ttdeci">float excitation_history[MAX_SIGNAL_HISTORY]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00251">wmavoice.c:251</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html_acfec46d8ab71dae8e901ee384378df32"><div class="ttname"><a href="libavutil_2thread_8h.html#acfec46d8ab71dae8e901ee384378df32">AV_ONCE_INIT</a></div><div class="ttdeci">#define AV_ONCE_INIT</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2thread_8h_source.html#l00173">thread.h:173</a></div></div>
<div class="ttc" id="aaacdec__template_8c_html_affa0ccbe2ef7fd24bb8c61e28d1a6631"><div class="ttname"><a href="aacdec__template_8c.html#affa0ccbe2ef7fd24bb8c61e28d1a6631">flush</a></div><div class="ttdeci">static void flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="aacdec__template_8c_source.html#l00592">aacdec_template.c:592</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="aimg2dec_8c_html_a98ca8d52365848dfa8cdfd76c17860e6"><div class="ttname"><a href="img2dec_8c.html#a98ca8d52365848dfa8cdfd76c17860e6">sizes</a></div><div class="ttdeci">static const int sizes[][2]</div><div class="ttdef"><b>Definition:</b> <a href="img2dec_8c_source.html#l00053">img2dec.c:53</a></div></div>
<div class="ttc" id="astruct_v_l_c_html"><div class="ttname"><a href="struct_v_l_c.html">VLC</a></div><div class="ttdef"><b>Definition:</b> <a href="vlc_8h_source.html#l00026">vlc.h:26</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_ga67a27567a9e5b7037fee072fbcc34dbf"><div class="ttname"><a href="group__lavu__error.html#ga67a27567a9e5b7037fee072fbcc34dbf">AVERROR_PATCHWELCOME</a></div><div class="ttdeci">#define AVERROR_PATCHWELCOME</div><div class="ttdoc">Not yet implemented in FFmpeg, patches welcome.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00062">error.h:62</a></div></div>
<div class="ttc" id="aqdm2data_8h_html_af1278e6360466160dbbf24f3f6405154"><div class="ttname"><a href="qdm2data_8h.html#af1278e6360466160dbbf24f3f6405154">last_coeff</a></div><div class="ttdeci">static const uint8_t last_coeff[3]</div><div class="ttdef"><b>Definition:</b> <a href="qdm2data_8h_source.html#l00257">qdm2data.h:257</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a3f16a750ffa0b92860e82e4cb8f70a95"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a3f16a750ffa0b92860e82e4cb8f70a95">WMAVoiceContext::aw_idx_is_ext</a></div><div class="ttdeci">int aw_idx_is_ext</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00228">wmavoice.c:228</a></div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html"><div class="ttname"><a href="struct_a_m_r_fixed.html">AMRFixed</a></div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00053">acelp_vectors.h:53</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a5da085e4cae75026e6baaf36ca5a12c0"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a5da085e4cae75026e6baaf36ca5a12c0">WMAVoiceContext::synth_history</a></div><div class="ttdeci">float synth_history[MAX_LSPS]</div><div class="ttdoc">see excitation_history</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00255">wmavoice.c:255</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a7de59fc5d8e0658d281f53bf4920b4d0"><div class="ttname"><a href="wmavoice_8c.html#a7de59fc5d8e0658d281f53bf4920b4d0">MAX_SIGNAL_HISTORY</a></div><div class="ttdeci">#define MAX_SIGNAL_HISTORY</div><div class="ttdoc">maximum excitation signal history</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00053">wmavoice.c:53</a></div></div>
<div class="ttc" id="astruct_get_bit_context_html"><div class="ttname"><a href="struct_get_bit_context.html">GetBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00061">get_bits.h:61</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a4a2fd5ff88f3d1a2178ad40f337eb17a"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a4a2fd5ff88f3d1a2178ad40f337eb17a">WMAVoiceContext::denoise_tilt_corr</a></div><div class="ttdeci">int denoise_tilt_corr</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00153">wmavoice.c:153</a></div></div>
<div class="ttc" id="aget__bits_8h_html_a505086b48eb34d53e47f60ac777204b9"><div class="ttname"><a href="get__bits_8h.html#a505086b48eb34d53e47f60ac777204b9">get_bits1</a></div><div class="ttdeci">static unsigned int get_bits1(GetBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="get__bits_8h_source.html#l00498">get_bits.h:498</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a4bcfe545d47ef6500c85c2ae20561562"><div class="ttname"><a href="wmavoice_8c.html#a4bcfe545d47ef6500c85c2ae20561562">dequant_lsp10r</a></div><div class="ttdeci">static void dequant_lsp10r(GetBitContext *gb, double *i_lsps, const double *old, double *a1, double *a2, int q_mode)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00917">wmavoice.c:917</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a71f41da2e5efa84d93d45b943f9ff908"><div class="ttname"><a href="wmavoice_8c.html#a71f41da2e5efa84d93d45b943f9ff908">kalman_smoothen</a></div><div class="ttdeci">static int kalman_smoothen(WMAVoiceContext *s, int pitch, const float *in, float *out, int size)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00546">wmavoice.c:546</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_gga58a704747daba49afa3611cea218a24ba417b17dd8e9f755f06a9469826e4adc9"><div class="ttname"><a href="group__lavc__fft.html#gga58a704747daba49afa3611cea218a24ba417b17dd8e9f755f06a9469826e4adc9">DFT_R2C</a></div><div class="ttdeci">@ DFT_R2C</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00072">avfft.h:72</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_a3aa069ac3980707dae1e0530f50d59e4"><div class="ttname"><a href="cuda__runtime_8h.html#a3aa069ac3980707dae1e0530f50d59e4">abs</a></div><div class="ttdeci">#define abs(x)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00035">cuda_runtime.h:35</a></div></div>
<div class="ttc" id="acelp__filters_8h_html"><div class="ttname"><a href="celp__filters_8h.html">celp_filters.h</a></div></div>
<div class="ttc" id="awmavoice_8c_html_aec6f87b5adab846fb54ffb94851b5c00"><div class="ttname"><a href="wmavoice_8c.html#aec6f87b5adab846fb54ffb94851b5c00">MAX_FRAMESIZE</a></div><div class="ttdeci">#define MAX_FRAMESIZE</div><div class="ttdoc">maximum number of samples per frame</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00052">wmavoice.c:52</a></div></div>
<div class="ttc" id="awmavoice_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38"><div class="ttname"><a href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a59c0b5b586cea42b9d719230e76b4e38">FCB_TYPE_AW_PULSES</a></div><div class="ttdeci">@ FCB_TYPE_AW_PULSES</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00090">wmavoice.c:89</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a654fcf10dfc000fefee8bb87e1782c13"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a654fcf10dfc000fefee8bb87e1782c13">WMAVoiceContext::max_pitch_val</a></div><div class="ttdeci">int max_pitch_val</div><div class="ttdoc">max value + 1 for pitch parsing</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00164">wmavoice.c:164</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a5b4055201d2d8170e179b1ceaa438b9c"><div class="ttname"><a href="wmavoice_8c.html#a5b4055201d2d8170e179b1ceaa438b9c">MAX_FRAMES</a></div><div class="ttdeci">#define MAX_FRAMES</div><div class="ttdoc">maximum number of frames per superframe</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00051">wmavoice.c:51</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a0fc8916e41d0b39c776cd753b0369c81"><div class="ttname"><a href="wmavoice_8c.html#a0fc8916e41d0b39c776cd753b0369c81">decode_vbmtree</a></div><div class="ttdeci">static av_cold int decode_vbmtree(GetBitContext *gb, int8_t vbm_tree[25])</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00300">wmavoice.c:300</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ac5a20cc45ac66ed1bdb67e5d7a425bb7"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ac5a20cc45ac66ed1bdb67e5d7a425bb7">WMAVoiceContext::spillover_bitsize</a></div><div class="ttdeci">int spillover_bitsize</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00142">wmavoice.c:142</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html_a1d348e4becc9580dfa760add5c9d1139"><div class="ttname"><a href="libavutil_2thread_8h.html#a1d348e4becc9580dfa760add5c9d1139">AVOnce</a></div><div class="ttdeci">#define AVOnce</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2thread_8h_source.html#l00172">thread.h:172</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a14ac7cd8bbf8f0eb0ebcf299fb3903f9"><div class="ttname"><a href="wmavoice_8c.html#a14ac7cd8bbf8f0eb0ebcf299fb3903f9">aw_parse_coords</a></div><div class="ttdeci">static void aw_parse_coords(WMAVoiceContext *s, GetBitContext *gb, const int *pitch)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01036">wmavoice.c:1036</a></div></div>
<div class="ttc" id="awmavoice_8c_html_adb1ebc4e4e017cc5a3202cfd162c74f1"><div class="ttname"><a href="wmavoice_8c.html#adb1ebc4e4e017cc5a3202cfd162c74f1">wmavoice_init_static_data</a></div><div class="ttdeci">static av_cold void wmavoice_init_static_data(void)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00314">wmavoice.c:314</a></div></div>
<div class="ttc" id="afloat__dsp_8h_html"><div class="ttname"><a href="float__dsp_8h.html">float_dsp.h</a></div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a95c19d1d6f9283f09a3b10e31c9dcbdc"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a95c19d1d6f9283f09a3b10e31c9dcbdc">WMAVoiceContext::do_apf</a></div><div class="ttdeci">int do_apf</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00149">wmavoice.c:149</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ac0a5a0a8535c674ede4babca5f45ff8a"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ac0a5a0a8535c674ede4babca5f45ff8a">WMAVoiceContext::block_delta_pitch_hrange</a></div><div class="ttdeci">int block_delta_pitch_hrange</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00174">wmavoice.c:174</a></div></div>
<div class="ttc" id="adecode_8c_html_a0d5adb2b84051826883605b3ab4d1bab"><div class="ttname"><a href="decode_8c.html#a0d5adb2b84051826883605b3ab4d1bab">ff_get_buffer</a></div><div class="ttdeci">int ff_get_buffer(AVCodecContext *avctx, AVFrame *frame, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="decode_8c_source.html#l01879">decode.c:1879</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga5f35425595395c76cfa406c883f78aed"><div class="ttname"><a href="group__lavc__core.html#ga5f35425595395c76cfa406c883f78aed">AV_CODEC_CAP_DR1</a></div><div class="ttdeci">#define AV_CODEC_CAP_DR1</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a4c38d5eab95fa47b39df7efbadda0152"><div class="ttname"><a href="wmavoice_8c.html#a4c38d5eab95fa47b39df7efbadda0152">parse_packet_header</a></div><div class="ttdeci">static int parse_packet_header(WMAVoiceContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01840">wmavoice.c:1840</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html_a4d66ad713a6bf455ddaed734bedd8b54"><div class="ttname"><a href="struct_put_bit_context.html#a4d66ad713a6bf455ddaed734bedd8b54">PutBitContext::size_in_bits</a></div><div class="ttdeci">int size_in_bits</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00055">put_bits.h:55</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="alibm_8h_html_ad1eb6660c7377c9b02883d77c5bf91e6"><div class="ttname"><a href="libm_8h.html#ad1eb6660c7377c9b02883d77c5bf91e6">powf</a></div><div class="ttdeci">#define powf(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="libm_8h_source.html#l00050">libm.h:50</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a7d9d98fdebdde7bc77144e9b677ad2b8"><div class="ttname"><a href="wmavoice_8c.html#a7d9d98fdebdde7bc77144e9b677ad2b8">frame_type_vlc</a></div><div class="ttdeci">static VLC frame_type_vlc</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00063">wmavoice.c:63</a></div></div>
<div class="ttc" id="awmavoice_8c_html_af688278c0cf0729cd0ceea015f5d6919"><div class="ttname"><a href="wmavoice_8c.html#af688278c0cf0729cd0ceea015f5d6919">ff_wmavoice_decoder</a></div><div class="ttdeci">AVCodec ff_wmavoice_decoder</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01999">wmavoice.c:1999</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a5cfe165705a0f4b68a2bb1a7bcc917ad"><div class="ttname"><a href="wmavoice_8c.html#a5cfe165705a0f4b68a2bb1a7bcc917ad">wiener_denoise</a></div><div class="ttdeci">static void wiener_denoise(WMAVoiceContext *s, int fcb_type, float *synth_pf, int size, const float *lpcs)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00724">wmavoice.c:724</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a86ae9ecf877239e8d97825c26d26edf4"><div class="ttname"><a href="wmavoice__data_8h.html#a86ae9ecf877239e8d97825c26d26edf4">wmavoice_lsp10_intercoeff_b</a></div><div class="ttdeci">static const float wmavoice_lsp10_intercoeff_b[32][2][10]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l01852">wmavoice_data.h:1852</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a4680b80c57e54efb60eb738a13860c1f"><div class="ttname"><a href="wmavoice_8c.html#a4680b80c57e54efb60eb738a13860c1f">dequant_lsp16i</a></div><div class="ttdeci">static void dequant_lsp16i(GetBitContext *gb, double *lsps)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00953">wmavoice.c:953</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a8cb7674cdff765bc814ad06417281253"><div class="ttname"><a href="wmavoice__data_8h.html#a8cb7674cdff765bc814ad06417281253">wmavoice_dq_lsp16r1</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp16r1[0x500]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l01264">wmavoice_data.h:1264</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a591896bd815d1c13278c063820c71bbd"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a591896bd815d1c13278c063820c71bbd">WMAVoiceContext::postfilter_agc</a></div><div class="ttdeci">float postfilter_agc</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00271">wmavoice.c:271</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a37adf78d4d3225f36dd9579c924c5ae7"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a37adf78d4d3225f36dd9579c924c5ae7">WMAVoiceContext::last_acb_type</a></div><div class="ttdeci">int last_acb_type</div><div class="ttdoc">frame type [0-2] of the previous frame</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00223">wmavoice.c:223</a></div></div>
<div class="ttc" id="asinewin_8h_html"><div class="ttname"><a href="sinewin_8h.html">sinewin.h</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a8f83241d4ba850289604d0bbcd036df8"><div class="ttname"><a href="wmavoice__data_8h.html#a8f83241d4ba850289604d0bbcd036df8">wmavoice_dq_lsp16r2</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp16r2[0x500]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l01395">wmavoice_data.h:1395</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="astructframe__type__desc_html"><div class="ttname"><a href="structframe__type__desc.html">frame_type_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00099">wmavoice.c:99</a></div></div>
<div class="ttc" id="awmavoice_8c_html_aa1dc384eff5b4146adff445ac964fbbe"><div class="ttname"><a href="wmavoice_8c.html#aa1dc384eff5b4146adff445ac964fbbe">stabilize_lsps</a></div><div class="ttdeci">static void stabilize_lsps(double *lsps, int num)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01658">wmavoice.c:1658</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a460e9de08921a755633c5514b54f6b70"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a460e9de08921a755633c5514b54f6b70">WMAVoiceContext::sframe_cache</a></div><div class="ttdeci">uint8_t sframe_cache[SFRAME_CACHE_MAXSIZE+AV_INPUT_BUFFER_PADDING_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00201">wmavoice.c:201</a></div></div>
<div class="ttc" id="adct_8c_html_af26e6af7b6651d5da2616de192e17ce6"><div class="ttname"><a href="dct_8c.html#af26e6af7b6651d5da2616de192e17ce6">ff_dct_end</a></div><div class="ttdeci">av_cold void ff_dct_end(DCTContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="dct_8c_source.html#l00221">dct.c:221</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a61bfe046f7d6096ba173a96284307c30"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a61bfe046f7d6096ba173a96284307c30">WMAVoiceContext::block_pitch_range</a></div><div class="ttdeci">int block_pitch_range</div><div class="ttdoc">range of the block pitch</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00169">wmavoice.c:169</a></div></div>
<div class="ttc" id="amathematics_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="mathematics_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00052">mathematics.h:52</a></div></div>
<div class="ttc" id="aacelp__filters_8c_html_a0d6ae4fe173d5bb07674d64592de1fa2"><div class="ttname"><a href="acelp__filters_8c.html#a0d6ae4fe173d5bb07674d64592de1fa2">ff_tilt_compensation</a></div><div class="ttdeci">void ff_tilt_compensation(float *mem, float tilt, float *samples, int size)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__filters_8c_source.html#l00136">acelp_filters.c:136</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a7ea126b085860047c273e65ea0b41398"><div class="ttname"><a href="wmavoice__data_8h.html#a7ea126b085860047c273e65ea0b41398">wmavoice_energy_table</a></div><div class="ttdeci">static const float wmavoice_energy_table[128]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l03026">wmavoice_data.h:3026</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a1278740a8a8000645c462577e7714b16"><div class="ttname"><a href="wmavoice_8c.html#a1278740a8a8000645c462577e7714b16">wmavoice_decode_init</a></div><div class="ttdeci">static av_cold int wmavoice_decode_init(AVCodecContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00367">wmavoice.c:367</a></div></div>
<div class="ttc" id="agroup__lavc__fft_html_ggaeeabd062332b246d19bed36e041d2df6aef2c0de34cd8c5582950db643ba88d53"><div class="ttname"><a href="group__lavc__fft.html#ggaeeabd062332b246d19bed36e041d2df6aef2c0de34cd8c5582950db643ba88d53">DST_I</a></div><div class="ttdeci">@ DST_I</div><div class="ttdef"><b>Definition:</b> <a href="avfft_8h_source.html#l00097">avfft.h:97</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a1f4cbf0885ab4455634ebe53e76fd644"><div class="ttname"><a href="wmavoice__data_8h.html#a1f4cbf0885ab4455634ebe53e76fd644">wmavoice_ipol2_coeffs</a></div><div class="ttdeci">static const float wmavoice_ipol2_coeffs[32]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l03012">wmavoice_data.h:3012</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ab19b012654fa480269b1293f317534a4"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ab19b012654fa480269b1293f317534a4">WMAVoiceContext::denoise_filter_cache_size</a></div><div class="ttdeci">int denoise_filter_cache_size</div><div class="ttdoc">samples in denoise_filter_cache</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00278">wmavoice.c:278</a></div></div>
<div class="ttc" id="ardft_8c_html_a0c354cdb0c8e93f34192ef33538fb1ec"><div class="ttname"><a href="rdft_8c.html#a0c354cdb0c8e93f34192ef33538fb1ec">ff_rdft_init</a></div><div class="ttdeci">av_cold int ff_rdft_init(RDFTContext *s, int nbits, enum RDFTransformType trans)</div><div class="ttdef"><b>Definition:</b> <a href="rdft_8c_source.html#l00088">rdft.c:88</a></div></div>
<div class="ttc" id="agroup__lavu__mem__macros_html_ga7a422611f83afb33d6e0da44184b548e"><div class="ttname"><a href="group__lavu__mem__macros.html#ga7a422611f83afb33d6e0da44184b548e">DECLARE_ALIGNED</a></div><div class="ttdeci">#define DECLARE_ALIGNED(n, t, v)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8h_source.html#l00120">mem.h:120</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ab92ad91055387e15b43ff5f6f60f2895"><div class="ttname"><a href="audio__convert_8c.html#ab92ad91055387e15b43ff5f6f60f2895">in</a></div><div class="ttdeci">uint8_t pi&lt;&lt; 24) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0f/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_U8, uint8_t,(*(const uint8_t *) pi - 0x80) *(1.0/(1&lt;&lt; 7))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S16, int16_t,(*(const int16_t *) pi &gt;&gt; 8)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0f/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S16, int16_t, *(const int16_t *) pi *(1.0/(1&lt;&lt; 15))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_S32, int32_t,(*(const int32_t *) pi &gt;&gt; 24)+0x80) CONV_FUNC_GROUP(AV_SAMPLE_FMT_FLT, float, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0f/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_DBL, double, AV_SAMPLE_FMT_S32, int32_t, *(const int32_t *) pi *(1.0/(1U&lt;&lt; 31))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_FLT, float, av_clip_uint8(lrintf(*(const float *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_FLT, float, av_clip_int16(lrintf(*(const float *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_FLT, float, av_clipl_int32(llrintf(*(const float *) pi *(1U&lt;&lt; 31)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_U8, uint8_t, AV_SAMPLE_FMT_DBL, double, av_clip_uint8(lrint(*(const double *) pi *(1&lt;&lt; 7))+0x80)) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S16, int16_t, AV_SAMPLE_FMT_DBL, double, av_clip_int16(lrint(*(const double *) pi *(1&lt;&lt; 15)))) CONV_FUNC_GROUP(AV_SAMPLE_FMT_S32, int32_t, AV_SAMPLE_FMT_DBL, double, av_clipl_int32(llrint(*(const double *) pi *(1U&lt;&lt; 31)))) #define SET_CONV_FUNC_GROUP(ofmt, ifmt) static void set_generic_function(AudioConvert *ac) { } void ff_audio_convert_free(AudioConvert **ac) { if(! *ac) return;ff_dither_free(&amp;(*ac) -&gt;dc);av_freep(ac);} AudioConvert *ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map) { AudioConvert *ac;int in_planar, out_planar;ac=av_mallocz(sizeof(*ac));if(!ac) return NULL;ac-&gt;avr=avr;ac-&gt;out_fmt=out_fmt;ac-&gt;in_fmt=in_fmt;ac-&gt;channels=channels;ac-&gt;apply_map=apply_map;if(avr-&gt;dither_method !=AV_RESAMPLE_DITHER_NONE &amp;&amp;av_get_packed_sample_fmt(out_fmt)==AV_SAMPLE_FMT_S16 &amp;&amp;av_get_bytes_per_sample(in_fmt) &gt; 2) { ac-&gt;dc=ff_dither_alloc(avr, out_fmt, in_fmt, channels, sample_rate, apply_map);if(!ac-&gt;dc) { av_free(ac);return NULL;} return ac;} in_planar=ff_sample_fmt_is_planar(in_fmt, channels);out_planar=ff_sample_fmt_is_planar(out_fmt, channels);if(in_planar==out_planar) { ac-&gt;func_type=CONV_FUNC_TYPE_FLAT;ac-&gt;planes=in_planar ? ac-&gt;channels :1;} else if(in_planar) ac-&gt;func_type=CONV_FUNC_TYPE_INTERLEAVE;else ac-&gt;func_type=CONV_FUNC_TYPE_DEINTERLEAVE;set_generic_function(ac);if(ARCH_AARCH64) ff_audio_convert_init_aarch64(ac);if(ARCH_ARM) ff_audio_convert_init_arm(ac);if(ARCH_X86) ff_audio_convert_init_x86(ac);return ac;} int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in) { int use_generic=1;int len=in-&gt;nb_samples;int p;if(ac-&gt;dc) { av_log(ac-&gt;avr, AV_LOG_TRACE, &quot;%d samples - audio_convert: %s to %s (dithered)\n&quot;, len, av_get_sample_fmt_name(ac-&gt;in_fmt), av_get_sample_fmt_name(ac-&gt;out_fmt));return ff_convert_dither(ac-&gt; in</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00326">audio_convert.c:326</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a43d6376365c0222d61fb06332ef0ee40"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a43d6376365c0222d61fb06332ef0ee40">WMAVoiceContext::vbm_tree</a></div><div class="ttdeci">int8_t vbm_tree[25]</div><div class="ttdoc">converts VLC codes to frame type</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00140">wmavoice.c:140</a></div></div>
<div class="ttc" id="adct_8c_html_a5c7e329ee62da797d30b5c9ca99d6b48"><div class="ttname"><a href="dct_8c.html#a5c7e329ee62da797d30b5c9ca99d6b48">ff_dct_init</a></div><div class="ttdeci">av_cold int ff_dct_init(DCTContext *s, int nbits, enum DCTTransformType inverse)</div><div class="ttdef"><b>Definition:</b> <a href="dct_8c_source.html#l00177">dct.c:177</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a1db489f61d0438213c802e8c8216cceb"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a1db489f61d0438213c802e8c8216cceb">WMAVoiceContext::pitch_nbits</a></div><div class="ttdeci">int pitch_nbits</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00165">wmavoice.c:165</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a57c57e21dbbc8777ed8a0a78ba89fc7d"><div class="ttname"><a href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a></div><div class="ttdeci">static int put_bits_count(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00083">put_bits.h:83</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ab4ca16b0fda02840383d0b6d08a44660"><div class="ttname"><a href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a></div><div class="ttdeci">#define FF_CODEC_CAP_INIT_CLEANUP</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00048">internal.h:48</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a56788029c115de85223c07b1eac91c83"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a56788029c115de85223c07b1eac91c83">WMAVoiceContext::lsps</a></div><div class="ttdeci">int lsps</div><div class="ttdoc">number of LSPs per frame [10 or 16]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00158">wmavoice.c:158</a></div></div>
<div class="ttc" id="asinewin_8h_html_ab1e768d3cbe7edfaa2ca87e92fa3209e"><div class="ttname"><a href="sinewin_8h.html#ab1e768d3cbe7edfaa2ca87e92fa3209e">ff_sine_window_init</a></div><div class="ttdeci">void AAC_RENAME() ff_sine_window_init(INTFLOAT *window, int n)</div><div class="ttdef"><b>Definition:</b> <a href="sinewin__tablegen_8h_source.html#l00070">sinewin_tablegen.h:70</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="aregdef_8h_html_a71a491fa5f35065b954a3001ebed0f28"><div class="ttname"><a href="regdef_8h.html#a71a491fa5f35065b954a3001ebed0f28">t3</a></div><div class="ttdeci">#define t3</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00031">regdef.h:31</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ae694110d132ca5164e52d54313059f0e"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ae694110d132ca5164e52d54313059f0e">WMAVoiceContext::irdft</a></div><div class="ttdeci">RDFTContext irdft</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00265">wmavoice.c:265</a></div></div>
<div class="ttc" id="awmavoice_8c_html_adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9"><div class="ttname"><a href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7abacac92f28f952ba90c135b8c2569ca9">FCB_TYPE_EXC_PULSES</a></div><div class="ttdeci">@ FCB_TYPE_EXC_PULSES</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00093">wmavoice.c:91</a></div></div>
<div class="ttc" id="aregdef_8h_html_aa3fd046b2956875cf908d73a51a96b42"><div class="ttname"><a href="regdef_8h.html#aa3fd046b2956875cf908d73a51a96b42">a2</a></div><div class="ttdeci">#define a2</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00048">regdef.h:48</a></div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html_a1981d9b590a847f13c5f9219a7d335ce"><div class="ttname"><a href="struct_a_m_r_fixed.html#a1981d9b590a847f13c5f9219a7d335ce">AMRFixed::x</a></div><div class="ttdeci">int x[10]</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00055">acelp_vectors.h:55</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_a1ee4a05b54419bfadd66ee351d05812e"><div class="ttname"><a href="vorbis__enc__data_8h.html#a1ee4a05b54419bfadd66ee351d05812e">delta</a></div><div class="ttdeci">float delta</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00457">vorbis_enc_data.h:457</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aee2f28c3b833031d95bc70da2350e58e"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aee2f28c3b833031d95bc70da2350e58e">WMAVoiceContext::pb</a></div><div class="ttdeci">PutBitContext pb</div><div class="ttdoc">bitstream writer for sframe_cache</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00209">wmavoice.c:209</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a5033d45c5cb11d1728e2383754b741ea"><div class="ttname"><a href="wmavoice__data_8h.html#a5033d45c5cb11d1728e2383754b741ea">wmavoice_lsp16_intercoeff_b</a></div><div class="ttdeci">static const float wmavoice_lsp16_intercoeff_b[32][2][16]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02306">wmavoice_data.h:2306</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_aa1448d185a78d73e729d196a78001bad"><div class="ttname"><a href="struct_w_m_a_voice_context.html#aa1448d185a78d73e729d196a78001bad">WMAVoiceContext::lsp_def_mode</a></div><div class="ttdeci">int lsp_def_mode</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00160">wmavoice.c:160</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga0a2b687f9c1c5ed0089b01fd61227108"><div class="ttname"><a href="group__lavu__frame.html#ga0a2b687f9c1c5ed0089b01fd61227108">av_frame_unref</a></div><div class="ttdeci">void av_frame_unref(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00553">frame.c:553</a></div></div>
<div class="ttc" id="aacelp__filters_8h_html"><div class="ttname"><a href="acelp__filters_8h.html">acelp_filters.h</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html"><div class="ttname"><a href="struct_put_bit_context.html">PutBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00051">put_bits.h:51</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_ae6f91c4819ad805fec298b39b860f2aa"><div class="ttname"><a href="acelp__vectors_8c.html#ae6f91c4819ad805fec298b39b860f2aa">ff_weighted_vector_sumf</a></div><div class="ttdeci">void ff_weighted_vector_sumf(float *out, const float *in_a, const float *in_b, float weight_coeff_a, float weight_coeff_b, int length)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00193">acelp_vectors.c:193</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a3b2034254685785af3336312c495d2ec"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a3b2034254685785af3336312c495d2ec">WMAVoiceContext::zero_exc_pf</a></div><div class="ttdeci">float zero_exc_pf[MAX_SIGNAL_HISTORY+MAX_SFRAMESIZE]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00274">wmavoice.c:274</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a68bbef2616db7f69e39be738b7e6e408"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a68bbef2616db7f69e39be738b7e6e408">WMAVoiceContext::block_delta_pitch_nbits</a></div><div class="ttdeci">int block_delta_pitch_nbits</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00170">wmavoice.c:170</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a41485bf12c66c1fa54cef473fd944538"><div class="ttname"><a href="wmavoice__data_8h.html#a41485bf12c66c1fa54cef473fd944538">wmavoice_gain_universal</a></div><div class="ttdeci">static const float wmavoice_gain_universal[64]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02855">wmavoice_data.h:2855</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a39044984c1edd5f14541d988bdd0f81e"><div class="ttname"><a href="wmavoice_8c.html#a39044984c1edd5f14541d988bdd0f81e">tilt_factor</a></div><div class="ttdeci">static float tilt_factor(const float *lpcs, int n_lpcs)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00592">wmavoice.c:592</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a8700b7e3f00e6d447fe1f2b1b23a4bbb"><div class="ttname"><a href="wmavoice_8c.html#a8700b7e3f00e6d447fe1f2b1b23a4bbb">VLC_NBITS</a></div><div class="ttdeci">#define VLC_NBITS</div><div class="ttdoc">number of bits to read per VLC iteration</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00058">wmavoice.c:58</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html"><div class="ttname"><a href="wmavoice__data_8h.html">wmavoice_data.h</a></div><div class="ttdoc">Windows Media Voice (WMAVoice) tables.</div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="aattributes_8h_html_a934ff195492486f0f9d22770103e757b"><div class="ttname"><a href="attributes_8h.html#a934ff195492486f0f9d22770103e757b">av_uninit</a></div><div class="ttdeci">#define av_uninit(x)</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00156">attributes.h:156</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="alsp_8h_html"><div class="ttname"><a href="lsp_8h.html">lsp.h</a></div></div>
<div class="ttc" id="acelp__filters_8c_html_adb73ab3ce9b95632b89b2c80e45eb190"><div class="ttname"><a href="celp__filters_8c.html#adb73ab3ce9b95632b89b2c80e45eb190">ff_celp_lp_zero_synthesis_filterf</a></div><div class="ttdeci">void ff_celp_lp_zero_synthesis_filterf(float *out, const float *filter_coeffs, const float *in, int buffer_length, int filter_length)</div><div class="ttdef"><b>Definition:</b> <a href="celp__filters_8c_source.html#l00199">celp_filters.c:199</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ae746408140a150250a05bbb247ff248c"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ae746408140a150250a05bbb247ff248c">WMAVoiceContext::dc_level</a></div><div class="ttdeci">int dc_level</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00155">wmavoice.c:155</a></div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html_a4adabf0a62d7947f08f72eca119255e6"><div class="ttname"><a href="struct_a_m_r_fixed.html#a4adabf0a62d7947f08f72eca119255e6">AMRFixed::pitch_fac</a></div><div class="ttdeci">float pitch_fac</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00059">acelp_vectors.h:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="aspdifenc_8c_html_addcb93d939ffa259ff1d9247bdd590fd"><div class="ttname"><a href="spdifenc_8c.html#addcb93d939ffa259ff1d9247bdd590fd">pos</a></div><div class="ttdeci">unsigned int pos</div><div class="ttdef"><b>Definition:</b> <a href="spdifenc_8c_source.html#l00410">spdifenc.c:410</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a60a5eb62568d9739ec475d5b88369446"><div class="ttname"><a href="wmavoice__data_8h.html#a60a5eb62568d9739ec475d5b88369446">wmavoice_dq_lsp16i2</a></div><div class="ttdeci">static const uint8_t wmavoice_dq_lsp16i2[0x3c0]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l00583">wmavoice_data.h:583</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga8f5b632a03ce83ac8e025894b1fc307a"><div class="ttname"><a href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define AV_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00215">avcodec.h:215</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_aa2fc582be9ba7a0acd3ab1407e7b271c"><div class="ttname"><a href="wmavoice__data_8h.html#aa2fc582be9ba7a0acd3ab1407e7b271c">wmavoice_mean_lsf16</a></div><div class="ttdeci">static const double wmavoice_mean_lsf16[2][16]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02574">wmavoice_data.h:2574</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a340d313c728574af448e7a18d2dd3240"><div class="ttname"><a href="wmavoice_8c.html#a340d313c728574af448e7a18d2dd3240">wmavoice_decode_end</a></div><div class="ttdeci">static av_cold int wmavoice_decode_end(AVCodecContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01985">wmavoice.c:1985</a></div></div>
<div class="ttc" id="agroup__avoptions_html_gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85"><div class="ttname"><a href="group__avoptions.html#gga06fc87d81c62e9abb8790b6e5713c55baa48828207898b0f19b69ec8e17a28d85">ACB_TYPE_HAMMING</a></div><div class="ttdeci">@ ACB_TYPE_HAMMING</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00078">wmavoice.c:75</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ac7a120891ccfd07a4cb8d177ce6ff734"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ac7a120891ccfd07a4cb8d177ce6ff734">WMAVoiceContext::rdft</a></div><div class="ttdeci">RDFTContext rdft</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00265">wmavoice.c:265</a></div></div>
<div class="ttc" id="achannel__layout_8h_html"><div class="ttname"><a href="channel__layout_8h.html">channel_layout.h</a></div></div>
<div class="ttc" id="aregdef_8h_html_aa4652e2d6053d420dcbea07a113db5fe"><div class="ttname"><a href="regdef_8h.html#aa4652e2d6053d420dcbea07a113db5fe">t2</a></div><div class="ttdeci">#define t2</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00030">regdef.h:30</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_ace46e41b9bd6cac88fb7109ffd657f9a"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a></div><div class="ttdeci">#define AV_RL32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00146">intreadwrite.h:146</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ae3edf4bdca13808f64d93f60ed3474c8"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ae3edf4bdca13808f64d93f60ed3474c8">WMAVoiceContext::aw_pulse_range</a></div><div class="ttdeci">int aw_pulse_range</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00230">wmavoice.c:230</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a378d73bfe78ce4fe8d7f578a3b58dcf9"><div class="ttname"><a href="wmavoice_8c.html#a378d73bfe78ce4fe8d7f578a3b58dcf9">synth_superframe</a></div><div class="ttdeci">static int synth_superframe(AVCodecContext *ctx, AVFrame *frame, int *got_frame_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01704">wmavoice.c:1704</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a0c63d641283610a00b9b82d869b89ea2"><div class="ttname"><a href="wmavoice__data_8h.html#a0c63d641283610a00b9b82d869b89ea2">wmavoice_ipol1_coeffs</a></div><div class="ttdeci">static const float wmavoice_ipol1_coeffs[17 *9]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l02960">wmavoice_data.h:2960</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ad283c679febe22c5a4d36e3764daf32b"><div class="ttname"><a href="filter__design_8txt.html#ad283c679febe22c5a4d36e3764daf32b">values</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return values</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00262">filter_design.txt:263</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ac4f6e89c6ef6a00756ce7a561638640c"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ac4f6e89c6ef6a00756ce7a561638640c">WMAVoiceContext::denoise_strength</a></div><div class="ttdeci">int denoise_strength</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00151">wmavoice.c:151</a></div></div>
<div class="ttc" id="aacelp__vectors_8c_html_ad79bdba0226bfc3171f8e088d5270526"><div class="ttname"><a href="acelp__vectors_8c.html#ad79bdba0226bfc3171f8e088d5270526">ff_set_fixed_vector</a></div><div class="ttdeci">void ff_set_fixed_vector(float *out, const AMRFixed *in, float scale, int size)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8c_source.html#l00235">acelp_vectors.c:235</a></div></div>
<div class="ttc" id="asiprdata_8h_html_aa10d1116cdfd8c56f7f62707bcfcb4c9"><div class="ttname"><a href="siprdata_8h.html#aa10d1116cdfd8c56f7f62707bcfcb4c9">mean_lsf</a></div><div class="ttdeci">static const float mean_lsf[10]</div><div class="ttdef"><b>Definition:</b> <a href="siprdata_8h_source.html#l00027">siprdata.h:27</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga3f55f5bcfbb12e06c7cb1195028855e6"><div class="ttname"><a href="group__lavc__core.html#ga3f55f5bcfbb12e06c7cb1195028855e6">AV_CODEC_CAP_DELAY</a></div><div class="ttdeci">#define AV_CODEC_CAP_DELAY</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00075">codec.h:75</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ac53f7e33bdbd6ea3ec96ee0f1292ee84"><div class="ttname"><a href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a></div><div class="ttdeci">Filter the word frame indicates either a video frame or a group of audio samples</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00008">filter_design.txt:8</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a21082e513e4a282aa0ff8724ac9ac488"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a21082e513e4a282aa0ff8724ac9ac488">WMAVoiceContext::last_pitch_val</a></div><div class="ttdeci">int last_pitch_val</div><div class="ttdoc">pitch value of the previous frame</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00222">wmavoice.c:222</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a771b5152aaa6f8df09caf6bde0d5d271"><div class="ttname"><a href="wmavoice_8c.html#a771b5152aaa6f8df09caf6bde0d5d271">copy_bits</a></div><div class="ttdeci">static void copy_bits(PutBitContext *pb, const uint8_t *data, int size, GetBitContext *gb, int nbits)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01875">wmavoice.c:1875</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a972de675876e4e0c8ee6daf36bb07c60"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a972de675876e4e0c8ee6daf36bb07c60">WMAVoiceContext::pitch_diff_sh16</a></div><div class="ttdeci">int pitch_diff_sh16</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00224">wmavoice.c:224</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a3d3bd96a4cb1f5411b4982000cc761d9"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a3d3bd96a4cb1f5411b4982000cc761d9">WMAVoiceContext::sframe_cache_size</a></div><div class="ttdeci">int sframe_cache_size</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00204">wmavoice.c:204</a></div></div>
<div class="ttc" id="alibavutil_2float__dsp_8c_html_a8ac681f06fc6b5fb59a401db1c57e21c"><div class="ttname"><a href="libavutil_2float__dsp_8c.html#a8ac681f06fc6b5fb59a401db1c57e21c">avpriv_scalarproduct_float_c</a></div><div class="ttdeci">float avpriv_scalarproduct_float_c(const float *v1, const float *v2, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2float__dsp_8c_source.html#l00124">float_dsp.c:124</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a44fc87023e686e57c006acd548c62f6f"><div class="ttname"><a href="wmavoice_8c.html#a44fc87023e686e57c006acd548c62f6f">synth_frame</a></div><div class="ttdeci">static int synth_frame(AVCodecContext *ctx, GetBitContext *gb, int frame_idx, float *samples, const double *lsps, const double *prev_lsps, float *excitation, float *synth)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01482">wmavoice.c:1482</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a300cfab82e67c4b665a4d985b93b16f4"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a300cfab82e67c4b665a4d985b93b16f4">WMAVoiceContext::block_conv_table</a></div><div class="ttdeci">uint16_t block_conv_table[4]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00176">wmavoice.c:176</a></div></div>
<div class="ttc" id="amem_8h_html"><div class="ttname"><a href="mem_8h.html">mem.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga6503701220892f061eca2355cadee3c8"><div class="ttname"><a href="group__lavc__core.html#ga6503701220892f061eca2355cadee3c8">AV_CODEC_CAP_SUBFRAMES</a></div><div class="ttdeci">#define AV_CODEC_CAP_SUBFRAMES</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00093">codec.h:93</a></div></div>
<div class="ttc" id="amathematics_8h_html_a0a53871497a155afe91424c28a8ec3c4"><div class="ttname"><a href="mathematics_8h.html#a0a53871497a155afe91424c28a8ec3c4">M_LN10</a></div><div class="ttdeci">#define M_LN10</div><div class="ttdef"><b>Definition:</b> <a href="mathematics_8h_source.html#l00043">mathematics.h:43</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adb009f1d85ac852f5a0f6da3dd88ba56"><div class="ttname"><a href="tableprint__vlc_8h.html#adb009f1d85ac852f5a0f6da3dd88ba56">avpriv_request_sample</a></div><div class="ttdeci">#define avpriv_request_sample(...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00039">tableprint_vlc.h:39</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a3349235585b7e064015c911074d6dbb5"><div class="ttname"><a href="wmavoice_8c.html#a3349235585b7e064015c911074d6dbb5">synth_block_fcb_acb</a></div><div class="ttdeci">static void synth_block_fcb_acb(WMAVoiceContext *s, GetBitContext *gb, int block_idx, int size, int block_pitch_sh2, const struct frame_type_desc *frame_desc, float *excitation)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01306">wmavoice.c:1306</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a6f7bba5ea37c63f99b266928759fe6f6"><div class="ttname"><a href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a></div><div class="ttdeci">static void flush_put_bits(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00117">put_bits.h:117</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a636bebaf2722c8c2bd81f04df0dfb3e7"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a636bebaf2722c8c2bd81f04df0dfb3e7">WMAVoiceContext::frame_cntr</a></div><div class="ttdeci">int frame_cntr</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00247">wmavoice.c:247</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="ailbcdata_8h_html_a545b8c1c045fcc34b81d3ca822620277"><div class="ttname"><a href="ilbcdata_8h.html#a545b8c1c045fcc34b81d3ca822620277">alpha</a></div><div class="ttdeci">static const int16_t alpha[]</div><div class="ttdef"><b>Definition:</b> <a href="ilbcdata_8h_source.html#l00055">ilbcdata.h:55</a></div></div>
<div class="ttc" id="awmavoice_8c_html_ae10409ef08a934d1d75d8ad4b2b595f4"><div class="ttname"><a href="wmavoice_8c.html#ae10409ef08a934d1d75d8ad4b2b595f4">synth_block_hardcoded</a></div><div class="ttdeci">static void synth_block_hardcoded(WMAVoiceContext *s, GetBitContext *gb, int block_idx, int size, const struct frame_type_desc *frame_desc, float *excitation)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l01275">wmavoice.c:1275</a></div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html_a7a6ecab1a93fd7df3502931f72daf262"><div class="ttname"><a href="struct_a_m_r_fixed.html#a7a6ecab1a93fd7df3502931f72daf262">AMRFixed::y</a></div><div class="ttdeci">float y[10]</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00056">acelp_vectors.h:56</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a27f0967c6f7a76ec1d49fa986eaaf3a4"><div class="ttname"><a href="wmavoice_8c.html#a27f0967c6f7a76ec1d49fa986eaaf3a4">SFRAME_CACHE_MAXSIZE</a></div><div class="ttdeci">#define SFRAME_CACHE_MAXSIZE</div><div class="ttdoc">was split over two packets</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00057">wmavoice.c:56</a></div></div>
<div class="ttc" id="acbs__av1_8c_html_a67119bce106892b6dade1dc5aa405ac9"><div class="ttname"><a href="cbs__av1_8c.html#a67119bce106892b6dade1dc5aa405ac9">flags</a></div><div class="ttdeci">#define flags(name, subs,...)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__av1_8c_source.html#l00560">cbs_av1.c:560</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="awmavoice__data_8h_html_a9dbe45210bc02af1ae3d6796c48cf9cd"><div class="ttname"><a href="wmavoice__data_8h.html#a9dbe45210bc02af1ae3d6796c48cf9cd">wmavoice_lsp10_intercoeff_a</a></div><div class="ttdeci">static const float wmavoice_lsp10_intercoeff_a[32][2][10]</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice__data_8h_source.html#l01657">wmavoice_data.h:1657</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="aintmath_8h_html_aef9f0f25de87ea8361407f8c7579915c"><div class="ttname"><a href="intmath_8h.html#aef9f0f25de87ea8361407f8c7579915c">av_log2_16bit</a></div><div class="ttdeci">#define av_log2_16bit</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00084">intmath.h:84</a></div></div>
<div class="ttc" id="awmavoice_8c_html_a07fc88d41ef7536e6d5a56d49649e9a8"><div class="ttname"><a href="wmavoice_8c.html#a07fc88d41ef7536e6d5a56d49649e9a8">dequant_lsp16r</a></div><div class="ttdeci">static void dequant_lsp16r(GetBitContext *gb, double *i_lsps, const double *old, double *a1, double *a2, int q_mode)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00986">wmavoice.c:986</a></div></div>
<div class="ttc" id="astructframe__type__desc_html_a4b717e4fef82f144658adc08b37a337e"><div class="ttname"><a href="structframe__type__desc.html#a4b717e4fef82f144658adc08b37a337e">frame_type_desc::dbl_pulses</a></div><div class="ttdeci">uint8_t dbl_pulses</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00105">wmavoice.c:105</a></div></div>
<div class="ttc" id="astructframe__type__desc_html_a3f34a7aff7ebb8b3a1a0a5d62b5bf019"><div class="ttname"><a href="structframe__type__desc.html#a3f34a7aff7ebb8b3a1a0a5d62b5bf019">frame_type_desc::acb_type</a></div><div class="ttdeci">uint8_t acb_type</div><div class="ttdoc">Adaptive codebook type (ACB_TYPE_*)</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00103">wmavoice.c:103</a></div></div>
<div class="ttc" id="awmavoice_8c_html_aba7f789f3266685ad8840806656e3692"><div class="ttname"><a href="wmavoice_8c.html#aba7f789f3266685ad8840806656e3692">MAX_BLOCKS</a></div><div class="ttdeci">#define MAX_BLOCKS</div><div class="ttdoc">maximum number of blocks per frame</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00047">wmavoice.c:47</a></div></div>
<div class="ttc" id="alsp_8c_html_a06d95f875a659ddbac7f219329df5a4a"><div class="ttname"><a href="lsp_8c.html#a06d95f875a659ddbac7f219329df5a4a">ff_acelp_lspd2lpc</a></div><div class="ttdeci">void ff_acelp_lspd2lpc(const double *lsp, float *lpc, int lp_half_order)</div><div class="ttdef"><b>Definition:</b> <a href="lsp_8c_source.html#l00209">lsp.c:209</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_a60e70e81ae96551b1edf2b83187b45ba"><div class="ttname"><a href="struct_w_m_a_voice_context.html#a60e70e81ae96551b1edf2b83187b45ba">WMAVoiceContext::silence_gain</a></div><div class="ttdeci">float silence_gain</div><div class="ttdoc">set for use in blocks if ACB_TYPE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00226">wmavoice.c:226</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="aput__bits_8h_html"><div class="ttname"><a href="put__bits_8h.html">put_bits.h</a></div></div>
<div class="ttc" id="ag723__1_8h_html_ae7066a3dd30231dccbc429b70615a5a7"><div class="ttname"><a href="g723__1_8h.html#ae7066a3dd30231dccbc429b70615a5a7">pulses</a></div><div class="ttdeci">static const int8_t pulses[4]</div><div class="ttdef"><b>Definition:</b> <a href="g723__1_8h_source.html#l00723">g723_1.h:723</a></div></div>
<div class="ttc" id="aacelp__filters_8c_html_ae56e58c2d0191551a23a41f72a73d329"><div class="ttname"><a href="acelp__filters_8c.html#ae56e58c2d0191551a23a41f72a73d329">ff_acelp_interpolatef</a></div><div class="ttdeci">void ff_acelp_interpolatef(float *out, const float *in, const float *filter_coeffs, int precision, int frac_pos, int filter_length, int length)</div><div class="ttdef"><b>Definition:</b> <a href="acelp__filters_8c_source.html#l00078">acelp_filters.c:78</a></div></div>
<div class="ttc" id="astruct_w_m_a_voice_context_html_ae2e13c5f7a5f85a8bbaead8aebbd4ecc"><div class="ttname"><a href="struct_w_m_a_voice_context.html#ae2e13c5f7a5f85a8bbaead8aebbd4ecc">WMAVoiceContext::min_pitch_val</a></div><div class="ttdeci">int min_pitch_val</div><div class="ttdoc">base value for pitch parsing code</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00163">wmavoice.c:163</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a5251d62cc3c7f18e56bc8e0c48a27903">AV_SAMPLE_FMT_FLT</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_FLT</div><div class="ttdoc">float</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00063">samplefmt.h:63</a></div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html_a0daa6ce5c958c722e9ee3fb10ced50be"><div class="ttname"><a href="struct_a_m_r_fixed.html#a0daa6ce5c958c722e9ee3fb10ced50be">AMRFixed::pitch_lag</a></div><div class="ttdeci">int pitch_lag</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00058">acelp_vectors.h:58</a></div></div>
<div class="ttc" id="awmavoice_8c_html_adf764cbdea00d65edcd07bb9953ad2b7a71ab4c82225ff123f0c62a1667c3f749"><div class="ttname"><a href="wmavoice_8c.html#adf764cbdea00d65edcd07bb9953ad2b7a71ab4c82225ff123f0c62a1667c3f749">FCB_TYPE_HARDCODED</a></div><div class="ttdeci">@ FCB_TYPE_HARDCODED</div><div class="ttdef"><b>Definition:</b> <a href="wmavoice_8c_source.html#l00088">wmavoice.c:87</a></div></div>
<div class="ttc" id="astruct_a_m_r_fixed_html_ab5e04831b4b82dd433093e7855969e65"><div class="ttname"><a href="struct_a_m_r_fixed.html#ab5e04831b4b82dd433093e7855969e65">AMRFixed::n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="acelp__vectors_8h_source.html#l00054">acelp_vectors.h:54</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_ad2e88d75f808e6d4e78d48bceb10c336"><div class="ttname"><a href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a></div><div class="ttdeci">float min</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00456">vorbis_enc_data.h:456</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
