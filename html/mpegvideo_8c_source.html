<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/mpegvideo.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mpegvideo.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mpegvideo_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * The simplest mpeg encoder (well, it was the simplest!)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2000,2001 Fabrice Bellard</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (c) 2002-2004 Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * 4MV &amp; hq &amp; B-frame encoding stuff by Michael Niedermayer &lt;michaelni@gmx.at&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="attributes_8h.html">libavutil/attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avassert_8h.html">libavutil/avassert.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="imgutils_8h.html">libavutil/imgutils.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">libavutil/internal.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="motion__vector_8h.html">libavutil/motion_vector.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="blockdsp_8h.html">blockdsp.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="h264chroma_8h.html">h264chroma.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="x86_2idctdsp_8h.html">idctdsp.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="x86_2mathops_8h.html">mathops.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpeg__er_8h.html">mpeg_er.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegutils_8h.html">mpegutils.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegvideo_8h.html">mpegvideo.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mpegvideodata_8h.html">mpegvideodata.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mjpegenc_8h.html">mjpegenc.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="msmpeg4_8h.html">msmpeg4.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="qpeldsp_8h.html">qpeldsp.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2thread_8h.html">thread.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wmv2_8h.html">wmv2.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="limits_8h.html">limits.h</a>&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a4284d2b349a7c6534a777a145412b01e">   52</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a4284d2b349a7c6534a777a145412b01e">dct_unquantize_mpeg1_intra_c</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                   int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, nCoeffs;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">const</span> uint16_t *quant_matrix;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0] *= n &lt; 4 ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">/* XXX: only MPEG-1 */</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    quant_matrix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_matrix;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=1;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="keywordtype">int</span> j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j];</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qscale * quant_matrix[j]) &gt;&gt; 3;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - 1) | 1;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qscale * quant_matrix[j]) &gt;&gt; 3;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - 1) | 1;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#ac0c3296349162014c27ec1b65b116037">   81</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ac0c3296349162014c27ec1b65b116037">dct_unquantize_mpeg1_inter_c</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                   int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;{</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, nCoeffs;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">const</span> uint16_t *quant_matrix;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    quant_matrix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_matrix;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordtype">int</span> j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j];</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt;&lt; 1) + 1) * qscale *</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                         ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) (quant_matrix[j]))) &gt;&gt; 4;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - 1) | 1;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt;&lt; 1) + 1) * qscale *</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                         ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) (quant_matrix[j]))) &gt;&gt; 4;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> - 1) | 1;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a464b44e07ca5dacdfefe4f1601ebccf0">  110</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a464b44e07ca5dacdfefe4f1601ebccf0">dct_unquantize_mpeg2_intra_c</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                   int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, nCoeffs;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">const</span> uint16_t *quant_matrix;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;q_scale_type) qscale = <a class="code" href="mpegvideodata_8c.html#a45e984995c493b41540b00704666b301">ff_mpeg2_non_linear_qscale</a>[qscale];</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">else</span>                 qscale &lt;&lt;= 1;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;alternate_scan) nCoeffs= 63;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">else</span> nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0] *= n &lt; 4 ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    quant_matrix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_matrix;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=1;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordtype">int</span> j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j];</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qscale * quant_matrix[j]) &gt;&gt; 4;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qscale * quant_matrix[j]) &gt;&gt; 4;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a9f0e3049cae041cb7f6e23c04ffab0de">  140</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a9f0e3049cae041cb7f6e23c04ffab0de">dct_unquantize_mpeg2_intra_bitexact</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                   int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, nCoeffs;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">const</span> uint16_t *quant_matrix;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">int</span> sum=-1;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;q_scale_type) qscale = <a class="code" href="mpegvideodata_8c.html#a45e984995c493b41540b00704666b301">ff_mpeg2_non_linear_qscale</a>[qscale];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">else</span>                 qscale &lt;&lt;= 1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;alternate_scan) nCoeffs= 63;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">else</span> nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0] *= n &lt; 4 ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    sum += <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0];</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    quant_matrix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_matrix;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=1;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs;<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordtype">int</span> j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qscale * quant_matrix[j]) &gt;&gt; 4;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)(<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qscale * quant_matrix[j]) &gt;&gt; 4;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            sum+=<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[63]^=sum&amp;1;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a4a1d7e15684ea682904f25407a1f1e93">  174</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a4a1d7e15684ea682904f25407a1f1e93">dct_unquantize_mpeg2_inter_c</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                   int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, nCoeffs;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">const</span> uint16_t *quant_matrix;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">int</span> sum=-1;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;q_scale_type) qscale = <a class="code" href="mpegvideodata_8c.html#a45e984995c493b41540b00704666b301">ff_mpeg2_non_linear_qscale</a>[qscale];</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">else</span>                 qscale &lt;&lt;= 1;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;alternate_scan) nCoeffs= 63;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">else</span> nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n];</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    quant_matrix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_matrix;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordtype">int</span> j= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.permutated[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j];</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt;&lt; 1) + 1) * qscale *</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                         ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) (quant_matrix[j]))) &gt;&gt; 5;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = -<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = (((<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt;&lt; 1) + 1) * qscale *</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                         ((<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) (quant_matrix[j]))) &gt;&gt; 5;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[j] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            sum+=<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[63]^=sum&amp;1;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#aea8a40a5dd89f7832a69acb0b8c5a3f3">  208</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#aea8a40a5dd89f7832a69acb0b8c5a3f3">dct_unquantize_h263_intra_c</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                  int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, qmul, qadd;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">int</span> nCoeffs;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n]&gt;=0 || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_aic);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    qmul = qscale &lt;&lt; 1;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_aic) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0] *= n &lt; 4 ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale : <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        qadd = (qscale - 1) | 1;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        qadd = 0;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_pred)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        nCoeffs=63;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable.raster_end[ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n] ];</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qmul - qadd;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qmul + qadd;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a29ae0c9bdbbdbb9bbe093a51252b8d09">  242</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a29ae0c9bdbbdbb9bbe093a51252b8d09">dct_unquantize_h263_inter_c</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                  int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>, qmul, qadd;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordtype">int</span> nCoeffs;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n]&gt;=0);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    qadd = (qscale - 1) | 1;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    qmul = qscale &lt;&lt; 1;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    nCoeffs= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_scantable.raster_end[ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[n] ];</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;=nCoeffs; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &lt; 0) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qmul - qadd;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> * qmul + qadd;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a479c20dd159d50c8f6cd40a9afc2aa9d">  269</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a479c20dd159d50c8f6cd40a9afc2aa9d">gray16</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, ptrdiff_t <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>--)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        memset(dst + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>*<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>, 128, 16);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;}</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a3d68cec8ec4af08d87bd31a077e4376f">  275</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a3d68cec8ec4af08d87bd31a077e4376f">gray8</a>(<a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dst, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, ptrdiff_t <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>--)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        memset(dst + <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>*<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>, 128, 8);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">/* init common dct for both encoder and decoder */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a63fda41955181b705ef9a24397dc9330">  282</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a63fda41955181b705ef9a24397dc9330">dct_init</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="libavcodec_2blockdsp_8c.html#a923c6716c33a9c53546b0254916e406f">ff_blockdsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bdsp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="h264chroma_8c.html#a4183ca41207e383f4a607c6786737af1">ff_h264chroma_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h264chroma, 8); <span class="comment">//for lowres</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="hpeldsp_8c.html#a1bdbaf95361cfb912c75c8dbc819dcba">ff_hpeldsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="mpegvideodsp_8c.html#af22767956af30af6c677568028e8ac26">ff_mpegvideodsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mdsp);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;bits_per_raw_sample);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;debug &amp; <a class="code" href="avcodec_8h.html#af910cd51ccebe14efae0a234b65ba14b">FF_DEBUG_NOMC</a>) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.avg_pixels_tab[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpegvideo_8c.html#a479c20dd159d50c8f6cd40a9afc2aa9d">gray16</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpegvideo_8c.html#a479c20dd159d50c8f6cd40a9afc2aa9d">gray16</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_no_rnd_pixels_tab[0][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpegvideo_8c.html#a479c20dd159d50c8f6cd40a9afc2aa9d">gray16</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.avg_pixels_tab[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpegvideo_8c.html#a3d68cec8ec4af08d87bd31a077e4376f">gray8</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpegvideo_8c.html#a3d68cec8ec4af08d87bd31a077e4376f">gray8</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_no_rnd_pixels_tab[1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="mpegvideo_8c.html#a3d68cec8ec4af08d87bd31a077e4376f">gray8</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_h263_intra = <a class="code" href="mpegvideo_8c.html#aea8a40a5dd89f7832a69acb0b8c5a3f3">dct_unquantize_h263_intra_c</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_h263_inter = <a class="code" href="mpegvideo_8c.html#a29ae0c9bdbbdbb9bbe093a51252b8d09">dct_unquantize_h263_inter_c</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg1_intra = <a class="code" href="mpegvideo_8c.html#a4284d2b349a7c6534a777a145412b01e">dct_unquantize_mpeg1_intra_c</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg1_inter = <a class="code" href="mpegvideo_8c.html#ac0c3296349162014c27ec1b65b116037">dct_unquantize_mpeg1_inter_c</a>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg2_intra = <a class="code" href="mpegvideo_8c.html#a464b44e07ca5dacdfefe4f1601ebccf0">dct_unquantize_mpeg2_intra_c</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a>)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg2_intra = <a class="code" href="mpegvideo_8c.html#a9f0e3049cae041cb7f6e23c04ffab0de">dct_unquantize_mpeg2_intra_bitexact</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg2_inter = <a class="code" href="mpegvideo_8c.html#a4a1d7e15684ea682904f25407a1f1e93">dct_unquantize_mpeg2_inter_c</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (HAVE_INTRINSICS_NEON)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="neon_2mpegvideo_8c.html#a2a2b195ac45330961c75684db90628d8">ff_mpv_common_init_neon</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (ARCH_ALPHA)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <a class="code" href="mpegvideo__alpha_8c.html#a46ac931ad5ba88bb73fb597599e30d26">ff_mpv_common_init_axp</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (ARCH_ARM)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="mpegvideo__arm_8c.html#acbf901772cb73aa63eb1f9b6f2dfae6a">ff_mpv_common_init_arm</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">if</span> (ARCH_PPC)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="mpegvideo_8h.html#a892bc6b13e378bb6976175892d150b76">ff_mpv_common_init_ppc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (ARCH_X86)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="x86_2mpegvideo_8c.html#a3b82911192d2cf011f26585ff72312fd">ff_mpv_common_init_x86</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">if</span> (ARCH_MIPS)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="mpegvideo__init__mips_8c.html#a619d88224420cec4879dcbadb9084819">ff_mpv_common_init_mips</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#abe86e0fc382c61b40533700cce329192">  329</a></span>&#160;<a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a71135d03df49cffd713309e71e5f28fa">ff_mpv_idct_init</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a>)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.mpeg4_studio_profile = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;studio_profile;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="idctdsp_8c.html#a09c1200a433519590f6ee84ec9aeb158">ff_idctdsp_init</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">/* load &amp; permutate scantables</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">     * note: only wmv uses different ones</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;alternate_scan) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_scantable, <a class="code" href="mpegvideodata_8c.html#af7a9082d18407e025821c46111aab1f2">ff_alternate_vertical_scan</a>);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable, <a class="code" href="mpegvideodata_8c.html#af7a9082d18407e025821c46111aab1f2">ff_alternate_vertical_scan</a>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;inter_scantable, <a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_scantable, <a class="code" href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_h_scantable, <a class="code" href="mpegvideodata_8c.html#ae3569926af55c72c980ac342f80ad61d">ff_alternate_horizontal_scan</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_v_scantable, <a class="code" href="mpegvideodata_8c.html#af7a9082d18407e025821c46111aab1f2">ff_alternate_vertical_scan</a>);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;}</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#abfebd7c844ecf151044a395813987262">  349</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#abfebd7c844ecf151044a395813987262">alloc_picture</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_picture.html">Picture</a> *pic)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mpegpicture_8c.html#a50e6885a261e26d35afa646081b15f4c">ff_alloc_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, pic, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc, 0, 0,</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format,</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride,</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                            &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">  357</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">init_duplicate_context</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">int</span> y_size = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride * (2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height + 1);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">int</span> c_size = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height + 1);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordtype">int</span> yc_size = y_size + 2 * c_size;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height &amp; 1)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        yc_size += 2*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride + 2*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer =</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.scratchpad   =</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.temp         =</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.rd_scratchpad   =</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.b_scratchpad    =</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.obmc_scratchpad = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.map,       <a class="code" href="motion__est_8h.html#a503dd0cae8a23f8c6b5767888250a72f">ME_MAP_SIZE</a>) ||</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.score_map, <a class="code" href="motion__est_8h.html#a503dd0cae8a23f8c6b5767888250a72f">ME_MAP_SIZE</a>))</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;noise_reduction) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_error_sum,  2))</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;blocks,  2))</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;blocks[0];</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 12; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pblocks[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32         = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32))) ||</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_macroblock = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_macroblock))))</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_direction = 0;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;codec_tag == <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;VCR2&quot;</span>)) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="comment">// exchange uv</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">void</span> *, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pblocks[4], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pblocks[5]);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277acbc818c9ff383e30d36451d333dd1a1a">FMT_H263</a>) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="comment">/* ac values */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val_base,  yc_size))</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride + 1;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val_base + y_size + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[2] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[1] + c_size;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;}</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">  414</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">free_duplicate_context</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.scratchpad);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.temp =</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.rd_scratchpad =</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.b_scratchpad =</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.obmc_scratchpad = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_error_sum);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.map);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.score_map);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;blocks);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_macroblock);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val_base);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#ac060a67dcb28ff015bbd669051b1a4b5">  436</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ac060a67dcb28ff015bbd669051b1a4b5">backup_duplicate_context</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *bak, <a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;{</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#define COPY(a) bak-&gt;a = src-&gt;a</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(sc.edge_emu_buffer);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(<a class="code" href="vf__colormatrix_8c.html#ac83b72d92d1105a82cd5590c0f65d48b">me</a>.scratchpad);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(<a class="code" href="vf__colormatrix_8c.html#ac83b72d92d1105a82cd5590c0f65d48b">me</a>.temp);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(sc.rd_scratchpad);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(sc.b_scratchpad);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(sc.obmc_scratchpad);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(<a class="code" href="vf__colormatrix_8c.html#ac83b72d92d1105a82cd5590c0f65d48b">me</a>.map);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(<a class="code" href="vf__colormatrix_8c.html#ac83b72d92d1105a82cd5590c0f65d48b">me</a>.score_map);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(blocks);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(block32);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(dpcm_macroblock);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(dpcm_direction);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(start_mb_y);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(end_mb_y);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(<a class="code" href="vf__colormatrix_8c.html#ac83b72d92d1105a82cd5590c0f65d48b">me</a>.map_generation);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(pb);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(dct_error_sum);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(dct_count[0]);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(dct_count[1]);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(ac_val_base);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(ac_val[0]);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(ac_val[1]);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <a class="code" href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a>(ac_val[2]);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="preprocessor">#undef COPY</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a5b1e5bc4ec557e1315ac4b10d2f7efdd">  466</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a5b1e5bc4ec557e1315ac4b10d2f7efdd">ff_update_duplicate_context</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *dst, <a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;{</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> bak;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="comment">// FIXME copy only needed parts</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="mpegvideo_8c.html#ac060a67dcb28ff015bbd669051b1a4b5">backup_duplicate_context</a>(&amp;bak, dst);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    memcpy(dst, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a>));</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="mpegvideo_8c.html#ac060a67dcb28ff015bbd669051b1a4b5">backup_duplicate_context</a>(dst, &amp;bak);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 12; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#aefec547bedcfb0e811c154e88ba0d13f">pblocks</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = &amp;dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#a16cee16c189e26b1f3aec69c1cfebbfd">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#afcd6dc88b0d074921f6563d83d480953">avctx</a>-&gt;<a class="code" href="struct_a_v_codec_context.html#a2c974557671dd459674b170c5e64d79a">codec_tag</a> == <a class="code" href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a>(<span class="stringliteral">&quot;VCR2&quot;</span>)) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// exchange uv</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a>(<span class="keywordtype">void</span> *, dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#aefec547bedcfb0e811c154e88ba0d13f">pblocks</a>[4], dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#aefec547bedcfb0e811c154e88ba0d13f">pblocks</a>[5]);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> (!dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#a879bd7309191b792ac0c6f69be2ccc48">sc</a>.<a class="code" href="struct_scratchpad_context.html#a20167b23634aeab3dce197970a6236e3">edge_emu_buffer</a> &amp;&amp;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegpicture_8c.html#ad8e534cfdf220358e0954766f636e457">ff_mpeg_framesize_alloc</a>(dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#afcd6dc88b0d074921f6563d83d480953">avctx</a>, &amp;dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#ac55093a5d2d8a1e947e725b512d59488">me</a>,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                       &amp;dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#a879bd7309191b792ac0c6f69be2ccc48">sc</a>, dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#a3f9f7f0d266e4d506bc4dd50f1d43df0">linesize</a>)) &lt; 0) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(dst-&gt;<a class="code" href="struct_mpeg_enc_context.html#afcd6dc88b0d074921f6563d83d480953">avctx</a>, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;failed to allocate context &quot;</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;               <span class="stringliteral">&quot;scratch buffers.\n&quot;</span>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#ab7194fae34d0ae2c3f731115e0787d03">  491</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#ab7194fae34d0ae2c3f731115e0787d03">ff_mpeg_update_thread_context</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *dst,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = dst-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>, *<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;priv_data;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">if</span> (dst == <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// FIXME can parameters change on I-frames?</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="comment">// in that case dst may need a reinit</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;context_initialized) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordtype">int</span> err;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a>));</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx                 = dst;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer      = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer_size = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;allocated_bitstream_buffer_size = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;context_initialized){</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">//             s-&gt;picture_range_start  += MAX_PICTURE_COUNT;</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//             s-&gt;picture_range_end    += MAX_PICTURE_COUNT;</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            <a class="code" href="mpegvideo_8c.html#a71135d03df49cffd713309e71e5f28fa">ff_mpv_idct_init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">if</span>((err = <a class="code" href="mpegvideo_8c.html#a41d45225b8f3b9b907a5e8ea9347baa8">ff_mpv_common_init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0){</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a>));</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx = dst;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;height || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;width || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;context_reinit) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;context_reinit = 0;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;height;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width  = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;width;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegvideo_8c.html#ad68ee62dc6558df48c98f07b39b45c8f">ff_mpv_common_frame_size_change</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;coded_height  = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;avctx-&gt;coded_height;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;coded_width   = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;avctx-&gt;coded_width;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;width         = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;avctx-&gt;width;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;height        = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;avctx-&gt;height;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160; </div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample       = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;quarter_sample;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_picture_number = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;coded_picture_number;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_number       = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;picture_number;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture != <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;picture);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;picture &amp;&amp; <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].f-&gt;buf[0] &amp;&amp;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegpicture_8c.html#a72fab24bab059aa7ad186c9b327ed312">ff_mpeg_ref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])) &lt; 0)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor">#define UPDATE_PICTURE(pic)\</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">do {\</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">    ff_mpeg_unref_picture(s-&gt;avctx, &amp;s-&gt;pic);\</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">    if (s1-&gt;pic.f &amp;&amp; s1-&gt;pic.f-&gt;buf[0])\</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">        ret = ff_mpeg_ref_picture(s-&gt;avctx, &amp;s-&gt;pic, &amp;s1-&gt;pic);\</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">    else\</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">        ret = ff_update_picture_tables(&amp;s-&gt;pic, &amp;s1-&gt;pic);\</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">    if (ret &lt; 0)\</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">        return ret;\</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor">} while (0)</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <a class="code" href="mpegvideo_8c.html#a8c4776e91d21d020d53473ba6fcf78dd">UPDATE_PICTURE</a>(current_picture);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="mpegvideo_8c.html#a8c4776e91d21d020d53473ba6fcf78dd">UPDATE_PICTURE</a>(<a class="code" href="tests_2movenc_8c.html#ab2701a30de940bb70eba04c945931f6e">last_picture</a>);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="mpegvideo_8c.html#a8c4776e91d21d020d53473ba6fcf78dd">UPDATE_PICTURE</a>(next_picture);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor">#define REBASE_PICTURE(pic, new_ctx, old_ctx)                                 \</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">    ((pic &amp;&amp; pic &gt;= old_ctx-&gt;picture &amp;&amp;                                       \</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">      pic &lt; old_ctx-&gt;picture + MAX_PICTURE_COUNT) ?                           \</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">        &amp;new_ctx-&gt;picture[pic - old_ctx-&gt;picture] : NULL)</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr    = <a class="code" href="mpegvideo_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a>(<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;last_picture_ptr,    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr = <a class="code" href="mpegvideo_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a>(<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;current_picture_ptr, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr    = <a class="code" href="mpegvideo_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a>(<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;next_picture_ptr,    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// Error/bug resilience</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_p_frame_damaged = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;next_p_frame_damaged;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs      = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;workaround_bugs;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;padding_bug_score    = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;padding_bug_score;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="comment">// MPEG-4 timing info</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    memcpy(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_time_base, &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;last_time_base,</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;           (<span class="keywordtype">char</span> *) &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;pb_field_time + <span class="keyword">sizeof</span>(<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;pb_field_time) -</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;           (<span class="keywordtype">char</span> *) &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;last_time_base);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// B-frame info</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;max_b_frames = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;max_b_frames;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;low_delay    = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;low_delay;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;droppable    = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;droppable;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// DivX handling (doesn&#39;t work)</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;divx_packed  = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;divx_packed;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;bitstream_buffer) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;bitstream_buffer_size +</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a> &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;allocated_bitstream_buffer_size) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <a class="code" href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                           &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;allocated_bitstream_buffer_size,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                           <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;allocated_bitstream_buffer_size);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer_size = 0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer_size = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;bitstream_buffer_size;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        memcpy(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;bitstream_buffer,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;               <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;bitstream_buffer_size);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer_size, 0,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;               <a class="code" href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// linesize-dependent scratch buffer allocation</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;linesize) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="mpegpicture_8c.html#ad8e534cfdf220358e0954766f636e457">ff_mpeg_framesize_alloc</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                        &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc, <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;linesize) &lt; 0) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate context &quot;</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                       <span class="stringliteral">&quot;scratch buffers.\n&quot;</span>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Context scratch buffers could not &quot;</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                   <span class="stringliteral">&quot;be allocated due to unknown size.\n&quot;</span>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// MPEG-2/interlacing info</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    memcpy(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence, &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;progressive_sequence,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;           (<span class="keywordtype">char</span> *) &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;rtp_mode - (<span class="keywordtype">char</span> *) &amp;<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;progressive_sequence);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;first_field) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_pict_type = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;pict_type;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;current_picture_ptr)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_lambda_for[<a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;pict_type] = <a class="code" href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a>-&gt;current_picture_ptr-&gt;f-&gt;quality;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a035beb11265e5c030b65cd90541daa6c">  644</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a035beb11265e5c030b65cd90541daa6c">ff_mpv_common_defaults</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;{</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale_table      =</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale_table      = <a class="code" href="mpegvideodata_8c.html#a96c82a47593f168e1c2e367d96dcad8e">ff_mpeg1_dc_scale_table</a>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale_table   = <a class="code" href="mpegvideodata_8c.html#ab8d1407e7dddf4e731193c00a65dc373">ff_default_chroma_qscale_table</a>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_frame     = 1;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence  = 1;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure     = <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_picture_number  = 0;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_number        = 0;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;f_code                = 1;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_code                = 1;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count   = 1;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;}</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a29057cff58b3ca5d43819922bcf248bf">  667</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a29057cff58b3ca5d43819922bcf248bf">ff_mpv_decode_defaults</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;{</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="mpegvideo_8c.html#a035beb11265e5c030b65cd90541daa6c">ff_mpv_common_defaults</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a99390e7c7f3b91fd3420752580a57b70">  672</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a99390e7c7f3b91fd3420752580a57b70">ff_mpv_decode_init</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;{</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx           = avctx;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width           = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">coded_width</a>;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height          = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">coded_height</a>;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id        = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">codec</a>-&gt;<a class="code" href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">id</a>;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a4649a6454a0f784794b89afdc44da669">workaround_bugs</a>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="comment">/* convert fourcc to upper case */</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_tag          = <a class="code" href="libavcodec_2internal_8h.html#ad4714ae1c93972fd9c8ff2a303fcd051">avpriv_toupper4</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a2c974557671dd459674b170c5e64d79a">codec_tag</a>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a011ad6cb11e541bc18487f05c9b796da">  687</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a011ad6cb11e541bc18487f05c9b796da">init_context_frame</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordtype">int</span> y_size, c_size, yc_size, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, mb_array_size, mv_table_size, x, y;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width   = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width + 15) / 16;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width + 1;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * 2 + 1;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    mb_array_size = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    mv_table_size = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height + 2) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">/* set default edge pos, will be overridden</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">     * in decode_header if needed */</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h_edge_pos = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * 16;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;v_edge_pos = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * 16;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[0] =</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[1] =</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[2] =</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[3] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[4] =</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_wrap[5] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    y_size  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride * (2 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height + 1);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    c_size  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height + 1);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    yc_size = y_size + 2   * c_size;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height &amp; 1)</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        yc_size += 2*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride + 2*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_num + 1))</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height; y++)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; x++)</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[x + y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width] = x + y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width] = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height - 1) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width; <span class="comment">// FIXME really needed?</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <span class="comment">/* Allocate MV tables */</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table_base,            mv_table_size) ||</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table_base,       mv_table_size) ||</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table_base,       mv_table_size) ||</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table_base, mv_table_size) ||</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table_base, mv_table_size) ||</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table_base,     mv_table_size))</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table            = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table       = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table       = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="comment">/* Allocate MB type table */</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_type,      mb_array_size) ||</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lambda_table, mb_array_size) ||</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#a9a1502b14f7cb3e69154fdcc0f45d5a8">FF_ALLOC_TYPED_ARRAY</a> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cplx_tab,     mb_array_size) ||</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#a9a1502b14f7cb3e69154fdcc0f45d5a8">FF_ALLOC_TYPED_ARRAY</a> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bits_tab,     mb_array_size))</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a> ||</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga936c6ae1b3d24d7504f0a9aea1a24c74">AV_CODEC_FLAG_INTERLACED_ME</a>)) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;        <span class="comment">/* interlaced direct mode decoding tables */</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordtype">int</span> j, k;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <span class="keywordflow">for</span> (k = 0; k &lt; 2; k++) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k], mv_table_size))</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k] +</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                                                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_select_table [<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j], mv_table_size * 2) ||</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                    !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j], mv_table_size))</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_select_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>], mv_table_size * 2))</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277acbc818c9ff383e30d36451d333dd1a1a">FMT_H263</a>) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="comment">/* cbp values, cbp, ac_pred, pred_dir */</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block_base, y_size + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height&amp;1)*2*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride) ||</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cbp_table,        mb_array_size)                            ||</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pred_dir_table,   mb_array_size))</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride + 1;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_pred || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_plus || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding) {</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">/* dc values */</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="comment">// MN: we need these for error resilience of intra-frames</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val_base, yc_size))</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val_base + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride + 1;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val_base + y_size + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[2] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[1] + c_size;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; yc_size; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 1024;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="comment">/* which mb is an intra block,  init macroblock skip table */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table, mb_array_size) ||</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;        <span class="comment">// Note the + 1 is for a quicker MPEG-4 slice_end detection</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        !<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table,  mb_array_size + 2))</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table, 1, mb_array_size);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mpeg__er_8c.html#a63023ecab6554b96dea418dc53c7ca5f">ff_mpeg_er_init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#aa5d699aa6f7da7be00f20eaffe83949f">  802</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#aa5d699aa6f7da7be00f20eaffe83949f">clear_context</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture));</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture));</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture));</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    memset(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture));</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context));</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.map = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.score_map = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_error_sum = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;blocks = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32 = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pblocks, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pblocks));</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_direction = 0;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_macroblock = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[0] =</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[1] =</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[2] =<a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.scratchpad = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.temp =</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.rd_scratchpad =</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.b_scratchpad =</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.obmc_scratchpad = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; </div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;allocated_bitstream_buffer_size = 0;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture          = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_type          = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table_base  = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table            = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table       = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table       = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table     = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">for</span> (k = 0; k &lt; 2; k++) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_select_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_select_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block_base = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cbp_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pred_dir_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;er.error_status_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;er.er_temp_buffer = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lambda_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cplx_tab = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bits_tab = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a7e99f921290cbc73a477ee8a91c8299b">  884</a></span>&#160;<a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a41d45225b8f3b9b907a5e8ea9347baa8">ff_mpv_common_init</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;{</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordtype">int</span> nb_slices = (HAVE_THREADS &amp;&amp;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                     <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type &amp; <a class="code" href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a>) ?</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;thread_count : 1;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; </div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="mpegvideo_8c.html#aa5d699aa6f7da7be00f20eaffe83949f">clear_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;slices)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        nb_slices = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;slices;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a> &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height + 31) / 32 * 2;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height + 15) / 16;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;pix_fmt == <a class="code" href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a>) {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;               <span class="stringliteral">&quot;decoding to AV_PIX_FMT_NONE is not supported.\n&quot;</span>);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">if</span> (nb_slices &gt; <a class="code" href="frame__thread__encoder_8c.html#a8b5173357adb02a86c027316e0acdfa0">MAX_THREADS</a> || (nb_slices &gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height)) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordtype">int</span> max_slices;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            max_slices = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="frame__thread__encoder_8c.html#a8b5173357adb02a86c027316e0acdfa0">MAX_THREADS</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;            max_slices = <a class="code" href="frame__thread__encoder_8c.html#a8b5173357adb02a86c027316e0acdfa0">MAX_THREADS</a>;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;too many threads/slices (%d),&quot;</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;               <span class="stringliteral">&quot; reducing to %d\n&quot;</span>, nb_slices, max_slices);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        nb_slices = max_slices;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height) &amp;&amp;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx))</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="mpegvideo_8c.html#a63fda41955181b705ef9a24397dc9330">dct_init</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="comment">/* set chroma shifts */</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;pix_fmt,</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                                           &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift,</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                                           &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture, <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>))</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].f = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>();</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].f)</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    }</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f    = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()) ||</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f    = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()) ||</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()) ||</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture.f     = <a class="code" href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a>()))</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegvideo_8c.html#a011ad6cb11e541bc18487f05c9b796da">init_context_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)))</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.state = -1;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;context_initialized = 1;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context));</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[0]   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">//     if (s-&gt;width &amp;&amp; s-&gt;height) {</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (nb_slices &gt; 1) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_slices; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__lavu__mem__funcs.html#ga4ad5e6363f4a6b6eddfdb427e21166f2">av_memdup</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a>));</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            }</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">init_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])) &lt; 0)</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;start_mb_y =</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) + nb_slices / 2) / nb_slices;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;end_mb_y   =</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) + nb_slices / 2) / nb_slices;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        }</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">init_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)) &lt; 0)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;start_mb_y = 0;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;end_mb_y   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count = nb_slices;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">//     }</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;}</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#ab4255aa773d1b03df4f4affcc6a92102">  986</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ab4255aa773d1b03df4f4affcc6a92102">free_context_frame</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j, k;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_type);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table_base);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table_base);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table_base);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table_base);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table_base);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table_base);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_mv_table            = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_forw_mv_table       = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_back_mv_table       = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_forw_mv_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_bidir_back_mv_table = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_direct_mv_table     = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">for</span> (k = 0; k &lt; 2; k++) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k]);</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_mv_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j][k] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b_field_select_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j]);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table_base[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j]);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_mv_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][j] = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;p_field_select_table[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val_base);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block_base);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cbp_table);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pred_dir_table);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;er.error_status_table);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;er.er_temp_buffer);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_index2xy);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;lambda_table);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;cplx_tab);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bits_tab);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize = 0;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;}</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#ad68ee62dc6558df48c98f07b39b45c8f"> 1035</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#ad68ee62dc6558df48c98f07b39b45c8f">ff_mpv_common_frame_size_change</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;{</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, err = 0;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;context_initialized)</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count &gt; 1) {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <a class="code" href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">free_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <a class="code" href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">free_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <a class="code" href="mpegvideo_8c.html#ab4255aa773d1b03df4f4affcc6a92102">free_context_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture)</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].needs_realloc = 1;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr         =</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr         =</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr      = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="comment">// init</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a> &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height + 31) / 32 * 2;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height = (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height + 15) / 16;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height) &amp;&amp;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        (err = <a class="code" href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx)) &lt; 0)</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keywordflow">if</span> ((err = <a class="code" href="mpegvideo_8c.html#a011ad6cb11e541bc18487f05c9b796da">init_context_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)))</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context));</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[0]   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height) {</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        <span class="keywordtype">int</span> nb_slices = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="keywordflow">if</span> (nb_slices &gt; 1) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_slices; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="group__lavu__mem__funcs.html#ga4ad5e6363f4a6b6eddfdb427e21166f2">av_memdup</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keyword">sizeof</span>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a>));</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                    }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                <span class="keywordflow">if</span> ((err = <a class="code" href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">init_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])) &lt; 0)</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;start_mb_y =</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                    (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>) + nb_slices / 2) / nb_slices;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;end_mb_y   =</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height * (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1) + nb_slices / 2) / nb_slices;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            err = <a class="code" href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">init_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            <span class="keywordflow">if</span> (err &lt; 0)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;start_mb_y = 0;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;end_mb_y   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count = nb_slices;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    }</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/* init common structure for both encoder and decoder */</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a18e8f54ca7350073bde9adee069dc3ba"> 1110</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a18e8f54ca7350073bde9adee069dc3ba">ff_mpv_common_end</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count &gt; 1) {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;            <a class="code" href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">free_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;thread_context[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;        }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;slice_context_count = 1;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    } <span class="keywordflow">else</span> <a class="code" href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">free_duplicate_context</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.buffer);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.buffer_size = 0;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;allocated_bitstream_buffer_size = 0;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160; </div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx)</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <a class="code" href="mpegpicture_8c.html#ad4ab6ca2880b242f785360048d691ddb">ff_free_picture_tables</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;            <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].f);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <a class="code" href="mpegpicture_8c.html#ad4ab6ca2880b242f785360048d691ddb">ff_free_picture_tables</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="mpegpicture_8c.html#ad4ab6ca2880b242f785360048d691ddb">ff_free_picture_tables</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <a class="code" href="mpegpicture_8c.html#ad4ab6ca2880b242f785360048d691ddb">ff_free_picture_tables</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <a class="code" href="mpegpicture_8c.html#ad4ab6ca2880b242f785360048d691ddb">ff_free_picture_tables</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <a class="code" href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;new_picture.f);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <a class="code" href="mpegvideo_8c.html#ab4255aa773d1b03df4f4affcc6a92102">free_context_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160; </div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;context_initialized      = 0;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr         =</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr         =</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr      = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize = 0;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;}</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#ae9282ae335e63c80e77877e4c43c7840"> 1167</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ae9282ae335e63c80e77877e4c43c7840">gray_frame</a>(<a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, h_chroma_shift, v_chroma_shift;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;format, &amp;h_chroma_shift, &amp;v_chroma_shift);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        memset(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0] + <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[0]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 0x80, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;height, v_chroma_shift); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        memset(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[1] + <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[1]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;               0x80, <a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width, h_chroma_shift));</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        memset(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[2] + <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;linesize[2]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;               0x80, <a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;width, h_chroma_shift));</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;}</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a09cdf71b4e226f14deef538e321f3af6"> 1187</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a09cdf71b4e226f14deef538e321f3af6">ff_mpv_frame_start</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;{</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="struct_picture.html">Picture</a> *pic;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped = 0;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="libavcodec_2internal_8h.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a>(avctx)) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Attempt to start a frame outside SETUP state\n&quot;</span>);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    <span class="comment">/* mark &amp; release old frames */</span></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr &amp;&amp;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr &amp;&amp;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;buf[0]) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="comment">/* release forgotten pictures */</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    <span class="comment">/* if (MPEG-124 / H.263) */</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        <span class="keywordflow">if</span> (&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr &amp;&amp;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr &amp;&amp;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].reference &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].needs_realloc) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        }</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="comment">/* release non reference frames */</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].reference)</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    }</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;buf[0]) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">// we already have an unused image</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="comment">// (maybe it was set before reading the header)</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        pic = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>   = <a class="code" href="mpegpicture_8c.html#a71b6582845e743c9f19aad4011575dc9">ff_find_unused_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture, 0);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 0) {</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;no frame buffer available\n&quot;</span>);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        pic = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    }</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    pic-&gt;<a class="code" href="struct_picture.html#a5fbe85ca795cfaab84a31e0fb0cc57d4">reference</a> = 0;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;droppable) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>)</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            pic-&gt;<a class="code" href="struct_picture.html#a5fbe85ca795cfaab84a31e0fb0cc57d4">reference</a> = 3;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    }</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    pic-&gt;<a class="code" href="struct_picture.html#ab73190435fab740e9c22e61aedb5c2ad">f</a>-&gt;<a class="code" href="struct_a_v_frame.html#a02ca9bb7f500d3d850f8736f3cb29c6c">coded_picture_number</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_picture_number++;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mpegvideo_8c.html#abfebd7c844ecf151044a395813987262">alloc_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, pic) &lt; 0)</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr = pic;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// FIXME use only the vars from current_pic</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;top_field_first = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;top_field_first;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a> ||</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>)</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;top_field_first =</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a>) == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;first_field;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    }</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;interlaced_frame = !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_frame &amp;&amp;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                                 !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;progressive_sequence;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;field_picture      =  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;pict_type = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="comment">// if (s-&gt;avctx-&gt;flags &amp;&amp; AV_CODEC_FLAG_QSCALE)</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="comment">//     s-&gt;current_picture_ptr-&gt;quality = s-&gt;new_picture_ptr-&gt;quality;</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;key_frame = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160; </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegpicture_8c.html#a72fab24bab059aa7ad186c9b327ed312">ff_mpeg_ref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr)) &lt; 0)</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;droppable)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <span class="stringliteral">&quot;L%p N%p C%p L%p N%p C%p type:%d drop:%d\n&quot;</span>,</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr,<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr,</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr    ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;data[0]    : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr    ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;f-&gt;data[0]    : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;data[0] : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;droppable);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">if</span> ((!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;buf[0]) &amp;&amp;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>)) {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        <span class="keywordtype">int</span> h_chroma_shift, v_chroma_shift;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        <a class="code" href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;pix_fmt,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                         &amp;h_chroma_shift, &amp;v_chroma_shift);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;f-&gt;buf[0])</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>,</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                   <span class="stringliteral">&quot;allocating dummy last picture for B frame\n&quot;</span>);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>)</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                   <span class="stringliteral">&quot;warning: first frame is no keyframe\n&quot;</span>);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160; </div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="comment">/* Allocate a dummy frame */</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="mpegpicture_8c.html#a71b6582845e743c9f19aad4011575dc9">ff_find_unused_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture, 0);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 0) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;no frame buffer available\n&quot;</span>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;reference   = 3;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;key_frame = 0;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;pict_type = <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegvideo_8c.html#abfebd7c844ecf151044a395813987262">alloc_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr) &lt; 0) {</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="keywordflow">if</span> (!avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">hwaccel</a>) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;data[0] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;linesize[0]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                       0x80, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;data[2]) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>, v_chroma_shift); <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;data[1] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;linesize[1]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                        0x80, <a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>, h_chroma_shift));</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;data[2] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;linesize[2]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                        0x80, <a class="code" href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>, h_chroma_shift));</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea130d77683c690fdeeb9de1e9409d06d4">AV_CODEC_ID_FLV1</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac3d126631b15729d01d427b642c3bc9e">AV_CODEC_ID_H263</a>){</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">height</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;data[0] + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;linesize[0]*<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, 16, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">width</a>);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            }</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        }</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160; </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;tf, INT_MAX, 0);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;tf, INT_MAX, 1);</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <span class="keywordflow">if</span> ((!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;f-&gt;buf[0]) &amp;&amp;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) {</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="comment">/* Allocate a dummy frame */</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = <a class="code" href="mpegpicture_8c.html#a71b6582845e743c9f19aad4011575dc9">ff_find_unused_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture, 0);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 0) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;no frame buffer available\n&quot;</span>);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        }</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;reference   = 3;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;f-&gt;key_frame = 0;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;f-&gt;pict_type = <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mpegvideo_8c.html#abfebd7c844ecf151044a395813987262">alloc_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr) &lt; 0) {</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;tf, INT_MAX, 0);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;tf, INT_MAX, 1);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="preprocessor">#if 0 // BUFREF-FIXME</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f-&gt;data, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f-&gt;data));</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f-&gt;data, 0, <span class="keyword">sizeof</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f-&gt;data));</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr) {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;buf[0] &amp;&amp;</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegpicture_8c.html#a72fab24bab059aa7ad186c9b327ed312">ff_mpeg_ref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture,</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr)) &lt; 0)</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr) {</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;f-&gt;buf[0] &amp;&amp;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="mpegpicture_8c.html#a72fab24bab059aa7ad186c9b327ed312">ff_mpeg_ref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr)) &lt; 0)</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160; </div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a> || (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr &amp;&amp;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;                                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f-&gt;buf[0]));</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure!= <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;data[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] +=</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;            }</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] *= 2;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]    *= 2;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f-&gt;linesize[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]    *= 2;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="comment">/* set dequantizer, we can&#39;t do it during init as</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;<span class="comment">     * it might change for MPEG-4 and we can&#39;t do it in the header</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;<span class="comment">     * decode as init is not called for MPEG-4 there yet */</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mpeg_quant || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_intra = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg2_intra;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_inter = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg2_inter;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277acbc818c9ff383e30d36451d333dd1a1a">FMT_H263</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277a5bd89968f8e67aa8a34c703dcd1b5fd6">FMT_H261</a>) {</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_intra = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_h263_intra;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_inter = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_h263_inter;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_intra = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg1_intra;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_inter = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_mpeg1_inter;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;debug &amp; <a class="code" href="avcodec_8h.html#af910cd51ccebe14efae0a234b65ba14b">FF_DEBUG_NOMC</a>) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <a class="code" href="mpegvideo_8c.html#ae9282ae335e63c80e77877e4c43c7840">gray_frame</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">/* called after a frame has been decoded. */</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a2913f488b513c0d833e2df1ede334bee"> 1411</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a2913f488b513c0d833e2df1ede334bee">ff_mpv_frame_end</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;{</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <a class="code" href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a>();</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.reference)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;tf, INT_MAX, 0);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;}</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a7eed5412c88ad2d3ca68c8d39a580bf3"> 1419</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a7eed5412c88ad2d3ca68c8d39a580bf3">ff_print_debug_info</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_picture.html">Picture</a> *p, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *pict)</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;{</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <a class="code" href="mpegutils_8c.html#ad5717ea71f6e43cec54ae3149d08ddf6">ff_print_debug_info2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, pict, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table, p-&gt;<a class="code" href="struct_picture.html#af7521eb93ad61e47b0851739df76c215">mb_type</a>,</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                         p-&gt;<a class="code" href="struct_picture.html#aecacd672b460c045fbb8742ef0d6a22f">qscale_table</a>, p-&gt;<a class="code" href="struct_picture.html#a0b987ee22113dfd25816c3364fae5cb3">motion_val</a>, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;low_delay,</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                         <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;}</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a70433c7a313804c3995d2d949feee5ab"> 1426</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a70433c7a313804c3995d2d949feee5ab">ff_mpv_export_qp_table</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="struct_picture.html">Picture</a> *p, <span class="keywordtype">int</span> qp_type)</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;{</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="struct_a_v_buffer_ref.html">AVBufferRef</a> *<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a> = <a class="code" href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a>(p-&gt;<a class="code" href="struct_picture.html#a49bc4f4d3d61f57b4e90db4b09aafad7">qscale_table_buf</a>);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 2*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + 1;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>)</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a>(<a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;size &gt;= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride * ((<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>-&gt;height+15)/16));</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;size -= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>-&gt;data += <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__lavu__frame.html#gad08c37260c53f8587fe747dba285dd70">av_frame_set_qp_table</a>(<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, <a class="code" href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride, qp_type);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;}</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160; </div>
<div class="line"><a name="l01438"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a73b0da2013cce4557f70ab8a959fd55a"> 1438</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a73b0da2013cce4557f70ab8a959fd55a">hpel_motion_lowres</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                                     <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>,</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                                     <span class="keywordtype">int</span> field_based, <span class="keywordtype">int</span> field_select,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                                     <span class="keywordtype">int</span> src_x, <span class="keywordtype">int</span> src_y,</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                                     <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a>, <span class="keywordtype">int</span> <a class="code" href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a>, ptrdiff_t <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>,</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                                     <span class="keywordtype">int</span> h_edge_pos, <span class="keywordtype">int</span> v_edge_pos,</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                                     <span class="keywordtype">int</span> <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="h264chroma_8h.html#a17af88e7d49fbdf18c72797d3ca0a030">h264_chroma_mc_func</a> *pix_op,</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                                     <span class="keywordtype">int</span> motion_x, <span class="keywordtype">int</span> motion_y)</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;{</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> op_index = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>, 3);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> s_mask   = (2 &lt;&lt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>) - 1;</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordtype">int</span> emu = 0;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keywordtype">int</span> sx, sy;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160; </div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample) {</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;        motion_x /= 2;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        motion_y /= 2;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    sx = motion_x &amp; s_mask;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    sy = motion_y &amp; s_mask;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    src_x += motion_x &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    src_y += motion_y &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>   += src_y * <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a> + src_x;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160; </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)src_x &gt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>( h_edge_pos - (!!sx) - <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>,                 0) ||</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;        (unsigned)src_y &gt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>((v_edge_pos &gt;&gt; field_based) - (!!sy) - <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, 0)) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>,</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize,</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                 <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> + 1, (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> + 1) &lt;&lt; field_based,</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                                 src_x, src_y   &lt;&lt; field_based,</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                                 h_edge_pos, v_edge_pos);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        emu = 1;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    sx = (sx &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    sy = (sy &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;    <span class="keywordflow">if</span> (field_select)</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    pix_op[op_index](dest, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <a class="code" href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, sx, sy);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    <span class="keywordflow">return</span> emu;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;}</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">/* apply one mpeg motion vector to the three components */</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f"> 1485</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y,</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cb,</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cr,</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                                                <span class="keywordtype">int</span> field_based,</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;                                                <span class="keywordtype">int</span> bottom_field,</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                                                <span class="keywordtype">int</span> field_select,</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **ref_picture,</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                                                <a class="code" href="h264chroma_8h.html#a17af88e7d49fbdf18c72797d3ca0a030">h264_chroma_mc_func</a> *pix_op,</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                                                <span class="keywordtype">int</span> motion_x, <span class="keywordtype">int</span> motion_y,</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                                                <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <span class="keywordtype">int</span> mb_y)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;{</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ptr_y, *ptr_cb, *ptr_cr;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <span class="keywordtype">int</span> mx, my, src_x, src_y, uvsrc_x, uvsrc_y, sx, sy, uvsx, uvsy;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    ptrdiff_t uvlinesize, <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>;</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> op_index   = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>-1+<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift, 3);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> block_s    = 8&gt;&gt;<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> s_mask     = (2 &lt;&lt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>) - 1;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> h_edge_pos = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h_edge_pos &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> v_edge_pos = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;v_edge_pos &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[0] &lt;&lt; field_based;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    uvlinesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[1] &lt;&lt; field_based;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">// FIXME obviously not perfect but qpel will not work in lowres anyway</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        motion_x /= 2;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        motion_y /= 2;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keywordflow">if</span>(field_based){</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        motion_y += (bottom_field - field_select)*((1 &lt;&lt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>)-1);</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    }</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    sx = motion_x &amp; s_mask;</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    sy = motion_y &amp; s_mask;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    src_x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x * 2 * block_s + (motion_x &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    src_y = (mb_y * 2 * block_s &gt;&gt; field_based) + (motion_y &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277acbc818c9ff383e30d36451d333dd1a1a">FMT_H263</a>) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        uvsx    = ((motion_x &gt;&gt; 1) &amp; s_mask) | (sx &amp; 1);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        uvsy    = ((motion_y &gt;&gt; 1) &amp; s_mask) | (sy &amp; 1);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;        uvsrc_x = src_x &gt;&gt; 1;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        uvsrc_y = src_y &gt;&gt; 1;</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277a5bd89968f8e67aa8a34c703dcd1b5fd6">FMT_H261</a>) {</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;        <span class="comment">// even chroma mv&#39;s are full pel in H261</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        mx      = motion_x / 4;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        my      = motion_y / 4;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        uvsx    = (2 * mx) &amp; s_mask;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;        uvsy    = (2 * my) &amp; s_mask;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;        uvsrc_x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x * block_s + (mx &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>);</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;        uvsrc_y =    mb_y * block_s + (my &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift){</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            mx      = motion_x / 2;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            my      = motion_y / 2;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            uvsx    = mx &amp; s_mask;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            uvsy    = my &amp; s_mask;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            uvsrc_x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x * block_s                 + (mx &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;            uvsrc_y =   (mb_y * block_s &gt;&gt; field_based) + (my &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift){</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;            <span class="comment">//Chroma422</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                mx = motion_x / 2;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                uvsx = mx &amp; s_mask;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                uvsy = motion_y &amp; s_mask;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                uvsrc_y = src_y;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                uvsrc_x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x*block_s               + (mx &gt;&gt; (<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>+1));</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <span class="comment">//Chroma444</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                uvsx = motion_x &amp; s_mask;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                uvsy = motion_y &amp; s_mask;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                uvsrc_x = src_x;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                uvsrc_y = src_y;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    ptr_y  = ref_picture[0] + src_y   * <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>   + src_x;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    ptr_cb = ref_picture[1] + uvsrc_y * uvlinesize + uvsrc_x;</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    ptr_cr = ref_picture[2] + uvsrc_y * uvlinesize + uvsrc_x;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>) src_x &gt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>( h_edge_pos - (!!sx) - 2 * block_s,       0) || uvsrc_y&lt;0 ||</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;        (<span class="keywordtype">unsigned</span>) src_y &gt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>((v_edge_pos &gt;&gt; field_based) - (!!sy) - <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, 0)) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer, ptr_y,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                                 <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> &gt;&gt; field_based, <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> &gt;&gt; field_based,</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                                 17, 17 + field_based,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                                src_x, src_y &lt;&lt; field_based, h_edge_pos,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                                v_edge_pos);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;        ptr_y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;        <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ubuf = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer + 18 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *vbuf =ubuf + 10 * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;workaround_bugs &amp; <a class="code" href="avcodec_8h.html#ab9f3dcde72d13a402e95ce72529bff5f">FF_BUG_IEDGE</a>)</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                vbuf -= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(ubuf,  ptr_cb,</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                                     uvlinesize &gt;&gt; field_based, uvlinesize &gt;&gt; field_based,</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                                     9, 9 + field_based,</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                                    uvsrc_x, uvsrc_y &lt;&lt; field_based,</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                                    h_edge_pos &gt;&gt; 1, v_edge_pos &gt;&gt; 1);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(vbuf,  ptr_cr,</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                                     uvlinesize &gt;&gt; field_based,uvlinesize &gt;&gt; field_based,</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                                     9, 9 + field_based,</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                                    uvsrc_x, uvsrc_y &lt;&lt; field_based,</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                                    h_edge_pos &gt;&gt; 1, v_edge_pos &gt;&gt; 1);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            ptr_cb = ubuf;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            ptr_cr = vbuf;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    }</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="comment">// FIXME use this for field pix too instead of the obnoxious hack which changes picture.f-&gt;data</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">if</span> (bottom_field) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        dest_y  += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        dest_cb += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        dest_cr += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span> (field_select) {</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        ptr_y   += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize;</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        ptr_cb  += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        ptr_cr  += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    sx = (sx &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    sy = (sy &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    pix_op[<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> - 1](dest_y, ptr_y, <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, sx, sy);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="keywordtype">int</span> hc = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift ? (<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>+1-bottom_field)&gt;&gt;1 : <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        uvsx = (uvsx &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        uvsy = (uvsy &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="keywordflow">if</span> (hc) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            pix_op[op_index](dest_cb, ptr_cb, uvlinesize, hc, uvsx, uvsy);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            pix_op[op_index](dest_cr, ptr_cr, uvlinesize, hc, uvsx, uvsy);</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;        }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="comment">// FIXME h261 lowres loop filter</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;}</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160; </div>
<div class="line"><a name="l01624"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a82f62df9a1eaeacd284ff4edc3fca8ed"> 1624</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a82f62df9a1eaeacd284ff4edc3fca8ed">chroma_4mv_motion_lowres</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                                            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cb, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cr,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                                            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **ref_picture,</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                                            <a class="code" href="h264chroma_8h.html#a17af88e7d49fbdf18c72797d3ca0a030">h264_chroma_mc_func</a> * pix_op,</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                                            <span class="keywordtype">int</span> mx, <span class="keywordtype">int</span> my)</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;{</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>     = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> op_index   = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>, 3);</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> block_s    = 8 &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> s_mask     = (2 &lt;&lt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>) - 1;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> h_edge_pos = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h_edge_pos &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> v_edge_pos = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;v_edge_pos &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordtype">int</span> emu = 0, src_x, src_y, sx, sy;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    ptrdiff_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *ptr;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160; </div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample) {</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        mx /= 2;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        my /= 2;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    }</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">/* In case of 8X8, we construct a single chroma motion vector</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="comment">       with a special rounding */</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    mx = <a class="code" href="motion__est_8h.html#a7218b8d248303e9eee02438a35198ca7">ff_h263_round_chroma</a>(mx);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    my = <a class="code" href="motion__est_8h.html#a7218b8d248303e9eee02438a35198ca7">ff_h263_round_chroma</a>(my);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    sx = mx &amp; s_mask;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    sy = my &amp; s_mask;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    src_x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x * block_s + (mx &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1);</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    src_y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * block_s + (my &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a> + 1);</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = src_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize + src_x;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    ptr = ref_picture[1] + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>) src_x &gt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(h_edge_pos - (!!sx) - block_s, 0) ||</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        (unsigned) src_y &gt; <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(v_edge_pos - (!!sy) - block_s, 0)) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer, ptr,</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize,</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                                 9, 9,</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                                 src_x, src_y, h_edge_pos, v_edge_pos);</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        emu = 1;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    sx = (sx &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    sy = (sy &lt;&lt; 2) &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    pix_op[op_index](dest_cb, ptr, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize, block_s, sx, sy);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    ptr = ref_picture[2] + <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">if</span> (emu) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;vdsp.emulated_edge_mc(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer, ptr,</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;                                 <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize,</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                                 9, 9,</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                                 src_x, src_y, h_edge_pos, v_edge_pos);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.edge_emu_buffer;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    }</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    pix_op[op_index](dest_cr, ptr, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize, block_s, sx, sy);</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;}</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a96a080ffba15e20ab19105155ba233cb"> 1692</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a96a080ffba15e20ab19105155ba233cb">MPV_motion_lowres</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                                     <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cb,</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                                     <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_cr,</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                                     <span class="keywordtype">int</span> dir, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **ref_picture,</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                                     <a class="code" href="h264chroma_8h.html#a17af88e7d49fbdf18c72797d3ca0a030">h264_chroma_mc_func</a> *pix_op)</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;{</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordtype">int</span> mx, my;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordtype">int</span> mb_x, mb_y, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>  = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> block_s = 8 &gt;&gt;<a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    mb_x = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    mb_y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160; </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type) {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>:</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                           0, 0, 0,</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                           ref_picture, pix_op,</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                           <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][0][0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][0][1],</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                           2 * block_s, mb_y);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a>:</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        mx = 0;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        my = 0;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            <a class="code" href="mpegvideo_8c.html#a73b0da2013cce4557f70ab8a959fd55a">hpel_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y + ((<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp; 1) + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1) *</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize) * block_s,</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                               ref_picture[0], 0, 0,</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                               (2 * mb_x + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &amp; 1)) * block_s,</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                               (2 * mb_y + (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;&gt; 1)) * block_s,</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;width, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;height, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize,</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h_edge_pos &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;v_edge_pos &gt;&gt; <a class="code" href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a>,</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                               block_s, block_s, pix_op,</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1]);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            mx += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0];</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            my += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1];</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        }</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160; </div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>))</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            <a class="code" href="mpegvideo_8c.html#a82f62df9a1eaeacd284ff4edc3fca8ed">chroma_4mv_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_cb, dest_cr, ref_picture,</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                                     pix_op, mx, my);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#a97e4ba7c779c1ac58dbc886ecdde3ec9">MV_TYPE_FIELD</a>:</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="comment">/* top field */</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                               1, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[dir][0],</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                               ref_picture, pix_op,</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][0][0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][0][1],</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                               block_s, mb_y);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            <span class="comment">/* bottom field */</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                               1, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[dir][1],</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                               ref_picture, pix_op,</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][1][0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][1][1],</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                               block_s, mb_y);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure != <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[dir][0] + 1 &amp;&amp;</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;first_field) {</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                ref_picture = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;data;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                               0, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[dir][0],</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                               ref_picture, pix_op,</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][0][0],</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][0][1], 2 * block_s, mb_y &gt;&gt; 1);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            }</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#a30d4081917a3ab2df8308b1c146af70f">MV_TYPE_16X8</a>:</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> **ref2picture;</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; </div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure == <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 1 ||</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;first_field) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                ref2picture = ref_picture;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                ref2picture = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;data;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160; </div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                               0, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;field_select[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>],</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                               ref2picture, pix_op,</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                               <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0], <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1] +</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                               2 * block_s * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, block_s, mb_y &gt;&gt; 1);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            dest_y  +=  2 * block_s *  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;linesize;</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            dest_cb += (2 * block_s &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            dest_cr += (2 * block_s &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift) * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;uvlinesize;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        }</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#a50345c7ef92ba98dc927ef1355d22091">MV_TYPE_DMV</a>:</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; 2; j++) {</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                    <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                                       1, j, j ^ <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                                       ref_picture, pix_op,</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][2 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + j][0],</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][2 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + j][1],</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                                       block_s, mb_y);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                }</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                pix_op = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h264chroma.avg_h264_chroma_pixels_tab;</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            }</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                <a class="code" href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr,</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                                   0, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure != <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1,</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                                   ref_picture, pix_op,</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                                   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][2 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][0],<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][2 * <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1],</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                                   2 * block_s, mb_y &gt;&gt; 1);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                <span class="comment">// after put we make avg of the same block</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                pix_op = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h264chroma.avg_h264_chroma_pixels_tab;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                <span class="comment">// opposite parity is always in the same</span></div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                <span class="comment">// frame if this is second field</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;first_field) {</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                    ref_picture = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f-&gt;data;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;            }</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        }</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(0);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;}</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a7cbbfa5b602ae3e8dbfa73c87214c6cf"> 1826</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mpegvideo_8c.html#a7cbbfa5b602ae3e8dbfa73c87214c6cf">lowest_referenced_row</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> dir)</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;{</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordtype">int</span> my_max = INT_MIN, my_min = INT_MAX, qpel_shift = !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;quarter_sample;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordtype">int</span> my, off, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, mvs;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160; </div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure != <a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mcsel)</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <span class="keywordflow">goto</span> unhandled;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160; </div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_type) {</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a>:</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            mvs = 1;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#a30d4081917a3ab2df8308b1c146af70f">MV_TYPE_16X8</a>:</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;            mvs = 2;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a>:</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            mvs = 4;</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <span class="keywordflow">goto</span> unhandled;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; mvs; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        my = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv[dir][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][1];</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        my_max = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(my_max, my);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        my_min = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(my_min, my);</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    off = ((<a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(-my_min, my_max)&lt;&lt;qpel_shift) + 63) &gt;&gt; 6;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">return</span> av_clip(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y + off, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height - 1);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;unhandled:</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height-1;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;}</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="comment">/* put block[] to dest[] */</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df"> 1862</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                           int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest, <span class="keywordtype">int</span> line_size, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;{</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_intra(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, qscale);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest, line_size, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;}</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160; </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;<span class="comment">/* add block[] to dest[] */</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e"> 1870</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                           int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest, <span class="keywordtype">int</span> line_size)</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;{</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;= 0) {</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_add(dest, line_size, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    }</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964"> 1878</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>,</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                           int16_t *<a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest, <span class="keywordtype">int</span> line_size, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;{</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_last_index[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;= 0) {</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dct_unquantize_inter(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, qscale);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_add(dest, line_size, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>);</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    }</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;}</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#ace27aa33308c471a3e8fc18e0454fd83"> 1891</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ace27aa33308c471a3e8fc18e0454fd83">ff_clean_intra_table_entries</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;{</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    <span class="keywordtype">int</span> xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[0];</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160; </div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0][xy           ] =</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0][xy + 1       ] =</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0][xy     + <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a>] =</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[0][xy + 1 + <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a>] = 1024;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="comment">/* ac pred */</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[0][xy       ], 0, 32 * <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[0][xy + <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a>], 0, 32 * <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;msmpeg4_version&gt;=3) {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block[xy           ] =</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block[xy + 1       ] =</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block[xy     + <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a>] =</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;coded_block[xy + 1 + <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a>] = 0;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    }</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="comment">/* chroma */</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a> = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * <a class="code" href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[1][xy] =</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dc_val[2][xy] = 1024;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <span class="comment">/* ac pred */</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[1][xy], 0, 16 * <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    memset(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;ac_val[2][xy], 0, 16 * <span class="keyword">sizeof</span>(int16_t));</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table[xy]= 0;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;}</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160; </div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="comment">/* generic function called after a macroblock has been parsed by the</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="comment">   decoder or after it has been encoded by the encoder.</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="comment">   Important variables used:</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment">   s-&gt;mb_intra : true if intra macroblock</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">   s-&gt;mv_dir   : motion vector direction</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment">   s-&gt;mv_type  : motion vector type</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="comment">   s-&gt;mv       : motion vector</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="comment">   s-&gt;interlaced_dct : true if interlaced dct used (mpeg2)</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div>
<div class="line"><a name="l01932"></a><span class="lineno"><a class="line" href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f"> 1932</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f">mpv_reconstruct_mb_internal</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[12][64],</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                            <span class="keywordtype">int</span> lowres_flag, <span class="keywordtype">int</span> is_mpeg12)</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;{</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> mb_xy = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="keywordflow">if</span> (CONFIG_XVMC &amp;&amp;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel-&gt;decode_mb) {</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;hwaccel-&gt;decode_mb(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);<span class="comment">//xvmc uses pblocks</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    }</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;debug&amp;<a class="code" href="avcodec_8h.html#a8dd683f65cea8e917f0124fbf6346f8b">FF_DEBUG_DCT_COEFF</a>) {</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;       <span class="comment">/* print DCT coefficients */</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;       <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>,j;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;       <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;DCT coeffs of MB at %dx%d:\n&quot;</span>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y);</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;       <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;6; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++){</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;           <span class="keywordflow">for</span>(j=0; j&lt;64; j++){</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;               <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;%5d&quot;</span>,</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                      <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_permutation[j]]);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;           }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;           <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a>, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;       }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    }</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.qscale_table[mb_xy] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="comment">/* update DC predictors for P macroblocks */</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_intra) {</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;        <span class="keywordflow">if</span> (!is_mpeg12 &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_pred || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_aic)) {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table[mb_xy])</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                <a class="code" href="mpegvideo_8c.html#ace27aa33308c471a3e8fc18e0454fd83">ff_clean_intra_table_entries</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>);</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_dc[0] =</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_dc[1] =</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_dc[2] = 128 &lt;&lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_dc_precision;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_mpeg12 &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_pred || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h263_aic))</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbintra_table[mb_xy]=1;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#gac14e43b675c9a342f9c7275553d6f533">AV_CODEC_FLAG_PSNR</a>) || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_skip_threshold || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;frame_skip_factor ||</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding &amp;&amp; (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;intra_only || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>) &amp;&amp;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;          <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;mb_decision != <a class="code" href="avcodec_8h.html#a539f109f975c674a226309aa022bcc8b">FF_MB_DECISION_RD</a>)) { <span class="comment">// FIXME precalc</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *dest_y, *dest_cb, *dest_cr;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;        <span class="keywordtype">int</span> dct_linesize, dct_offset;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        <a class="code" href="hpeldsp_8h.html#a4bd3508ae177f49da1364e91b8d71e05">op_pixels_func</a> (*op_pix)[4];</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <a class="code" href="qpeldsp_8h.html#a96d13364b1fef88c3306a39b982cbfff">qpel_mc_func</a> (*op_qpix)[16];</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[0]; <span class="comment">//not s-&gt;linesize as this would be wrong for field pics</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> uvlinesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[1];</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> readable= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;draw_horiz_band || lowres_flag;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> block_size= lowres_flag ? 8&gt;&gt;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres : 8;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="comment">/* avoid copy if macroblock skipped in last frame too */</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <span class="comment">/* skip only during decoding as we might trash the buffers during encoding a bit */</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding){</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *mbskip_ptr = &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mbskip_table[mb_xy];</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped) {</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_skipped= 0;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                <a class="code" href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type!=<a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                *mbskip_ptr = 1;</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.reference) {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                *mbskip_ptr = 1;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;            } <span class="keywordflow">else</span>{</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                *mbskip_ptr = 0; <span class="comment">/* not skipped */</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            }</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        }</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        dct_linesize = <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> &lt;&lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        dct_offset   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct ? <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> : <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> * block_size;</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="keywordflow">if</span>(readable){</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            dest_y=  <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[0];</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            dest_cb= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[1];</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            dest_cr= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[2];</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;            dest_y = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.b_scratchpad;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;            dest_cb= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.b_scratchpad+16*<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            dest_cr= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;sc.b_scratchpad+32*<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_intra) {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <span class="comment">/* motion handling */</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;            <span class="comment">/* decoding or more than one mb_type (MC was already done otherwise) */</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;            <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding){</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                <span class="keywordflow">if</span>(HAVE_THREADS &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;active_thread_type&amp;<a class="code" href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a>) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>) {</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;                        <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;tf,</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;                                                 <a class="code" href="mpegvideo_8c.html#a7cbbfa5b602ae3e8dbfa73c87214c6cf">lowest_referenced_row</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 0),</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;                                                 0);</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;                    }</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                        <a class="code" href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr-&gt;tf,</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                                                 <a class="code" href="mpegvideo_8c.html#a7cbbfa5b602ae3e8dbfa73c87214c6cf">lowest_referenced_row</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, 1),</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                                                 0);</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                    }</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                }</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                <span class="keywordflow">if</span>(lowres_flag){</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;                    <a class="code" href="h264chroma_8h.html#a17af88e7d49fbdf18c72797d3ca0a030">h264_chroma_mc_func</a> *op_pix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h264chroma.put_h264_chroma_pixels_tab;</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>) {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a96a080ffba15e20ab19105155ba233cb">MPV_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f-&gt;data, op_pix);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                        op_pix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;h264chroma.avg_h264_chroma_pixels_tab;</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                    }</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>) {</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a96a080ffba15e20ab19105155ba233cb">MPV_motion_lowres</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f-&gt;data, op_pix);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                    }</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                    op_qpix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.qpel_put;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;                    <span class="keywordflow">if</span> ((!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;no_rounding) || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type==<a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>){</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                        op_pix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                        op_pix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_no_rnd_pixels_tab;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                    }</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a>) {</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                        <a class="code" href="mpegvideo_8h.html#a5ff9dc762a72ad06bd26b9b7079565c4">ff_mpv_motion</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr, 0, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture.f-&gt;data, op_pix, op_qpix);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;                        op_pix = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.avg_pixels_tab;</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                        op_qpix= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;me.qpel_avg;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                    }</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mv_dir &amp; <a class="code" href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a>) {</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                        <a class="code" href="mpegvideo_8h.html#a5ff9dc762a72ad06bd26b9b7079565c4">ff_mpv_motion</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, dest_y, dest_cb, dest_cr, 1, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture.f-&gt;data, op_pix, op_qpix);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                    }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                }</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;            }</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160; </div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            <span class="comment">/* skip dequant / idct if we are really late ;) */</span></div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_idct){</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;                <span class="keywordflow">if</span>(  (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_idct &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8">AVDISCARD_NONREF</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type == <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a>)</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;                   ||(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_idct &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a>)</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;                   || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;skip_idct &gt;= <a class="code" href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a>)</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;                    <span class="keywordflow">goto</span> skip_idct;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;            }</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;            <span class="comment">/* add dct residue */</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding || !(   <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;msmpeg4_version || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id==<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id==<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                                || (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id==<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a> &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mpeg_quant))){</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;                <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0], 0, dest_y                          , dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[1], 1, dest_y              + block_size, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;                <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[2], 2, dest_y + dct_offset             , dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;                <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[3], 3, dest_y + dct_offset + block_size, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;                <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift){</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4], 4, dest_cb, uvlinesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5], 5, dest_cr, uvlinesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;                        dct_linesize &gt;&gt;= 1;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;                        dct_offset &gt;&gt;=1;</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4], 4, dest_cb,              dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5], 5, dest_cr,              dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6], 6, dest_cb + dct_offset, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[7], 7, dest_cr + dct_offset, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;                    }</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;                }</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(is_mpeg12 || (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id != <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5362e286d0d453bee3940514f3f29641">AV_CODEC_ID_WMV2</a>)){</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;                <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0], 0, dest_y                          , dct_linesize);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;                <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[1], 1, dest_y              + block_size, dct_linesize);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;                <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[2], 2, dest_y + dct_offset             , dct_linesize);</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;                <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[3], 3, dest_y + dct_offset + block_size, dct_linesize);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift){<span class="comment">//Chroma420</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4], 4, dest_cb, uvlinesize);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5], 5, dest_cr, uvlinesize);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                        <span class="comment">//chroma422</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                        dct_linesize = uvlinesize &lt;&lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                        dct_offset   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct ? uvlinesize : uvlinesize*block_size;</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4], 4, dest_cb, dct_linesize);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5], 5, dest_cr, dct_linesize);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6], 6, dest_cb+dct_offset, dct_linesize);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[7], 7, dest_cr+dct_offset, dct_linesize);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                        <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift){<span class="comment">//Chroma444</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                            <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[8], 8, dest_cb+block_size, dct_linesize);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                            <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[9], 9, dest_cr+block_size, dct_linesize);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                            <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[10], 10, dest_cb+block_size+dct_offset, dct_linesize);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                            <a class="code" href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[11], 11, dest_cr+block_size+dct_offset, dct_linesize);</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;                        }</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;                    }</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;                }<span class="comment">//fi gray</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            }</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CONFIG_WMV2_DECODER || CONFIG_WMV2_ENCODER) {</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;                <a class="code" href="wmv2_8c.html#ac638ed531eff019b2481e3ae607110c0">ff_wmv2_add_mb</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, dest_y, dest_cb, dest_cr);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            <span class="comment">/* Only MPEG-4 Simple Studio Profile is supported in &gt; 8-bit mode.</span></div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<span class="comment">               TODO: Integrate 10-bit properly into mpegvideo.c so that ER works properly */</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;bits_per_raw_sample &gt; 8){</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">int</span> act_block_size = block_size * 2;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_direction == 0) {</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y,                           dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[0]);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y              + act_block_size, dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[1]);</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y + dct_offset,              dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[2]);</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y + dct_offset + act_block_size, dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[3]);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160; </div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                    dct_linesize = uvlinesize &lt;&lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct;</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                    dct_offset   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct ? uvlinesize : uvlinesize*block_size;</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb,              dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[4]);</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr,              dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[5]);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb + dct_offset, dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[6]);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr + dct_offset, dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[7]);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                    <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift){<span class="comment">//Chroma444</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb + act_block_size,              dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[8]);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr + act_block_size,              dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[9]);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb + act_block_size + dct_offset, dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[10]);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr + act_block_size + dct_offset, dct_linesize, (int16_t*)(*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block32)[11]);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                    }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_direction == 1) {</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                    uint16_t *dest_pcm[3] = {(uint16_t*)dest_y, (uint16_t*)dest_cb, (uint16_t*)dest_cr};</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[3] = {dct_linesize, uvlinesize, uvlinesize};</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                        <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                        <span class="keywordtype">int</span> vsub = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift : 0;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="vf__median_8c.html#ac1b69496bb6a841ecafe6876734708c3">hsub</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift : 0;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                        <span class="keywordflow">for</span>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> = 0; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> &lt; (16 &gt;&gt; vsub); <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>++){</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;                            <span class="keywordflow">for</span>(<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> = 0; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> &lt; (16 &gt;&gt; <a class="code" href="vf__median_8c.html#ac1b69496bb6a841ecafe6876734708c3">hsub</a>); <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>++)</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                                dest_pcm[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>] = (*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_macroblock)[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][idx++];</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                            dest_pcm[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] / 2;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;                        }</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;                    }</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_direction == -1) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                    uint16_t *dest_pcm[3] = {(uint16_t*)dest_y, (uint16_t*)dest_cb, (uint16_t*)dest_cr};</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                    <span class="keywordtype">int</span> <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[3] = {dct_linesize, uvlinesize, uvlinesize};</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                        <span class="keywordtype">int</span> idx = 0;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                        <span class="keywordtype">int</span> vsub = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift : 0;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;                        <span class="keywordtype">int</span> <a class="code" href="vf__median_8c.html#ac1b69496bb6a841ecafe6876734708c3">hsub</a> = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift : 0;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                        dest_pcm[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] += (<a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] / 2) * ((16 &gt;&gt; vsub) - 1);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                        <span class="keywordflow">for</span>(<a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> = (16 &gt;&gt; vsub)-1; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a> &gt;= 1; <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>--){</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                            <span class="keywordflow">for</span>(<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> = (16 &gt;&gt; <a class="code" href="vf__median_8c.html#ac1b69496bb6a841ecafe6876734708c3">hsub</a>)-1; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a> &gt;= 1; <a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>--)</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                                dest_pcm[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a>] = (*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dpcm_macroblock)[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][idx++];</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                            dest_pcm[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] -= <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] / 2;</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                        }</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                    }</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                }</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            <span class="comment">/* dct only in intra block */</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;encoding || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id==<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a> || <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;codec_id==<a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a>)){</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0], 0, dest_y                          , dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[1], 1, dest_y              + block_size, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[2], 2, dest_y + dct_offset             , dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;                <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[3], 3, dest_y + dct_offset + block_size, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift){</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4], 4, dest_cb, uvlinesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5], 5, dest_cr, uvlinesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                        dct_offset &gt;&gt;=1;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                        dct_linesize &gt;&gt;=1;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4], 4, dest_cb,              dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5], 5, dest_cr,              dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6], 6, dest_cb + dct_offset, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                        <a class="code" href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[7], 7, dest_cr + dct_offset, dct_linesize, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                    }</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                }</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y,                           dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[0]);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y              + block_size, dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[1]);</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y + dct_offset,              dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[2]);</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_y + dct_offset + block_size, dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[3]);</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160; </div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift){</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb, uvlinesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4]);</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr, uvlinesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5]);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                    }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;                        dct_linesize = uvlinesize &lt;&lt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                        dct_offset   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;interlaced_dct ? uvlinesize : uvlinesize*block_size;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb,              dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[4]);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr,              dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[5]);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb + dct_offset, dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[6]);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;                        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr + dct_offset, dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[7]);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;                        <span class="keywordflow">if</span>(!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift){<span class="comment">//Chroma444</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb + block_size,              dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[8]);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr + block_size,              dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[9]);</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cb + block_size + dct_offset, dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[10]);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;                            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;idsp.idct_put(dest_cr + block_size + dct_offset, dct_linesize, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[11]);</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                        }</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                    }</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;                }<span class="comment">//gray</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            }</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;        }</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;skip_idct:</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        <span class="keywordflow">if</span>(!readable){</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab[0][0](<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[0], dest_y ,   <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>,16);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;            <span class="keywordflow">if</span> (!CONFIG_GRAY || !(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;flags &amp; <a class="code" href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a>)) {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift][0](<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[1], dest_cb, uvlinesize,16 &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;hdsp.put_pixels_tab[<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift][0](<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[2], dest_cr, uvlinesize,16 &gt;&gt; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;            }</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        }</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    }</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;}</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160; </div>
<div class="line"><a name="l02235"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a8f3e2740f33856036d181a6e5d2128a3"> 2235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a8f3e2740f33856036d181a6e5d2128a3">ff_mpv_reconstruct_mb</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, int16_t <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>[12][64])</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;{</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="preprocessor">#if !CONFIG_SMALL</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;out_format == <a class="code" href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277a7c5d2ba13864b4679f30c4874acd753a">FMT_MPEG1</a>) {</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres) <a class="code" href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f">mpv_reconstruct_mb_internal</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, 1, 1);</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordflow">else</span>                 <a class="code" href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f">mpv_reconstruct_mb_internal</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, 0, 1);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres) <a class="code" href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f">mpv_reconstruct_mb_internal</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, 1, 0);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keywordflow">else</span>                  <a class="code" href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f">mpv_reconstruct_mb_internal</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <a class="code" href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a>, 0, 0);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;}</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160; </div>
<div class="line"><a name="l02247"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#ac706118f0a1bfc7f9ce49d2ec9fe6325"> 2247</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ac706118f0a1bfc7f9ce49d2ec9fe6325">ff_mpeg_draw_horiz_band</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>)</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;{</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <a class="code" href="mpegutils_8c.html#a17c69f0c44a45e344a6eccd9d6d4f376">ff_draw_horiz_band</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;f,</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr ? <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr-&gt;f : <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, y, <a class="code" href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a>, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure,</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                       <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;first_field, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;low_delay);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;}</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#aacc157a9c60b68759feb756119f62255"> 2254</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#aacc157a9c60b68759feb756119f62255">ff_init_block_index</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>){ <span class="comment">//FIXME maybe rename</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a>   = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[0]; <span class="comment">//not s-&gt;linesize as this would be wrong for field pics</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> uvlinesize = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;linesize[1];</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> width_of_mb = (4 + (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;bits_per_raw_sample &gt; 8)) - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> height_of_mb = 4 - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;lowres;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[0]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride*(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y*2    ) - 2 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x*2;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[1]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride*(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y*2    ) - 1 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x*2;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[2]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride*(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y*2 + 1) - 2 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x*2;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[3]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride*(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y*2 + 1) - 1 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x*2;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[4]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride*(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y + 1)                + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height*2 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x - 1;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;block_index[5]= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_stride*(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height + 2) + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;b8_stride*<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_height*2 + <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x - 1;</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="comment">//block_index is not used by mpeg2, so it is not affected by chroma_format</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[0] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;data[0] + (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x - 1<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>) &lt;&lt;  width_of_mb);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[1] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;data[1] + (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x - 1<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>) &lt;&lt; (width_of_mb - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift));</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[2] = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture.f-&gt;data[2] + (<a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x - 1<a class="code" href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a>) &lt;&lt; (width_of_mb - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_x_shift));</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160; </div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="keywordflow">if</span>(!(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type==<a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx-&gt;draw_horiz_band &amp;&amp; <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure==<a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>))</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure==<a class="code" href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a>){</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[0] += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y *   <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> &lt;&lt; height_of_mb;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[1] += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * uvlinesize &lt;&lt; (height_of_mb - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[2] += <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y * uvlinesize &lt;&lt; (height_of_mb - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[0] += (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y&gt;&gt;1) *   <a class="code" href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">linesize</a> &lt;&lt; height_of_mb;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[1] += (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y&gt;&gt;1) * uvlinesize &lt;&lt; (height_of_mb - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;dest[2] += (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y&gt;&gt;1) * uvlinesize &lt;&lt; (height_of_mb - <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_y_shift);</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;            <a class="code" href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a>((<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y&amp;1) == (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture_structure == <a class="code" href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a>));</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    }</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;}</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#a6b2170ea66fd50185869b62ea76329f8"> 2287</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#a6b2170ea66fd50185869b62ea76329f8">ff_mpeg_flush</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx){</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a> || !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture)</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160; </div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;picture[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture_ptr = <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture_ptr = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160; </div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture);</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;last_picture);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <a class="code" href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a>(<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;avctx, &amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;next_picture);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_x= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y= 0;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;closed_gop= 0;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.state= -1;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.frame_start_found= 0;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.overread= 0;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.overread_index= 0;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.index= 0;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;parse_context.last_index= 0;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;bitstream_buffer_size=0;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pp_time=0;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;}</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#aa156d48c70fc414dc7eddfc41e337165"> 2318</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#aa156d48c70fc414dc7eddfc41e337165">ff_set_qscale</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> * <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>, <span class="keywordtype">int</span> qscale)</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;{</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">if</span> (qscale &lt; 1)</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;        qscale = 1;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qscale &gt; 31)</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;        qscale = 31;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;qscale = qscale;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale_table[qscale];</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;y_dc_scale_table[ qscale ];</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale= <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;c_dc_scale_table[ <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;chroma_qscale ];</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;}</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"><a class="line" href="mpegvideo_8h.html#ae3870ad0b50a822baedc638178be0d4b"> 2332</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="mpegvideo_8c.html#ae3870ad0b50a822baedc638178be0d4b">ff_mpv_report_decode_progress</a>(<a class="code" href="struct_mpeg_enc_context.html">MpegEncContext</a> *<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>)</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;{</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;pict_type != <a class="code" href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a> &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;partitioned_frame &amp;&amp; !<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;er.error_occurred)</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;        <a class="code" href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a>(&amp;<a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;current_picture_ptr-&gt;tf, <a class="code" href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a>-&gt;mb_y, 0);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alibavutil_2internal_8h_html_af37a8d3861ada057fc7aa88d2f1a97d7"><div class="ttname"><a href="libavutil_2internal_8h.html#af37a8d3861ada057fc7aa88d2f1a97d7">FF_ALLOCZ_TYPED_ARRAY</a></div><div class="ttdeci">#define FF_ALLOCZ_TYPED_ARRAY(p, nelem)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00141">internal.h:141</a></div></div>
<div class="ttc" id="amotion__est_8h_html_a7218b8d248303e9eee02438a35198ca7"><div class="ttname"><a href="motion__est_8h.html#a7218b8d248303e9eee02438a35198ca7">ff_h263_round_chroma</a></div><div class="ttdeci">static int ff_h263_round_chroma(int x)</div><div class="ttdef"><b>Definition:</b> <a href="motion__est_8h_source.html#l00101">motion_est.h:101</a></div></div>
<div class="ttc" id="ampegutils_8h_html_afe9c6afe4f63cea62651c83a65644ba3"><div class="ttname"><a href="mpegutils_8h.html#afe9c6afe4f63cea62651c83a65644ba3">PICT_FRAME</a></div><div class="ttdeci">#define PICT_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00039">mpegutils.h:39</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a41d45225b8f3b9b907a5e8ea9347baa8"><div class="ttname"><a href="mpegvideo_8c.html#a41d45225b8f3b9b907a5e8ea9347baa8">ff_mpv_common_init</a></div><div class="ttdeci">av_cold int ff_mpv_common_init(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00884">mpegvideo.c:884</a></div></div>
<div class="ttc" id="amace_8c_html_a08f66a6870d87afcd5dc1b60d1019692"><div class="ttname"><a href="mace_8c.html#a08f66a6870d87afcd5dc1b60d1019692">stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="mace_8c_source.html#l00144">mace.c:144</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_ae17ddc0eaf08f5eea9e1d13399f1cb08"><div class="ttname"><a href="mpegvideo_8h.html#ae17ddc0eaf08f5eea9e1d13399f1cb08">MV_TYPE_16X16</a></div><div class="ttdeci">#define MV_TYPE_16X16</div><div class="ttdoc">1 vector for the whole mb</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00266">mpegvideo.h:266</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="aidctdsp_8c_html_a252b519d9db4b15f152d0b3bfbebb128"><div class="ttname"><a href="idctdsp_8c.html#a252b519d9db4b15f152d0b3bfbebb128">ff_init_scantable</a></div><div class="ttdeci">av_cold void ff_init_scantable(uint8_t *permutation, ScanTable *st, const uint8_t *src_scantable)</div><div class="ttdef"><b>Definition:</b> <a href="idctdsp_8c_source.html#l00029">idctdsp.c:29</a></div></div>
<div class="ttc" id="asvq3_8c_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="svq3_8c.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="svq3_8c_source.html#l00205">svq3.c:205</a></div></div>
<div class="ttc" id="ampegpicture_8c_html_ad8e534cfdf220358e0954766f636e457"><div class="ttname"><a href="mpegpicture_8c.html#ad8e534cfdf220358e0954766f636e457">ff_mpeg_framesize_alloc</a></div><div class="ttdeci">int ff_mpeg_framesize_alloc(AVCodecContext *avctx, MotionEstContext *me, ScratchpadContext *sc, int linesize)</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8c_source.html#l00058">mpegpicture.c:58</a></div></div>
<div class="ttc" id="ablockdsp_8h_html"><div class="ttname"><a href="blockdsp_8h.html">blockdsp.h</a></div></div>
<div class="ttc" id="ampegutils_8h_html_aeb712c6c6c0a8af0dfd79f451ecb9277a7c5d2ba13864b4679f30c4874acd753a"><div class="ttname"><a href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277a7c5d2ba13864b4679f30c4874acd753a">FMT_MPEG1</a></div><div class="ttdeci">@ FMT_MPEG1</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00124">mpegutils.h:124</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="ampegvideo_8c_html_a0485d910a98b5a320220bc0be83a456f"><div class="ttname"><a href="mpegvideo_8c.html#a0485d910a98b5a320220bc0be83a456f">mpeg_motion_lowres</a></div><div class="ttdeci">static av_always_inline void mpeg_motion_lowres(MpegEncContext *s, uint8_t *dest_y, uint8_t *dest_cb, uint8_t *dest_cr, int field_based, int bottom_field, int field_select, uint8_t **ref_picture, h264_chroma_mc_func *pix_op, int motion_x, int motion_y, int h, int mb_y)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01485">mpegvideo.c:1485</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0449afd803eb107bd4dbc8b5ea22e363"><div class="ttname"><a href="struct_a_v_codec_context.html#a0449afd803eb107bd4dbc8b5ea22e363">AVCodecContext::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ac060a67dcb28ff015bbd669051b1a4b5"><div class="ttname"><a href="mpegvideo_8c.html#ac060a67dcb28ff015bbd669051b1a4b5">backup_duplicate_context</a></div><div class="ttdeci">static void backup_duplicate_context(MpegEncContext *bak, MpegEncContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00436">mpegvideo.c:436</a></div></div>
<div class="ttc" id="astruct_picture_html_a5fbe85ca795cfaab84a31e0fb0cc57d4"><div class="ttname"><a href="struct_picture.html#a5fbe85ca795cfaab84a31e0fb0cc57d4">Picture::reference</a></div><div class="ttdeci">int reference</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00087">mpegpicture.h:87</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a035beb11265e5c030b65cd90541daa6c"><div class="ttname"><a href="mpegvideo_8c.html#a035beb11265e5c030b65cd90541daa6c">ff_mpv_common_defaults</a></div><div class="ttdeci">void ff_mpv_common_defaults(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00644">mpegvideo.c:644</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a73b0da2013cce4557f70ab8a959fd55a"><div class="ttname"><a href="mpegvideo_8c.html#a73b0da2013cce4557f70ab8a959fd55a">hpel_motion_lowres</a></div><div class="ttdeci">static int hpel_motion_lowres(MpegEncContext *s, uint8_t *dest, uint8_t *src, int field_based, int field_select, int src_x, int src_y, int width, int height, ptrdiff_t stride, int h_edge_pos, int v_edge_pos, int w, int h, h264_chroma_mc_func *pix_op, int motion_x, int motion_y)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01438">mpegvideo.c:1438</a></div></div>
<div class="ttc" id="acommon_8h_html_a09a0bb7d8fcfac416de7a5fe7fd8b0f1"><div class="ttname"><a href="common_8h.html#a09a0bb7d8fcfac416de7a5fe7fd8b0f1">FFSWAP</a></div><div class="ttdeci">#define FFSWAP(type, a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00099">common.h:99</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ae4471e4e8fa85c02e2b6eaee22ce4f30"><div class="ttname"><a href="libavcodec_2internal_8h.html#ae4471e4e8fa85c02e2b6eaee22ce4f30">ff_thread_can_start_frame</a></div><div class="ttdeci">int ff_thread_can_start_frame(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00899">pthread_frame.c:899</a></div></div>
<div class="ttc" id="alibavutil_2thread_8h_html"><div class="ttname"><a href="libavutil_2thread_8h.html">thread.h</a></div></div>
<div class="ttc" id="ampegvideodata_8c_html_a96c82a47593f168e1c2e367d96dcad8e"><div class="ttname"><a href="mpegvideodata_8c.html#a96c82a47593f168e1c2e367d96dcad8e">ff_mpeg1_dc_scale_table</a></div><div class="ttdeci">const uint8_t ff_mpeg1_dc_scale_table[128]</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideodata_8c_source.html#l00033">mpegvideodata.c:33</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a4649a6454a0f784794b89afdc44da669"><div class="ttname"><a href="struct_a_v_codec_context.html#a4649a6454a0f784794b89afdc44da669">AVCodecContext::workaround_bugs</a></div><div class="ttdeci">int workaround_bugs</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01560">avcodec.h:1560</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a30d4081917a3ab2df8308b1c146af70f"><div class="ttname"><a href="mpegvideo_8h.html#a30d4081917a3ab2df8308b1c146af70f">MV_TYPE_16X8</a></div><div class="ttdeci">#define MV_TYPE_16X8</div><div class="ttdoc">2 vectors, one per 16x8 block</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00268">mpegvideo.h:268</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ab2ebb76836ef4cd9822b5077c17b33d0"><div class="ttname"><a href="struct_a_v_codec_context.html#ab2ebb76836ef4cd9822b5077c17b33d0">AVCodecContext::coded_height</a></div><div class="ttdeci">int coded_height</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a7cbbfa5b602ae3e8dbfa73c87214c6cf"><div class="ttname"><a href="mpegvideo_8c.html#a7cbbfa5b602ae3e8dbfa73c87214c6cf">lowest_referenced_row</a></div><div class="ttdeci">static int lowest_referenced_row(MpegEncContext *s, int dir)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01826">mpegvideo.c:1826</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead95dfdf68b462db508b45fb693a4c09e">AV_CODEC_ID_MPEG4</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG4</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00061">codec_id.h:61</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_ga979d73f3228814aee56aeca0636e37cc"><div class="ttname"><a href="group__lavu__frame.html#ga979d73f3228814aee56aeca0636e37cc">av_frame_free</a></div><div class="ttdeci">void av_frame_free(AVFrame **frame)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00203">frame.c:203</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ad4714ae1c93972fd9c8ff2a303fcd051"><div class="ttname"><a href="libavcodec_2internal_8h.html#ad4714ae1c93972fd9c8ff2a303fcd051">avpriv_toupper4</a></div><div class="ttdeci">unsigned int avpriv_toupper4(unsigned int x)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2utils_8c_source.html#l01868">utils.c:1868</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ad68ee62dc6558df48c98f07b39b45c8f"><div class="ttname"><a href="mpegvideo_8c.html#ad68ee62dc6558df48c98f07b39b45c8f">ff_mpv_common_frame_size_change</a></div><div class="ttdeci">int ff_mpv_common_frame_size_change(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01035">mpegvideo.c:1035</a></div></div>
<div class="ttc" id="allviddspenc_8c_html_aba9ed0487b0aa23eba534648df8384c0"><div class="ttname"><a href="llviddspenc_8c.html#aba9ed0487b0aa23eba534648df8384c0">w</a></div><div class="ttdeci">uint8_t w</div><div class="ttdef"><b>Definition:</b> <a href="llviddspenc_8c_source.html#l00038">llviddspenc.c:38</a></div></div>
<div class="ttc" id="ampegpicture_8c_html_ad4ab6ca2880b242f785360048d691ddb"><div class="ttname"><a href="mpegpicture_8c.html#ad4ab6ca2880b242f785360048d691ddb">ff_free_picture_tables</a></div><div class="ttdeci">void ff_free_picture_tables(Picture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8c_source.html#l00452">mpegpicture.c:452</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_ab2701a30de940bb70eba04c945931f6e"><div class="ttname"><a href="tests_2movenc_8c.html#ab2701a30de940bb70eba04c945931f6e">last_picture</a></div><div class="ttdeci">enum AVPictureType last_picture</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00067">movenc.c:68</a></div></div>
<div class="ttc" id="ampegvideodata_8c_html_a45e984995c493b41540b00704666b301"><div class="ttname"><a href="mpegvideodata_8c.html#a45e984995c493b41540b00704666b301">ff_mpeg2_non_linear_qscale</a></div><div class="ttdeci">const uint8_t ff_mpeg2_non_linear_qscale[32]</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideodata_8c_source.html#l00026">mpegvideodata.c:26</a></div></div>
<div class="ttc" id="astruct_picture_html_af7521eb93ad61e47b0851739df76c215"><div class="ttname"><a href="struct_picture.html#af7521eb93ad61e47b0851739df76c215">Picture::mb_type</a></div><div class="ttdeci">uint32_t * mb_type</div><div class="ttdoc">types and macros are defined in mpegutils.h</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00056">mpegpicture.h:56</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a5ba00de78c6be31f8548f7df05c022f6"><div class="ttname"><a href="mpegvideo_8c.html#a5ba00de78c6be31f8548f7df05c022f6">REBASE_PICTURE</a></div><div class="ttdeci">#define REBASE_PICTURE(pic, new_ctx, old_ctx)</div></div>
<div class="ttc" id="ampegvideo_8c_html_ace27aa33308c471a3e8fc18e0454fd83"><div class="ttname"><a href="mpegvideo_8c.html#ace27aa33308c471a3e8fc18e0454fd83">ff_clean_intra_table_entries</a></div><div class="ttdeci">void ff_clean_intra_table_entries(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01891">mpegvideo.c:1891</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ad823c61c62f9f3563c62ab33feec902d"><div class="ttname"><a href="mpegutils_8h.html#ad823c61c62f9f3563c62ab33feec902d">PICT_BOTTOM_FIELD</a></div><div class="ttdeci">#define PICT_BOTTOM_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00038">mpegutils.h:38</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_accc09a72ab27144d837f02c9577f7006"><div class="ttname"><a href="mpegvideo_8c.html#accc09a72ab27144d837f02c9577f7006">init_duplicate_context</a></div><div class="ttdeci">static int init_duplicate_context(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00357">mpegvideo.c:357</a></div></div>
<div class="ttc" id="ampegvideo__arm_8c_html_acbf901772cb73aa63eb1f9b6f2dfae6a"><div class="ttname"><a href="mpegvideo__arm_8c.html#acbf901772cb73aa63eb1f9b6f2dfae6a">ff_mpv_common_init_arm</a></div><div class="ttdeci">av_cold void ff_mpv_common_init_arm(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__arm_8c_source.html#l00043">mpegvideo_arm.c:43</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_aacc157a9c60b68759feb756119f62255"><div class="ttname"><a href="mpegvideo_8c.html#aacc157a9c60b68759feb756119f62255">ff_init_block_index</a></div><div class="ttdeci">void ff_init_block_index(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l02254">mpegvideo.c:2254</a></div></div>
<div class="ttc" id="ampegvideo_8h_html"><div class="ttname"><a href="mpegvideo_8h.html">mpegvideo.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gac14e43b675c9a342f9c7275553d6f533"><div class="ttname"><a href="group__lavc__core.html#gac14e43b675c9a342f9c7275553d6f533">AV_CODEC_FLAG_PSNR</a></div><div class="ttdeci">#define AV_CODEC_FLAG_PSNR</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00312">avcodec.h:312</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga936c6ae1b3d24d7504f0a9aea1a24c74"><div class="ttname"><a href="group__lavc__core.html#ga936c6ae1b3d24d7504f0a9aea1a24c74">AV_CODEC_FLAG_INTERLACED_ME</a></div><div class="ttdeci">#define AV_CODEC_FLAG_INTERLACED_ME</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00342">avcodec.h:342</a></div></div>
<div class="ttc" id="ampegutils_8h_html"><div class="ttname"><a href="mpegutils_8h.html">mpegutils.h</a></div></div>
<div class="ttc" id="amultithreading_8txt_html_ab66ca23680e500f1f51b1608e8a5419a"><div class="ttname"><a href="multithreading_8txt.html#ab66ca23680e500f1f51b1608e8a5419a">ff_thread_await_progress</a></div><div class="ttdeci">the pkt_dts and pkt_pts fields in AVFrame will work as usual Restrictions on codec whose streams don t reset across will not work because their bitstreams cannot be decoded in parallel *The contents of buffers must not be read before ff_thread_await_progress() has been called on them. reget_buffer() and buffer age optimizations no longer work. *The contents of buffers must not be written to after ff_thread_report_progress() has been called on them. This includes draw_edges(). Porting codecs to frame threading</div></div>
<div class="ttc" id="astruct_a_v_frame_html_a02ca9bb7f500d3d850f8736f3cb29c6c"><div class="ttname"><a href="struct_a_v_frame.html#a02ca9bb7f500d3d850f8736f3cb29c6c">AVFrame::coded_picture_number</a></div><div class="ttdeci">int coded_picture_number</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00422">frame.h:422</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_aa22d42184902da779f99e2f2c06a9de2"><div class="ttname"><a href="mpegvideo_8c.html#aa22d42184902da779f99e2f2c06a9de2">free_duplicate_context</a></div><div class="ttdeci">static void free_duplicate_context(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00414">mpegvideo.c:414</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a3935dbba78d09ce118d42be836777da5"><div class="ttname"><a href="mpegvideo_8h.html#a3935dbba78d09ce118d42be836777da5">MV_DIR_BACKWARD</a></div><div class="ttdeci">#define MV_DIR_BACKWARD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00263">mpegvideo.h:263</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a50345c7ef92ba98dc927ef1355d22091"><div class="ttname"><a href="mpegvideo_8h.html#a50345c7ef92ba98dc927ef1355d22091">MV_TYPE_DMV</a></div><div class="ttdeci">#define MV_TYPE_DMV</div><div class="ttdoc">2 vectors, special mpeg2 Dual Prime Vectors</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00270">mpegvideo.h:270</a></div></div>
<div class="ttc" id="avf__median_8c_html_ac1b69496bb6a841ecafe6876734708c3"><div class="ttname"><a href="vf__median_8c.html#ac1b69496bb6a841ecafe6876734708c3">hsub</a></div><div class="ttdeci">static void hsub(htype *dst, const htype *src, int bins)</div><div class="ttdef"><b>Definition:</b> <a href="vf__median_8c_source.html#l00075">vf_median.c:75</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_af77b3ec0b3cf73867e05eca8fe75921f"><div class="ttname"><a href="mpegvideo_8c.html#af77b3ec0b3cf73867e05eca8fe75921f">mpv_reconstruct_mb_internal</a></div><div class="ttdeci">static av_always_inline void mpv_reconstruct_mb_internal(MpegEncContext *s, int16_t block[12][64], int lowres_flag, int is_mpeg12)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01932">mpegvideo.c:1932</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga4ad5e6363f4a6b6eddfdb427e21166f2"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga4ad5e6363f4a6b6eddfdb427e21166f2">av_memdup</a></div><div class="ttdeci">void * av_memdup(const void *p, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00285">mem.c:285</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html_aefec547bedcfb0e811c154e88ba0d13f"><div class="ttname"><a href="struct_mpeg_enc_context.html#aefec547bedcfb0e811c154e88ba0d13f">MpegEncContext::pblocks</a></div><div class="ttdeci">int16_t(*[12] pblocks)[64]</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00506">mpegvideo.h:506</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a82f62df9a1eaeacd284ff4edc3fca8ed"><div class="ttname"><a href="mpegvideo_8c.html#a82f62df9a1eaeacd284ff4edc3fca8ed">chroma_4mv_motion_lowres</a></div><div class="ttdeci">static void chroma_4mv_motion_lowres(MpegEncContext *s, uint8_t *dest_cb, uint8_t *dest_cr, uint8_t **ref_picture, h264_chroma_mc_func *pix_op, int mx, int my)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01624">mpegvideo.c:1624</a></div></div>
<div class="ttc" id="astruct_picture_html"><div class="ttname"><a href="struct_picture.html">Picture</a></div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00045">mpegpicture.h:45</a></div></div>
<div class="ttc" id="astruct_picture_html_aecacd672b460c045fbb8742ef0d6a22f"><div class="ttname"><a href="struct_picture.html#aecacd672b460c045fbb8742ef0d6a22f">Picture::qscale_table</a></div><div class="ttdeci">int8_t * qscale_table</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00050">mpegpicture.h:50</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ac0c3296349162014c27ec1b65b116037"><div class="ttname"><a href="mpegvideo_8c.html#ac0c3296349162014c27ec1b65b116037">dct_unquantize_mpeg1_inter_c</a></div><div class="ttdeci">static void dct_unquantize_mpeg1_inter_c(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00081">mpegvideo.c:81</a></div></div>
<div class="ttc" id="aarm_2vp56__arith_8h_html_a2e9a0e2ee6ec47b10497aa3fa424707a"><div class="ttname"><a href="arm_2vp56__arith_8h.html#a2e9a0e2ee6ec47b10497aa3fa424707a">U</a></div><div class="ttdeci">#define U(x)</div><div class="ttdef"><b>Definition:</b> <a href="arm_2vp56__arith_8h_source.html#l00037">vp56_arith.h:37</a></div></div>
<div class="ttc" id="aaarch64_2neontest_8h_html_afcc3d9d5c7982d75dd9756085f644a01"><div class="ttname"><a href="aarch64_2neontest_8h.html#afcc3d9d5c7982d75dd9756085f644a01">wrap</a></div><div class="ttdeci">#define wrap(func)</div><div class="ttdef"><b>Definition:</b> <a href="aarch64_2neontest_8h_source.html#l00065">neontest.h:65</a></div></div>
<div class="ttc" id="ah264chroma_8h_html_a17af88e7d49fbdf18c72797d3ca0a030"><div class="ttname"><a href="h264chroma_8h.html#a17af88e7d49fbdf18c72797d3ca0a030">h264_chroma_mc_func</a></div><div class="ttdeci">void(* h264_chroma_mc_func)(uint8_t *dst, uint8_t *src, ptrdiff_t srcStride, int h, int x, int y)</div><div class="ttdef"><b>Definition:</b> <a href="h264chroma_8h_source.html#l00025">h264chroma.h:25</a></div></div>
<div class="ttc" id="ampegutils_8c_html_ad5717ea71f6e43cec54ae3149d08ddf6"><div class="ttname"><a href="mpegutils_8c.html#ad5717ea71f6e43cec54ae3149d08ddf6">ff_print_debug_info2</a></div><div class="ttdeci">void ff_print_debug_info2(AVCodecContext *avctx, AVFrame *pict, uint8_t *mbskip_table, uint32_t *mbtype_table, int8_t *qscale_table, int16_t(*motion_val[2])[2], int *low_delay, int mb_width, int mb_height, int mb_stride, int quarter_sample)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8c_source.html#l00103">mpegutils.c:103</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ac706118f0a1bfc7f9ce49d2ec9fe6325"><div class="ttname"><a href="mpegvideo_8c.html#ac706118f0a1bfc7f9ce49d2ec9fe6325">ff_mpeg_draw_horiz_band</a></div><div class="ttdeci">void ff_mpeg_draw_horiz_band(MpegEncContext *s, int y, int h)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l02247">mpegvideo.c:2247</a></div></div>
<div class="ttc" id="aframe__thread__encoder_8c_html_a8b5173357adb02a86c027316e0acdfa0"><div class="ttname"><a href="frame__thread__encoder_8c.html#a8b5173357adb02a86c027316e0acdfa0">MAX_THREADS</a></div><div class="ttdeci">#define MAX_THREADS</div><div class="ttdef"><b>Definition:</b> <a href="frame__thread__encoder_8c_source.html#l00034">frame_thread_encoder.c:34</a></div></div>
<div class="ttc" id="apixdesc_8c_html_a76e011cf53b51ea14a002a206f6ca05d"><div class="ttname"><a href="pixdesc_8c.html#a76e011cf53b51ea14a002a206f6ca05d">av_pix_fmt_get_chroma_sub_sample</a></div><div class="ttdeci">int av_pix_fmt_get_chroma_sub_sample(enum AVPixelFormat pix_fmt, int *h_shift, int *v_shift)</div><div class="ttdef"><b>Definition:</b> <a href="pixdesc_8c_source.html#l02601">pixdesc.c:2601</a></div></div>
<div class="ttc" id="alibavcodec_2videodsp_8c_html_a9f55abcd843195bcf47dae7689bcf894"><div class="ttname"><a href="libavcodec_2videodsp_8c.html#a9f55abcd843195bcf47dae7689bcf894">ff_videodsp_init</a></div><div class="ttdeci">av_cold void ff_videodsp_init(VideoDSPContext *ctx, int bpc)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2videodsp_8c_source.html#l00038">videodsp.c:38</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a9a1502b14f7cb3e69154fdcc0f45d5a8"><div class="ttname"><a href="libavutil_2internal_8h.html#a9a1502b14f7cb3e69154fdcc0f45d5a8">FF_ALLOC_TYPED_ARRAY</a></div><div class="ttdeci">#define FF_ALLOC_TYPED_ARRAY(p, nelem)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00140">internal.h:140</a></div></div>
<div class="ttc" id="ampegpicture_8h_html_a2fcdb58763b2529422532029337be9dc"><div class="ttname"><a href="mpegpicture_8h.html#a2fcdb58763b2529422532029337be9dc">MAX_PICTURE_COUNT</a></div><div class="ttdeci">#define MAX_PICTURE_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00032">mpegpicture.h:32</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a4284d2b349a7c6534a777a145412b01e"><div class="ttname"><a href="mpegvideo_8c.html#a4284d2b349a7c6534a777a145412b01e">dct_unquantize_mpeg1_intra_c</a></div><div class="ttdeci">static void dct_unquantize_mpeg1_intra_c(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00052">mpegvideo.c:52</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gac700017c5270c79c1e1befdeeb008b2f"><div class="ttname"><a href="group__lavu__frame.html#gac700017c5270c79c1e1befdeeb008b2f">av_frame_alloc</a></div><div class="ttdeci">AVFrame * av_frame_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00190">frame.c:190</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a18e8f54ca7350073bde9adee069dc3ba"><div class="ttname"><a href="mpegvideo_8c.html#a18e8f54ca7350073bde9adee069dc3ba">ff_mpv_common_end</a></div><div class="ttdeci">void ff_mpv_common_end(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01110">mpegvideo.c:1110</a></div></div>
<div class="ttc" id="aavassert_8h_html"><div class="ttname"><a href="avassert_8h.html">avassert.h</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a479c20dd159d50c8f6cd40a9afc2aa9d"><div class="ttname"><a href="mpegvideo_8c.html#a479c20dd159d50c8f6cd40a9afc2aa9d">gray16</a></div><div class="ttdeci">static void gray16(uint8_t *dst, const uint8_t *src, ptrdiff_t linesize, int h)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00269">mpegvideo.c:269</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a5f33349843a2a9fa8360ead8fc28eee1"><div class="ttname"><a href="struct_a_v_codec_context.html#a5f33349843a2a9fa8360ead8fc28eee1">AVCodecContext::hwaccel</a></div><div class="ttdeci">const struct AVHWAccel * hwaccel</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01690">avcodec.h:1690</a></div></div>
<div class="ttc" id="apthread__frame_8c_html_a1c689544e66e3dd516af1d6e6f045367"><div class="ttname"><a href="pthread__frame_8c.html#a1c689544e66e3dd516af1d6e6f045367">ff_thread_report_progress</a></div><div class="ttdeci">void ff_thread_report_progress(ThreadFrame *f, int n, int field)</div><div class="ttdef"><b>Definition:</b> <a href="pthread__frame_8c_source.html#l00561">pthread_frame.c:561</a></div></div>
<div class="ttc" id="amotion__vector_8h_html"><div class="ttname"><a href="motion__vector_8h.html">motion_vector.h</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a667b04d7fb6ef46db4da4af554c5b6f7"><div class="ttname"><a href="tests_2snowenc_8c.html#a667b04d7fb6ef46db4da4af554c5b6f7">width</a></div><div class="ttdeci">#define width</div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_ae59bb66df9495df417c2632403e23aa7"><div class="ttname"><a href="libavutil_2internal_8h.html#ae59bb66df9495df417c2632403e23aa7">emms_c</a></div><div class="ttdeci">#define emms_c()</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00055">internal.h:55</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a02a1a02e7a8a23d0a533d4c80a5f6c9e"><div class="ttname"><a href="mpegvideo_8c.html#a02a1a02e7a8a23d0a533d4c80a5f6c9e">add_dct</a></div><div class="ttdeci">static void add_dct(MpegEncContext *s, int16_t *block, int i, uint8_t *dest, int line_size)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01870">mpegvideo.c:1870</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a5950eda76c8ffc67651de936cd8c79ec"><div class="ttname"><a href="cbs__vp9_8c.html#a5950eda76c8ffc67651de936cd8c79ec">s</a></div><div class="ttdeci">#define s(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00257">cbs_vp9.c:257</a></div></div>
<div class="ttc" id="ampegpicture_8c_html_a6bbbd9a9c9116762be57ca3d897ec1ec"><div class="ttname"><a href="mpegpicture_8c.html#a6bbbd9a9c9116762be57ca3d897ec1ec">ff_mpeg_unref_picture</a></div><div class="ttdeci">void ff_mpeg_unref_picture(AVCodecContext *avctx, Picture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8c_source.html#l00294">mpegpicture.c:294</a></div></div>
<div class="ttc" id="acommon_8h_html_a5d13452b0fac0d41b08ea2e49ea6eaa5"><div class="ttname"><a href="common_8h.html#a5d13452b0fac0d41b08ea2e49ea6eaa5">AV_CEIL_RSHIFT</a></div><div class="ttdeci">#define AV_CEIL_RSHIFT(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00058">common.h:58</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a8c4776e91d21d020d53473ba6fcf78dd"><div class="ttname"><a href="mpegvideo_8c.html#a8c4776e91d21d020d53473ba6fcf78dd">UPDATE_PICTURE</a></div><div class="ttdeci">#define UPDATE_PICTURE(pic)</div></div>
<div class="ttc" id="aregdef_8h_html_a09dff3d9a89874939fa7cc9d056b114c"><div class="ttname"><a href="regdef_8h.html#a09dff3d9a89874939fa7cc9d056b114c">s1</a></div><div class="ttdeci">#define s1</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00038">regdef.h:38</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea5362e286d0d453bee3940514f3f29641"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea5362e286d0d453bee3940514f3f29641">AV_CODEC_ID_WMV2</a></div><div class="ttdeci">@ AV_CODEC_ID_WMV2</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00067">codec_id.h:67</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a9f0e3049cae041cb7f6e23c04ffab0de"><div class="ttname"><a href="mpegvideo_8c.html#a9f0e3049cae041cb7f6e23c04ffab0de">dct_unquantize_mpeg2_intra_bitexact</a></div><div class="ttdeci">static void dct_unquantize_mpeg2_intra_bitexact(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00140">mpegvideo.c:140</a></div></div>
<div class="ttc" id="ampegutils_8h_html_aeb712c6c6c0a8af0dfd79f451ecb9277a5bd89968f8e67aa8a34c703dcd1b5fd6"><div class="ttname"><a href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277a5bd89968f8e67aa8a34c703dcd1b5fd6">FMT_H261</a></div><div class="ttdeci">@ FMT_H261</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00125">mpegutils.h:125</a></div></div>
<div class="ttc" id="aavassert_8h_html_aae204192396f78cc8c5cd7ad5c57c23f"><div class="ttname"><a href="avassert_8h.html#aae204192396f78cc8c5cd7ad5c57c23f">av_assert0</a></div><div class="ttdeci">#define av_assert0(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00037">avassert.h:37</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga5b7221c3afd06848486776bd834a58a5"><div class="ttname"><a href="group__lavu__log__constants.html#ga5b7221c3afd06848486776bd834a58a5">AV_LOG_DEBUG</a></div><div class="ttdeci">#define AV_LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00215">log.h:215</a></div></div>
<div class="ttc" id="ampegutils_8h_html_ad0569e9def39e7912f9147d935bd2c64"><div class="ttname"><a href="mpegutils_8h.html#ad0569e9def39e7912f9147d935bd2c64">PICT_TOP_FIELD</a></div><div class="ttdeci">#define PICT_TOP_FIELD</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00037">mpegutils.h:37</a></div></div>
<div class="ttc" id="alimits_8h_html"><div class="ttname"><a href="limits_8h.html">limits.h</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html_a3f9f7f0d266e4d506bc4dd50f1d43df0"><div class="ttname"><a href="struct_mpeg_enc_context.html#a3f9f7f0d266e4d506bc4dd50f1d43df0">MpegEncContext::linesize</a></div><div class="ttdeci">ptrdiff_t linesize</div><div class="ttdoc">line size, in bytes, may be different from width</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00134">mpegvideo.h:134</a></div></div>
<div class="ttc" id="ampegvideodsp_8c_html_af22767956af30af6c677568028e8ac26"><div class="ttname"><a href="mpegvideodsp_8c.html#af22767956af30af6c677568028e8ac26">ff_mpegvideodsp_init</a></div><div class="ttdeci">av_cold void ff_mpegvideodsp_init(MpegVideoDSPContext *c)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideodsp_8c_source.html#l00110">mpegvideodsp.c:110</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="ahpeldsp_8c_html_a1bdbaf95361cfb912c75c8dbc819dcba"><div class="ttname"><a href="hpeldsp_8c.html#a1bdbaf95361cfb912c75c8dbc819dcba">ff_hpeldsp_init</a></div><div class="ttdeci">av_cold void ff_hpeldsp_init(HpelDSPContext *c, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="hpeldsp_8c_source.html#l00338">hpeldsp.c:338</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a07517e3890ba7e19a612945483dc066a">AVDISCARD_ALL</a></div><div class="ttdeci">@ AVDISCARD_ALL</div><div class="ttdoc">discard all</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00236">avcodec.h:236</a></div></div>
<div class="ttc" id="ampegpicture_8c_html_a71b6582845e743c9f19aad4011575dc9"><div class="ttname"><a href="mpegpicture_8c.html#a71b6582845e743c9f19aad4011575dc9">ff_find_unused_picture</a></div><div class="ttdeci">int ff_find_unused_picture(AVCodecContext *avctx, Picture *picture, int shared)</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8c_source.html#l00438">mpegpicture.c:438</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a71135d03df49cffd713309e71e5f28fa"><div class="ttname"><a href="mpegvideo_8c.html#a71135d03df49cffd713309e71e5f28fa">ff_mpv_idct_init</a></div><div class="ttdeci">av_cold void ff_mpv_idct_init(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00329">mpegvideo.c:329</a></div></div>
<div class="ttc" id="avf__colormatrix_8c_html_ac83b72d92d1105a82cd5590c0f65d48b"><div class="ttname"><a href="vf__colormatrix_8c.html#ac83b72d92d1105a82cd5590c0f65d48b">me</a></div><div class="ttdeci">#define me</div><div class="ttdef"><b>Definition:</b> <a href="vf__colormatrix_8c_source.html#l00104">vf_colormatrix.c:104</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a24596007b333779bb341362ae93db3df"><div class="ttname"><a href="mpegvideo_8c.html#a24596007b333779bb341362ae93db3df">put_dct</a></div><div class="ttdeci">static void put_dct(MpegEncContext *s, int16_t *block, int i, uint8_t *dest, int line_size, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01862">mpegvideo.c:1862</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ea02be39f151a8ace7a65c86e13053e817">AV_PICTURE_TYPE_I</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_I</div><div class="ttdoc">Intra.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00274">avutil.h:274</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_aa156d48c70fc414dc7eddfc41e337165"><div class="ttname"><a href="mpegvideo_8c.html#aa156d48c70fc414dc7eddfc41e337165">ff_set_qscale</a></div><div class="ttdeci">void ff_set_qscale(MpegEncContext *s, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l02318">mpegvideo.c:2318</a></div></div>
<div class="ttc" id="aavcodec_8h_html_ab9f3dcde72d13a402e95ce72529bff5f"><div class="ttname"><a href="avcodec_8h.html#ab9f3dcde72d13a402e95ce72529bff5f">FF_BUG_IEDGE</a></div><div class="ttdeci">#define FF_BUG_IEDGE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01575">avcodec.h:1575</a></div></div>
<div class="ttc" id="affplay_8c_html_aa17db53707ff07836c83b270c7613c1f"><div class="ttname"><a href="ffplay_8c.html#aa17db53707ff07836c83b270c7613c1f">lowres</a></div><div class="ttdeci">static int lowres</div><div class="ttdef"><b>Definition:</b> <a href="ffplay_8c_source.html#l00336">ffplay.c:336</a></div></div>
<div class="ttc" id="aqpeldsp_8h_html"><div class="ttname"><a href="qpeldsp_8h.html">qpeldsp.h</a></div></div>
<div class="ttc" id="astruct_picture_html_a49bc4f4d3d61f57b4e90db4b09aafad7"><div class="ttname"><a href="struct_picture.html#a49bc4f4d3d61f57b4e90db4b09aafad7">Picture::qscale_table_buf</a></div><div class="ttdeci">AVBufferRef * qscale_table_buf</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00049">mpegpicture.h:49</a></div></div>
<div class="ttc" id="ampegvideodata_8c_html_ae3569926af55c72c980ac342f80ad61d"><div class="ttname"><a href="mpegvideodata_8c.html#ae3569926af55c72c980ac342f80ad61d">ff_alternate_horizontal_scan</a></div><div class="ttdeci">const uint8_t ff_alternate_horizontal_scan[64]</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideodata_8c_source.html#l00084">mpegvideodata.c:84</a></div></div>
<div class="ttc" id="ampegpicture_8c_html_a50e6885a261e26d35afa646081b15f4c"><div class="ttname"><a href="mpegpicture_8c.html#a50e6885a261e26d35afa646081b15f4c">ff_alloc_picture</a></div><div class="ttdeci">int ff_alloc_picture(AVCodecContext *avctx, Picture *pic, MotionEstContext *me, ScratchpadContext *sc, int shared, int encoding, int chroma_x_shift, int chroma_y_shift, int out_format, int mb_stride, int mb_width, int mb_height, int b8_stride, ptrdiff_t *linesize, ptrdiff_t *uvlinesize)</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8c_source.html#l00231">mpegpicture.c:231</a></div></div>
<div class="ttc" id="amotion__est_8h_html_a503dd0cae8a23f8c6b5767888250a72f"><div class="ttname"><a href="motion__est_8h.html#a503dd0cae8a23f8c6b5767888250a72f">ME_MAP_SIZE</a></div><div class="ttdeci">#define ME_MAP_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="motion__est_8h_source.html#l00038">motion_est.h:38</a></div></div>
<div class="ttc" id="ahpeldsp_8h_html_a4bd3508ae177f49da1364e91b8d71e05"><div class="ttname"><a href="hpeldsp_8h.html#a4bd3508ae177f49da1364e91b8d71e05">op_pixels_func</a></div><div class="ttdeci">void(* op_pixels_func)(uint8_t *block, const uint8_t *pixels, ptrdiff_t line_size, int h)</div><div class="ttdef"><b>Definition:</b> <a href="hpeldsp_8h_source.html#l00038">hpeldsp.h:38</a></div></div>
<div class="ttc" id="awmv2_8h_html"><div class="ttname"><a href="wmv2_8h.html">wmv2.h</a></div></div>
<div class="ttc" id="aqpeldsp_8h_html_a96d13364b1fef88c3306a39b982cbfff"><div class="ttname"><a href="qpeldsp_8h.html#a96d13364b1fef88c3306a39b982cbfff">qpel_mc_func</a></div><div class="ttdeci">void(* qpel_mc_func)(uint8_t *dst, const uint8_t *src, ptrdiff_t stride)</div><div class="ttdef"><b>Definition:</b> <a href="qpeldsp_8h_source.html#l00065">qpeldsp.h:65</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf019b13f4891b36ae579cd7bc96d1f78">AV_CODEC_ID_MPEG1VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG1VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00050">codec_id.h:50</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a464b44e07ca5dacdfefe4f1601ebccf0"><div class="ttname"><a href="mpegvideo_8c.html#a464b44e07ca5dacdfefe4f1601ebccf0">dct_unquantize_mpeg2_intra_c</a></div><div class="ttdeci">static void dct_unquantize_mpeg2_intra_c(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00110">mpegvideo.c:110</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a98f9328b4f99d0b6a3974cf441633edf"><div class="ttname"><a href="mpegvideo_8h.html#a98f9328b4f99d0b6a3974cf441633edf">MV_TYPE_8X8</a></div><div class="ttdeci">#define MV_TYPE_8X8</div><div class="ttdoc">4 vectors (H.263, MPEG-4 4MV)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00267">mpegvideo.h:267</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a8e3eb32799f4637fcdd75bb9099142ff"><div class="ttname"><a href="tableprint__vlc_8h.html#a8e3eb32799f4637fcdd75bb9099142ff">ff_dlog</a></div><div class="ttdeci">#define ff_dlog(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00029">tableprint_vlc.h:29</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a2c974557671dd459674b170c5e64d79a"><div class="ttname"><a href="struct_a_v_codec_context.html#a2c974557671dd459674b170c5e64d79a">AVCodecContext::codec_tag</a></div><div class="ttdeci">unsigned int codec_tag</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00551">avcodec.h:551</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a8dd683f65cea8e917f0124fbf6346f8b"><div class="ttname"><a href="avcodec_8h.html#a8dd683f65cea8e917f0124fbf6346f8b">FF_DEBUG_DCT_COEFF</a></div><div class="ttdeci">#define FF_DEBUG_DCT_COEFF</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01623">avcodec.h:1623</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16a31c8164477d9f571f82003065d2ab6f1">AVDISCARD_NONKEY</a></div><div class="ttdeci">@ AVDISCARD_NONKEY</div><div class="ttdoc">discard all frames except keyframes</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00235">avcodec.h:235</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga752fa4b8beeb25c9e8f0014a4aa622b4"><div class="ttname"><a href="group__lavc__core.html#ga752fa4b8beeb25c9e8f0014a4aa622b4">AV_CODEC_FLAG_GRAY</a></div><div class="ttdeci">#define AV_CODEC_FLAG_GRAY</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00308">avcodec.h:308</a></div></div>
<div class="ttc" id="ampegpicture_8c_html_a72fab24bab059aa7ad186c9b327ed312"><div class="ttname"><a href="mpegpicture_8c.html#a72fab24bab059aa7ad186c9b327ed312">ff_mpeg_ref_picture</a></div><div class="ttdeci">int ff_mpeg_ref_picture(AVCodecContext *avctx, Picture *dst, Picture *src)</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8c_source.html#l00353">mpegpicture.c:353</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html_ac55093a5d2d8a1e947e725b512d59488"><div class="ttname"><a href="struct_mpeg_enc_context.html#ac55093a5d2d8a1e947e725b512d59488">MpegEncContext::me</a></div><div class="ttdeci">MotionEstContext me</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00282">mpegvideo.h:282</a></div></div>
<div class="ttc" id="ampegutils_8c_html_a17c69f0c44a45e344a6eccd9d6d4f376"><div class="ttname"><a href="mpegutils_8c.html#a17c69f0c44a45e344a6eccd9d6d4f376">ff_draw_horiz_band</a></div><div class="ttdeci">void ff_draw_horiz_band(AVCodecContext *avctx, AVFrame *cur, AVFrame *last, int y, int h, int picture_structure, int first_field, int low_delay)</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8c_source.html#l00051">mpegutils.c:51</a></div></div>
<div class="ttc" id="ampeg__er_8c_html_a63023ecab6554b96dea418dc53c7ca5f"><div class="ttname"><a href="mpeg__er_8c.html#a63023ecab6554b96dea418dc53c7ca5f">ff_mpeg_er_init</a></div><div class="ttdeci">int ff_mpeg_er_init(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpeg__er_8c_source.html#l00100">mpeg_er.c:100</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceac3d126631b15729d01d427b642c3bc9e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceac3d126631b15729d01d427b642c3bc9e">AV_CODEC_ID_H263</a></div><div class="ttdeci">@ AV_CODEC_ID_H263</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00053">codec_id.h:53</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a5ff9dc762a72ad06bd26b9b7079565c4"><div class="ttname"><a href="mpegvideo_8h.html#a5ff9dc762a72ad06bd26b9b7079565c4">ff_mpv_motion</a></div><div class="ttdeci">void ff_mpv_motion(MpegEncContext *s, uint8_t *dest_y, uint8_t *dest_cb, uint8_t *dest_cr, int dir, uint8_t **ref_picture, op_pixels_func(*pix_op)[4], qpel_mc_func(*qpix_op)[16])</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__motion_8c_source.html#l00974">mpegvideo_motion.c:974</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html"><div class="ttname"><a href="struct_mpeg_enc_context.html">MpegEncContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00081">mpegvideo.h:81</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_a01a53d07936f4c7ee280444793b6967b"><div class="ttname"><a href="struct_a_v_codec.html#a01a53d07936f4c7ee280444793b6967b">AVCodec::id</a></div><div class="ttdeci">enum AVCodecID id</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00202">codec.h:204</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_abfebd7c844ecf151044a395813987262"><div class="ttname"><a href="mpegvideo_8c.html#abfebd7c844ecf151044a395813987262">alloc_picture</a></div><div class="ttdeci">static int alloc_picture(MpegEncContext *s, Picture *pic)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00349">mpegvideo.c:349</a></div></div>
<div class="ttc" id="ah264chroma_8h_html"><div class="ttname"><a href="h264chroma_8h.html">h264chroma.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a0d8f46461754e8abea0847dcbc41b956"><div class="ttname"><a href="struct_a_v_codec_context.html#a0d8f46461754e8abea0847dcbc41b956">AVCodecContext::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00699">avcodec.h:699</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a91bc1a1c1c4a3cc6db54d59705fded0b"><div class="ttname"><a href="avcodec_8h.html#a91bc1a1c1c4a3cc6db54d59705fded0b">FF_THREAD_SLICE</a></div><div class="ttdeci">#define FF_THREAD_SLICE</div><div class="ttdoc">Decode more than one part of a single frame at once.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01797">avcodec.h:1797</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a6b2170ea66fd50185869b62ea76329f8"><div class="ttname"><a href="mpegvideo_8c.html#a6b2170ea66fd50185869b62ea76329f8">ff_mpeg_flush</a></div><div class="ttdeci">void ff_mpeg_flush(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l02287">mpegvideo.c:2287</a></div></div>
<div class="ttc" id="astruct_a_v_buffer_ref_html"><div class="ttname"><a href="struct_a_v_buffer_ref.html">AVBufferRef</a></div><div class="ttdef"><b>Definition:</b> <a href="buffer_8h_source.html#l00081">buffer.h:81</a></div></div>
<div class="ttc" id="atests_2snowenc_8c_html_a64f9f90ece96c7bab4aee3deacf170e0"><div class="ttname"><a href="tests_2snowenc_8c.html#a64f9f90ece96c7bab4aee3deacf170e0">height</a></div><div class="ttdeci">#define height</div></div>
<div class="ttc" id="ampegvideo_8c_html_a011ad6cb11e541bc18487f05c9b796da"><div class="ttname"><a href="mpegvideo_8c.html#a011ad6cb11e541bc18487f05c9b796da">init_context_frame</a></div><div class="ttdeci">static int init_context_frame(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00687">mpegvideo.c:687</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ab7194fae34d0ae2c3f731115e0787d03"><div class="ttname"><a href="mpegvideo_8c.html#ab7194fae34d0ae2c3f731115e0787d03">ff_mpeg_update_thread_context</a></div><div class="ttdeci">int ff_mpeg_update_thread_context(AVCodecContext *dst, const AVCodecContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00491">mpegvideo.c:491</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html_aa52bfc6605f6a3059a0c3226cc0f6567"><div class="ttname"><a href="struct_a_v_frame.html#aa52bfc6605f6a3059a0c3226cc0f6567">AVFrame::linesize</a></div><div class="ttdeci">int linesize[AV_NUM_DATA_POINTERS]</div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00339">frame.h:339</a></div></div>
<div class="ttc" id="ampegvideodata_8h_html"><div class="ttname"><a href="mpegvideodata_8h.html">mpegvideodata.h</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="aattributes_8h_html"><div class="ttname"><a href="attributes_8h.html">attributes.h</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a97e4ba7c779c1ac58dbc886ecdde3ec9"><div class="ttname"><a href="mpegvideo_8h.html#a97e4ba7c779c1ac58dbc886ecdde3ec9">MV_TYPE_FIELD</a></div><div class="ttdeci">#define MV_TYPE_FIELD</div><div class="ttdoc">2 vectors, one per field</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00269">mpegvideo.h:269</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a70433c7a313804c3995d2d949feee5ab"><div class="ttname"><a href="mpegvideo_8c.html#a70433c7a313804c3995d2d949feee5ab">ff_mpv_export_qp_table</a></div><div class="ttdeci">int ff_mpv_export_qp_table(MpegEncContext *s, AVFrame *f, Picture *p, int qp_type)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01426">mpegvideo.c:1426</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a7eed5412c88ad2d3ca68c8d39a580bf3"><div class="ttname"><a href="mpegvideo_8c.html#a7eed5412c88ad2d3ca68c8d39a580bf3">ff_print_debug_info</a></div><div class="ttdeci">void ff_print_debug_info(MpegEncContext *s, Picture *p, AVFrame *pict)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01419">mpegvideo.c:1419</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a4a1d7e15684ea682904f25407a1f1e93"><div class="ttname"><a href="mpegvideo_8c.html#a4a1d7e15684ea682904f25407a1f1e93">dct_unquantize_mpeg2_inter_c</a></div><div class="ttdeci">static void dct_unquantize_mpeg2_inter_c(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00174">mpegvideo.c:174</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a116c7fb56ac57ccca3e08b80467b2a40"><div class="ttname"><a href="avcodec_8h.html#a116c7fb56ac57ccca3e08b80467b2a40">FF_THREAD_FRAME</a></div><div class="ttdeci">#define FF_THREAD_FRAME</div><div class="ttdoc">Decode more than one frame at once.</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01796">avcodec.h:1796</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_aa5d699aa6f7da7be00f20eaffe83949f"><div class="ttname"><a href="mpegvideo_8c.html#aa5d699aa6f7da7be00f20eaffe83949f">clear_context</a></div><div class="ttdeci">static void clear_context(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00802">mpegvideo.c:802</a></div></div>
<div class="ttc" id="aavassert_8h_html_a2764bf422e4df5bf3aac652f21fe780a"><div class="ttname"><a href="avassert_8h.html#a2764bf422e4df5bf3aac652f21fe780a">av_assert2</a></div><div class="ttdeci">#define av_assert2(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00064">avassert.h:64</a></div></div>
<div class="ttc" id="ampegutils_8h_html_aeb712c6c6c0a8af0dfd79f451ecb9277acbc818c9ff383e30d36451d333dd1a1a"><div class="ttname"><a href="mpegutils_8h.html#aeb712c6c6c0a8af0dfd79f451ecb9277acbc818c9ff383e30d36451d333dd1a1a">FMT_H263</a></div><div class="ttdeci">@ FMT_H263</div><div class="ttdef"><b>Definition:</b> <a href="mpegutils_8h_source.html#l00126">mpegutils.h:126</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a29ae0c9bdbbdbb9bbe093a51252b8d09"><div class="ttname"><a href="mpegvideo_8c.html#a29ae0c9bdbbdbb9bbe093a51252b8d09">dct_unquantize_h263_inter_c</a></div><div class="ttdeci">static void dct_unquantize_h263_inter_c(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00242">mpegvideo.c:242</a></div></div>
<div class="ttc" id="ampegvideodata_8c_html_af7a9082d18407e025821c46111aab1f2"><div class="ttname"><a href="mpegvideodata_8c.html#af7a9082d18407e025821c46111aab1f2">ff_alternate_vertical_scan</a></div><div class="ttdeci">const uint8_t ff_alternate_vertical_scan[64]</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideodata_8c_source.html#l00095">mpegvideodata.c:95</a></div></div>
<div class="ttc" id="ah264chroma_8c_html_a4183ca41207e383f4a607c6786737af1"><div class="ttname"><a href="h264chroma_8c.html#a4183ca41207e383f4a607c6786737af1">ff_h264chroma_init</a></div><div class="ttdeci">av_cold void ff_h264chroma_init(H264ChromaContext *c, int bit_depth)</div><div class="ttdef"><b>Definition:</b> <a href="h264chroma_8c_source.html#l00041">h264chroma.c:41</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="aavassert_8h_html_a557ed9c8df70c282bf6b7e0e07d7d5b0"><div class="ttname"><a href="avassert_8h.html#a557ed9c8df70c282bf6b7e0e07d7d5b0">av_assert1</a></div><div class="ttdeci">#define av_assert1(cond)</div><div class="ttdef"><b>Definition:</b> <a href="avassert_8h_source.html#l00053">avassert.h:53</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a892bc6b13e378bb6976175892d150b76"><div class="ttname"><a href="mpegvideo_8h.html#a892bc6b13e378bb6976175892d150b76">ff_mpv_common_init_ppc</a></div><div class="ttdeci">void ff_mpv_common_init_ppc(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__altivec_8c_source.html#l00118">mpegvideo_altivec.c:118</a></div></div>
<div class="ttc" id="aattributes_8h_html_a28f50f4c125959216885f01d56dbe866"><div class="ttname"><a href="attributes_8h.html#a28f50f4c125959216885f01d56dbe866">av_always_inline</a></div><div class="ttdeci">#define av_always_inline</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00049">attributes.h:49</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="aidctdsp_8c_html_a09c1200a433519590f6ee84ec9aeb158"><div class="ttname"><a href="idctdsp_8c.html#a09c1200a433519590f6ee84ec9aeb158">ff_idctdsp_init</a></div><div class="ttdeci">av_cold void ff_idctdsp_init(IDCTDSPContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="idctdsp_8c_source.html#l00238">idctdsp.c:238</a></div></div>
<div class="ttc" id="astruct_scratchpad_context_html_a20167b23634aeab3dce197970a6236e3"><div class="ttname"><a href="struct_scratchpad_context.html#a20167b23634aeab3dce197970a6236e3">ScratchpadContext::edge_emu_buffer</a></div><div class="ttdeci">uint8_t * edge_emu_buffer</div><div class="ttdoc">temporary buffer for if MVs point to out-of-frame data</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00036">mpegpicture.h:36</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a29057cff58b3ca5d43819922bcf248bf"><div class="ttname"><a href="mpegvideo_8c.html#a29057cff58b3ca5d43819922bcf248bf">ff_mpv_decode_defaults</a></div><div class="ttdeci">void ff_mpv_decode_defaults(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00667">mpegvideo.c:667</a></div></div>
<div class="ttc" id="awmv2_8c_html_ac638ed531eff019b2481e3ae607110c0"><div class="ttname"><a href="wmv2_8c.html#ac638ed531eff019b2481e3ae607110c0">ff_wmv2_add_mb</a></div><div class="ttdeci">void ff_wmv2_add_mb(MpegEncContext *s, int16_t block1[6][64], uint8_t *dest_y, uint8_t *dest_cb, uint8_t *dest_cr)</div><div class="ttdef"><b>Definition:</b> <a href="wmv2_8c_source.html#l00083">wmv2.c:83</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a2913f488b513c0d833e2df1ede334bee"><div class="ttname"><a href="mpegvideo_8c.html#a2913f488b513c0d833e2df1ede334bee">ff_mpv_frame_end</a></div><div class="ttdeci">void ff_mpv_frame_end(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01411">mpegvideo.c:1411</a></div></div>
<div class="ttc" id="aavcodec_8h_html_af910cd51ccebe14efae0a234b65ba14b"><div class="ttname"><a href="avcodec_8h.html#af910cd51ccebe14efae0a234b65ba14b">FF_DEBUG_NOMC</a></div><div class="ttdeci">#define FF_DEBUG_NOMC</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01636">avcodec.h:1636</a></div></div>
<div class="ttc" id="astruct_picture_html_a0b987ee22113dfd25816c3364fae5cb3"><div class="ttname"><a href="struct_picture.html#a0b987ee22113dfd25816c3364fae5cb3">Picture::motion_val</a></div><div class="ttdeci">int16_t(*[2] motion_val)[2]</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00053">mpegpicture.h:53</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="amsmpeg4_8h_html"><div class="ttname"><a href="msmpeg4_8h.html">msmpeg4.h</a></div></div>
<div class="ttc" id="amathops_8h_html_a0729a02967b7934643d747721ecdccbb"><div class="ttname"><a href="mathops_8h.html#a0729a02967b7934643d747721ecdccbb">ff_zigzag_direct</a></div><div class="ttdeci">const uint8_t ff_zigzag_direct[64]</div><div class="ttdef"><b>Definition:</b> <a href="mathtables_8c_source.html#l00098">mathtables.c:98</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html_a879bd7309191b792ac0c6f69be2ccc48"><div class="ttname"><a href="struct_mpeg_enc_context.html#a879bd7309191b792ac0c6f69be2ccc48">MpegEncContext::sc</a></div><div class="ttdeci">ScratchpadContext sc</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00202">mpegvideo.h:202</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a09cdf71b4e226f14deef538e321f3af6"><div class="ttname"><a href="mpegvideo_8c.html#a09cdf71b4e226f14deef538e321f3af6">ff_mpv_frame_start</a></div><div class="ttdeci">int ff_mpv_frame_start(MpegEncContext *s, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01187">mpegvideo.c:1187</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ab4255aa773d1b03df4f4affcc6a92102"><div class="ttname"><a href="mpegvideo_8c.html#ab4255aa773d1b03df4f4affcc6a92102">free_context_frame</a></div><div class="ttdeci">static void free_context_frame(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00986">mpegvideo.c:986</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a63fda41955181b705ef9a24397dc9330"><div class="ttname"><a href="mpegvideo_8c.html#a63fda41955181b705ef9a24397dc9330">dct_init</a></div><div class="ttdeci">static av_cold int dct_init(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00282">mpegvideo.c:282</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_ga8f5b632a03ce83ac8e025894b1fc307a"><div class="ttname"><a href="group__lavc__decoding.html#ga8f5b632a03ce83ac8e025894b1fc307a">AV_INPUT_BUFFER_PADDING_SIZE</a></div><div class="ttdeci">#define AV_INPUT_BUFFER_PADDING_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00215">avcodec.h:215</a></div></div>
<div class="ttc" id="ax86_2mathops_8h_html"><div class="ttname"><a href="x86_2mathops_8h.html">mathops.h</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a5b1e5bc4ec557e1315ac4b10d2f7efdd"><div class="ttname"><a href="mpegvideo_8c.html#a5b1e5bc4ec557e1315ac4b10d2f7efdd">ff_update_duplicate_context</a></div><div class="ttdeci">int ff_update_duplicate_context(MpegEncContext *dst, MpegEncContext *src)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00466">mpegvideo.c:466</a></div></div>
<div class="ttc" id="aavr32_2intreadwrite_8h_html_ace46e41b9bd6cac88fb7109ffd657f9a"><div class="ttname"><a href="avr32_2intreadwrite_8h.html#ace46e41b9bd6cac88fb7109ffd657f9a">AV_RL32</a></div><div class="ttdeci">#define AV_RL32</div><div class="ttdef"><b>Definition:</b> <a href="avr32_2intreadwrite_8h_source.html#l00146">intreadwrite.h:146</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78ead22f8968e99bc48897c3f4ac29e82dae">AV_PICTURE_TYPE_B</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_B</div><div class="ttdoc">Bi-dir predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00276">avutil.h:276</a></div></div>
<div class="ttc" id="apixfmt_8h_html_a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3"><div class="ttname"><a href="pixfmt_8h.html#a9a8e335cf3be472042bc9f0cf80cd4c5a0e08f8a5d0fa21c3e258816a9dcce7c3">AV_PIX_FMT_NONE</a></div><div class="ttdeci">@ AV_PIX_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="pixfmt_8h_source.html#l00065">pixfmt.h:65</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_aea8a40a5dd89f7832a69acb0b8c5a3f3"><div class="ttname"><a href="mpegvideo_8c.html#aea8a40a5dd89f7832a69acb0b8c5a3f3">dct_unquantize_h263_intra_c</a></div><div class="ttdeci">static void dct_unquantize_h263_intra_c(MpegEncContext *s, int16_t *block, int n, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00208">mpegvideo.c:208</a></div></div>
<div class="ttc" id="ax86_2mpegvideo_8c_html_a3b82911192d2cf011f26585ff72312fd"><div class="ttname"><a href="x86_2mpegvideo_8c.html#a3b82911192d2cf011f26585ff72312fd">ff_mpv_common_init_x86</a></div><div class="ttdeci">av_cold void ff_mpv_common_init_x86(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="x86_2mpegvideo_8c_source.html#l00454">mpegvideo.c:454</a></div></div>
<div class="ttc" id="atests_2jpeg2000dwt_8c_html_a5cabdd8be5af41f675fed06498e094b7"><div class="ttname"><a href="tests_2jpeg2000dwt_8c.html#a5cabdd8be5af41f675fed06498e094b7">ref</a></div><div class="ttdeci">static int ref[MAX_W *MAX_W]</div><div class="ttdef"><b>Definition:</b> <a href="tests_2jpeg2000dwt_8c_source.html#l00107">jpeg2000dwt.c:107</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a96a080ffba15e20ab19105155ba233cb"><div class="ttname"><a href="mpegvideo_8c.html#a96a080ffba15e20ab19105155ba233cb">MPV_motion_lowres</a></div><div class="ttdeci">static void MPV_motion_lowres(MpegEncContext *s, uint8_t *dest_y, uint8_t *dest_cb, uint8_t *dest_cr, int dir, uint8_t **ref_picture, h264_chroma_mc_func *pix_op)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01692">mpegvideo.c:1692</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a8f3e2740f33856036d181a6e5d2128a3"><div class="ttname"><a href="mpegvideo_8c.html#a8f3e2740f33856036d181a6e5d2128a3">ff_mpv_reconstruct_mb</a></div><div class="ttdeci">void ff_mpv_reconstruct_mb(MpegEncContext *s, int16_t block[12][64])</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l02235">mpegvideo.c:2235</a></div></div>
<div class="ttc" id="ampegvideo__alpha_8c_html_a46ac931ad5ba88bb73fb597599e30d26"><div class="ttname"><a href="mpegvideo__alpha_8c.html#a46ac931ad5ba88bb73fb597599e30d26">ff_mpv_common_init_axp</a></div><div class="ttdeci">av_cold void ff_mpv_common_init_axp(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__alpha_8c_source.html#l00106">mpegvideo_alpha.c:106</a></div></div>
<div class="ttc" id="agroup__lavu__buffer_html_gaa40ce7d3ede946a89d03323bbd7268c1"><div class="ttname"><a href="group__lavu__buffer.html#gaa40ce7d3ede946a89d03323bbd7268c1">av_buffer_ref</a></div><div class="ttdeci">AVBufferRef * av_buffer_ref(AVBufferRef *buf)</div><div class="ttdef"><b>Definition:</b> <a href="buffer_8c_source.html#l00093">buffer.c:93</a></div></div>
<div class="ttc" id="aavcodec_8h_html_a539f109f975c674a226309aa022bcc8b"><div class="ttname"><a href="avcodec_8h.html#a539f109f975c674a226309aa022bcc8b">FF_MB_DECISION_RD</a></div><div class="ttdeci">#define FF_MB_DECISION_RD</div><div class="ttdoc">rate distortion</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01017">avcodec.h:1017</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html_a16cee16c189e26b1f3aec69c1cfebbfd"><div class="ttname"><a href="struct_mpeg_enc_context.html#a16cee16c189e26b1f3aec69c1cfebbfd">MpegEncContext::block</a></div><div class="ttdeci">int16_t(* block)[64]</div><div class="ttdoc">points to one of the following blocks</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00508">mpegvideo.h:508</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ae3c157e97ff15d46e898a538c6bc7f09"><div class="ttname"><a href="struct_a_v_codec_context.html#ae3c157e97ff15d46e898a538c6bc7f09">AVCodecContext::coded_width</a></div><div class="ttdeci">int coded_width</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00714">avcodec.h:714</a></div></div>
<div class="ttc" id="ampegvideo__init__mips_8c_html_a619d88224420cec4879dcbadb9084819"><div class="ttname"><a href="mpegvideo__init__mips_8c.html#a619d88224420cec4879dcbadb9084819">ff_mpv_common_init_mips</a></div><div class="ttdeci">av_cold void ff_mpv_common_init_mips(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo__init__mips_8c_source.html#l00025">mpegvideo_init_mips.c:25</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193"><div class="ttname"><a href="group__lavu__picture.html#ggae6cbcab1f70d8e476757f1c1f5a0a78eaa6fc0479507a03f173f07fc75dab2193">AV_PICTURE_TYPE_P</a></div><div class="ttdeci">@ AV_PICTURE_TYPE_P</div><div class="ttdoc">Predicted.</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00275">avutil.h:275</a></div></div>
<div class="ttc" id="ampegvideodata_8c_html_ab8d1407e7dddf4e731193c00a65dc373"><div class="ttname"><a href="mpegvideodata_8c.html#ab8d1407e7dddf4e731193c00a65dc373">ff_default_chroma_qscale_table</a></div><div class="ttdeci">const uint8_t ff_default_chroma_qscale_table[32]</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideodata_8c_source.html#l00021">mpegvideodata.c:21</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ga17ae68044f725fd5ba26c54162b96490"><div class="ttname"><a href="group__lavc__core.html#ga17ae68044f725fd5ba26c54162b96490">AV_CODEC_FLAG_BITEXACT</a></div><div class="ttdeci">#define AV_CODEC_FLAG_BITEXACT</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00333">avcodec.h:333</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ad5cef9b73d86f71dcd307267d93eb710"><div class="ttname"><a href="mpegvideo_8c.html#ad5cef9b73d86f71dcd307267d93eb710">COPY</a></div><div class="ttdeci">#define COPY(a)</div></div>
<div class="ttc" id="astruct_picture_html_ab73190435fab740e9c22e61aedb5c2ad"><div class="ttname"><a href="struct_picture.html#ab73190435fab740e9c22e61aedb5c2ad">Picture::f</a></div><div class="ttdeci">struct AVFrame * f</div><div class="ttdef"><b>Definition:</b> <a href="mpegpicture_8h_source.html#l00046">mpegpicture.h:46</a></div></div>
<div class="ttc" id="ampegvideo_8h_html_a91f96ac4aa02badb684e42c5294a45bf"><div class="ttname"><a href="mpegvideo_8h.html#a91f96ac4aa02badb684e42c5294a45bf">MV_DIR_FORWARD</a></div><div class="ttdeci">#define MV_DIR_FORWARD</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00262">mpegvideo.h:262</a></div></div>
<div class="ttc" id="astruct_mpeg_enc_context_html_afcd6dc88b0d074921f6563d83d480953"><div class="ttname"><a href="struct_mpeg_enc_context.html#afcd6dc88b0d074921f6563d83d480953">MpegEncContext::avctx</a></div><div class="ttdeci">struct AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8h_source.html#l00098">mpegvideo.h:98</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga29d0252b981f157e713a68ffca52f003"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga29d0252b981f157e713a68ffca52f003">av_fast_malloc</a></div><div class="ttdeci">void av_fast_malloc(void *ptr, unsigned int *size, size_t min_size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00502">mem.c:502</a></div></div>
<div class="ttc" id="ampeg__er_8h_html"><div class="ttname"><a href="mpeg__er_8h.html">mpeg_er.h</a></div></div>
<div class="ttc" id="aimgutils_8h_html"><div class="ttname"><a href="imgutils_8h.html">imgutils.h</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a17afa58b2bc574dedcd1cc02e1fdf165"><div class="ttname"><a href="filter__design_8txt.html#a17afa58b2bc574dedcd1cc02e1fdf165">block</a></div><div class="ttdeci">The exact code depends on how similar the blocks are and how related they are to the block</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00207">filter_design.txt:207</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ae3870ad0b50a822baedc638178be0d4b"><div class="ttname"><a href="mpegvideo_8c.html#ae3870ad0b50a822baedc638178be0d4b">ff_mpv_report_decode_progress</a></div><div class="ttdeci">void ff_mpv_report_decode_progress(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l02332">mpegvideo.c:2332</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a6ff97e3905468ec9b36c56236af24964"><div class="ttname"><a href="mpegvideo_8c.html#a6ff97e3905468ec9b36c56236af24964">add_dequant_dct</a></div><div class="ttdeci">static void add_dequant_dct(MpegEncContext *s, int16_t *block, int i, uint8_t *dest, int line_size, int qscale)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01878">mpegvideo.c:1878</a></div></div>
<div class="ttc" id="avp9dsp__template_8c_html_a5e36941b3d856737e81516acd45edc50"><div class="ttname"><a href="vp9dsp__template_8c.html#a5e36941b3d856737e81516acd45edc50">h</a></div><div class="ttdeci">h</div><div class="ttdef"><b>Definition:</b> <a href="vp9dsp__template_8c_source.html#l02038">vp9dsp_template.c:2038</a></div></div>
<div class="ttc" id="agroup__lavu__picture_html_ga3a867b6180ddad1e0c382ef0c5940b8e"><div class="ttname"><a href="group__lavu__picture.html#ga3a867b6180ddad1e0c382ef0c5940b8e">av_image_check_size</a></div><div class="ttdeci">int av_image_check_size(unsigned int w, unsigned int h, int log_offset, void *log_ctx)</div><div class="ttdef"><b>Definition:</b> <a href="imgutils_8c_source.html#l00317">imgutils.c:317</a></div></div>
<div class="ttc" id="alibavcodec_2blockdsp_8c_html_a923c6716c33a9c53546b0254916e406f"><div class="ttname"><a href="libavcodec_2blockdsp_8c.html#a923c6716c33a9c53546b0254916e406f">ff_blockdsp_init</a></div><div class="ttdeci">av_cold void ff_blockdsp_init(BlockDSPContext *c, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2blockdsp_8c_source.html#l00060">blockdsp.c:60</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a6e606effa68724cae2ef5cc05f7fd9cb"><div class="ttname"><a href="struct_a_v_codec_context.html#a6e606effa68724cae2ef5cc05f7fd9cb">AVCodecContext::codec</a></div><div class="ttdeci">const struct AVCodec * codec</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00535">avcodec.h:535</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cea130d77683c690fdeeb9de1e9409d06d4"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cea130d77683c690fdeeb9de1e9409d06d4">AV_CODEC_ID_FLV1</a></div><div class="ttdeci">@ AV_CODEC_ID_FLV1</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00070">codec_id.h:70</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a99390e7c7f3b91fd3420752580a57b70"><div class="ttname"><a href="mpegvideo_8c.html#a99390e7c7f3b91fd3420752580a57b70">ff_mpv_decode_init</a></div><div class="ttdeci">void ff_mpv_decode_init(MpegEncContext *s, AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00672">mpegvideo.c:672</a></div></div>
<div class="ttc" id="agroup__lavc__decoding_html_gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8"><div class="ttname"><a href="group__lavc__decoding.html#gga352363bce7d3ed82c101b3bc001d1c16ac5a5a87ffcd6fb2362ac18449d29bde8">AVDISCARD_NONREF</a></div><div class="ttdeci">@ AVDISCARD_NONREF</div><div class="ttdoc">discard all non reference</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00232">avcodec.h:232</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="amjpegenc_8h_html"><div class="ttname"><a href="mjpegenc_8h.html">mjpegenc.h</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceaf614abb36f7c5d0c42ed522c1d6c99f0">AV_CODEC_ID_MPEG2VIDEO</a></div><div class="ttdeci">@ AV_CODEC_ID_MPEG2VIDEO</div><div class="ttdoc">preferred ID for MPEG-1/2 video decoding</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00051">codec_id.h:51</a></div></div>
<div class="ttc" id="aneon_2mpegvideo_8c_html_a2a2b195ac45330961c75684db90628d8"><div class="ttname"><a href="neon_2mpegvideo_8c.html#a2a2b195ac45330961c75684db90628d8">ff_mpv_common_init_neon</a></div><div class="ttdeci">av_cold void ff_mpv_common_init_neon(MpegEncContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="neon_2mpegvideo_8c_source.html#l00126">mpegvideo.c:126</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_a3d68cec8ec4af08d87bd31a077e4376f"><div class="ttname"><a href="mpegvideo_8c.html#a3d68cec8ec4af08d87bd31a077e4376f">gray8</a></div><div class="ttdeci">static void gray8(uint8_t *dst, const uint8_t *src, ptrdiff_t linesize, int h)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l00275">mpegvideo.c:275</a></div></div>
<div class="ttc" id="ampegvideo_8c_html_ae9282ae335e63c80e77877e4c43c7840"><div class="ttname"><a href="mpegvideo_8c.html#ae9282ae335e63c80e77877e4c43c7840">gray_frame</a></div><div class="ttdeci">static void gray_frame(AVFrame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="mpegvideo_8c_source.html#l01167">mpegvideo.c:1167</a></div></div>
<div class="ttc" id="agroup__lavu__frame_html_gad08c37260c53f8587fe747dba285dd70"><div class="ttname"><a href="group__lavu__frame.html#gad08c37260c53f8587fe747dba285dd70">av_frame_set_qp_table</a></div><div class="ttdeci">int av_frame_set_qp_table(AVFrame *f, AVBufferRef *buf, int stride, int qp_type)</div><div class="ttdef"><b>Definition:</b> <a href="frame_8c_source.html#l00055">frame.c:55</a></div></div>
<div class="ttc" id="ax86_2idctdsp_8h_html"><div class="ttname"><a href="x86_2idctdsp_8h.html">idctdsp.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
