<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavcodec/mlpenc.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_56ad1dd09ca1ce410b5ba2c46dd71e4b.html">libavcodec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mlpenc.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="mlpenc_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avcodec_8h.html">avcodec.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="put__bits_8h.html">put_bits.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="audio__frame__queue_8h.html">audio_frame_queue.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="crc_8h.html">libavutil/crc.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="avstring_8h.html">libavutil/avstring.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="samplefmt_8h.html">libavutil/samplefmt.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mlp_8h.html">mlp.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lpc_8h.html">lpc.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">   33</a></span>&#160;<span class="preprocessor">#define MAJOR_HEADER_INTERVAL 16</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#aa2ab716af4c1c9195be2a672d6208c55">   35</a></span>&#160;<span class="preprocessor">#define MLP_MIN_LPC_ORDER      1</span></div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a707273b0522bcff43b141c2bdf17ebd1">   36</a></span>&#160;<span class="preprocessor">#define MLP_MAX_LPC_ORDER      8</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ad932012d1f50fdfb2d772637c1314d0e">   37</a></span>&#160;<span class="preprocessor">#define MLP_MIN_LPC_SHIFT      8</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ad4f7d85848db2f6cc7fec7f6ed336cb4">   38</a></span>&#160;<span class="preprocessor">#define MLP_MAX_LPC_SHIFT     15</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="struct_restart_header.html">   40</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">   41</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>;         </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">   42</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>;         </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">   43</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">max_matrix_channel</a>;  </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="struct_restart_header.html#ae6eea1db40b2af00111f4c28d60f7e04">   45</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_restart_header.html#ae6eea1db40b2af00111f4c28d60f7e04">noise_shift</a>;         </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">   46</a></span>&#160;    uint32_t        <a class="code" href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">noisegen_seed</a>;       </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="struct_restart_header.html#a36aa2e91a666eb7bcd609f695f26a201">   48</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_restart_header.html#a36aa2e91a666eb7bcd609f695f26a201">data_check_present</a>;  </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="struct_restart_header.html#a4a41d4b9a770927a67c3224a22b44de1">   50</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>         <a class="code" href="struct_restart_header.html#a4a41d4b9a770927a67c3224a22b44de1">lossless_check_data</a>; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="struct_restart_header.html#acd1cc2ff2eca785ac67865d8063a0711">   52</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_restart_header.html#acd1cc2ff2eca785ac67865d8063a0711">max_huff_lsbs</a>;       </div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="struct_restart_header.html#aeaa3db722326cdc88a97d825d9b1174f">   53</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_restart_header.html#aeaa3db722326cdc88a97d825d9b1174f">max_output_bits</a>;     </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;} <a class="code" href="struct_restart_header.html">RestartHeader</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="struct_matrix_params.html">   56</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">   57</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>;                  </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">   59</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         outch[<a class="code" href="mlp_8h.html#a7f061e6aa7a60fed59622b2b760ea619">MAX_MATRICES</a>];    </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">   60</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>         forco[<a class="code" href="mlp_8h.html#a7f061e6aa7a60fed59622b2b760ea619">MAX_MATRICES</a>][<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>+2];    </div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">   61</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>         <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>[<a class="code" href="mlp_8h.html#a7f061e6aa7a60fed59622b2b760ea619">MAX_MATRICES</a>][<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>+2];    </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">   62</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         fbits[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];    </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">   64</a></span>&#160;    int8_t          <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];    </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;} <a class="code" href="struct_matrix_params.html">MatrixParams</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22">   67</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22">ParamFlags</a> {</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2d0d2395974af174b50868a56471c9cf">   68</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2d0d2395974af174b50868a56471c9cf">PARAMS_DEFAULT</a>       = 0xff,</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22afe96eccbd74b7908808dc8e6ae94ae4e">   69</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22afe96eccbd74b7908808dc8e6ae94ae4e">PARAM_PRESENCE_FLAGS</a> = 1 &lt;&lt; 8,</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">   70</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">PARAM_BLOCKSIZE</a>      = 1 &lt;&lt; 7,</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">   71</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">PARAM_MATRIX</a>         = 1 &lt;&lt; 6,</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">   72</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">PARAM_OUTSHIFT</a>       = 1 &lt;&lt; 5,</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">   73</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">PARAM_QUANTSTEP</a>      = 1 &lt;&lt; 4,</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">   74</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a>            = 1 &lt;&lt; 3,</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">   75</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">PARAM_IIR</a>            = 1 &lt;&lt; 2,</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">   76</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">PARAM_HUFFOFFSET</a>     = 1 &lt;&lt; 1,</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2585186da3164e3778930f40ed14f3bd">   77</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2585186da3164e3778930f40ed14f3bd">PARAM_PRESENT</a>        = 1 &lt;&lt; 0,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;};</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_decoding_params.html">   80</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">   81</a></span>&#160;    uint16_t        <a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>;                  </div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">   82</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="hca__data_8h.html#a0ff97d47150055f4ecea7a66e2aa0b70">quant_step_size</a>[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];  </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">   84</a></span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a>    <a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">   86</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a>;       </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;} <a class="code" href="struct_decoding_params.html">DecodingParams</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="struct_best_offset.html">   89</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_best_offset.html">BestOffset</a> {</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">   90</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">offset</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">   91</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">   92</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">   93</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">min</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">   94</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">max</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a4ee3c1db0022c1b921a6f6ca2ee2f8bb">   95</a></span>&#160;} <a class="code" href="mlpenc_8c.html#a4ee3c1db0022c1b921a6f6ca2ee2f8bb">BestOffset</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">   97</a></span>&#160;<span class="preprocessor">#define HUFF_OFFSET_MIN    (-16384)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">   98</a></span>&#160;<span class="preprocessor">#define HUFF_OFFSET_MAX    ( 16383)</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">  101</a></span>&#160;<span class="preprocessor">#define NUM_CODEBOOKS       4</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html">  103</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a64b9db8831bc7c46927290fa48d172b3">  104</a></span>&#160;    <a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *<a class="code" href="struct_m_l_p_encode_context.html#a64b9db8831bc7c46927290fa48d172b3">avctx</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a274eaf95a83e677a491e81050c4c85b8">  106</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#a274eaf95a83e677a491e81050c4c85b8">num_substreams</a>;         </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#af194e410d7a0ce2bba0a328c96cebffa">  108</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#af194e410d7a0ce2bba0a328c96cebffa">num_channels</a>;   </div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a2bf26041a5fde019d43a842f92b48e90">  111</a></span>&#160;    <span class="keywordtype">int</span>             coded_sample_fmt [2];   </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a0a4c23fe7fa7732fc1b1fcca69362cc0">  112</a></span>&#160;    <span class="keywordtype">int</span>             coded_sample_rate[2];   </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a9f32bf88165b4d79d2fbd805328128de">  113</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#a9f32bf88165b4d79d2fbd805328128de">coded_peak_bitrate</a>;     </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ae5a70a371d0ef5ea6fb067341dc64186">  115</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#ae5a70a371d0ef5ea6fb067341dc64186">flags</a>;                  </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">/* channel_meaning */</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ad72f983320e0950553fb9f8e33ceeec5">  118</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#ad72f983320e0950553fb9f8e33ceeec5">substream_info</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ae89f1598194712ba28f974c597e801e8">  119</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#ae89f1598194712ba28f974c597e801e8">fs</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ac59f8c1f22373b77c8b49df6b739c629">  120</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#ac59f8c1f22373b77c8b49df6b739c629">wordlength</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a80701f4fa8e808b62dacf6197d0939ae">  121</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#a80701f4fa8e808b62dacf6197d0939ae">channel_occupancy</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a4d586856b2db440caf91cd4119c79e5c">  122</a></span>&#160;    <span class="keywordtype">int</span>             <a class="code" href="struct_m_l_p_encode_context.html#a4d586856b2db440caf91cd4119c79e5c">summary_info</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a43cd94d72bae3ced0411224fd961b905">  124</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#a43cd94d72bae3ced0411224fd961b905">inout_buffer</a>;           </div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a5af7fd4dcdd4573018ae7b92a88b2b76">  125</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#a5af7fd4dcdd4573018ae7b92a88b2b76">major_inout_buffer</a>;     </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#af01c07a0f573f967f15d2fd55a2f657c">  126</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#af01c07a0f573f967f15d2fd55a2f657c">write_buffer</a>;           </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#afd8bcc14f185df0da54d7a7ef038f1c7">  127</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#afd8bcc14f185df0da54d7a7ef038f1c7">sample_buffer</a>;          </div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ad845d83b0e2e7c6f86c50bc215a3039c">  128</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#ad845d83b0e2e7c6f86c50bc215a3039c">major_scratch_buffer</a>;   </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ae97ff22b0cc6909b1e21e38492bd4286">  129</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#ae97ff22b0cc6909b1e21e38492bd4286">last_frame</a>;             </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a29ee75feb3d5bfd3ed4da74b00b02f4e">  131</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#a29ee75feb3d5bfd3ed4da74b00b02f4e">lpc_sample_buffer</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ae43c4ca0e730dc56b31bc84e52806798">  133</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#ae43c4ca0e730dc56b31bc84e52806798">major_number_of_frames</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ac42354cc9d851a56630a23ae607f06fd">  134</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#ac42354cc9d851a56630a23ae607f06fd">next_major_number_of_frames</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a6d30ed1bc96209ff8eace10a3219cc6a">  136</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a6d30ed1bc96209ff8eace10a3219cc6a">major_frame_size</a>;       </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a856ed0d4a5d72a4267e232c68382edf4">  137</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a856ed0d4a5d72a4267e232c68382edf4">next_major_frame_size</a>;  </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aee0fdb96046aff2534d7c5589bbe25fd">  139</a></span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>        *<a class="code" href="struct_m_l_p_encode_context.html#aee0fdb96046aff2534d7c5589bbe25fd">lossless_check_data</a>;    </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a84bc3db66b78daf5d880d82cc0a86086">  141</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>   *<a class="code" href="struct_m_l_p_encode_context.html#a84bc3db66b78daf5d880d82cc0a86086">max_output_bits</a>;        </div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a71036f5870d060959d20867c8997f36c">  142</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>   *<a class="code" href="struct_m_l_p_encode_context.html#a71036f5870d060959d20867c8997f36c">frame_size</a>;             </div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a50775a499308ee70072d926a730a884d">  143</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a50775a499308ee70072d926a730a884d">frame_index</a>;            </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a9038f74538657b1fc61c91ad232cf753">  145</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a9038f74538657b1fc61c91ad232cf753">one_sample_buffer_size</a>; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ab0f9de69c607b3706484d358d56e0384">  147</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#ab0f9de69c607b3706484d358d56e0384">max_restart_interval</a>;   </div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aea8b3610a27921ac0f21116f23240960">  148</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#aea8b3610a27921ac0f21116f23240960">min_restart_interval</a>;   </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aeffdb610f4d46b0655cdb5f687183c25">  149</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#aeffdb610f4d46b0655cdb5f687183c25">restart_intervals</a>;      </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a996d5bda0f57839f6f32bbecfeeded34">  151</a></span>&#160;    uint16_t        <a class="code" href="struct_m_l_p_encode_context.html#a996d5bda0f57839f6f32bbecfeeded34">timestamp</a>;              </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a0fea16a73eb04bf213d06b085dbc0cad">  152</a></span>&#160;    uint16_t        <a class="code" href="struct_m_l_p_encode_context.html#a0fea16a73eb04bf213d06b085dbc0cad">dts</a>;                    </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ab7bc15bb7898854fbb06875198d65457">  154</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_m_l_p_encode_context.html#ab7bc15bb7898854fbb06875198d65457">channel_arrangement</a>;    </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aac1b49b90997f9d1c81f0b012fe989e2">  156</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_m_l_p_encode_context.html#aac1b49b90997f9d1c81f0b012fe989e2">ch_modifier_thd0</a>;       </div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a12b91e63caee33e97021e16561e5986e">  157</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_m_l_p_encode_context.html#a12b91e63caee33e97021e16561e5986e">ch_modifier_thd1</a>;       </div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a53741bae58021bcaa25abda2f52d2d2c">  158</a></span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a>         <a class="code" href="struct_m_l_p_encode_context.html#a53741bae58021bcaa25abda2f52d2d2c">ch_modifier_thd2</a>;       </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ab7dc9ecc7b8f38ae042f5a6b97bab0ef">  160</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    seq_size  [<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>];</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a2aefb0f437b0dd4a9e0b619703eb6d3e">  161</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    seq_offset[<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>];</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ae981380122206671931315cdc5c96e09">  162</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#ae981380122206671931315cdc5c96e09">sequence_size</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a590657e7d9e4a3daad01498bb903a35a">  164</a></span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a>  *<a class="code" href="struct_m_l_p_encode_context.html#a590657e7d9e4a3daad01498bb903a35a">channel_params</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a05df6db6a93ff33cffc144c4b74d1b34">  166</a></span>&#160;    <a class="code" href="struct_best_offset.html">BestOffset</a>      best_offset[<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>+1][<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>][<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>];</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ab676e56d69dbee0bf6c11fd98863d8c2">  168</a></span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *<a class="code" href="struct_m_l_p_encode_context.html#ab676e56d69dbee0bf6c11fd98863d8c2">decoding_params</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a972c33d4eea92c455d4d48c29c4b95b7">  169</a></span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>   restart_header [<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>];</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a7106f12528445fd7537da377abef4956">  171</a></span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a>   major_channel_params[<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>+1][<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];       </div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a10995ea889bdfbd76a749bbdc76e97ff">  172</a></span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a>  major_decoding_params[<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>+1][<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>];    </div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a374ec9500db64160f08cc7cfd6fe87e2">  173</a></span>&#160;    <span class="keywordtype">int</span>             major_params_changed[<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>+1][<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>];     </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a6f650b7cee7b39adcb2ec9d0d54e07e6">  175</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a6f650b7cee7b39adcb2ec9d0d54e07e6">major_cur_subblock_index</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a8942a2b6e3dffe75e52e4d61e62579f4">  176</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a8942a2b6e3dffe75e52e4d61e62579f4">major_filter_state_subblock</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a6e8dad89135a2967ab61108797173aa7">  177</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a6e8dad89135a2967ab61108797173aa7">major_number_of_subblocks</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a897195771ee3502b6504af84ff49a3d7">  179</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a4ee3c1db0022c1b921a6f6ca2ee2f8bb">BestOffset</a>    (*cur_best_offset)[<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>];</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ae088e57c48595c7449bd66d36ab1fa28">  180</a></span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a>  *<a class="code" href="struct_m_l_p_encode_context.html#ae088e57c48595c7449bd66d36ab1fa28">cur_channel_params</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a51b634d3a0c2af97dd616b1d89021ed8">  181</a></span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *<a class="code" href="struct_m_l_p_encode_context.html#a51b634d3a0c2af97dd616b1d89021ed8">cur_decoding_params</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#afde2196b48e246b9fa24d05fe0540ae0">  182</a></span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>  *<a class="code" href="struct_m_l_p_encode_context.html#afde2196b48e246b9fa24d05fe0540ae0">cur_restart_header</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ac096b754ef76569d2b1e5a707b87bdad">  184</a></span>&#160;    <a class="code" href="struct_audio_frame_queue.html">AudioFrameQueue</a> <a class="code" href="struct_m_l_p_encode_context.html#ac096b754ef76569d2b1e5a707b87bdad">afq</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">/* Analysis stage. */</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ab8c26cd536d066bea01a7fad8db23117">  187</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#ab8c26cd536d066bea01a7fad8db23117">starting_frame_index</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a2bcd88825ff723c7b938c7da6ec2fb9d">  188</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a2bcd88825ff723c7b938c7da6ec2fb9d">number_of_frames</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aa1622cf49b3b13c542195ef900ce4603">  189</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#aa1622cf49b3b13c542195ef900ce4603">number_of_samples</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aacf0b10c7b2a833098f98a0246ee5ceb">  190</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#aacf0b10c7b2a833098f98a0246ee5ceb">number_of_subblocks</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aeee3677d59de3ee0a6b3d870ffd2becf">  191</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#aeee3677d59de3ee0a6b3d870ffd2becf">seq_index</a>;              </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a20a35f22ef020f90d8422ddb47c712d0">  193</a></span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a>  *<a class="code" href="struct_m_l_p_encode_context.html#a20a35f22ef020f90d8422ddb47c712d0">prev_channel_params</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#aa891019c5591cc265a3e7bb9f00170ae">  194</a></span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *<a class="code" href="struct_m_l_p_encode_context.html#aa891019c5591cc265a3e7bb9f00170ae">prev_decoding_params</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a1e4f6afaf3b4280aea964d663aa22914">  196</a></span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a>  *<a class="code" href="struct_m_l_p_encode_context.html#a1e4f6afaf3b4280aea964d663aa22914">seq_channel_params</a>;</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ad62343931bea10ed8509b70dc0deba70">  197</a></span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *<a class="code" href="struct_m_l_p_encode_context.html#ad62343931bea10ed8509b70dc0deba70">seq_decoding_params</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#a8a26f78d9dc2ea0da0604805c52f765c">  199</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="struct_m_l_p_encode_context.html#a8a26f78d9dc2ea0da0604805c52f765c">max_codebook_search</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="struct_m_l_p_encode_context.html#ab969e677cedd6fc7c73051d7cb86e6b4">  201</a></span>&#160;    <a class="code" href="struct_l_p_c_context.html">LPCContext</a>      <a class="code" href="struct_m_l_p_encode_context.html#ab969e677cedd6fc7c73051d7cb86e6b4">lpc_ctx</a>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;} <a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ac19a300afd930e864b35e1a3e4e24e9b">  204</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_channel_params.html">ChannelParams</a>   <a class="code" href="mlpenc_8c.html#ac19a300afd930e864b35e1a3e4e24e9b">restart_channel_params</a>[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a7aaba87cd747f76d39080abd328255cc">  205</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_decoding_params.html">DecodingParams</a>  <a class="code" href="mlpenc_8c.html#a7aaba87cd747f76d39080abd328255cc">restart_decoding_params</a>[<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>];</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a6cf2c9926e18b30818f62b5248ce804b">  206</a></span>&#160;<span class="keyword">static</span> <a class="code" href="struct_best_offset.html">BestOffset</a>      <a class="code" href="mlpenc_8c.html#a6cf2c9926e18b30818f62b5248ce804b">restart_best_offset</a>[<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>] = {{0}};</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a7c1e9a6b17964df93ebe86a8909ac050">  208</a></span>&#160;<span class="preprocessor">#define SYNC_MAJOR      0xf8726f</span></div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1a4e6d404a99ebe461877524fa2a5a2f">  209</a></span>&#160;<span class="preprocessor">#define MAJOR_SYNC_INFO_SIGNATURE   0xB752</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a9b46ed007a5e12da14737c27a474d2d6">  211</a></span>&#160;<span class="preprocessor">#define SYNC_MLP        0xbb</span></div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a618af9203a7a876411cb216cb7f55c7e">  212</a></span>&#160;<span class="preprocessor">#define SYNC_TRUEHD     0xba</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">/* must be set for DVD-A */</span></div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ae2ba46cb9293621cc994fb0a989d3bd0">  215</a></span>&#160;<span class="preprocessor">#define FLAGS_DVDA      0x4000</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/* FIFO delay must be constant */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a4ad88e889fcd7ffb9dfc58666d1ecf72">  217</a></span>&#160;<span class="preprocessor">#define FLAGS_CONST     0x8000</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2a7c31a8c82231203e4546dee7969199">  219</a></span>&#160;<span class="preprocessor">#define SUBSTREAM_INFO_MAX_2_CHAN   0x01</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af25623f9cfd114e6a630c73b872c8567">  220</a></span>&#160;<span class="preprocessor">#define SUBSTREAM_INFO_HIGH_RATE    0x02</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a005e38236084f5660e836af4d76f37b6">  221</a></span>&#160;<span class="preprocessor">#define SUBSTREAM_INFO_ALWAYS_SET   0x04</span></div>
<div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#acf775fc5a80fecd52a5fc0057f818e99">  222</a></span>&#160;<span class="preprocessor">#define SUBSTREAM_INFO_2_SUBSTREAMS 0x08</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/****************************************************************************</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> ************ Functions that copy, clear, or compare parameters *************</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ac3861755d77e3b51bef8b2052f7182d6">  231</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#ac3861755d77e3b51bef8b2052f7182d6">compare_filter_params</a>(<span class="keyword">const</span> <a class="code" href="struct_channel_params.html">ChannelParams</a> *prev_cp, <span class="keyword">const</span> <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_filter_params.html">FilterParams</a> *prev = &amp;prev_cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_filter_params.html">FilterParams</a> *<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a> = &amp;cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">order</a> != <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (!prev-&gt;<a class="code" href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">order</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_filter_params.html#a7e8dbd5e12563e9f72b4a725e4ca7a21">shift</a> != <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;shift)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordflow">if</span> (prev_cp-&gt;<a class="code" href="struct_channel_params.html#adfd19a61dd2a0c35040d903bb8bd3ff8">coeff</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] != cp-&gt;<a class="code" href="struct_channel_params.html#adfd19a61dd2a0c35040d903bb8bd3ff8">coeff</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#acf9d31c3b5b644148e1abad37999faac">  256</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#acf9d31c3b5b644148e1abad37999faac">compare_matrix_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keyword">const</span> <a class="code" href="struct_matrix_params.html">MatrixParams</a> *prev, <span class="keyword">const</span> <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, mat;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a> != mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (!prev-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel &lt;= rh-&gt;</a>max_channel; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] != mp-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>])</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">for</span> (mat = 0; mat &lt; mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>; mat++) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[mat] != mp-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[mat])</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[mat][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] != mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[mat][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>])</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a6ef81b53ba7f4448aa1b3486cdbc6120">  286</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a6ef81b53ba7f4448aa1b3486cdbc6120">compare_decoding_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;{</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *prev = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_decoding_params;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *prev_mp = &amp;prev-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ch;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">int</span> retval = 0;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> != dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22afe96eccbd74b7908808dc8e6ae94ae4e">PARAM_PRESENCE_FLAGS</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a> != dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">PARAM_BLOCKSIZE</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mlpenc_8c.html#acf9d31c3b5b644148e1abad37999faac">compare_matrix_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, prev_mp, mp))</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">PARAM_MATRIX</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">for</span> (ch = 0; ch &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">max_matrix_channel</a>; ch++)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (prev_mp-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[ch] != mp-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[ch]) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">PARAM_OUTSHIFT</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">for</span> (ch = 0; ch &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>; ch++)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[ch] != dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[ch]) {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">PARAM_QUANTSTEP</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">for</span> (ch = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; ch &lt;= rh-&gt;max_channel; ch++) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *prev_cp = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_channel_params[ch];</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[ch];</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">if</span> (!(retval &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a>) &amp;&amp;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <a class="code" href="mlpenc_8c.html#ac3861755d77e3b51bef8b2052f7182d6">compare_filter_params</a>(prev_cp, cp, <a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>))</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> (!(retval &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">PARAM_IIR</a>) &amp;&amp;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <a class="code" href="mlpenc_8c.html#ac3861755d77e3b51bef8b2052f7182d6">compare_filter_params</a>(prev_cp, cp, <a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">PARAM_IIR</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">if</span> (prev_cp-&gt;<a class="code" href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">huff_offset</a> != cp-&gt;<a class="code" href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">huff_offset</a>)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            retval |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">PARAM_HUFFOFFSET</a>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> (prev_cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a>    != cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a>  ||</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            prev_cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a>   != cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a>  )</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            retval |= 0x1;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> retval;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a33c7002b62ebad30385111b997c84442">  340</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a33c7002b62ebad30385111b997c84442">copy_filter_params</a>(<a class="code" href="struct_channel_params.html">ChannelParams</a> *dst_cp, <a class="code" href="struct_channel_params.html">ChannelParams</a> *src_cp, <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="struct_filter_params.html">FilterParams</a> *dst = &amp;dst_cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="struct_filter_params.html">FilterParams</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a> = &amp;src_cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> order;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    dst-&gt;<a class="code" href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">order</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;order;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">order</a>) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        dst-&gt;<a class="code" href="struct_filter_params.html#a7e8dbd5e12563e9f72b4a725e4ca7a21">shift</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;shift;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        dst-&gt;<a class="code" href="struct_filter_params.html#ab827685738db818a38388f86d6bf24db">coeff_shift</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;coeff_shift;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        dst-&gt;<a class="code" href="struct_filter_params.html#ab003690342e3bd2acb48db87f9c1ef41">coeff_bits</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;coeff_bits;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">for</span> (order = 0; order &lt; dst-&gt;<a class="code" href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">order</a>; order++)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        dst_cp-&gt;<a class="code" href="struct_channel_params.html#adfd19a61dd2a0c35040d903bb8bd3ff8">coeff</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>][order] = src_cp-&gt;<a class="code" href="struct_channel_params.html#adfd19a61dd2a0c35040d903bb8bd3ff8">coeff</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>][order];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ae792a23f86ad46a37876a00e3d270a47">  359</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#ae792a23f86ad46a37876a00e3d270a47">copy_matrix_params</a>(<a class="code" href="struct_matrix_params.html">MatrixParams</a> *dst, <a class="code" href="struct_matrix_params.html">MatrixParams</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    dst-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;count;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, count;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            dst-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;fbits[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            dst-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;shift[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">for</span> (count = 0; count &lt; <a class="code" href="mlp_8h.html#a7f061e6aa7a60fed59622b2b760ea619">MAX_MATRICES</a>; count++)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                dst-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[count][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;coeff[count][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">for</span> (count = 0; count &lt; <a class="code" href="mlp_8h.html#a7f061e6aa7a60fed59622b2b760ea619">MAX_MATRICES</a>; count++)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            dst-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[count] = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;outch[count];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ac8a43d5b1b486c831ca3365a298b2547">  380</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#ac8a43d5b1b486c831ca3365a298b2547">copy_restart_frame_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_subblocks; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_decoding_params + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) + substr;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="mlpenc_8c.html#ae792a23f86ad46a37876a00e3d270a47">copy_matrix_params</a>(&amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params-&gt;matrix_params);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_channel_params + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params-&gt;quant_step_size[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>.<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params-&gt;matrix_params.shift[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>)</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> = 0; <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> &lt; <a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>; <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>++)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                    <a class="code" href="mlpenc_8c.html#a33c7002b62ebad30385111b997c84442">copy_filter_params</a>(cp, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>], <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a29c5e6675bc969f90bab35b7c67cc38f">  406</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a29c5e6675bc969f90bab35b7c67cc38f">clear_decoding_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_decoding_params.html">DecodingParams</a> decoding_params[<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>])</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160; </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = &amp;decoding_params[substr];</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a>   = 0xff;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>              = 8;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        memset(&amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a> , 0, <span class="keyword">sizeof</span>(<a class="code" href="struct_matrix_params.html">MatrixParams</a>       ));</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        memset(dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>, 0, <span class="keyword">sizeof</span>(dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;}</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a93760b2068a5a21f047cc6778e343316">  422</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a93760b2068a5a21f047cc6778e343316">clear_channel_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_channel_params.html">ChannelParams</a> channel_params[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>])</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = &amp;channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        memset(&amp;cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>, 0, <span class="keyword">sizeof</span>(cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="comment">/* Default audio coding is 24-bit raw PCM. */</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        cp-&gt;<a class="code" href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">huff_offset</a>      =  0;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a>         =  0;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a>        = 24;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a4a3f1d9fde15404017f479023dc6dbbb">  439</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a4a3f1d9fde15404017f479023dc6dbbb">default_decoding_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;     <a class="code" href="struct_decoding_params.html">DecodingParams</a> decoding_params[<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>])</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="mlpenc_8c.html#a29c5e6675bc969f90bab35b7c67cc38f">clear_decoding_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, decoding_params);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = &amp;decoding_params[substr];</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> param_presence_flags = 0;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">PARAM_BLOCKSIZE</a>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">PARAM_MATRIX</a>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">PARAM_OUTSHIFT</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">PARAM_QUANTSTEP</a>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">/*      param_presence_flags |= PARAM_IIR; */</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">PARAM_HUFFOFFSET</a>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        param_presence_flags |= <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2585186da3164e3778930f40ed14f3bd">PARAM_PRESENT</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> = param_presence_flags;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">/****************************************************************************/</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">  468</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <span class="keyword">inline</span> <a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(<span class="keywordtype">int</span> number)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (number &lt; -1)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        number++;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a>(<a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(number)) + 1 + !!number;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9e">  476</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9e">InputBitDepth</a> {</div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9eabb0eee326b181eb02d5c284fc424ffeb">  477</a></span>&#160;    <a class="code" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9eabb0eee326b181eb02d5c284fc424ffeb">BITS_16</a>,</div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea65a9811f1de5cf90bc7739464ec66969">  478</a></span>&#160;    <a class="code" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea65a9811f1de5cf90bc7739464ec66969">BITS_20</a>,</div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea275067f048fbba39d65f9245a7ba37b2">  479</a></span>&#160;    <a class="code" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea275067f048fbba39d65f9245a7ba37b2">BITS_24</a>,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;};</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a7b6477a38ffb31ed091542cb8db1a3f0">  482</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a7b6477a38ffb31ed091542cb8db1a3f0">mlp_peak_bitrate</a>(<span class="keywordtype">int</span> peak_bitrate, <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> ((peak_bitrate &lt;&lt; 4) - 8) / <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a9aa2838f63989346b3cef049c12016eb">  487</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a9aa2838f63989346b3cef049c12016eb">mlp_encode_init</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;{</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr, <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sum = 0;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx = avctx;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">switch</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">case</span> 44100 &lt;&lt; 0:</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>         = 40  &lt;&lt; 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0] = 0x08 + 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                   = 0x08 + 1;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">case</span> 44100 &lt;&lt; 1:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>         = 40  &lt;&lt; 1;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0] = 0x08 + 1;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                   = 0x0C + 1;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">case</span> 44100 &lt;&lt; 2:</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info      |= <a class="code" href="mlpenc_8c.html#af25623f9cfd114e6a630c73b872c8567">SUBSTREAM_INFO_HIGH_RATE</a>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>         = 40  &lt;&lt; 2;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0] = 0x08 + 2;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                   = 0x10 + 1;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">case</span> 48000 &lt;&lt; 0:</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>         = 40  &lt;&lt; 0;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0] = 0x00 + 0;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                   = 0x08 + 2;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">case</span> 48000 &lt;&lt; 1:</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>         = 40  &lt;&lt; 1;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0] = 0x00 + 1;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                   = 0x0C + 2;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">case</span> 48000 &lt;&lt; 2:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info      |= <a class="code" href="mlpenc_8c.html#af25623f9cfd114e6a630c73b872c8567">SUBSTREAM_INFO_HIGH_RATE</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>         = 40  &lt;&lt; 2;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0] = 0x00 + 2;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                   = 0x10 + 2;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported sample rate %d. Supported &quot;</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                            <span class="stringliteral">&quot;sample rates are 44100, 88200, 176400, 48000, &quot;</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                            <span class="stringliteral">&quot;96000, and 192000.\n&quot;</span>, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[1] = -1 &amp; 0xf;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">/* TODO Keep count of bitrate and calculate real value. */</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_peak_bitrate = <a class="code" href="mlpenc_8c.html#a7b6477a38ffb31ed091542cb8db1a3f0">mlp_peak_bitrate</a>(9600000, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">sample_rate</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="comment">/* TODO support more channels. */</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a> &gt; 2) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;               <span class="stringliteral">&quot;Only mono and stereo are supported at the moment.\n&quot;</span>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info |= <a class="code" href="mlpenc_8c.html#a005e38236084f5660e836af4d76f37b6">SUBSTREAM_INFO_ALWAYS_SET</a>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a> &lt;= 2) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info |= <a class="code" href="mlpenc_8c.html#a2a7c31a8c82231203e4546dee7969199">SUBSTREAM_INFO_MAX_2_CHAN</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">switch</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">sample_fmt</a>) {</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>:</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_fmt[0] = <a class="code" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9eabb0eee326b181eb02d5c284fc424ffeb">BITS_16</a>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;wordlength = 16;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = 16;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">/* TODO 20 bits: */</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ab7ae6bb6718c07cd316778783a57a63b">AV_SAMPLE_FMT_S32</a>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_fmt[0] = <a class="code" href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea275067f048fbba39d65f9245a7ba37b2">BITS_24</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;wordlength = 24;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">bits_per_raw_sample</a> = 24;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Sample format not supported. &quot;</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;               <span class="stringliteral">&quot;Only 16- and 24-bit samples are supported.\n&quot;</span>);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_fmt[1] = -1 &amp; 0xf;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dts = -avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a> + 2; <span class="comment">/* +2 noise channels */</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;one_sample_buffer_size = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">/* TODO Let user pass major header interval as parameter. */</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval = <a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_codebook_search = 3;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval = <a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval / <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">/* TODO Let user pass parameters for LPC filter. */</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a> * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; </div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_sample_buffer = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_sample_buffer) {</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;               <span class="stringliteral">&quot;Not enough memory for buffering samples.\n&quot;</span>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;one_sample_buffer_size * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_scratch_buffer = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>));</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_scratch_buffer) {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;               <span class="stringliteral">&quot;Not enough memory for buffering samples.\n&quot;</span>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer = <a class="code" href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>, <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;               <span class="stringliteral">&quot;Not enough memory for buffering samples.\n&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="mlp_8c.html#ad002e58196989e7e2275b97cf5f233f0">ff_mlp_init_crc</a>();</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams = 1; <span class="comment">// TODO: change this after adding multi-channel support for TrueHD</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e">AV_CODEC_ID_MLP</a>) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="comment">/* MLP */</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">switch</span>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a>) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a>:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a>:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gad0badd9c9984bc74290f26c2edfdfe44">AV_CH_LAYOUT_2_1</a>:</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#ga0982ce29eced939dfcfb5b52416810ae">AV_CH_LAYOUT_QUAD</a>:</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 3; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#ga03f59e18b3598aa0cab9ed675c287a36">AV_CH_LAYOUT_2POINT1</a>:</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 4; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#ga625aec7f2285dc35e3ed801e91889564">AV_CH_LAYOUT_SURROUND</a>:</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 7; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#ga0bcbe41f2d3214b0a3fd2698ebe0caf9">AV_CH_LAYOUT_4POINT0</a>:</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 8; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gab057e9fd36b7e929d000d663badbafc6">AV_CH_LAYOUT_5POINT0_BACK</a>:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 9; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gae3fc8d83d40cfbd4910b16d526beb294">AV_CH_LAYOUT_3POINT1</a>:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 10; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gacc48c498c05b3b3c2549f715ba4f1d1b">AV_CH_LAYOUT_4POINT1</a>:</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 11; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gae9da5d6069701241a22f3af19b152662">AV_CH_LAYOUT_5POINT1_BACK</a>:</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 12; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported channel arrangement\n&quot;</span>);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a32379cc371463b235d54235d4af06a15">flags</a> = <a class="code" href="mlpenc_8c.html#ae2ba46cb9293621cc994fb0a989d3bd0">FLAGS_DVDA</a>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_occupancy = <a class="code" href="mlp_8c.html#a90b20dc905cf26ea5e0ea4128b7228e2">ff_mlp_ch_info</a>[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement].<a class="code" href="struct_channel_information.html#a95c7d8e65ff1a8f5bfaad8a9143ab698">channel_occupancy</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;summary_info      = <a class="code" href="mlp_8c.html#a90b20dc905cf26ea5e0ea4128b7228e2">ff_mlp_ch_info</a>[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement].<a class="code" href="struct_channel_information.html#a09a1c9c13b53a367381d38fc03370eaf">summary_info</a>     ;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="comment">/* TrueHD */</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        <span class="keywordflow">switch</span>(avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">channel_layout</a>) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a>:</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd0    = 0;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd1    = 0;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd2    = 0;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 1;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gab057e9fd36b7e929d000d663badbafc6">AV_CH_LAYOUT_5POINT0_BACK</a>:</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd0    = 1;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd1    = 1;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd2    = 1;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 11;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group__channel__mask__c.html#gae9da5d6069701241a22f3af19b152662">AV_CH_LAYOUT_5POINT1_BACK</a>:</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd0    = 2;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd1    = 1;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd2    = 2;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement = 15;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Unsupported channel arrangement\n&quot;</span>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a32379cc371463b235d54235d4af06a15">flags</a> = 0;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_occupancy = 0;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;summary_info = 0;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <a class="code" href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a>) * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_output_bits = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_output_bits)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160; </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>)</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lossless_check_data = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lossless_check_data)</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_offset[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = sum;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_size  [<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>] = ((<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1) * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval) + 1;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        sum += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_size[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size = sum;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <span class="keyword">sizeof</span>(<a class="code" href="mlp_8h.html#a671e116a234ad12e096b39ae688232aa">ChannelParams</a>)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;         * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_params = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_params) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;               <span class="stringliteral">&quot;Not enough memory for analysis context.\n&quot;</span>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    }</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <span class="keyword">sizeof</span>(<a class="code" href="struct_decoding_params.html">DecodingParams</a>)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoding_params = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoding_params) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;               <span class="stringliteral">&quot;Not enough memory for analysis context.\n&quot;</span>);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_header [substr];</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="comment">/* TODO see if noisegen_seed is really worth it. */</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        rh-&gt;<a class="code" href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">noisegen_seed</a>      = 0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>        = 0;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>        = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a> - 1;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <span class="comment">/* FIXME: this works for 1 and 2 channels, but check for more */</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        rh-&gt;<a class="code" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">max_matrix_channel</a> = rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <a class="code" href="mlpenc_8c.html#a93760b2068a5a21f047cc6778e343316">clear_channel_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="mlpenc_8c.html#ac19a300afd930e864b35e1a3e4e24e9b">restart_channel_params</a>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="mlpenc_8c.html#a29c5e6675bc969f90bab35b7c67cc38f">clear_decoding_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="mlpenc_8c.html#a7aaba87cd747f76d39080abd328255cc">restart_decoding_params</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="lpc_8c.html#afdf45ba5b7f5dfd3fb7d54d1c24d9fb6">ff_lpc_init</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_ctx, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                    <a class="code" href="mlpenc_8c.html#a707273b0522bcff43b141c2bdf17ebd1">MLP_MAX_LPC_ORDER</a>, <a class="code" href="lpc_8h.html#a458f426f89affd4566f158738e5b3089aa83d535208a826f522a84594b6721c8c">FF_LPC_TYPE_LEVINSON</a>)) &lt; 0) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;               <span class="stringliteral">&quot;Not enough memory for LPC context.\n&quot;</span>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="audio__frame__queue_8c.html#a0332621646eb990bc4952d128cc788df">ff_af_queue_init</a>(avctx, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;afq);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160; </div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160; </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">/****************************************************************************</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"> ****************** Functions that write to the bitstream *******************</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1af5a78db98bafdf78cded47e960876c">  749</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a1af5a78db98bafdf78cded47e960876c">write_major_sync</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf, <span class="keywordtype">int</span> buf_size)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;{</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> pb;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;pb, buf, buf_size);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 24, <a class="code" href="mlpenc_8c.html#a7c1e9a6b17964df93ebe86a8909ac050">SYNC_MAJOR</a>               );</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e">AV_CODEC_ID_MLP</a>) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  8, <a class="code" href="mlpenc_8c.html#a9b46ed007a5e12da14737c27a474d2d6">SYNC_MLP</a>                 );</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_fmt [0]);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_fmt [1]);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0]);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[1]);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, 0                        ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, 0                        ); <span class="comment">/* multi_channel_type */</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  3, 0                        ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  5, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement );</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;codec_id == <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e">AV_CODEC_ID_TRUEHD</a>) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  8, <a class="code" href="mlpenc_8c.html#a618af9203a7a876411cb216cb7f55c7e">SYNC_TRUEHD</a>              );</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_sample_rate[0]);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, 0                        ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  2, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd0    );</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  2, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd1    );</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  5, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement );</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  2, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;ch_modifier_thd2    );</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 13, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_arrangement );</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 16, <a class="code" href="mlpenc_8c.html#a1a4e6d404a99ebe461877524fa2a5a2f">MAJOR_SYNC_INFO_SIGNATURE</a>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 16, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;<a class="code" href="struct_a_v_format_context.html#a32379cc371463b235d54235d4af06a15">flags</a>               );</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 16, 0                        ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  1, 1                        ); <span class="comment">/* is_vbr */</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 15, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;coded_peak_bitrate  );</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, 1                        ); <span class="comment">/* num_substreams */</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, 0x1                      ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">/* channel_meaning */</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  8, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info      );</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  5, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;fs                  );</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  5, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;wordlength          );</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  6, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_occupancy   );</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  3, 0                        ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 10, 0                        ); <span class="comment">/* speaker_layout */</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  3, 0                        ); <span class="comment">/* copy_protection */</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 16, 0x8080                   ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  7, 0                        ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  4, 0                        ); <span class="comment">/* source_format */</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb,  5, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;summary_info        );</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;pb);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="intreadwrite_8h.html#a472b33c46f8c8d08f484be15431a1598">AV_WL16</a>(buf+26, <a class="code" href="mlp_8c.html#a1308e53a78a308e2323e7f7ab5a3dab1">ff_mlp_checksum16</a>(buf, 26));</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ad39494079aad3a12ee4a98f5194bcf6a">  808</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#ad39494079aad3a12ee4a98f5194bcf6a">write_restart_header</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb)</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> lossless_check = <a class="code" href="mlp_8h.html#adc230b213bff6171c646f7a9e9feaa8a">xor_32_to_8</a>(rh-&gt;<a class="code" href="struct_restart_header.html#a4a41d4b9a770927a67c3224a22b44de1">lossless_check_data</a>);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start_count = <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(pb);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="struct_put_bit_context.html">PutBitContext</a> tmpb;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ch;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 14, 0x31ea                ); <span class="comment">/* TODO 0x31eb */</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 16, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;timestamp        );</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  4, rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>       );</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  4, rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>       );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  4, rh-&gt;<a class="code" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">max_matrix_channel</a>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  4, rh-&gt;<a class="code" href="struct_restart_header.html#ae6eea1db40b2af00111f4c28d60f7e04">noise_shift</a>       );</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 23, rh-&gt;<a class="code" href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">noisegen_seed</a>     );</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  4, 0                     ); <span class="comment">/* TODO max_shift */</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  5, rh-&gt;<a class="code" href="struct_restart_header.html#acd1cc2ff2eca785ac67865d8063a0711">max_huff_lsbs</a>     );</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  5, rh-&gt;<a class="code" href="struct_restart_header.html#aeaa3db722326cdc88a97d825d9b1174f">max_output_bits</a>   );</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  5, rh-&gt;<a class="code" href="struct_restart_header.html#aeaa3db722326cdc88a97d825d9b1174f">max_output_bits</a>   );</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  1, rh-&gt;<a class="code" href="struct_restart_header.html#a36aa2e91a666eb7bcd609f695f26a201">data_check_present</a>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  8, lossless_check        );</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 16, 0                     ); <span class="comment">/* ignored */</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">for</span> (ch = 0; ch &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">max_matrix_channel</a>; ch++)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 6, ch);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="comment">/* Data must be flushed for the checksum to be correct. */</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    tmpb = *pb;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;tmpb);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a> = <a class="code" href="mlp_8c.html#a6687aa64d48b134e173851b73fecd23a">ff_mlp_restart_checksum</a>(pb-&gt;<a class="code" href="struct_put_bit_context.html#a4e308202bcad896d017026fde899b4e6">buf</a>, <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(pb) - start_count);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb,  8, <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a>);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a06c8af2ad9394715e9c53c5b45c8be11">  845</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a06c8af2ad9394715e9c53c5b45c8be11">write_matrix_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb)</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;{</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mat;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 4, mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">for</span> (mat = 0; mat &lt; mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>; mat++) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 4, mp-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[mat]); <span class="comment">/* matrix_out_ch */</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 4, mp-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>[mat]);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0             ); <span class="comment">/* lsb_bypass */</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;            <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[mat][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>) {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> &gt;&gt;= 14 - mp-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>[mat];</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                <a class="code" href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a>(pb, mp-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>[mat] + 2, <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a58ece851e05194956d1d650ec5fa9595">  877</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a58ece851e05194956d1d650ec5fa9595">write_filter_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>)</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;{</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="struct_filter_params.html">FilterParams</a> *<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a> = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>].filter_params[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 4, <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order &gt; 0) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *fcoeff = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>].coeff[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 4, <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;shift      );</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 5, <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;coeff_bits );</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 3, <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;coeff_shift);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <a class="code" href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a>(pb, <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;coeff_bits, fcoeff[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &gt;&gt; <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;coeff_shift);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;        <span class="comment">/* TODO state data for IIR filter. */</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;}</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ac7bdaf490635f61491d4cb6b48f28947">  904</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#ac7bdaf490635f61491d4cb6b48f28947">write_decoding_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb,</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                                  <span class="keywordtype">int</span> params_changed)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;{</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ch;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> != <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2d0d2395974af174b50868a56471c9cf">PARAMS_DEFAULT</a> &amp;&amp;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        params_changed &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22afe96eccbd74b7908808dc8e6ae94ae4e">PARAM_PRESENCE_FLAGS</a>) {</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 8, dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">PARAM_BLOCKSIZE</a>) {</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">PARAM_BLOCKSIZE</a>) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 9, dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">PARAM_MATRIX</a>) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">PARAM_MATRIX</a>) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <a class="code" href="mlpenc_8c.html#a06c8af2ad9394715e9c53c5b45c8be11">write_matrix_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, pb);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        }</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    }</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">PARAM_OUTSHIFT</a>) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">PARAM_OUTSHIFT</a>) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            <span class="keywordflow">for</span> (ch = 0; ch &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">max_matrix_channel</a>; ch++)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                <a class="code" href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a>(pb, 4, mp-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[ch]);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">PARAM_QUANTSTEP</a>) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">PARAM_QUANTSTEP</a>) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;            <span class="keywordflow">for</span> (ch = 0; ch &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>; ch++)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 4, dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[ch]);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">for</span> (ch = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; ch &lt;= rh-&gt;max_channel; ch++) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[ch];</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; 0xF) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;            <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a>) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a>) {</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                    <a class="code" href="mlpenc_8c.html#a58ece851e05194956d1d650ec5fa9595">write_filter_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, pb, ch, <a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                }</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;            }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;            <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">PARAM_IIR</a>) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">PARAM_IIR</a>) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 1);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    <a class="code" href="mlpenc_8c.html#a58ece851e05194956d1d650ec5fa9595">write_filter_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, pb, ch, <a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                }</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            <span class="keywordflow">if</span> (dp-&gt;<a class="code" href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">param_presence_flags</a> &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">PARAM_HUFFOFFSET</a>) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                <span class="keywordflow">if</span> (params_changed       &amp; <a class="code" href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">PARAM_HUFFOFFSET</a>) {</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a> (pb,  1, 1);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                    <a class="code" href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a>(pb, 15, cp-&gt;<a class="code" href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">huff_offset</a>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                }</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;            <span class="keywordflow">if</span> (cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a> &gt; 0 &amp;&amp; cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a> &gt; 24) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid Huff LSBs\n&quot;</span>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            }</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 2, cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a> );</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 5, cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, 1, 0);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;}</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2859c5fea361645734e04235ea1f6bf9"> 1005</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a2859c5fea361645734e04235ea1f6bf9">write_block_data</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_put_bit_context.html">PutBitContext</a> *pb)</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;write_buffer;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> sign_huff_offset[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordtype">int</span> codebook_index      [<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordtype">int</span> lsb_bits            [<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, ch;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">for</span> (ch = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; ch &lt;= rh-&gt;max_channel; ch++) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[ch];</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keywordtype">int</span> sign_shift;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        lsb_bits        [ch] = cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a> - dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[ch];</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        codebook_index  [ch] = cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a>  - 1;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        sign_huff_offset[ch] = cp-&gt;<a class="code" href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">huff_offset</a>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        sign_shift = lsb_bits[ch] + (cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a> ? 2 - cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a> : -1);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <span class="keywordflow">if</span> (cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a> &gt; 0)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            sign_huff_offset[ch] -= 7 &lt;&lt; lsb_bits[ch];</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">/* Unsign if needed. */</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">if</span> (sign_shift &gt;= 0)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;            sign_huff_offset[ch] -= 1 &lt;&lt; sign_shift;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">for</span> (ch = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; ch &lt;= rh-&gt;max_channel; ch++) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = *sample_buffer++ &gt;&gt; dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[ch];</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> -= sign_huff_offset[ch];</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <span class="keywordflow">if</span> (codebook_index[ch] &gt;= 0) {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                <span class="keywordtype">int</span> vlc = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &gt;&gt; lsb_bits[ch];</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(pb, <a class="code" href="mlp_8c.html#a0594e83bffe3ae1fce48c34371f9b0e7">ff_mlp_huffman_tables</a>[codebook_index[ch]][vlc][1],</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                             <a class="code" href="mlp_8c.html#a0594e83bffe3ae1fce48c34371f9b0e7">ff_mlp_huffman_tables</a>[codebook_index[ch]][vlc][0]);</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <a class="code" href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a>(pb, lsb_bits[ch], <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        sample_buffer += 2; <span class="comment">/* noise channels */</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;write_buffer = sample_buffer;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;}</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a3248db0583651f3fcc879a96814a824f"> 1053</a></span>&#160;<span class="keyword">static</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mlpenc_8c.html#a3248db0583651f3fcc879a96814a824f">write_substrs</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf, <span class="keywordtype">int</span> buf_size,</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                              <span class="keywordtype">int</span> restart_frame,</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                              uint16_t substream_data_len[<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>])</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;{</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *lossless_check_data = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lossless_check_data;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> = 0;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    lossless_check_data += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cur_subblock_index = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_cur_subblock_index;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> num_subblocks = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_filter_state_subblock;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> subblock;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;        <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_header [substr];</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordtype">int</span> substr_restart_frame = restart_frame;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;        <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> <a class="code" href="vf__mcdeint_8c.html#acd3879b06d838d18d5675d7993080678">parity</a>, <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <a class="code" href="struct_put_bit_context.html">PutBitContext</a> pb, tmpb;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        <span class="keywordtype">int</span> params_changed;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header = rh;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <a class="code" href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a>(&amp;pb, buf, buf_size);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="keywordflow">for</span> (subblock = 0; subblock &lt;= num_subblocks; subblock++) {</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> subblock_index;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            subblock_index = cur_subblock_index++;</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_decoding_params[subblock_index][substr];</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_channel_params[subblock_index];</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            params_changed = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_params_changed[subblock_index][substr];</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160; </div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">if</span> (substr_restart_frame || params_changed) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 1, 1);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                <span class="keywordflow">if</span> (substr_restart_frame) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 1, 1);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                    <a class="code" href="mlpenc_8c.html#ad39494079aad3a12ee4a98f5194bcf6a">write_restart_header</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, &amp;pb);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    rh-&gt;<a class="code" href="struct_restart_header.html#a4a41d4b9a770927a67c3224a22b44de1">lossless_check_data</a> = 0;</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                    <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 1, 0);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                <a class="code" href="mlpenc_8c.html#ac7bdaf490635f61491d4cb6b48f28947">write_decoding_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, &amp;pb, params_changed);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 1, 0);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            }</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;            <a class="code" href="mlpenc_8c.html#a2859c5fea361645734e04235ea1f6bf9">write_block_data</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, &amp;pb);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 1, !substr_restart_frame);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            substr_restart_frame = 0;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, (-<a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;pb)) &amp; 15, 0);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        rh-&gt;<a class="code" href="struct_restart_header.html#a4a41d4b9a770927a67c3224a22b44de1">lossless_check_data</a> ^= *lossless_check_data++;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_frame == <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            <span class="comment">/* TODO find a sample and implement shorten_by. */</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;            <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 32, <a class="code" href="libxavs_8c.html#ad7b1875017b835e5558bae39b9cf7e69">END_OF_STREAM</a>);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;        <span class="comment">/* Data must be flushed for the checksum and parity to be correct. */</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        tmpb = pb;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;        <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;tmpb);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;        <a class="code" href="vf__mcdeint_8c.html#acd3879b06d838d18d5675d7993080678">parity</a>   = <a class="code" href="mlp_8c.html#ad080c68cd2fec6fcd6399781cd0a4970">ff_mlp_calculate_parity</a>(buf, <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;pb) &gt;&gt; 3) ^ 0xa9;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a> = <a class="code" href="mlp_8c.html#ae481302e6ec5b2704082f61b09a6135d">ff_mlp_checksum8</a>       (buf, <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;pb) &gt;&gt; 3);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 8, <a class="code" href="vf__mcdeint_8c.html#acd3879b06d838d18d5675d7993080678">parity</a>  );</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;        <a class="code" href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a>(&amp;pb, 8, <a class="code" href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;        <a class="code" href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a>(&amp;pb);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a> += <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;pb) &gt;&gt; 3;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        substream_data_len[substr] = <a class="code" href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a>;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        buf += <a class="code" href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a>(&amp;pb) &gt;&gt; 3;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_cur_subblock_index += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_filter_state_subblock + 1;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_filter_state_subblock = 0;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordflow">return</span> buf;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a5c914266af51e04ce8d75e774225efa6"> 1145</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a5c914266af51e04ce8d75e774225efa6">write_frame_headers</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="structframe__header.html">frame_header</a>,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *substream_headers, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> length,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                <span class="keywordtype">int</span> restart_frame,</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                                uint16_t substream_data_len[<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>])</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;{</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    uint16_t access_unit_header = 0;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    uint16_t parity_nibble = 0;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    parity_nibble  = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dts;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    parity_nibble ^= length;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        uint16_t substr_hdr = 0;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        substr_hdr |= (0 &lt;&lt; 15); <span class="comment">/* extraword */</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        substr_hdr |= (!restart_frame &lt;&lt; 14); <span class="comment">/* !restart_frame */</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;        substr_hdr |= (1 &lt;&lt; 13); <span class="comment">/* checkdata */</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;        substr_hdr |= (0 &lt;&lt; 12); <span class="comment">/* ??? */</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        substr_hdr |= (substream_data_len[substr] / 2) &amp; 0x0FFF;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <a class="code" href="intreadwrite_8h.html#ae4d1eaaee02fc6c4672f59dcf7255286">AV_WB16</a>(substream_headers, substr_hdr);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        parity_nibble ^= *substream_headers++;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        parity_nibble ^= *substream_headers++;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    parity_nibble ^= parity_nibble &gt;&gt; 8;</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    parity_nibble ^= parity_nibble &gt;&gt; 4;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    parity_nibble &amp;= 0xF;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    access_unit_header |= (parity_nibble ^ 0xF) &lt;&lt; 12;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    access_unit_header |= length &amp; 0xFFF;</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="intreadwrite_8h.html#ae4d1eaaee02fc6c4672f59dcf7255286">AV_WB16</a>(<a class="code" href="structframe__header.html">frame_header</a>  , access_unit_header);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <a class="code" href="intreadwrite_8h.html#ae4d1eaaee02fc6c4672f59dcf7255286">AV_WB16</a>(<a class="code" href="structframe__header.html">frame_header</a>+2, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dts          );</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;}</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#adf283efe75a88d83df17b0262662387e"> 1184</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#adf283efe75a88d83df17b0262662387e">write_access_unit</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                      <span class="keywordtype">int</span> buf_size, <span class="keywordtype">int</span> restart_frame)</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;{</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    uint16_t substream_data_len[<a class="code" href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a>];</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *buf1, *buf0 = buf;</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordtype">int</span> total_length;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span> (buf_size &lt; 4)</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="comment">/* Frame header will be written at the end. */</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    buf      += 4;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    buf_size -= 4;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <span class="keywordflow">if</span> (restart_frame) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        <span class="keywordflow">if</span> (buf_size &lt; 28)</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(EINVAL);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <a class="code" href="mlpenc_8c.html#a1af5a78db98bafdf78cded47e960876c">write_major_sync</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, buf, buf_size);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        buf      += 28;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        buf_size -= 28;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    buf1 = buf;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="comment">/* Substream headers will be written at the end. */</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        buf      += 2;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        buf_size -= 2;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    buf = <a class="code" href="mlpenc_8c.html#a3248db0583651f3fcc879a96814a824f">write_substrs</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, buf, buf_size, restart_frame, substream_data_len);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    total_length = buf - buf0;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <a class="code" href="mlpenc_8c.html#a5c914266af51e04ce8d75e774225efa6">write_frame_headers</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, buf0, buf1, total_length / 2, restart_frame, substream_data_len);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="keywordflow">return</span> total_length;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">/****************************************************************************</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment"> ****************** Functions that input data to context ********************</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a38265e628e7a134a88f22d49234d381d"> 1232</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a38265e628e7a134a88f22d49234d381d">input_data_internal</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                                <span class="keywordtype">int</span> is24)</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;{</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *lossless_check_data = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lossless_check_data;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *samples_32 = (<span class="keyword">const</span> <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *) <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keyword">const</span> int16_t *samples_16 = (<span class="keyword">const</span> int16_t *) <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    lossless_check_data += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160; </div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_header [substr];</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> temp_lossless_check_data = 0;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        uint32_t greatest = 0;</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                uint32_t abs_sample;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = is24 ? *samples_32++ &gt;&gt; 8 : *samples_16++ * 256;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                <span class="comment">/* TODO Find out if number_sbits can be used for negative values. */</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                abs_sample = <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>);</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                <span class="keywordflow">if</span> (greatest &lt; abs_sample)</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                    greatest = abs_sample;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160; </div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                temp_lossless_check_data ^= (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &amp; 0x00ffffff) &lt;&lt; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                *sample_buffer++ = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            }</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            sample_buffer += 2; <span class="comment">/* noise channels */</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;        }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_output_bits[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index] = <a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(greatest);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        *lossless_check_data++ = temp_lossless_check_data;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;}</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a9a371bcc72d6998885cffaf64a0ad0d2"> 1276</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a9a371bcc72d6998885cffaf64a0ad0d2">input_data</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">void</span> *<a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>)</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;{</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;sample_fmt == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ab7ae6bb6718c07cd316778783a57a63b">AV_SAMPLE_FMT_S32</a>)</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <a class="code" href="mlpenc_8c.html#a38265e628e7a134a88f22d49234d381d">input_data_internal</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, 1);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;        <a class="code" href="mlpenc_8c.html#a38265e628e7a134a88f22d49234d381d">input_data_internal</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a>, 0);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af7491232c46fa2942962cfb737ceef02"> 1284</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#af7491232c46fa2942962cfb737ceef02">input_to_sample_buffer</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;{</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_frames; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cur_index = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;starting_frame_index + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *input_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer + cur_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;one_sample_buffer_size;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        <a class="code" href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[cur_index]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++)</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                *sample_buffer++ = *input_buffer++;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;            sample_buffer += 2; <span class="comment">/* noise_channels */</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            input_buffer += 2; <span class="comment">/* noise_channels */</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">/****************************************************************************</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"> ********* Functions that analyze the data and set the parameters ***********</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a79c9862ac9afdf80c94abb68382b5943"> 1308</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a79c9862ac9afdf80c94abb68382b5943">number_trailing_zeroes</a>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;{</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160; </div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = 0; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> &lt; 24 &amp;&amp; !(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &amp; (1&lt;&lt;<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)); <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>++);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="comment">/* All samples are 0. TODO Return previous quant_step_size to avoid</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">     * writing a new header. */</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> == 24)</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a5362e7d64eae9cd9b684410fd26f7d46"> 1325</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a5362e7d64eae9cd9b684410fd26f7d46">determine_quant_step_size</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;{</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> sample_mask[<a class="code" href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a>];</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    memset(sample_mask, 0x00, <span class="keyword">sizeof</span>(sample_mask));</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++)</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            sample_mask[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] |= *sample_buffer++;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        sample_buffer += 2; <span class="comment">/* noise channels */</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="mlpenc_8c.html#a79c9862ac9afdf80c94abb68382b5943">number_trailing_zeroes</a>(sample_mask[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>]) - mp-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;}</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#aa907ef964500d8b2e35c1f3000012ce6"> 1352</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#aa907ef964500d8b2e35c1f3000012ce6">code_filter_coeffs</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="struct_filter_params.html">FilterParams</a> *<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *fcoeff)</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;{</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = INT_MAX, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = INT_MIN;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>, <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordtype">int</span> coeff_mask = 0;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordtype">int</span> order;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">for</span> (order = 0; order &lt; <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order; order++) {</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = fcoeff[order];</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>)</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        coeff_mask |= <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    }</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160; </div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>), <a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>));</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> = 0; <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> &lt; 7 &amp;&amp; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> + <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> &lt; 16 &amp;&amp; !(coeff_mask &amp; (1&lt;&lt;<a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>)); <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>++);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160; </div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;coeff_bits  = <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;coeff_shift = <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a2491da7e93d67801fa8efcf5a2ec3f62"> 1382</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a2491da7e93d67801fa8efcf5a2ec3f62">set_filter_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                              <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>,</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                              <span class="keywordtype">int</span> clear_filter)</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;{</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <a class="code" href="struct_filter_params.html">FilterParams</a> *<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a> = &amp;cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> == <a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a> &amp;&amp; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info &amp; <a class="code" href="mlpenc_8c.html#af25623f9cfd114e6a630c73b872c8567">SUBSTREAM_INFO_HIGH_RATE</a>) ||</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;        clear_filter) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order = 0;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> == <a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>) {</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order = 0;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> == <a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>) {</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> max_order = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;substream_info &amp; <a class="code" href="mlpenc_8c.html#af25623f9cfd114e6a630c73b872c8567">SUBSTREAM_INFO_HIGH_RATE</a>)</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                              ? 4 : <a class="code" href="mlpenc_8c.html#a707273b0522bcff43b141c2bdf17ebd1">MLP_MAX_LPC_ORDER</a>;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> coefs[<a class="code" href="lpc_8h.html#a3fccddab58274c32cbd7e3791c442db3">MAX_LPC_ORDER</a>][<a class="code" href="lpc_8h.html#a3fccddab58274c32cbd7e3791c442db3">MAX_LPC_ORDER</a>];</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *lpc_samples = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_sample_buffer;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *fcoeff = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>].coeff[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>[<a class="code" href="mlpenc_8c.html#a707273b0522bcff43b141c2bdf17ebd1">MLP_MAX_LPC_ORDER</a>];</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="keywordtype">int</span> order;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            *lpc_samples++ = *sample_buffer;</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;        }</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        order = <a class="code" href="lpc_8c.html#ac2ff4c33ca44f72eaecdd61be5b6e210">ff_lpc_calc_coefs</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_ctx, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_sample_buffer,</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                                  <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples, <a class="code" href="mlpenc_8c.html#aa2ab716af4c1c9195be2a672d6208c55">MLP_MIN_LPC_ORDER</a>,</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                                  max_order, 11, coefs, <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>, <a class="code" href="lpc_8h.html#a458f426f89affd4566f158738e5b3089aa83d535208a826f522a84594b6721c8c">FF_LPC_TYPE_LEVINSON</a>, 0,</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                                  <a class="code" href="lpc_8h.html#a1ca3a3b4de34b03f39290e6517d5203d">ORDER_METHOD_EST</a>, <a class="code" href="mlpenc_8c.html#ad932012d1f50fdfb2d772637c1314d0e">MLP_MIN_LPC_SHIFT</a>,</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                                  <a class="code" href="mlpenc_8c.html#ad4f7d85848db2f6cc7fec7f6ed336cb4">MLP_MAX_LPC_SHIFT</a>, <a class="code" href="mlpenc_8c.html#ad932012d1f50fdfb2d772637c1314d0e">MLP_MIN_LPC_SHIFT</a>);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;order = order;</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;        <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>-&gt;shift = <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>[order-1];</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; order; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;            fcoeff[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = coefs[order-1][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        <a class="code" href="mlpenc_8c.html#aa907ef964500d8b2e35c1f3000012ce6">code_filter_coeffs</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>, fcoeff);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;}</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a3328047d009b31ffc5e7c36d15d4a3d7"> 1430</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a31cfc66499b51b48cc47149b51f9db7f">determine_filters</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;{</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>;</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160; </div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel &lt;= rh-&gt;</a>max_channel; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> = 0; <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> &lt; <a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>; <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>++)</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <a class="code" href="mlpenc_8c.html#a2491da7e93d67801fa8efcf5a2ec3f62">set_filter_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>, 0);</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;}</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; </div>
<div class="line"><a name="l01441"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098f"> 1441</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098f">MLPChMode</a> {</div>
<div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa7512b759cc75eecf08bbcf25a82f28f8"> 1442</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa7512b759cc75eecf08bbcf25a82f28f8">MLP_CHMODE_LEFT_RIGHT</a>,</div>
<div class="line"><a name="l01443"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098faf920cc629016c528b46989421324e149"> 1443</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098faf920cc629016c528b46989421324e149">MLP_CHMODE_LEFT_SIDE</a>,</div>
<div class="line"><a name="l01444"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fafe65fb47dce77052e08640f37ccd105c"> 1444</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fafe65fb47dce77052e08640f37ccd105c">MLP_CHMODE_RIGHT_SIDE</a>,</div>
<div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa4a48695d248cba2542611782180b308b"> 1445</a></span>&#160;    <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa4a48695d248cba2542611782180b308b">MLP_CHMODE_MID_SIDE</a>,</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;};</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098f">MLPChMode</a> <a class="code" href="mlpenc_8c.html#a3328047d009b31ffc5e7c36d15d4a3d7">estimate_stereo_mode</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;{</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    uint64_t score[4], sum[4] = { 0, 0, 0, 0, };</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *right_ch = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + 1;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *left_ch  = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keyword">enum</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098f">MLPChMode</a> best = 0;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>  = left_ch [<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels] - 2 * left_ch [(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1) * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels] + left_ch [(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2) * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels];</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> right = right_ch[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels] - 2 * right_ch[(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1) * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels] + right_ch[(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 2) * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels];</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        sum[0] += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>( <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a>        );</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        sum[1] += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>(        right);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        sum[2] += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>((<a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a> + right) &gt;&gt; 1);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;        sum[3] += <a class="code" href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a>( <a class="code" href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a> - right);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    score[<a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa7512b759cc75eecf08bbcf25a82f28f8">MLP_CHMODE_LEFT_RIGHT</a>] = sum[0] + sum[1];</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    score[<a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098faf920cc629016c528b46989421324e149">MLP_CHMODE_LEFT_SIDE</a>]  = sum[0] + sum[3];</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    score[<a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fafe65fb47dce77052e08640f37ccd105c">MLP_CHMODE_RIGHT_SIDE</a>] = sum[1] + sum[3];</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    score[<a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa4a48695d248cba2542611782180b308b">MLP_CHMODE_MID_SIDE</a>]   = sum[2] + sum[3];</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;    <span class="keywordflow">for</span>(<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 3; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;        <span class="keywordflow">if</span>(score[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] &lt; score[best])</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            best = <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; </div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="keywordflow">return</span> best;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;}</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#add9644c0b59a67ba377c659269f69f27"> 1481</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#add9644c0b59a67ba377c659269f69f27">code_matrix_coeffs</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mat)</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;{</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> coeff_mask = 0;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a> = mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[mat][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        coeff_mask |= <a class="code" href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    }</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> = 0; <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a> &lt; 14 &amp;&amp; !(coeff_mask &amp; (1&lt;&lt;<a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>)); <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>++);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    mp-&gt;<a class="code" href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">fbits</a>   [mat] = 14 - <a class="code" href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a>;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;}</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a8c76be3ae2a595e8666a90231a74b47c"> 1500</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a8c76be3ae2a595e8666a90231a74b47c">lossless_matrix_coeffs</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;{</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a> = 0;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordtype">int</span> mat;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="keyword">enum</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098f">MLPChMode</a> <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>;</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <span class="comment">/* No decorrelation for non-stereo. */</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels - 2 != 2) {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;        mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a> = 0;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160; </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a> = <a class="code" href="mlpenc_8c.html#a3328047d009b31ffc5e7c36d15d4a3d7">estimate_stereo_mode</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a>) {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        <span class="comment">/* TODO: add matrix for MID_SIDE */</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa4a48695d248cba2542611782180b308b">MLP_CHMODE_MID_SIDE</a>:</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa7512b759cc75eecf08bbcf25a82f28f8">MLP_CHMODE_LEFT_RIGHT</a>:</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>    = 0;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098faf920cc629016c528b46989421324e149">MLP_CHMODE_LEFT_SIDE</a>:</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>    = 1;</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[0] = 1;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][0] =  1 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][1] = -(1 &lt;&lt; 14);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][2] =  0 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][2] =   0 &lt;&lt; 14;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][0] =  1 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][1] = -(1 &lt;&lt; 14);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][2] =  0 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][2] =   0 &lt;&lt; 14;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fafe65fb47dce77052e08640f37ccd105c">MLP_CHMODE_RIGHT_SIDE</a>:</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>    = 1;</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[0] = 0;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][0] =  1 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][1] =   1 &lt;&lt; 14;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][2] =  0 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">coeff</a>[0][2] =   0 &lt;&lt; 14;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][0] =  1 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][1] = -(1 &lt;&lt; 14);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;            mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][2] =  0 &lt;&lt; 14; mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[0][2] =   0 &lt;&lt; 14;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">for</span> (mat = 0; mat &lt; mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>; mat++)</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <a class="code" href="mlpenc_8c.html#add9644c0b59a67ba377c659269f69f27">code_matrix_coeffs</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, mat);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160; </div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++)</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;        mp-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>] = <a class="code" href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a0d0d38a28b9ebbbbeb8caeb0a32a0350"> 1553</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a0d0d38a28b9ebbbbeb8caeb0a32a0350">codebook_extremes</a>[3][2] = {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    {-9, 8}, {-8, 7}, {-15, 14},</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;};</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ab489ca191d6a45ed1a07db8d2c008b10"> 1560</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#ab489ca191d6a45ed1a07db8d2c008b10">no_codebook_bits_offset</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, int16_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>,</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;                                    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>,</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                                    <a class="code" href="struct_best_offset.html">BestOffset</a> *bo)</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;{</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> unsign = 0;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <span class="keywordtype">int</span> lsb_bits;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> -= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> -= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    lsb_bits = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>), <a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) - 1;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    lsb_bits += !!lsb_bits;</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">if</span> (lsb_bits &gt; 0)</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        unsign = 1 &lt;&lt; (lsb_bits - 1);</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">offset</a>   = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a> = lsb_bits;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a> = lsb_bits * dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">min</a>      = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> - unsign + 1;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">max</a>      = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + unsign;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#acfb4d06c9ddaa70de0b63b0fc5f97d7d"> 1589</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#acfb4d06c9ddaa70de0b63b0fc5f97d7d">no_codebook_bits</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>,</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                             <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>,</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                             <a class="code" href="struct_best_offset.html">BestOffset</a> *bo)</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;{</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    int16_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> unsign = 0;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    uint32_t <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordtype">int</span> lsb_bits;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160; </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">/* Set offset inside huffoffset&#39;s boundaries by adjusting extremes</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment">     * so that more bits are used, thus shifting the offset. */</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> &lt; <a class="code" href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">HUFF_OFFSET_MIN</a>)</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;        <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, 2 * <a class="code" href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">HUFF_OFFSET_MIN</a> - <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> + 1);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> &gt; <a class="code" href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">HUFF_OFFSET_MAX</a>)</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, 2 * <a class="code" href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">HUFF_OFFSET_MAX</a> - <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - 1);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="comment">/* Determine offset and minimum number of bits. */</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160; </div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    lsb_bits = <a class="code" href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a>(<a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a>) - 1;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">if</span> (lsb_bits &gt; 0)</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        unsign = 1 &lt;&lt; (lsb_bits - 1);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="comment">/* If all samples are the same (lsb_bits == 0), offset must be</span></div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">     * adjusted because of sign_shift. */</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> + <a class="code" href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a> / 2 + !!lsb_bits;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">offset</a>   = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a> = lsb_bits;</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a> = lsb_bits * dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">min</a>      = <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> - unsign + 1;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">max</a>      = <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> + unsign;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;}</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a828221123790f95ab9a8cf795bfa0506"> 1629</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a828221123790f95ab9a8cf795bfa0506">codebook_bits_offset</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <span class="keywordtype">int</span> <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>,</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                                        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> sample_min, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> sample_max,</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                                        int16_t <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <a class="code" href="struct_best_offset.html">BestOffset</a> *bo)</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;{</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> codebook_min = <a class="code" href="mlpenc_8c.html#a0d0d38a28b9ebbbbeb8caeb0a32a0350">codebook_extremes</a>[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>][0];</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> codebook_max = <a class="code" href="mlpenc_8c.html#a0d0d38a28b9ebbbbeb8caeb0a32a0350">codebook_extremes</a>[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>][1];</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordtype">int</span> codebook_offset  = 7 + (2 - <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> unsign_offset = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <span class="keywordtype">int</span> lsb_bits = 0, bitcount = 0;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordtype">int</span> offset_min = INT_MAX, offset_max = INT_MAX;</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordtype">int</span> unsign, <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    sample_min -= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    sample_max -= <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">while</span> (sample_min &lt; codebook_min || sample_max &gt; codebook_max) {</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        lsb_bits++;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        sample_min &gt;&gt;= 1;</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        sample_max &gt;&gt;= 1;</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    }</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160; </div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    unsign = 1 &lt;&lt; lsb_bits;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>   = unsign - 1;</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a> == 2) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        unsign_offset -= unsign;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;        lsb_bits++;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    }</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160; </div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = *sample_buffer &gt;&gt; dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        <span class="keywordtype">int</span> temp_min, temp_max;</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160; </div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> -= unsign_offset;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;        temp_min = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &amp; <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">if</span> (temp_min &lt; offset_min)</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            offset_min = temp_min;</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        temp_max = unsign - temp_min - 1;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;        <span class="keywordflow">if</span> (temp_max &lt; offset_max)</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            offset_max = temp_max;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &gt;&gt;= lsb_bits;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        bitcount += <a class="code" href="mlp_8c.html#a0594e83bffe3ae1fce48c34371f9b0e7">ff_mlp_huffman_tables</a>[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>][<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> + codebook_offset][1];</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;        sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    }</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160; </div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">offset</a>   = <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a> = lsb_bits;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a> = lsb_bits * dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a> + bitcount;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">min</a>      = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> - offset_min, <a class="code" href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">HUFF_OFFSET_MIN</a>);</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    bo-&gt;<a class="code" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">max</a>      = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> + offset_max, <a class="code" href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">HUFF_OFFSET_MAX</a>);</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;}</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01693"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a474e583de6753549980fb75b59df6ffc"> 1693</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a474e583de6753549980fb75b59df6ffc">codebook_bits</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>,</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <span class="keywordtype">int</span> <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>,</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                                 <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>,</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                                 <a class="code" href="struct_best_offset.html">BestOffset</a> *bo, <span class="keywordtype">int</span> direction)</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;{</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordtype">int</span> previous_count = INT_MAX;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <span class="keywordtype">int</span> offset_min, offset_max;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordtype">int</span> is_greater = 0;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160; </div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    offset_min = <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(<a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">HUFF_OFFSET_MIN</a>);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    offset_max = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(<a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, <a class="code" href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">HUFF_OFFSET_MAX</a>);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160; </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">while</span> (offset &lt;= offset_max &amp;&amp; offset &gt;= offset_min) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;        <a class="code" href="struct_best_offset.html">BestOffset</a> temp_bo;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <a class="code" href="mlpenc_8c.html#a828221123790f95ab9a8cf795bfa0506">codebook_bits_offset</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                             <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>,</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                             &amp;temp_bo);</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        <span class="keywordflow">if</span> (temp_bo.<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a> &lt; previous_count) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordflow">if</span> (temp_bo.<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a> &lt; bo-&gt;<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a>)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                *bo = temp_bo;</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            is_greater = 0;</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (++is_greater &gt;= <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_codebook_search)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        previous_count = temp_bo.<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a>;</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        <span class="keywordflow">if</span> (direction) {</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = temp_bo.<a class="code" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">max</a> + 1;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = temp_bo.<a class="code" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">min</a> - 1;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;    }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;}</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a61ad8d034e9f6a4a3244042fb7fb7c35"> 1733</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a61ad8d034e9f6a4a3244042fb7fb7c35">determine_bits</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;{</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a>  *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt;= rh-&gt;<a class="code" href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">max_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = INT32_MAX, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = INT32_MIN;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        <span class="keywordtype">int</span> no_filters_used = !cp-&gt;<a class="code" href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">filter_params</a>[<a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>].<a class="code" href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">order</a>;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="keywordtype">int</span> average = 0;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = 0;</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <span class="comment">/* Determine extremes and average. */</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;            <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = *sample_buffer &gt;&gt; dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>)</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;                <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a> = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> &gt; <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;            average += <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        average /= dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160; </div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="comment">/* If filtering is used, we always set the offset to zero, otherwise</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;<span class="comment">         * we search for the offset that minimizes the bitcount. */</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        <span class="keywordflow">if</span> (no_filters_used) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            <a class="code" href="mlpenc_8c.html#acfb4d06c9ddaa70de0b63b0fc5f97d7d">no_codebook_bits</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_best_offset[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>][0]);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a> = av_clip(average, <a class="code" href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">HUFF_OFFSET_MIN</a>, <a class="code" href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">HUFF_OFFSET_MAX</a>);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;            <a class="code" href="mlpenc_8c.html#ab489ca191d6a45ed1a07db8d2c008b10">no_codebook_bits_offset</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>, <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_best_offset[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>][0]);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;        }</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            <a class="code" href="struct_best_offset.html">BestOffset</a> temp_bo = { 0, INT_MAX, 0, 0, 0, };</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            int16_t offset_max;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            <a class="code" href="mlpenc_8c.html#a828221123790f95ab9a8cf795bfa0506">codebook_bits_offset</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1,</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                                 <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, <a class="code" href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a>,</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                                 &amp;temp_bo);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            <span class="keywordflow">if</span> (no_filters_used) {</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                offset_max = temp_bo.<a class="code" href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">max</a>;</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                <a class="code" href="mlpenc_8c.html#a474e583de6753549980fb75b59df6ffc">codebook_bits</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1, temp_bo.<a class="code" href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">min</a> - 1,</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, &amp;temp_bo, 0);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                <a class="code" href="mlpenc_8c.html#a474e583de6753549980fb75b59df6ffc">codebook_bits</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1, offset_max + 1,</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                            <a class="code" href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a>, <a class="code" href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, &amp;temp_bo, 1);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;            }</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_best_offset[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = temp_bo;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;        }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;}</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">/****************************************************************************</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment"> *************** Functions that process the data in some way ****************</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; </div>
<div class="line"><a name="l01795"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a611069fbf2033b59f03fba5b6a2314f6"> 1795</a></span>&#160;<span class="preprocessor">#define SAMPLE_MAX(bitdepth) ((1 &lt;&lt; (bitdepth - 1)) - 1)</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#aa787d9580e00413fb0e0fa855e4d987e"> 1796</a></span>&#160;<span class="preprocessor">#define SAMPLE_MIN(bitdepth) (~SAMPLE_MAX(bitdepth))</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160; </div>
<div class="line"><a name="l01798"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a996fb265e0043e35fa0a69b29d99526a"> 1798</a></span>&#160;<span class="preprocessor">#define MSB_MASK(bits)  (-(int)(1u &lt;&lt; (bits)))</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01805"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#aed9d9faeee7b6c517bf9fa8cc7f188cd"> 1805</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#aed9d9faeee7b6c517bf9fa8cc7f188cd">apply_filter</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>)</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;{</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="struct_filter_params.html">FilterParams</a> *<a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>[<a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>] = { &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>].filter_params[<a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>],</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                                      &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>].filter_params[<a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>], };</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *filter_state_buffer[<a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>] = { <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = <a class="code" href="mlpenc_8c.html#a996fb265e0043e35fa0a69b29d99526a">MSB_MASK</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params-&gt;quant_step_size[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>]);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> number_of_samples = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> filter_shift = <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>[<a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>]-&gt;shift;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = 0;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        filter_state_buffer[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(<a class="code" href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a>*<span class="keyword">sizeof</span>(<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>));</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;        <span class="keywordflow">if</span> (!filter_state_buffer[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]) {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>,</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                   <span class="stringliteral">&quot;Not enough memory for applying filters.\n&quot;</span>);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <span class="keywordflow">goto</span> free_and_return;</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;        }</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    }</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        filter_state_buffer[<a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = *sample_buffer;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        filter_state_buffer[<a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = *sample_buffer;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 8; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = *sample_buffer;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> order;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        int64_t accum = 0;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        int64_t residual;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> = 0; <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a> &lt; <a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>; <a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>++) {</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *fcoeff = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>].coeff[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>];</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <span class="keywordflow">for</span> (order = 0; order &lt; <a class="code" href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a>[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>]-&gt;order; order++)</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                accum += (int64_t)filter_state_buffer[<a class="code" href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1 - order] *</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                         fcoeff[order];</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        }</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        accum  &gt;&gt;= filter_shift;</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        residual = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> - (accum &amp; <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="keywordflow">if</span> (residual &lt; <a class="code" href="mlpenc_8c.html#aa787d9580e00413fb0e0fa855e4d987e">SAMPLE_MIN</a>(24) || residual &gt; <a class="code" href="mlpenc_8c.html#a611069fbf2033b59f03fba5b6a2314f6">SAMPLE_MAX</a>(24)) {</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="keywordflow">goto</span> free_and_return;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        }</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        filter_state_buffer[<a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        filter_state_buffer[<a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (<a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a>) residual;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    }</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160; </div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        *sample_buffer = filter_state_buffer[<a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>][<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;        sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160; </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;free_and_return:</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;filter_state_buffer[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;}</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160; </div>
<div class="line"><a name="l01877"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a54bf14a05a0d97e240e53dfd656e75a9"> 1877</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a54bf14a05a0d97e240e53dfd656e75a9">apply_filters</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;{</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160; </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel &lt;= rh-&gt;</a>max_channel; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mlpenc_8c.html#aed9d9faeee7b6c517bf9fa8cc7f188cd">apply_filter</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>) &lt; 0) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;            <span class="comment">/* Filter is horribly wrong.</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">             * Clear filter params and update state. */</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;            <a class="code" href="mlpenc_8c.html#a2491da7e93d67801fa8efcf5a2ec3f62">set_filter_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a>, 1);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;            <a class="code" href="mlpenc_8c.html#a2491da7e93d67801fa8efcf5a2ec3f62">set_filter_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, <a class="code" href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a>, 1);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            <a class="code" href="mlpenc_8c.html#aed9d9faeee7b6c517bf9fa8cc7f188cd">apply_filter</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>);</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;        }</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    }</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;}</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160; </div>
<div class="line"><a name="l01894"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a4bf2f10aa4e74e31cc746d8f47cca19e"> 1894</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a4bf2f10aa4e74e31cc746d8f47cca19e">generate_2_noise_channels</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;{</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels - 2;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    uint32_t <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> = rh-&gt;<a class="code" href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">noisegen_seed</a>;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        uint16_t seed_shr7 = <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> &gt;&gt; 7;</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        *sample_buffer++ = ((int8_t)(<a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> &gt;&gt; 15)) * (1 &lt;&lt; rh-&gt;<a class="code" href="struct_restart_header.html#ae6eea1db40b2af00111f4c28d60f7e04">noise_shift</a>);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        *sample_buffer++ = ((int8_t) seed_shr7)   * (1 &lt;&lt; rh-&gt;<a class="code" href="struct_restart_header.html#ae6eea1db40b2af00111f4c28d60f7e04">noise_shift</a>);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> = (<a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> &lt;&lt; 16) ^ seed_shr7 ^ (seed_shr7 &lt;&lt; 5);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels - 2;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160; </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    rh-&gt;<a class="code" href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">noisegen_seed</a> = <a class="code" href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a> &amp; ((1 &lt;&lt; 24)-1);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;}</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a1ab9d630a973ed550825c6e59b8a5a4f"> 1915</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a1ab9d630a973ed550825c6e59b8a5a4f">rematrix_channels</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;{</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <a class="code" href="struct_matrix_params.html">MatrixParams</a> *mp = &amp;dp-&gt;<a class="code" href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">matrix_params</a>;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> *sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mat, <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, maxchan;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    maxchan = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keywordflow">for</span> (mat = 0; mat &lt; mp-&gt;<a class="code" href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">count</a>; mat++) {</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> msb_mask_bits = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;sample_fmt == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a> ? 8 : 0) - mp-&gt;<a class="code" href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">shift</a>[mat];</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a> = <a class="code" href="mlpenc_8c.html#a996fb265e0043e35fa0a69b29d99526a">MSB_MASK</a>(msb_mask_bits);</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> outch = mp-&gt;<a class="code" href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">outch</a>[mat];</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer;</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> src_ch;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            int64_t accum = 0;</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;            <span class="keywordflow">for</span> (src_ch = 0; src_ch &lt; maxchan; src_ch++) {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                <a class="code" href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = *(sample_buffer + src_ch);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                accum += (int64_t) <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> * mp-&gt;<a class="code" href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">forco</a>[mat][src_ch];</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;            }</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;            sample_buffer[outch] = (accum &gt;&gt; 14) &amp; <a class="code" href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a>;</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; </div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;        }</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    }</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;}</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">/****************************************************************************</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment"> **** Functions that deal with determining the best parameters and output ***</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment"> ****************************************************************************/</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"><a class="line" href="struct_path_counter.html"> 1949</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l01950"></a><span class="lineno"><a class="line" href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5"> 1950</a></span>&#160;    <span class="keywordtype">char</span>    path[<a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a> + 3];</div>
<div class="line"><a name="l01951"></a><span class="lineno"><a class="line" href="struct_path_counter.html#ac4dd3fb3a705793810026e00fcf4c257"> 1951</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="struct_path_counter.html#ac4dd3fb3a705793810026e00fcf4c257">bitcount</a>;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;} <a class="code" href="struct_path_counter.html">PathCounter</a>;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ad4155f3a4ad78af2660d09a8e7137d93"> 1954</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="mlpenc_8c.html#ad4155f3a4ad78af2660d09a8e7137d93">path_counter_codebook</a>[] = { <span class="stringliteral">&quot;0&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;3&quot;</span>, };</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160; </div>
<div class="line"><a name="l01956"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a8f9247fbef4e52a89d423a6f29f4b614"> 1956</a></span>&#160;<span class="preprocessor">#define ZERO_PATH               &#39;0&#39;</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a8966e73cf4527128ecf3435cb5a1e19d"> 1957</a></span>&#160;<span class="preprocessor">#define CODEBOOK_CHANGE_BITS    21</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a5e15e6fd40bdf2d150837dc144dc58d9"> 1959</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a5e15e6fd40bdf2d150837dc144dc58d9">clear_path_counter</a>(<a class="code" href="struct_path_counter.html">PathCounter</a> *path_counter)</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;{</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a> + 1; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        path_counter[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5">path</a>[0]  = <a class="code" href="mlpenc_8c.html#a8f9247fbef4e52a89d423a6f29f4b614">ZERO_PATH</a>;</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        path_counter[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5">path</a>[1]  =      0x00;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        path_counter[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="struct_path_counter.html#ac4dd3fb3a705793810026e00fcf4c257">bitcount</a> =         0;</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;}</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#ab39441a27347996f5c9b9ee235520f65"> 1970</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#ab39441a27347996f5c9b9ee235520f65">compare_best_offset</a>(<a class="code" href="struct_best_offset.html">BestOffset</a> *prev, <a class="code" href="struct_best_offset.html">BestOffset</a> *cur)</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;{</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    <span class="keywordflow">if</span> (prev-&gt;<a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a> != cur-&gt;<a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a>)</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160; </div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;}</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160; </div>
<div class="line"><a name="l01978"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a4d0c0ccfe71c8d7d7d14063db680bebd"> 1978</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a4d0c0ccfe71c8d7d7d14063db680bebd">best_codebook_path_cost</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>,</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;                                   <a class="code" href="struct_path_counter.html">PathCounter</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> cur_codebook)</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;{</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;    <a class="code" href="struct_best_offset.html">BestOffset</a> *cur_bo, *prev_bo = <a class="code" href="mlpenc_8c.html#a6cf2c9926e18b30818f62b5248ce804b">restart_best_offset</a>;</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <span class="keywordtype">int</span> bitcount = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;bitcount;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;    <span class="keywordtype">char</span> *path = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;path + 1;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="keywordtype">int</span> prev_codebook;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160; </div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; path[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        prev_bo = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;best_offset[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    prev_codebook = path[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1] - <a class="code" href="mlpenc_8c.html#a8f9247fbef4e52a89d423a6f29f4b614">ZERO_PATH</a>;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    cur_bo = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;best_offset[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160; </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    bitcount += cur_bo[cur_codebook].<a class="code" href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">bitcount</a>;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (prev_codebook != cur_codebook ||</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <a class="code" href="mlpenc_8c.html#ab39441a27347996f5c9b9ee235520f65">compare_best_offset</a>(&amp;prev_bo[prev_codebook], &amp;cur_bo[cur_codebook]))</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        bitcount += <a class="code" href="mlpenc_8c.html#a8966e73cf4527128ecf3435cb5a1e19d">CODEBOOK_CHANGE_BITS</a>;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordflow">return</span> bitcount;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;}</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; </div>
<div class="line"><a name="l02003"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#aef79725c7264ddfdc9a9823ae6df9058"> 2003</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#aef79725c7264ddfdc9a9823ae6df9058">set_best_codebook</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;{</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = rh-&gt;<a class="code" href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">min_channel</a>; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel &lt;= rh-&gt;</a>max_channel; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <a class="code" href="struct_best_offset.html">BestOffset</a> *cur_bo, *prev_bo = <a class="code" href="mlpenc_8c.html#a6cf2c9926e18b30818f62b5248ce804b">restart_best_offset</a>;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        <a class="code" href="struct_path_counter.html">PathCounter</a> path_counter[<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a> + 1];</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> best_codebook;</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordtype">char</span> *best_path;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; </div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <a class="code" href="mlpenc_8c.html#a5e15e6fd40bdf2d150837dc144dc58d9">clear_path_counter</a>(path_counter);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_subblocks; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> best_bitcount = INT_MAX;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            cur_bo = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;best_offset[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a> = 0; <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a> &lt; <a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>; <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>++) {</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;                <span class="keywordtype">int</span> prev_best_bitcount = INT_MAX;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;                <span class="keywordtype">int</span> last_best;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160; </div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                <span class="keywordflow">for</span> (last_best = 0; last_best &lt; 2; last_best++) {</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;                    <a class="code" href="struct_path_counter.html">PathCounter</a> *dst_path = &amp;path_counter[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>];</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;                    <a class="code" href="struct_path_counter.html">PathCounter</a> *src_path;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                    <span class="keywordtype">int</span>  temp_bitcount;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;                    <span class="comment">/* First test last path with same headers,</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">                     * then with last best. */</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;                    <span class="keywordflow">if</span> (last_best) {</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                        src_path = &amp;path_counter[<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>];</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="mlpenc_8c.html#ab39441a27347996f5c9b9ee235520f65">compare_best_offset</a>(&amp;prev_bo[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>], &amp;cur_bo[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>]))</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                            src_path = &amp;path_counter[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>];</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;                    }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160; </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;                    temp_bitcount = <a class="code" href="mlpenc_8c.html#a4d0c0ccfe71c8d7d7d14063db680bebd">best_codebook_path_cost</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>, src_path, <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;                    <span class="keywordflow">if</span> (temp_bitcount &lt; best_bitcount) {</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;                        best_bitcount = temp_bitcount;</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                        best_codebook = <a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                    }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                    <span class="keywordflow">if</span> (temp_bitcount &lt; prev_best_bitcount) {</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                        prev_best_bitcount = temp_bitcount;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                        <span class="keywordflow">if</span> (src_path != dst_path)</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                            memcpy(dst_path, src_path, <span class="keyword">sizeof</span>(<a class="code" href="struct_path_counter.html">PathCounter</a>));</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                        <a class="code" href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a>(dst_path-&gt;<a class="code" href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5">path</a>, <a class="code" href="mlpenc_8c.html#ad4155f3a4ad78af2660d09a8e7137d93">path_counter_codebook</a>[<a class="code" href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a>], <span class="keyword">sizeof</span>(dst_path-&gt;<a class="code" href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5">path</a>));</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;                        dst_path-&gt;<a class="code" href="struct_path_counter.html#ac4dd3fb3a705793810026e00fcf4c257">bitcount</a> = temp_bitcount;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                    }</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            }</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            prev_bo = cur_bo;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160; </div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;            memcpy(&amp;path_counter[<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>], &amp;path_counter[best_codebook], <span class="keyword">sizeof</span>(<a class="code" href="struct_path_counter.html">PathCounter</a>));</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        }</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        best_path = path_counter[<a class="code" href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a>].<a class="code" href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5">path</a> + 1;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="comment">/* Update context. */</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_subblocks; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;            <a class="code" href="struct_channel_params.html">ChannelParams</a> *cp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_channel_params + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            best_codebook = *best_path++ - <a class="code" href="mlpenc_8c.html#a8f9247fbef4e52a89d423a6f29f4b614">ZERO_PATH</a>;</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            cur_bo = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;best_offset[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>][best_codebook];</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            cp-&gt;<a class="code" href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">huff_offset</a>      = cur_bo-&gt;<a class="code" href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">offset</a>;</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;            cp-&gt;<a class="code" href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">huff_lsbs</a>        = cur_bo-&gt;<a class="code" href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">lsb_bits</a> + dp-&gt;<a class="code" href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">quant_step_size</a>[<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>];</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;            cp-&gt;<a class="code" href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">codebook</a>         = best_codebook;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;        }</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    }</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;}</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160; </div>
<div class="line"><a name="l02086"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#af3d7e175eec3b5581b9d38616c71efb5"> 2086</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#af3d7e175eec3b5581b9d38616c71efb5">set_major_params</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;{</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <a class="code" href="struct_restart_header.html">RestartHeader</a> *rh = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> max_huff_lsbs = 0;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> max_output_bits = 0;</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <a class="code" href="struct_decoding_params.html">DecodingParams</a> *seq_dp = (<a class="code" href="struct_decoding_params.html">DecodingParams</a> *) <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoding_params+</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                                 (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals - 1)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) +</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                                 (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_offset[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals - 1])*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <a class="code" href="struct_channel_params.html">ChannelParams</a> *seq_cp = (<a class="code" href="struct_channel_params.html">ChannelParams</a> *) <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_params +</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                                (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals - 1)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) +</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;                                (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_offset[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals - 1])*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels);</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals-1]; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            memcpy(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_decoding_params[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>][substr], seq_dp + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) + substr, <span class="keyword">sizeof</span>(<a class="code" href="struct_decoding_params.html">DecodingParams</a>));</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> = 0; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels; <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>++) {</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;                <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> huff_lsbs = (seq_cp + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>)-&gt;huff_lsbs;</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;                <span class="keywordflow">if</span> (max_huff_lsbs &lt; huff_lsbs)</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;                    max_huff_lsbs = huff_lsbs;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;                memcpy(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_channel_params[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>][<a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>],</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;                       (seq_cp + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) + <a class="code" href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a>),</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;                       <span class="keyword">sizeof</span>(<a class="code" href="struct_channel_params.html">ChannelParams</a>));</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;            }</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        }</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    }</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    rh-&gt;<a class="code" href="struct_restart_header.html#acd1cc2ff2eca785ac67865d8063a0711">max_huff_lsbs</a> = max_huff_lsbs;</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_frames; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++)</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        <span class="keywordflow">if</span> (max_output_bits &lt; ctx-&gt;max_output_bits[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>])</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            max_output_bits = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_output_bits[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    rh-&gt;<a class="code" href="struct_restart_header.html#aeaa3db722326cdc88a97d825d9b1174f">max_output_bits</a> = max_output_bits;</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_header[substr];</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_decoding_params = &amp;<a class="code" href="mlpenc_8c.html#a7aaba87cd747f76d39080abd328255cc">restart_decoding_params</a>[substr];</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_channel_params = <a class="code" href="mlpenc_8c.html#ac19a300afd930e864b35e1a3e4e24e9b">restart_channel_params</a>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a> + 1; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_decoding_params[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>][substr];</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_channel_params[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; </div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_params_changed[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>][substr] = <a class="code" href="mlpenc_8c.html#a6ef81b53ba7f4448aa1b3486cdbc6120">compare_decoding_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_decoding_params = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;prev_channel_params = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        }</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    }</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_number_of_subblocks = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_subblocks;</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_filter_state_subblock = 1;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_cur_subblock_index = 0;</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;}</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a12308b3892e048f59ae9ef05b6eb067c"> 2146</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a12308b3892e048f59ae9ef05b6eb067c">analyze_sample_buffer</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;{</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    <a class="code" href="struct_channel_params.html">ChannelParams</a> *seq_cp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_channel_params;</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <a class="code" href="struct_decoding_params.html">DecodingParams</a> *seq_dp = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_decoding_params;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160; </div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160; </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_header[substr];</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params = seq_dp + 1*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) + substr;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params = seq_cp + 1*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160; </div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        <a class="code" href="mlpenc_8c.html#a5362e7d64eae9cd9b684410fd26f7d46">determine_quant_step_size</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <a class="code" href="mlpenc_8c.html#a4bf2f10aa4e74e31cc746d8f47cca19e">generate_2_noise_channels</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        <a class="code" href="mlpenc_8c.html#a8c76be3ae2a595e8666a90231a74b47c">lossless_matrix_coeffs</a>   (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        <a class="code" href="mlpenc_8c.html#a1ab9d630a973ed550825c6e59b8a5a4f">rematrix_channels</a>        (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        <a class="code" href="mlpenc_8c.html#a31cfc66499b51b48cc47149b51f9db7f">determine_filters</a>        (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <a class="code" href="mlpenc_8c.html#a54bf14a05a0d97e240e53dfd656e75a9">apply_filters</a>            (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <a class="code" href="mlpenc_8c.html#ac8a43d5b1b486c831ca3365a298b2547">copy_restart_frame_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, substr);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160; </div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        <span class="comment">/* Copy frame_size from frames 0...max to decoding_params 1...max + 1</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment">         * decoding_params[0] is for the filter state subblock.</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_frames; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;            <a class="code" href="struct_decoding_params.html">DecodingParams</a> *dp = seq_dp + (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> + 1)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) + substr;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            dp-&gt;<a class="code" href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">blocksize</a> = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;        }</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        <span class="comment">/* The official encoder seems to always encode a filter state subblock</span></div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;<span class="comment">         * even if there are no filters. TODO check if it is possible to skip</span></div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<span class="comment">         * the filter state subblock for no filters.</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;        (seq_dp + substr)-&gt;blocksize  = 8;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;        (seq_dp + 1*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) + substr)-&gt;blocksize -= 8;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_subblocks; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params = seq_dp + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) + substr;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params = seq_cp + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_best_offset = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;best_offset[<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>];</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                <a class="code" href="mlpenc_8c.html#a61ad8d034e9f6a4a3244042fb7fb7c35">determine_bits</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params-&gt;blocksize * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_channels;</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        }</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160; </div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;        <a class="code" href="mlpenc_8c.html#aef79725c7264ddfdc9a9823ae6df9058">set_best_codebook</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;    }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;}</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160; </div>
<div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a48c02f76d428485e78783357e000df46"> 2194</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="mlpenc_8c.html#a48c02f76d428485e78783357e000df46">process_major_frame</a>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>)</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;{</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> substr;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160; </div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;starting_frame_index = 0;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_frames = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_number_of_frames;</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_frame_size;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">for</span> (substr = 0; substr &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams; substr++) {</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_restart_header = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_header[substr];</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_decoding_params = &amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_decoding_params[1][substr];</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;cur_channel_params = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_channel_params[1];</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <a class="code" href="mlpenc_8c.html#a4bf2f10aa4e74e31cc746d8f47cca19e">generate_2_noise_channels</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <a class="code" href="mlpenc_8c.html#a1ab9d630a973ed550825c6e59b8a5a4f">rematrix_channels</a>        (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160; </div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        <a class="code" href="mlpenc_8c.html#a54bf14a05a0d97e240e53dfd656e75a9">apply_filters</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;}</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">/****************************************************************************/</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160; </div>
<div class="line"><a name="l02219"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a070fc2b0de3c6e5cdf23a6324f4a27e5"> 2219</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a070fc2b0de3c6e5cdf23a6324f4a27e5">mlp_encode_frame</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx, <a class="code" href="struct_a_v_packet.html">AVPacket</a> *avpkt,</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;                            <span class="keyword">const</span> <a class="code" href="struct_a_v_frame.html">AVFrame</a> *<a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>, <span class="keywordtype">int</span> *got_packet)</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;{</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bytes_written = 0;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keywordtype">int</span> restart_frame, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <a class="code" href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a> *<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160; </div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="encode_8c.html#a699df1216e8d9d57959f99508e9aadf6">ff_alloc_packet2</a>(avctx, avpkt, 87500 * avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">channels</a>, 0)) &lt; 0)</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160; </div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="comment">/* add current frame to queue */</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="audio__frame__queue_8c.html#a810e29814cbdc646076ce885c664b4aa">ff_af_queue_add</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;afq, <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>)) &lt; 0)</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160; </div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a> = <a class="code" href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a>-&gt;data[0];</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">frame_number</a> % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160; </div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                      + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;one_sample_buffer_size;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_frame == <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer) {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    }</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160; </div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_scratch_buffer</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                       + <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;one_sample_buffer_size;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;write_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="keywordflow">if</span> (avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">frame_number</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval) {</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>) {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;            <span class="keywordflow">goto</span> input_and_return;</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;            <span class="comment">/* There are less frames than the requested major header interval.</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">             * Update the context to reflect this.</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">             */</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">frame_number</a>;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index = 0;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_scratch_buffer;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;        }</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    }</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index] &gt; <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>) {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avctx, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid frame size (%d &gt; %d)\n&quot;</span>,</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;               <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index], <a class="code" href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a>);</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a>;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;    }</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    restart_frame = !<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160; </div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">if</span> (restart_frame) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        <a class="code" href="mlpenc_8c.html#af3d7e175eec3b5581b9d38616c71efb5">set_major_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval != <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval)</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            <a class="code" href="mlpenc_8c.html#a48c02f76d428485e78783357e000df46">process_major_frame</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    }</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval == <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval)</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;write_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160; </div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    bytes_written = <a class="code" href="mlpenc_8c.html#adf283efe75a88d83df17b0262662387e">write_access_unit</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, avpkt-&gt;<a class="code" href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">data</a>, avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a>, restart_frame);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;timestamp += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index];</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;dts       += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index];</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;input_and_return:</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160; </div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>) {</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index] = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_frame_size += avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>;</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_number_of_frames++;</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        <a class="code" href="mlpenc_8c.html#a9a371bcc72d6998885cffaf64a0ad0d2">input_data</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a>);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_frame) {</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;last_frame = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    }</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160; </div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    restart_frame = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index + 1) % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <a class="code" href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a> (!restart_frame) {</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        <span class="keywordtype">int</span> seq_index;</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160; </div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        <span class="keywordflow">for</span> (seq_index = 0;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;             seq_index &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;restart_intervals &amp;&amp; (seq_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval) &lt;= <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;frame_number;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;             seq_index++) {</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> number_of_samples = 0;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sample_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_scratch_buffer;</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;inout_buffer = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer;</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_index = seq_index;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160; </div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;starting_frame_index = (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;frame_number - (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;frame_number % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval)</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                                      - (seq_index * <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval)) % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval;</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_frames = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_number_of_frames;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_subblocks = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_number_of_frames + 1;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_channel_params = (<a class="code" href="struct_channel_params.html">ChannelParams</a> *) <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_params +</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                      (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index / <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels) +</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;                                      (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_offset[seq_index])*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels);</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160; </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_decoding_params = (<a class="code" href="struct_decoding_params.html">DecodingParams</a> *) <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoding_params +</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                       (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index / <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;min_restart_interval)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;sequence_size)*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams) +</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                                       (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_offset[seq_index])*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams);</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160; </div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_frames; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                number_of_samples += <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size[(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;starting_frame_index + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>) % <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval];</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            }</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;number_of_samples = number_of_samples;</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> = 0; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a> &lt; <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_size[seq_index]; <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>++) {</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                <a class="code" href="mlpenc_8c.html#a93760b2068a5a21f047cc6778e343316">clear_channel_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_channel_params + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;avctx-&gt;channels));</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                <a class="code" href="mlpenc_8c.html#a4a3f1d9fde15404017f479023dc6dbbb">default_decoding_params</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>, <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;seq_decoding_params + <a class="code" href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>*(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;num_substreams));</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;            }</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160; </div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;            <a class="code" href="mlpenc_8c.html#af7491232c46fa2942962cfb737ceef02">input_to_sample_buffer</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160; </div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;            <a class="code" href="mlpenc_8c.html#a12308b3892e048f59ae9ef05b6eb067c">analyze_sample_buffer</a>(<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>);</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;        }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_index == (<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_restart_interval - 1)) {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_frame_size = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_frame_size;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_frame_size = 0;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_number_of_frames = <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_number_of_frames;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;            <a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;next_major_number_of_frames = 0;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_frame_size)</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                <span class="keywordflow">goto</span> no_data_left;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;        }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    }</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;no_data_left:</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <a class="code" href="audio__frame__queue_8c.html#a7f87b18779e810b8a7eeb5183c66655b">ff_af_queue_remove</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;afq, avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">frame_size</a>, &amp;avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">pts</a>,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                       &amp;avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">duration</a>);</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    avpkt-&gt;<a class="code" href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">size</a> = bytes_written;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;    *got_packet = 1;</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;}</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"><a class="line" href="mlpenc_8c.html#a471fb8b2a4c82a0acba71c33d4893bfb"> 2361</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">int</span> <a class="code" href="mlpenc_8c.html#a471fb8b2a4c82a0acba71c33d4893bfb">mlp_encode_close</a>(<a class="code" href="struct_a_v_codec_context.html">AVCodecContext</a> *avctx)</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;{</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;    <a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a> *<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a> = avctx-&gt;<a class="code" href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">priv_data</a>;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <a class="code" href="lpc_8c.html#a53639f3988c18573060619c85d134575">ff_lpc_end</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_ctx);</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lossless_check_data);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_scratch_buffer);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;major_inout_buffer);</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;lpc_sample_buffer);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;decoding_params);</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;channel_params);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;frame_size);</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;max_output_bits);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;    <a class="code" href="audio__frame__queue_8c.html#a45b33a0a35a90802c10fc654a235fa90">ff_af_queue_close</a>(&amp;<a class="code" href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a>-&gt;afq);</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;}</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160; </div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="preprocessor">#if CONFIG_MLP_ENCODER</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="allcodecs_8c.html#a3ef0012f536c783303fd7798eb0a7682">ff_mlp_encoder</a> = {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>                   =<span class="stringliteral">&quot;mlp&quot;</span>,</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    .long_name              = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;MLP (Meridian Lossless Packing)&quot;</span>),</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    .type                   = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    .id                     = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e">AV_CODEC_ID_MLP</a>,</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    .priv_data_size         = <span class="keyword">sizeof</span>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a>),</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>                   = <a class="code" href="mlpenc_8c.html#a9aa2838f63989346b3cef049c12016eb">mlp_encode_init</a>,</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    .encode2                = <a class="code" href="mlpenc_8c.html#a070fc2b0de3c6e5cdf23a6324f4a27e5">mlp_encode_frame</a>,</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    .close                  = <a class="code" href="mlpenc_8c.html#a471fb8b2a4c82a0acba71c33d4893bfb">mlp_encode_close</a>,</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    .capabilities           = <a class="code" href="group__lavc__core.html#gaded181844ec3ab19897704086dc2ee03">AV_CODEC_CAP_SMALL_LAST_FRAME</a> | <a class="code" href="group__lavc__core.html#gafbc01f68af47e3c5ce96211a93927996">AV_CODEC_CAP_EXPERIMENTAL</a>,</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    .<a class="code" href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a>            = (<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a>[]) {<a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a>},</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    .supported_samplerates  = (<span class="keyword">const</span> <span class="keywordtype">int</span>[]) {44100, 48000, 88200, 96000, 176400, 192000, 0},</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    .channel_layouts        = <a class="code" href="mlp_8c.html#a8ab94b70b68515780692dfe81c9a91b5">ff_mlp_channel_layouts</a>,</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    .caps_internal          = <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;};</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="preprocessor">#if CONFIG_TRUEHD_ENCODER</span></div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<a class="code" href="struct_a_v_codec.html">AVCodec</a> <a class="code" href="allcodecs_8c.html#a825de2396bd0865d2aa60fd167676e82">ff_truehd_encoder</a> = {</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;    .<a class="code" href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">name</a>                   =<span class="stringliteral">&quot;truehd&quot;</span>,</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;    .long_name              = <a class="code" href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a>(<span class="stringliteral">&quot;TrueHD&quot;</span>),</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    .type                   = <a class="code" href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a>,</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    .id                     = <a class="code" href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e">AV_CODEC_ID_TRUEHD</a>,</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;    .priv_data_size         = <span class="keyword">sizeof</span>(<a class="code" href="struct_m_l_p_encode_context.html">MLPEncodeContext</a>),</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    .<a class="code" href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a>                   = <a class="code" href="mlpenc_8c.html#a9aa2838f63989346b3cef049c12016eb">mlp_encode_init</a>,</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;    .encode2                = <a class="code" href="mlpenc_8c.html#a070fc2b0de3c6e5cdf23a6324f4a27e5">mlp_encode_frame</a>,</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    .close                  = <a class="code" href="mlpenc_8c.html#a471fb8b2a4c82a0acba71c33d4893bfb">mlp_encode_close</a>,</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    .capabilities           = <a class="code" href="group__lavc__core.html#gaded181844ec3ab19897704086dc2ee03">AV_CODEC_CAP_SMALL_LAST_FRAME</a> | <a class="code" href="group__lavc__core.html#gafbc01f68af47e3c5ce96211a93927996">AV_CODEC_CAP_EXPERIMENTAL</a>,</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    .<a class="code" href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a>            = (<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a>[]) {<a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a>},</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    .supported_samplerates  = (<span class="keyword">const</span> <span class="keywordtype">int</span>[]) {44100, 48000, 88200, 96000, 176400, 192000, 0},</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    .channel_layouts        = (<span class="keyword">const</span> uint64_t[]) {<a class="code" href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a>, <a class="code" href="group__channel__mask__c.html#gab057e9fd36b7e929d000d663badbafc6">AV_CH_LAYOUT_5POINT0_BACK</a>, <a class="code" href="group__channel__mask__c.html#gae9da5d6069701241a22f3af19b152662">AV_CH_LAYOUT_5POINT1_BACK</a>, 0},</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    .caps_internal          = <a class="code" href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a>,</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;};</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="astruct_restart_header_html_adade54386ea0856c152060c7d2b968c4"><div class="ttname"><a href="struct_restart_header.html#adade54386ea0856c152060c7d2b968c4">RestartHeader::min_channel</a></div><div class="ttdeci">uint8_t min_channel</div><div class="ttdoc">The index of the first channel coded in this substream.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00041">mlpenc.c:41</a></div></div>
<div class="ttc" id="astruct_filter_params_html_a7e8dbd5e12563e9f72b4a725e4ca7a21"><div class="ttname"><a href="struct_filter_params.html#a7e8dbd5e12563e9f72b4a725e4ca7a21">FilterParams::shift</a></div><div class="ttdeci">uint8_t shift</div><div class="ttdoc">Right shift to apply to output of filter.</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00076">mlp.h:76</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aa1622cf49b3b13c542195ef900ce4603"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aa1622cf49b3b13c542195ef900ce4603">MLPEncodeContext::number_of_samples</a></div><div class="ttdeci">unsigned int number_of_samples</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00189">mlpenc.c:189</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ac42354cc9d851a56630a23ae607f06fd"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ac42354cc9d851a56630a23ae607f06fd">MLPEncodeContext::next_major_number_of_frames</a></div><div class="ttdeci">unsigned int next_major_number_of_frames</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00134">mlpenc.c:134</a></div></div>
<div class="ttc" id="amlpenc_8c_html_aef79725c7264ddfdc9a9823ae6df9058"><div class="ttname"><a href="mlpenc_8c.html#aef79725c7264ddfdc9a9823ae6df9058">set_best_codebook</a></div><div class="ttdeci">static void set_best_codebook(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l02003">mlpenc.c:2003</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_ae4d1eaaee02fc6c4672f59dcf7255286"><div class="ttname"><a href="intreadwrite_8h.html#ae4d1eaaee02fc6c4672f59dcf7255286">AV_WB16</a></div><div class="ttdeci">#define AV_WB16(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00245">intreadwrite.h:245</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html"><div class="ttname"><a href="struct_a_v_codec_context.html">AVCodecContext</a></div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00526">avcodec.h:526</a></div></div>
<div class="ttc" id="amlpenc_8c_html_acfb4d06c9ddaa70de0b63b0fc5f97d7d"><div class="ttname"><a href="mlpenc_8c.html#acfb4d06c9ddaa70de0b63b0fc5f97d7d">no_codebook_bits</a></div><div class="ttdeci">static void no_codebook_bits(MLPEncodeContext *ctx, unsigned int channel, int32_t min, int32_t max, BestOffset *bo)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01589">mlpenc.c:1589</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gab057e9fd36b7e929d000d663badbafc6"><div class="ttname"><a href="group__channel__mask__c.html#gab057e9fd36b7e929d000d663badbafc6">AV_CH_LAYOUT_5POINT0_BACK</a></div><div class="ttdeci">#define AV_CH_LAYOUT_5POINT0_BACK</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00102">channel_layout.h:102</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aec57f0d859a6df8b479cd93ca3a44a33"><div class="ttname"><a href="struct_a_v_codec_context.html#aec57f0d859a6df8b479cd93ca3a44a33">AVCodecContext::frame_size</a></div><div class="ttdeci">int frame_size</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01206">avcodec.h:1206</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a41c0c9c8aa8e1fd12d65b18dd6948b09"><div class="ttname"><a href="avrndec_8c.html#a41c0c9c8aa8e1fd12d65b18dd6948b09">init</a></div><div class="ttdeci">static av_cold int init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00035">avrndec.c:35</a></div></div>
<div class="ttc" id="amlpenc_8c_html_aa2ab716af4c1c9195be2a672d6208c55"><div class="ttname"><a href="mlpenc_8c.html#aa2ab716af4c1c9195be2a672d6208c55">MLP_MIN_LPC_ORDER</a></div><div class="ttdeci">#define MLP_MIN_LPC_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00035">mlpenc.c:35</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a84bc3db66b78daf5d880d82cc0a86086"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a84bc3db66b78daf5d880d82cc0a86086">MLPEncodeContext::max_output_bits</a></div><div class="ttdeci">unsigned int * max_output_bits</div><div class="ttdoc">largest output bit-depth</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00141">mlpenc.c:141</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a51b634d3a0c2af97dd616b1d89021ed8"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a51b634d3a0c2af97dd616b1d89021ed8">MLPEncodeContext::cur_decoding_params</a></div><div class="ttdeci">DecodingParams * cur_decoding_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00181">mlpenc.c:181</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ad845d83b0e2e7c6f86c50bc215a3039c"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ad845d83b0e2e7c6f86c50bc215a3039c">MLPEncodeContext::major_scratch_buffer</a></div><div class="ttdeci">int32_t * major_scratch_buffer</div><div class="ttdoc">Scratch buffer big enough to fit all data for one entire major frame interval.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00128">mlpenc.c:128</a></div></div>
<div class="ttc" id="astruct_best_offset_html_a400160ab248f614a948c2bc86c4be746"><div class="ttname"><a href="struct_best_offset.html#a400160ab248f614a948c2bc86c4be746">BestOffset::lsb_bits</a></div><div class="ttdeci">int lsb_bits</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00092">mlpenc.c:92</a></div></div>
<div class="ttc" id="amlp_8h_html_adc230b213bff6171c646f7a9e9feaa8a"><div class="ttname"><a href="mlp_8h.html#adc230b213bff6171c646f7a9e9feaa8a">xor_32_to_8</a></div><div class="ttdeci">static uint8_t xor_32_to_8(uint32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00160">mlp.h:160</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ac19a300afd930e864b35e1a3e4e24e9b"><div class="ttname"><a href="mlpenc_8c.html#ac19a300afd930e864b35e1a3e4e24e9b">restart_channel_params</a></div><div class="ttdeci">static ChannelParams restart_channel_params[MAX_CHANNELS]</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00204">mlpenc.c:204</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ac7bdaf490635f61491d4cb6b48f28947"><div class="ttname"><a href="mlpenc_8c.html#ac7bdaf490635f61491d4cb6b48f28947">write_decoding_params</a></div><div class="ttdeci">static void write_decoding_params(MLPEncodeContext *ctx, PutBitContext *pb, int params_changed)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00904">mlpenc.c:904</a></div></div>
<div class="ttc" id="astruct_best_offset_html_a5731f6d70968e9eb3900e7479a02ce56"><div class="ttname"><a href="struct_best_offset.html#a5731f6d70968e9eb3900e7479a02ce56">BestOffset::offset</a></div><div class="ttdeci">int32_t offset</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00090">mlpenc.c:90</a></div></div>
<div class="ttc" id="aaudio__frame__queue_8c_html_a7f87b18779e810b8a7eeb5183c66655b"><div class="ttname"><a href="audio__frame__queue_8c.html#a7f87b18779e810b8a7eeb5183c66655b">ff_af_queue_remove</a></div><div class="ttdeci">void ff_af_queue_remove(AudioFrameQueue *afq, int nb_samples, int64_t *pts, int64_t *duration)</div><div class="ttdef"><b>Definition:</b> <a href="audio__frame__queue_8c_source.html#l00075">audio_frame_queue.c:75</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_af3379123060ad8cc9c321c29af4f8360"><div class="ttname"><a href="struct_a_v_codec_context.html#af3379123060ad8cc9c321c29af4f8360">AVCodecContext::priv_data</a></div><div class="ttdeci">void * priv_data</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l00553">avcodec.h:553</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a2d0d2395974af174b50868a56471c9cf"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2d0d2395974af174b50868a56471c9cf">PARAMS_DEFAULT</a></div><div class="ttdeci">@ PARAMS_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00068">mlpenc.c:68</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a3248db0583651f3fcc879a96814a824f"><div class="ttname"><a href="mlpenc_8c.html#a3248db0583651f3fcc879a96814a824f">write_substrs</a></div><div class="ttdeci">static uint8_t * write_substrs(MLPEncodeContext *ctx, uint8_t *buf, int buf_size, int restart_frame, uint16_t substream_data_len[MAX_SUBSTREAMS])</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01053">mlpenc.c:1053</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a3328047d009b31ffc5e7c36d15d4a3d7"><div class="ttname"><a href="mlpenc_8c.html#a3328047d009b31ffc5e7c36d15d4a3d7">estimate_stereo_mode</a></div><div class="ttdeci">static enum MLPChMode estimate_stereo_mode(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01430">mlpenc.c:1448</a></div></div>
<div class="ttc" id="aaudio__frame__queue_8c_html_a45b33a0a35a90802c10fc654a235fa90"><div class="ttname"><a href="audio__frame__queue_8c.html#a45b33a0a35a90802c10fc654a235fa90">ff_af_queue_close</a></div><div class="ttdeci">void ff_af_queue_close(AudioFrameQueue *afq)</div><div class="ttdef"><b>Definition:</b> <a href="audio__frame__queue_8c_source.html#l00036">audio_frame_queue.c:36</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ac59f8c1f22373b77c8b49df6b739c629"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ac59f8c1f22373b77c8b49df6b739c629">MLPEncodeContext::wordlength</a></div><div class="ttdeci">int wordlength</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00120">mlpenc.c:120</a></div></div>
<div class="ttc" id="aadpcmenc_8c_html_a0b94bda9858853d90b77d15331ca0ae1"><div class="ttname"><a href="adpcmenc_8c.html#a0b94bda9858853d90b77d15331ca0ae1">sample_fmts</a></div><div class="ttdeci">static enum AVSampleFormat sample_fmts[]</div><div class="ttdef"><b>Definition:</b> <a href="adpcmenc_8c_source.html#l00566">adpcmenc.c:925</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1af5a78db98bafdf78cded47e960876c"><div class="ttname"><a href="mlpenc_8c.html#a1af5a78db98bafdf78cded47e960876c">write_major_sync</a></div><div class="ttdeci">static void write_major_sync(MLPEncodeContext *ctx, uint8_t *buf, int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00749">mlpenc.c:749</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a471fb8b2a4c82a0acba71c33d4893bfb"><div class="ttname"><a href="mlpenc_8c.html#a471fb8b2a4c82a0acba71c33d4893bfb">mlp_encode_close</a></div><div class="ttdeci">static av_cold int mlp_encode_close(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l02361">mlpenc.c:2361</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a80701f4fa8e808b62dacf6197d0939ae"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a80701f4fa8e808b62dacf6197d0939ae">MLPEncodeContext::channel_occupancy</a></div><div class="ttdeci">int channel_occupancy</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00121">mlpenc.c:121</a></div></div>
<div class="ttc" id="amem_8c_html_a254f3455439c15a2c8a75b8f0235fdbd"><div class="ttname"><a href="mem_8c.html#a254f3455439c15a2c8a75b8f0235fdbd">av_malloc_array</a></div><div class="ttdeci">void * av_malloc_array(size_t nmemb, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00182">mem.c:182</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22afe96eccbd74b7908808dc8e6ae94ae4e"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22afe96eccbd74b7908808dc8e6ae94ae4e">PARAM_PRESENCE_FLAGS</a></div><div class="ttdeci">@ PARAM_PRESENCE_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00069">mlpenc.c:69</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a611069fbf2033b59f03fba5b6a2314f6"><div class="ttname"><a href="mlpenc_8c.html#a611069fbf2033b59f03fba5b6a2314f6">SAMPLE_MAX</a></div><div class="ttdeci">#define SAMPLE_MAX(bitdepth)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01795">mlpenc.c:1795</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga53d6da2dcd56f5f87c7afd8b33fa15ba"><div class="ttname"><a href="group__channel__mask__c.html#ga53d6da2dcd56f5f87c7afd8b33fa15ba">AV_CH_LAYOUT_MONO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_MONO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00090">channel_layout.h:90</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a022bea4c1636d3229bd07d7ec301d3c8"><div class="ttname"><a href="put__bits_8h.html#a022bea4c1636d3229bd07d7ec301d3c8">put_sbits</a></div><div class="ttdeci">static void put_sbits(PutBitContext *pb, int n, int32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00260">put_bits.h:260</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a0bcd3e73d6c48e50b9c8fe99a51d2c91"><div class="ttname"><a href="put__bits_8h.html#a0bcd3e73d6c48e50b9c8fe99a51d2c91">init_put_bits</a></div><div class="ttdeci">static void init_put_bits(PutBitContext *s, uint8_t *buffer, int buffer_size)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00064">put_bits.h:64</a></div></div>
<div class="ttc" id="aaudio__frame__queue_8c_html_a0332621646eb990bc4952d128cc788df"><div class="ttname"><a href="audio__frame__queue_8c.html#a0332621646eb990bc4952d128cc788df">ff_af_queue_init</a></div><div class="ttdeci">av_cold void ff_af_queue_init(AVCodecContext *avctx, AudioFrameQueue *afq)</div><div class="ttdef"><b>Definition:</b> <a href="audio__frame__queue_8c_source.html#l00028">audio_frame_queue.c:28</a></div></div>
<div class="ttc" id="astruct_l_p_c_context_html"><div class="ttname"><a href="struct_l_p_c_context.html">LPCContext</a></div><div class="ttdef"><b>Definition:</b> <a href="lpc_8h_source.html#l00052">lpc.h:52</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af25623f9cfd114e6a630c73b872c8567"><div class="ttname"><a href="mlpenc_8c.html#af25623f9cfd114e6a630c73b872c8567">SUBSTREAM_INFO_HIGH_RATE</a></div><div class="ttdeci">#define SUBSTREAM_INFO_HIGH_RATE</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00220">mlpenc.c:220</a></div></div>
<div class="ttc" id="aavrndec_8c_html_a13191ba45577b1d4f9b37d64df91eb55"><div class="ttname"><a href="avrndec_8c.html#a13191ba45577b1d4f9b37d64df91eb55">end</a></div><div class="ttdeci">static av_cold int end(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="avrndec_8c_source.html#l00092">avrndec.c:92</a></div></div>
<div class="ttc" id="aj2kenc_8c_html_aafc5fd946cab2b9d67be29d48099f703"><div class="ttname"><a href="j2kenc_8c.html#aafc5fd946cab2b9d67be29d48099f703">put_bits</a></div><div class="ttdeci">static void put_bits(Jpeg2000EncoderContext *s, int val, int n)</div><div class="ttdef"><b>Definition:</b> <a href="j2kenc_8c_source.html#l00218">j2kenc.c:218</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a29ee75feb3d5bfd3ed4da74b00b02f4e"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a29ee75feb3d5bfd3ed4da74b00b02f4e">MLPEncodeContext::lpc_sample_buffer</a></div><div class="ttdeci">int32_t * lpc_sample_buffer</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00131">mlpenc.c:131</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a9e5a25a530d01c04491216c368a1a04a"><div class="ttname"><a href="struct_a_v_codec_context.html#a9e5a25a530d01c04491216c368a1a04a">AVCodecContext::frame_number</a></div><div class="ttdeci">int frame_number</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01217">avcodec.h:1217</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a5c914266af51e04ce8d75e774225efa6"><div class="ttname"><a href="mlpenc_8c.html#a5c914266af51e04ce8d75e774225efa6">write_frame_headers</a></div><div class="ttdeci">static void write_frame_headers(MLPEncodeContext *ctx, uint8_t *frame_header, uint8_t *substream_headers, unsigned int length, int restart_frame, uint16_t substream_data_len[MAX_SUBSTREAMS])</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01145">mlpenc.c:1145</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a5e15e6fd40bdf2d150837dc144dc58d9"><div class="ttname"><a href="mlpenc_8c.html#a5e15e6fd40bdf2d150837dc144dc58d9">clear_path_counter</a></div><div class="ttdeci">static void clear_path_counter(PathCounter *path_counter)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01959">mlpenc.c:1959</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a6e8dad89135a2967ab61108797173aa7"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a6e8dad89135a2967ab61108797173aa7">MLPEncodeContext::major_number_of_subblocks</a></div><div class="ttdeci">unsigned int major_number_of_subblocks</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00177">mlpenc.c:177</a></div></div>
<div class="ttc" id="astruct_restart_header_html_a4a41d4b9a770927a67c3224a22b44de1"><div class="ttname"><a href="struct_restart_header.html#a4a41d4b9a770927a67c3224a22b44de1">RestartHeader::lossless_check_data</a></div><div class="ttdeci">int32_t lossless_check_data</div><div class="ttdoc">XOR of all output samples.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00050">mlpenc.c:50</a></div></div>
<div class="ttc" id="amlp_8c_html_ad080c68cd2fec6fcd6399781cd0a4970"><div class="ttname"><a href="mlp_8c.html#ad080c68cd2fec6fcd6399781cd0a4970">ff_mlp_calculate_parity</a></div><div class="ttdeci">uint8_t ff_mlp_calculate_parity(const uint8_t *buf, unsigned int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00120">mlp.c:120</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ad72f983320e0950553fb9f8e33ceeec5"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ad72f983320e0950553fb9f8e33ceeec5">MLPEncodeContext::substream_info</a></div><div class="ttdeci">int substream_info</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00118">mlpenc.c:118</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a8f9247fbef4e52a89d423a6f29f4b614"><div class="ttname"><a href="mlpenc_8c.html#a8f9247fbef4e52a89d423a6f29f4b614">ZERO_PATH</a></div><div class="ttdeci">#define ZERO_PATH</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01956">mlpenc.c:1956</a></div></div>
<div class="ttc" id="amxf_8c_html_a084824fc871e38157790c99ae1240842"><div class="ttname"><a href="mxf_8c.html#a084824fc871e38157790c99ae1240842">data</a></div><div class="ttdeci">const char data[16]</div><div class="ttdef"><b>Definition:</b> <a href="mxf_8c_source.html#l00151">mxf.c:151</a></div></div>
<div class="ttc" id="astruct_decoding_params_html_a6bca8615ef41f5a1e38473f3d9b5e196"><div class="ttname"><a href="struct_decoding_params.html#a6bca8615ef41f5a1e38473f3d9b5e196">DecodingParams::matrix_params</a></div><div class="ttdeci">MatrixParams matrix_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00084">mlpenc.c:84</a></div></div>
<div class="ttc" id="astruct_matrix_params_html"><div class="ttname"><a href="struct_matrix_params.html">MatrixParams</a></div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00056">mlpenc.c:56</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1649889be7896b9b8084a815e82a098f"><div class="ttname"><a href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098f">MLPChMode</a></div><div class="ttdeci">MLPChMode</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01441">mlpenc.c:1441</a></div></div>
<div class="ttc" id="astruct_restart_header_html_a55589a4224d51e3d508a42f656bd702d"><div class="ttname"><a href="struct_restart_header.html#a55589a4224d51e3d508a42f656bd702d">RestartHeader::max_matrix_channel</a></div><div class="ttdeci">uint8_t max_matrix_channel</div><div class="ttdoc">The number of channels input into the rematrix stage.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00043">mlpenc.c:43</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a6d30ed1bc96209ff8eace10a3219cc6a"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a6d30ed1bc96209ff8eace10a3219cc6a">MLPEncodeContext::major_frame_size</a></div><div class="ttdeci">unsigned int major_frame_size</div><div class="ttdoc">Number of samples in current major frame being encoded.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00136">mlpenc.c:136</a></div></div>
<div class="ttc" id="acuda__runtime_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="cuda__runtime_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="cuda__runtime_8h_source.html#l00033">cuda_runtime.h:33</a></div></div>
<div class="ttc" id="amlp_8c_html_a90b20dc905cf26ea5e0ea4128b7228e2"><div class="ttname"><a href="mlp_8c.html#a90b20dc905cf26ea5e0ea4128b7228e2">ff_mlp_ch_info</a></div><div class="ttdeci">const ChannelInformation ff_mlp_ch_info[21]</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00044">mlp.c:44</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a251fd522eaa0986c3d6f918783b83f4b"><div class="ttname"><a href="filter__design_8txt.html#a251fd522eaa0986c3d6f918783b83f4b">filter</a></div><div class="ttdeci">filter_frame For filters that do not use the this method is called when a frame is pushed to the filter s input It can be called at any time except in a reentrant way If the input frame is enough to produce then the filter should push the output frames on the output link immediately As an exception to the previous rule if the input frame is enough to produce several output frames then the filter needs output only at least one per link The additional frames can be left buffered in the filter</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00228">filter_design.txt:228</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a590657e7d9e4a3daad01498bb903a35a"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a590657e7d9e4a3daad01498bb903a35a">MLPEncodeContext::channel_params</a></div><div class="ttdeci">ChannelParams * channel_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00164">mlpenc.c:164</a></div></div>
<div class="ttc" id="alpc_8h_html"><div class="ttname"><a href="lpc_8h.html">lpc.h</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_afd8bcc14f185df0da54d7a7ef038f1c7"><div class="ttname"><a href="struct_m_l_p_encode_context.html#afd8bcc14f185df0da54d7a7ef038f1c7">MLPEncodeContext::sample_buffer</a></div><div class="ttdeci">int32_t * sample_buffer</div><div class="ttdoc">Pointer to current access unit samples.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00127">mlpenc.c:127</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a53741bae58021bcaa25abda2f52d2d2c"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a53741bae58021bcaa25abda2f52d2d2c">MLPEncodeContext::ch_modifier_thd2</a></div><div class="ttdeci">uint8_t ch_modifier_thd2</div><div class="ttdoc">channel modifier for TrueHD stream 2</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00158">mlpenc.c:158</a></div></div>
<div class="ttc" id="aintreadwrite_8h_html_a472b33c46f8c8d08f484be15431a1598"><div class="ttname"><a href="intreadwrite_8h.html#a472b33c46f8c8d08f484be15431a1598">AV_WL16</a></div><div class="ttdeci">#define AV_WL16(p, val)</div><div class="ttdef"><b>Definition:</b> <a href="intreadwrite_8h_source.html#l00258">intreadwrite.h:258</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7ceab89325573cab37c7fe7f6003d0134f7e">AV_CODEC_ID_TRUEHD</a></div><div class="ttdeci">@ AV_CODEC_ID_TRUEHD</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00462">codec_id.h:462</a></div></div>
<div class="ttc" id="astruct_channel_params_html_afd6edbdf855404304b7c56698b1de2b8"><div class="ttname"><a href="struct_channel_params.html#afd6edbdf855404304b7c56698b1de2b8">ChannelParams::huff_offset</a></div><div class="ttdeci">int16_t huff_offset</div><div class="ttdoc">Offset to apply to residual values.</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00089">mlp.h:89</a></div></div>
<div class="ttc" id="astruct_channel_params_html_a932502941ea7138fb07d5aec7555707d"><div class="ttname"><a href="struct_channel_params.html#a932502941ea7138fb07d5aec7555707d">ChannelParams::filter_params</a></div><div class="ttdeci">FilterParams filter_params[NUM_FILTERS]</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00086">mlp.h:86</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a037c4c3fb96102d69a8959dcbcf3ba88">PARAM_MATRIX</a></div><div class="ttdeci">@ PARAM_MATRIX</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00071">mlpenc.c:71</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af3d7e175eec3b5581b9d38616c71efb5"><div class="ttname"><a href="mlpenc_8c.html#af3d7e175eec3b5581b9d38616c71efb5">set_major_params</a></div><div class="ttdeci">static void set_major_params(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l02086">mlpenc.c:2086</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a9feef5270e0e54f103868362df0cd27a"><div class="ttname"><a href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a></div><div class="ttdeci">sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aeffdb610f4d46b0655cdb5f687183c25"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aeffdb610f4d46b0655cdb5f687183c25">MLPEncodeContext::restart_intervals</a></div><div class="ttdeci">unsigned int restart_intervals</div><div class="ttdoc">Number of possible major frame sizes.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00149">mlpenc.c:149</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_aaf4fe58dfcc7c232c1f2268b539d8367"><div class="ttname"><a href="struct_a_v_packet.html#aaf4fe58dfcc7c232c1f2268b539d8367">AVPacket::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00363">packet.h:363</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a2bcd88825ff723c7b938c7da6ec2fb9d"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a2bcd88825ff723c7b938c7da6ec2fb9d">MLPEncodeContext::number_of_frames</a></div><div class="ttdeci">unsigned int number_of_frames</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00188">mlpenc.c:188</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aac1b49b90997f9d1c81f0b012fe989e2"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aac1b49b90997f9d1c81f0b012fe989e2">MLPEncodeContext::ch_modifier_thd0</a></div><div class="ttdeci">uint8_t ch_modifier_thd0</div><div class="ttdoc">channel modifier for TrueHD stream 0</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00156">mlpenc.c:156</a></div></div>
<div class="ttc" id="acrc_8h_html"><div class="ttname"><a href="crc_8h.html">crc.h</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af70fbe8560fbddcdf572caea9b674a9ea65a9811f1de5cf90bc7739464ec66969"><div class="ttname"><a href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea65a9811f1de5cf90bc7739464ec66969">BITS_20</a></div><div class="ttdeci">@ BITS_20</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00478">mlpenc.c:478</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a0fea16a73eb04bf213d06b085dbc0cad"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a0fea16a73eb04bf213d06b085dbc0cad">MLPEncodeContext::dts</a></div><div class="ttdeci">uint16_t dts</div><div class="ttdoc">Decoding timestamp of current access unit.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00152">mlpenc.c:152</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2859c5fea361645734e04235ea1f6bf9"><div class="ttname"><a href="mlpenc_8c.html#a2859c5fea361645734e04235ea1f6bf9">write_block_data</a></div><div class="ttdeci">static void write_block_data(MLPEncodeContext *ctx, PutBitContext *pb)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01005">mlpenc.c:1005</a></div></div>
<div class="ttc" id="astruct_decoding_params_html_a57aa77aeffee3dc3498ebc222e25a36b"><div class="ttname"><a href="struct_decoding_params.html#a57aa77aeffee3dc3498ebc222e25a36b">DecodingParams::blocksize</a></div><div class="ttdeci">uint16_t blocksize</div><div class="ttdoc">number of PCM samples in current audio block</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00081">mlpenc.c:81</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af70fbe8560fbddcdf572caea9b674a9ea275067f048fbba39d65f9245a7ba37b2"><div class="ttname"><a href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9ea275067f048fbba39d65f9245a7ba37b2">BITS_24</a></div><div class="ttdeci">@ BITS_24</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00479">mlpenc.c:479</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22ae15fa2ff9267e219e2a919bcff57c612">PARAM_OUTSHIFT</a></div><div class="ttdeci">@ PARAM_OUTSHIFT</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00072">mlpenc.c:72</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a64b9db8831bc7c46927290fa48d172b3"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a64b9db8831bc7c46927290fa48d172b3">MLPEncodeContext::avctx</a></div><div class="ttdeci">AVCodecContext * avctx</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00104">mlpenc.c:104</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ab969e677cedd6fc7c73051d7cb86e6b4"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ab969e677cedd6fc7c73051d7cb86e6b4">MLPEncodeContext::lpc_ctx</a></div><div class="ttdeci">LPCContext lpc_ctx</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00201">mlpenc.c:201</a></div></div>
<div class="ttc" id="astruct_restart_header_html_a03c36b3ba649d32135ca8c789a4da9a6"><div class="ttname"><a href="struct_restart_header.html#a03c36b3ba649d32135ca8c789a4da9a6">RestartHeader::noisegen_seed</a></div><div class="ttdeci">uint32_t noisegen_seed</div><div class="ttdoc">The current seed value for the pseudorandom noise generator(s).</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00046">mlpenc.c:46</a></div></div>
<div class="ttc" id="amlp_8c_html_a1308e53a78a308e2323e7f7ab5a3dab1"><div class="ttname"><a href="mlp_8c.html#a1308e53a78a308e2323e7f7ab5a3dab1">ff_mlp_checksum16</a></div><div class="ttdeci">uint16_t ff_mlp_checksum16(const uint8_t *buf, unsigned int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00085">mlp.c:85</a></div></div>
<div class="ttc" id="amlp_8c_html_ae481302e6ec5b2704082f61b09a6135d"><div class="ttname"><a href="mlp_8c.html#ae481302e6ec5b2704082f61b09a6135d">ff_mlp_checksum8</a></div><div class="ttdeci">uint8_t ff_mlp_checksum8(const uint8_t *buf, unsigned int buf_size)</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00094">mlp.c:94</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a29c5e6675bc969f90bab35b7c67cc38f"><div class="ttname"><a href="mlpenc_8c.html#a29c5e6675bc969f90bab35b7c67cc38f">clear_decoding_params</a></div><div class="ttdeci">static void clear_decoding_params(MLPEncodeContext *ctx, DecodingParams decoding_params[MAX_SUBSTREAMS])</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00406">mlpenc.c:406</a></div></div>
<div class="ttc" id="amlp_8h_html_a7f061e6aa7a60fed59622b2b760ea619"><div class="ttname"><a href="mlp_8h.html#a7f061e6aa7a60fed59622b2b760ea619">MAX_MATRICES</a></div><div class="ttdeci">#define MAX_MATRICES</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00043">mlp.h:43</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a070fc2b0de3c6e5cdf23a6324f4a27e5"><div class="ttname"><a href="mlpenc_8c.html#a070fc2b0de3c6e5cdf23a6324f4a27e5">mlp_encode_frame</a></div><div class="ttdeci">static int mlp_encode_frame(AVCodecContext *avctx, AVPacket *avpkt, const AVFrame *frame, int *got_packet)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l02219">mlpenc.c:2219</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a7c1e9a6b17964df93ebe86a8909ac050"><div class="ttname"><a href="mlpenc_8c.html#a7c1e9a6b17964df93ebe86a8909ac050">SYNC_MAJOR</a></div><div class="ttdeci">#define SYNC_MAJOR</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00208">mlpenc.c:208</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a707273b0522bcff43b141c2bdf17ebd1"><div class="ttname"><a href="mlpenc_8c.html#a707273b0522bcff43b141c2bdf17ebd1">MLP_MAX_LPC_ORDER</a></div><div class="ttdeci">#define MLP_MAX_LPC_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00036">mlpenc.c:36</a></div></div>
<div class="ttc" id="astruct_a_v_format_context_html_a32379cc371463b235d54235d4af06a15"><div class="ttname"><a href="struct_a_v_format_context.html#a32379cc371463b235d54235d4af06a15">AVFormatContext::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="avformat_8h_source.html#l01354">avformat.h:1354</a></div></div>
<div class="ttc" id="aaudio__frame__queue_8h_html"><div class="ttname"><a href="audio__frame__queue_8h.html">audio_frame_queue.h</a></div></div>
<div class="ttc" id="asamplefmt_8h_html"><div class="ttname"><a href="samplefmt_8h.html">samplefmt.h</a></div></div>
<div class="ttc" id="amlpenc_8c_html_acf9d31c3b5b644148e1abad37999faac"><div class="ttname"><a href="mlpenc_8c.html#acf9d31c3b5b644148e1abad37999faac">compare_matrix_params</a></div><div class="ttdeci">static int compare_matrix_params(MLPEncodeContext *ctx, const MatrixParams *prev, const MatrixParams *mp)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00256">mlpenc.c:256</a></div></div>
<div class="ttc" id="astruct_restart_header_html_ac57661d62e71613a64a05ec582340539"><div class="ttname"><a href="struct_restart_header.html#ac57661d62e71613a64a05ec582340539">RestartHeader::max_channel</a></div><div class="ttdeci">uint8_t max_channel</div><div class="ttdoc">The index of the last channel coded in this substream.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00042">mlpenc.c:42</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ae97ff22b0cc6909b1e21e38492bd4286"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ae97ff22b0cc6909b1e21e38492bd4286">MLPEncodeContext::last_frame</a></div><div class="ttdeci">int32_t * last_frame</div><div class="ttdoc">Pointer to last frame with data to encode.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00129">mlpenc.c:129</a></div></div>
<div class="ttc" id="aaudio__frame__queue_8c_html_a810e29814cbdc646076ce885c664b4aa"><div class="ttname"><a href="audio__frame__queue_8c.html#a810e29814cbdc646076ce885c664b4aa">ff_af_queue_add</a></div><div class="ttdeci">int ff_af_queue_add(AudioFrameQueue *afq, const AVFrame *f)</div><div class="ttdef"><b>Definition:</b> <a href="audio__frame__queue_8c_source.html#l00044">audio_frame_queue.c:44</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gabc6d6651bba254cd0fa2c42a57228e65"><div class="ttname"><a href="group__channel__mask__c.html#gabc6d6651bba254cd0fa2c42a57228e65">AV_CH_LAYOUT_STEREO</a></div><div class="ttdeci">#define AV_CH_LAYOUT_STEREO</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00091">channel_layout.h:91</a></div></div>
<div class="ttc" id="astruct_matrix_params_html_a157b795b7f9adbb9a311a6ccdc3f65e9"><div class="ttname"><a href="struct_matrix_params.html#a157b795b7f9adbb9a311a6ccdc3f65e9">MatrixParams::coeff</a></div><div class="ttdeci">int32_t coeff[MAX_MATRICES][MAX_CHANNELS+2]</div><div class="ttdoc">decoding coefficients</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00061">mlpenc.c:61</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga0982ce29eced939dfcfb5b52416810ae"><div class="ttname"><a href="group__channel__mask__c.html#ga0982ce29eced939dfcfb5b52416810ae">AV_CH_LAYOUT_QUAD</a></div><div class="ttdeci">#define AV_CH_LAYOUT_QUAD</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00099">channel_layout.h:99</a></div></div>
<div class="ttc" id="alibxavs_8c_html_ad7b1875017b835e5558bae39b9cf7e69"><div class="ttname"><a href="libxavs_8c.html#ad7b1875017b835e5558bae39b9cf7e69">END_OF_STREAM</a></div><div class="ttdeci">#define END_OF_STREAM</div><div class="ttdef"><b>Definition:</b> <a href="libxavs_8c_source.html#l00036">libxavs.c:36</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2491da7e93d67801fa8efcf5a2ec3f62"><div class="ttname"><a href="mlpenc_8c.html#a2491da7e93d67801fa8efcf5a2ec3f62">set_filter_params</a></div><div class="ttdeci">static void set_filter_params(MLPEncodeContext *ctx, unsigned int channel, unsigned int filter, int clear_filter)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01382">mlpenc.c:1382</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2a7c31a8c82231203e4546dee7969199"><div class="ttname"><a href="mlpenc_8c.html#a2a7c31a8c82231203e4546dee7969199">SUBSTREAM_INFO_MAX_2_CHAN</a></div><div class="ttdeci">#define SUBSTREAM_INFO_MAX_2_CHAN</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00219">mlpenc.c:219</a></div></div>
<div class="ttc" id="amlp_8h_html_a34e4945cab9dbce5d535cd599409014d"><div class="ttname"><a href="mlp_8h.html#a34e4945cab9dbce5d535cd599409014d">FIR</a></div><div class="ttdeci">#define FIR</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00070">mlp.h:70</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gafbc01f68af47e3c5ce96211a93927996"><div class="ttname"><a href="group__lavc__core.html#gafbc01f68af47e3c5ce96211a93927996">AV_CODEC_CAP_EXPERIMENTAL</a></div><div class="ttdeci">#define AV_CODEC_CAP_EXPERIMENTAL</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00098">codec.h:98</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="astruct_path_counter_html"><div class="ttname"><a href="struct_path_counter.html">PathCounter</a></div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01949">mlpenc.c:1949</a></div></div>
<div class="ttc" id="astruct_restart_header_html_aeaa3db722326cdc88a97d825d9b1174f"><div class="ttname"><a href="struct_restart_header.html#aeaa3db722326cdc88a97d825d9b1174f">RestartHeader::max_output_bits</a></div><div class="ttdeci">uint8_t max_output_bits</div><div class="ttdoc">largest output bit-depth</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00053">mlpenc.c:53</a></div></div>
<div class="ttc" id="alzw_8c_html_a450ea4ae52aeb4ca6e2fabf02c695153"><div class="ttname"><a href="lzw_8c.html#a450ea4ae52aeb4ca6e2fabf02c695153">mask</a></div><div class="ttdeci">static const uint16_t mask[17]</div><div class="ttdef"><b>Definition:</b> <a href="lzw_8c_source.html#l00038">lzw.c:38</a></div></div>
<div class="ttc" id="astruct_decoding_params_html_a0913ceb58bac762d6fd1f67cb7645c66"><div class="ttname"><a href="struct_decoding_params.html#a0913ceb58bac762d6fd1f67cb7645c66">DecodingParams::quant_step_size</a></div><div class="ttdeci">uint8_t quant_step_size[MAX_CHANNELS]</div><div class="ttdoc">left shift to apply to Huffman-decoded residuals</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00082">mlpenc.c:82</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ae792a23f86ad46a37876a00e3d270a47"><div class="ttname"><a href="mlpenc_8c.html#ae792a23f86ad46a37876a00e3d270a47">copy_matrix_params</a></div><div class="ttdeci">static void copy_matrix_params(MatrixParams *dst, MatrixParams *src)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00359">mlpenc.c:359</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a1e4f6afaf3b4280aea964d663aa22914"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a1e4f6afaf3b4280aea964d663aa22914">MLPEncodeContext::seq_channel_params</a></div><div class="ttdeci">ChannelParams * seq_channel_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00196">mlpenc.c:196</a></div></div>
<div class="ttc" id="agroup__lavu__misc_html_gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a"><div class="ttname"><a href="group__lavu__misc.html#gga9a84bba4713dfced21a1a56163be1f48a7b4e33b8f30ac94d34ce8d9f7c33927a">AVMEDIA_TYPE_AUDIO</a></div><div class="ttdeci">@ AVMEDIA_TYPE_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="avutil_8h_source.html#l00202">avutil.h:202</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ab7bc15bb7898854fbb06875198d65457"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ab7bc15bb7898854fbb06875198d65457">MLPEncodeContext::channel_arrangement</a></div><div class="ttdeci">uint8_t channel_arrangement</div><div class="ttdoc">channel arrangement for MLP streams</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00154">mlpenc.c:154</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1649889be7896b9b8084a815e82a098fa7512b759cc75eecf08bbcf25a82f28f8"><div class="ttname"><a href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa7512b759cc75eecf08bbcf25a82f28f8">MLP_CHMODE_LEFT_RIGHT</a></div><div class="ttdeci">@ MLP_CHMODE_LEFT_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01442">mlpenc.c:1442</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ae981380122206671931315cdc5c96e09"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ae981380122206671931315cdc5c96e09">MLPEncodeContext::sequence_size</a></div><div class="ttdeci">unsigned int sequence_size</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00162">mlpenc.c:162</a></div></div>
<div class="ttc" id="avp3data_8h_html_a46a6da6b1936191571fd30b2a749f38c"><div class="ttname"><a href="vp3data_8h.html#a46a6da6b1936191571fd30b2a749f38c">bits</a></div><div class="ttdeci">uint8_t bits</div><div class="ttdef"><b>Definition:</b> <a href="vp3data_8h_source.html#l00202">vp3data.h:202</a></div></div>
<div class="ttc" id="astruct_best_offset_html"><div class="ttname"><a href="struct_best_offset.html">BestOffset</a></div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00089">mlpenc.c:89</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a996d5bda0f57839f6f32bbecfeeded34"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a996d5bda0f57839f6f32bbecfeeded34">MLPEncodeContext::timestamp</a></div><div class="ttdeci">uint16_t timestamp</div><div class="ttdoc">Timestamp of current access unit.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00151">mlpenc.c:151</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_afde2196b48e246b9fa24d05fe0540ae0"><div class="ttname"><a href="struct_m_l_p_encode_context.html#afde2196b48e246b9fa24d05fe0540ae0">MLPEncodeContext::cur_restart_header</a></div><div class="ttdeci">RestartHeader * cur_restart_header</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00182">mlpenc.c:182</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1649889be7896b9b8084a815e82a098fa4a48695d248cba2542611782180b308b"><div class="ttname"><a href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fa4a48695d248cba2542611782180b308b">MLP_CHMODE_MID_SIDE</a></div><div class="ttdeci">@ MLP_CHMODE_MID_SIDE</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01445">mlpenc.c:1445</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a12b91e63caee33e97021e16561e5986e"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a12b91e63caee33e97021e16561e5986e">MLPEncodeContext::ch_modifier_thd1</a></div><div class="ttdeci">uint8_t ch_modifier_thd1</div><div class="ttdoc">channel modifier for TrueHD stream 1</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00157">mlpenc.c:157</a></div></div>
<div class="ttc" id="atests_2movenc_8c_html_a93cc7296f13f507c1fd7abd0db36b898"><div class="ttname"><a href="tests_2movenc_8c.html#a93cc7296f13f507c1fd7abd0db36b898">ctx</a></div><div class="ttdeci">AVFormatContext * ctx</div><div class="ttdef"><b>Definition:</b> <a href="tests_2movenc_8c_source.html#l00048">movenc.c:48</a></div></div>
<div class="ttc" id="astruct_channel_params_html"><div class="ttname"><a href="struct_channel_params.html">ChannelParams</a></div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00085">mlp.h:85</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a7b6477a38ffb31ed091542cb8db1a3f0"><div class="ttname"><a href="mlpenc_8c.html#a7b6477a38ffb31ed091542cb8db1a3f0">mlp_peak_bitrate</a></div><div class="ttdeci">static int mlp_peak_bitrate(int peak_bitrate, int sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00482">mlpenc.c:482</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a889b84d5b3657df4a4e45b17b87848f5"><div class="ttname"><a href="struct_a_v_codec_context.html#a889b84d5b3657df4a4e45b17b87848f5">AVCodecContext::bits_per_raw_sample</a></div><div class="ttdeci">int bits_per_raw_sample</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01757">avcodec.h:1757</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a4a3f1d9fde15404017f479023dc6dbbb"><div class="ttname"><a href="mlpenc_8c.html#a4a3f1d9fde15404017f479023dc6dbbb">default_decoding_params</a></div><div class="ttdeci">static void default_decoding_params(MLPEncodeContext *ctx, DecodingParams decoding_params[MAX_SUBSTREAMS])</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00439">mlpenc.c:439</a></div></div>
<div class="ttc" id="amlpenc_8c_html_add9644c0b59a67ba377c659269f69f27"><div class="ttname"><a href="mlpenc_8c.html#add9644c0b59a67ba377c659269f69f27">code_matrix_coeffs</a></div><div class="ttdeci">static void code_matrix_coeffs(MLPEncodeContext *ctx, unsigned int mat)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01481">mlpenc.c:1481</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a73bde0a37f3b1efc839f11295bfbf42a"><div class="ttname"><a href="struct_a_v_packet.html#a73bde0a37f3b1efc839f11295bfbf42a">AVPacket::pts</a></div><div class="ttdeci">int64_t pts</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00356">packet.h:356</a></div></div>
<div class="ttc" id="astruct_filter_params_html_ab827685738db818a38388f86d6bf24db"><div class="ttname"><a href="struct_filter_params.html#ab827685738db818a38388f86d6bf24db">FilterParams::coeff_shift</a></div><div class="ttdeci">int coeff_shift</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00081">mlp.h:81</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a43cd94d72bae3ced0411224fd961b905"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a43cd94d72bae3ced0411224fd961b905">MLPEncodeContext::inout_buffer</a></div><div class="ttdeci">int32_t * inout_buffer</div><div class="ttdoc">Pointer to data currently being read from lavc or written to bitstream.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00124">mlpenc.c:124</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a9f32bf88165b4d79d2fbd805328128de"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a9f32bf88165b4d79d2fbd805328128de">MLPEncodeContext::coded_peak_bitrate</a></div><div class="ttdeci">int coded_peak_bitrate</div><div class="ttdoc">peak bitrate for this major sync header</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00113">mlpenc.c:113</a></div></div>
<div class="ttc" id="astruct_best_offset_html_afd143f2e254f7551acac353e381efbc9"><div class="ttname"><a href="struct_best_offset.html#afd143f2e254f7551acac353e381efbc9">BestOffset::min</a></div><div class="ttdeci">int32_t min</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00093">mlpenc.c:93</a></div></div>
<div class="ttc" id="amlp_8c_html_a8ab94b70b68515780692dfe81c9a91b5"><div class="ttname"><a href="mlp_8c.html#a8ab94b70b68515780692dfe81c9a91b5">ff_mlp_channel_layouts</a></div><div class="ttdeci">const uint64_t ff_mlp_channel_layouts[12]</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00058">mlp.c:58</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_afd12020da5a235dfcf0c3c748fb5baed"><div class="ttname"><a href="audio__convert_8c.html#afd12020da5a235dfcf0c3c748fb5baed">int32_t</a></div><div class="ttdeci">int32_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gad0badd9c9984bc74290f26c2edfdfe44"><div class="ttname"><a href="group__channel__mask__c.html#gad0badd9c9984bc74290f26c2edfdfe44">AV_CH_LAYOUT_2_1</a></div><div class="ttdeci">#define AV_CH_LAYOUT_2_1</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00093">channel_layout.h:93</a></div></div>
<div class="ttc" id="acommon_8h_html_ad6d88940cfc29c13a3e51ded211fc242"><div class="ttname"><a href="common_8h.html#ad6d88940cfc29c13a3e51ded211fc242">FFABS</a></div><div class="ttdeci">#define FFABS(a)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00072">common.h:72</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a0e82f1088fdc24c14bf175d2ac77523f"><div class="ttname"><a href="filter__design_8txt.html#a0e82f1088fdc24c14bf175d2ac77523f">if</a></div><div class="ttdeci">if(ret)</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00179">filter_design.txt:179</a></div></div>
<div class="ttc" id="astruct_channel_params_html_adfd19a61dd2a0c35040d903bb8bd3ff8"><div class="ttname"><a href="struct_channel_params.html#adfd19a61dd2a0c35040d903bb8bd3ff8">ChannelParams::coeff</a></div><div class="ttdeci">int32_t coeff[NUM_FILTERS][MAX_FIR_ORDER]</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00087">mlp.h:87</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a61ad8d034e9f6a4a3244042fb7fb7c35"><div class="ttname"><a href="mlpenc_8c.html#a61ad8d034e9f6a4a3244042fb7fb7c35">determine_bits</a></div><div class="ttdeci">static void determine_bits(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01733">mlpenc.c:1733</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a274eaf95a83e677a491e81050c4c85b8"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a274eaf95a83e677a491e81050c4c85b8">MLPEncodeContext::num_substreams</a></div><div class="ttdeci">int num_substreams</div><div class="ttdoc">Number of substreams contained within this stream.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00106">mlpenc.c:106</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a50775a499308ee70072d926a730a884d"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a50775a499308ee70072d926a730a884d">MLPEncodeContext::frame_index</a></div><div class="ttdeci">unsigned int frame_index</div><div class="ttdoc">Index of current frame being encoded.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00143">mlpenc.c:143</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a8c76be3ae2a595e8666a90231a74b47c"><div class="ttname"><a href="mlpenc_8c.html#a8c76be3ae2a595e8666a90231a74b47c">lossless_matrix_coeffs</a></div><div class="ttdeci">static void lossless_matrix_coeffs(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01500">mlpenc.c:1500</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a474e583de6753549980fb75b59df6ffc"><div class="ttname"><a href="mlpenc_8c.html#a474e583de6753549980fb75b59df6ffc">codebook_bits</a></div><div class="ttdeci">static void codebook_bits(MLPEncodeContext *ctx, unsigned int channel, int codebook, int offset, int32_t min, int32_t max, BestOffset *bo, int direction)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01693">mlpenc.c:1693</a></div></div>
<div class="ttc" id="astruct_audio_frame_queue_html"><div class="ttname"><a href="struct_audio_frame_queue.html">AudioFrameQueue</a></div><div class="ttdef"><b>Definition:</b> <a href="audio__frame__queue_8h_source.html#l00032">audio_frame_queue.h:32</a></div></div>
<div class="ttc" id="astruct_filter_params_html"><div class="ttname"><a href="struct_filter_params.html">FilterParams</a></div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00074">mlp.h:74</a></div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a0d0d38a28b9ebbbbeb8caeb0a32a0350"><div class="ttname"><a href="mlpenc_8c.html#a0d0d38a28b9ebbbbeb8caeb0a32a0350">codebook_extremes</a></div><div class="ttdeci">static const int codebook_extremes[3][2]</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01553">mlpenc.c:1553</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a54bf14a05a0d97e240e53dfd656e75a9"><div class="ttname"><a href="mlpenc_8c.html#a54bf14a05a0d97e240e53dfd656e75a9">apply_filters</a></div><div class="ttdeci">static void apply_filters(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01877">mlpenc.c:1877</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ae088e57c48595c7449bd66d36ab1fa28"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ae088e57c48595c7449bd66d36ab1fa28">MLPEncodeContext::cur_channel_params</a></div><div class="ttdeci">ChannelParams * cur_channel_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00180">mlpenc.c:180</a></div></div>
<div class="ttc" id="aallcodecs_8c_html_a3ef0012f536c783303fd7798eb0a7682"><div class="ttname"><a href="allcodecs_8c.html#a3ef0012f536c783303fd7798eb0a7682">ff_mlp_encoder</a></div><div class="ttdeci">AVCodec ff_mlp_encoder</div></div>
<div class="ttc" id="amlpenc_8c_html_aed9d9faeee7b6c517bf9fa8cc7f188cd"><div class="ttname"><a href="mlpenc_8c.html#aed9d9faeee7b6c517bf9fa8cc7f188cd">apply_filter</a></div><div class="ttdeci">static int apply_filter(MLPEncodeContext *ctx, unsigned int channel)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01805">mlpenc.c:1805</a></div></div>
<div class="ttc" id="astruct_filter_params_html_ac0582ca49ecafe4bb7f6b4c8138710c4"><div class="ttname"><a href="struct_filter_params.html#ac0582ca49ecafe4bb7f6b4c8138710c4">FilterParams::order</a></div><div class="ttdeci">uint8_t order</div><div class="ttdoc">number of taps in filter</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00075">mlp.h:75</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aea8b3610a27921ac0f21116f23240960"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aea8b3610a27921ac0f21116f23240960">MLPEncodeContext::min_restart_interval</a></div><div class="ttdeci">unsigned int min_restart_interval</div><div class="ttdoc">Min interval of access units in between two major frames.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00148">mlpenc.c:148</a></div></div>
<div class="ttc" id="astruct_filter_params_html_ab003690342e3bd2acb48db87f9c1ef41"><div class="ttname"><a href="struct_filter_params.html#ab003690342e3bd2acb48db87f9c1ef41">FilterParams::coeff_bits</a></div><div class="ttdeci">int coeff_bits</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00080">mlp.h:80</a></div></div>
<div class="ttc" id="ahca__data_8h_html_a0ff97d47150055f4ecea7a66e2aa0b70"><div class="ttname"><a href="hca__data_8h.html#a0ff97d47150055f4ecea7a66e2aa0b70">quant_step_size</a></div><div class="ttdeci">static const float quant_step_size[]</div><div class="ttdef"><b>Definition:</b> <a href="hca__data_8h_source.html#l00125">hca_data.h:125</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a618af9203a7a876411cb216cb7f55c7e"><div class="ttname"><a href="mlpenc_8c.html#a618af9203a7a876411cb216cb7f55c7e">SYNC_TRUEHD</a></div><div class="ttdeci">#define SYNC_TRUEHD</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00212">mlpenc.c:212</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a33c7002b62ebad30385111b997c84442"><div class="ttname"><a href="mlpenc_8c.html#a33c7002b62ebad30385111b997c84442">copy_filter_params</a></div><div class="ttdeci">static void copy_filter_params(ChannelParams *dst_cp, ChannelParams *src_cp, int filter)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00340">mlpenc.c:340</a></div></div>
<div class="ttc" id="astruct_matrix_params_html_a6a5a807416f8222b6b6d8581af754786"><div class="ttname"><a href="struct_matrix_params.html#a6a5a807416f8222b6b6d8581af754786">MatrixParams::count</a></div><div class="ttdeci">uint8_t count</div><div class="ttdoc">number of matrices to apply</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00057">mlpenc.c:57</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a9b46ed007a5e12da14737c27a474d2d6"><div class="ttname"><a href="mlpenc_8c.html#a9b46ed007a5e12da14737c27a474d2d6">SYNC_MLP</a></div><div class="ttdeci">#define SYNC_MLP</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00211">mlpenc.c:211</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22">ParamFlags</a></div><div class="ttdeci">ParamFlags</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00067">mlpenc.c:67</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af7491232c46fa2942962cfb737ceef02"><div class="ttname"><a href="mlpenc_8c.html#af7491232c46fa2942962cfb737ceef02">input_to_sample_buffer</a></div><div class="ttdeci">static void input_to_sample_buffer(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01284">mlpenc.c:1284</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1ab9d630a973ed550825c6e59b8a5a4f"><div class="ttname"><a href="mlpenc_8c.html#a1ab9d630a973ed550825c6e59b8a5a4f">rematrix_channels</a></div><div class="ttdeci">static void rematrix_channels(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01915">mlpenc.c:1915</a></div></div>
<div class="ttc" id="astruct_matrix_params_html_a7f5e37106dbce84f83e1cadf63dde1eb"><div class="ttname"><a href="struct_matrix_params.html#a7f5e37106dbce84f83e1cadf63dde1eb">MatrixParams::shift</a></div><div class="ttdeci">int8_t shift[MAX_CHANNELS]</div><div class="ttdoc">Left shift to apply to decoded PCM values to get final 24-bit output.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00064">mlpenc.c:64</a></div></div>
<div class="ttc" id="alpc_8c_html_ac2ff4c33ca44f72eaecdd61be5b6e210"><div class="ttname"><a href="lpc_8c.html#ac2ff4c33ca44f72eaecdd61be5b6e210">ff_lpc_calc_coefs</a></div><div class="ttdeci">int ff_lpc_calc_coefs(LPCContext *s, const int32_t *samples, int blocksize, int min_order, int max_order, int precision, int32_t coefs[][MAX_LPC_ORDER], int *shift, enum FFLPCType lpc_type, int lpc_passes, int omethod, int min_shift, int max_shift, int zero_shift)</div><div class="ttdef"><b>Definition:</b> <a href="lpc_8c_source.html#l00200">lpc.c:200</a></div></div>
<div class="ttc" id="aregdef_8h_html_ae771351dd440a8640270282362e338d0"><div class="ttname"><a href="regdef_8h.html#ae771351dd440a8640270282362e338d0">fp</a></div><div class="ttdeci">#define fp</div><div class="ttdef"><b>Definition:</b> <a href="regdef_8h_source.html#l00044">regdef.h:44</a></div></div>
<div class="ttc" id="avideogen_8c_html_ae21f357c223957d36046a0d71cc6aed7"><div class="ttname"><a href="videogen_8c.html#ae21f357c223957d36046a0d71cc6aed7">seed</a></div><div class="ttdeci">static unsigned int seed</div><div class="ttdef"><b>Definition:</b> <a href="videogen_8c_source.html#l00078">videogen.c:78</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aeee3677d59de3ee0a6b3d870ffd2becf"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aeee3677d59de3ee0a6b3d870ffd2becf">MLPEncodeContext::seq_index</a></div><div class="ttdeci">unsigned int seq_index</div><div class="ttdoc">Sequence index for high compression levels.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00191">mlpenc.c:191</a></div></div>
<div class="ttc" id="amlpenc_8c_html_aaf83396c069f74107e1b254bba5d54f0"><div class="ttname"><a href="mlpenc_8c.html#aaf83396c069f74107e1b254bba5d54f0">number_sbits</a></div><div class="ttdeci">static int number_sbits(int number)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00468">mlpenc.c:468</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ae89f1598194712ba28f974c597e801e8"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ae89f1598194712ba28f974c597e801e8">MLPEncodeContext::fs</a></div><div class="ttdeci">int fs</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00119">mlpenc.c:119</a></div></div>
<div class="ttc" id="agxfenc_8c_html_a750b5d744c39a06bfb13e6eb010e35d0"><div class="ttname"><a href="gxfenc_8c.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a></div><div class="ttdeci">int index</div><div class="ttdef"><b>Definition:</b> <a href="gxfenc_8c_source.html#l00089">gxfenc.c:89</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_af01c07a0f573f967f15d2fd55a2f657c"><div class="ttname"><a href="struct_m_l_p_encode_context.html#af01c07a0f573f967f15d2fd55a2f657c">MLPEncodeContext::write_buffer</a></div><div class="ttdeci">int32_t * write_buffer</div><div class="ttdoc">Pointer to data currently being written to bitstream.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00126">mlpenc.c:126</a></div></div>
<div class="ttc" id="aallcodecs_8c_html_a825de2396bd0865d2aa60fd167676e82"><div class="ttname"><a href="allcodecs_8c.html#a825de2396bd0865d2aa60fd167676e82">ff_truehd_encoder</a></div><div class="ttdeci">AVCodec ff_truehd_encoder</div></div>
<div class="ttc" id="ah264pred__template_8c_html_a93cca9adbbca82ea00bf3250781f6dce"><div class="ttname"><a href="h264pred__template_8c.html#a93cca9adbbca82ea00bf3250781f6dce">for</a></div><div class="ttdeci">for(j=16;j &gt;0;--j)</div><div class="ttdef"><b>Definition:</b> <a href="h264pred__template_8c_source.html#l00469">h264pred_template.c:469</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ae43c4ca0e730dc56b31bc84e52806798"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ae43c4ca0e730dc56b31bc84e52806798">MLPEncodeContext::major_number_of_frames</a></div><div class="ttdeci">unsigned int major_number_of_frames</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00133">mlpenc.c:133</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html_a4e308202bcad896d017026fde899b4e6"><div class="ttname"><a href="struct_put_bit_context.html#a4e308202bcad896d017026fde899b4e6">PutBitContext::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00054">put_bits.h:54</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_af194e410d7a0ce2bba0a328c96cebffa"><div class="ttname"><a href="struct_m_l_p_encode_context.html#af194e410d7a0ce2bba0a328c96cebffa">MLPEncodeContext::num_channels</a></div><div class="ttdeci">int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00108">mlpenc.c:108</a></div></div>
<div class="ttc" id="amlp_8c_html_a6687aa64d48b134e173851b73fecd23a"><div class="ttname"><a href="mlp_8c.html#a6687aa64d48b134e173851b73fecd23a">ff_mlp_restart_checksum</a></div><div class="ttdeci">uint8_t ff_mlp_restart_checksum(const uint8_t *buf, unsigned int bit_size)</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00101">mlp.c:101</a></div></div>
<div class="ttc" id="amlpenc_8c_html_aa907ef964500d8b2e35c1f3000012ce6"><div class="ttname"><a href="mlpenc_8c.html#aa907ef964500d8b2e35c1f3000012ce6">code_filter_coeffs</a></div><div class="ttdeci">static void code_filter_coeffs(MLPEncodeContext *ctx, FilterParams *fp, int32_t *fcoeff)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01352">mlpenc.c:1352</a></div></div>
<div class="ttc" id="astruct_matrix_params_html_a5aeebfb8f29614f0f5fd4d0bc4d93f3b"><div class="ttname"><a href="struct_matrix_params.html#a5aeebfb8f29614f0f5fd4d0bc4d93f3b">MatrixParams::fbits</a></div><div class="ttdeci">uint8_t fbits[MAX_CHANNELS]</div><div class="ttdoc">fraction bits</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00062">mlpenc.c:62</a></div></div>
<div class="ttc" id="amlp_8h_html_a671e116a234ad12e096b39ae688232aa"><div class="ttname"><a href="mlp_8h.html#a671e116a234ad12e096b39ae688232aa">ChannelParams</a></div><div class="ttdeci">struct ChannelParams ChannelParams</div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aa891019c5591cc265a3e7bb9f00170ae"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aa891019c5591cc265a3e7bb9f00170ae">MLPEncodeContext::prev_decoding_params</a></div><div class="ttdeci">DecodingParams * prev_decoding_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00194">mlpenc.c:194</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html_a3c0fa12fafe59c44d4b16e60d8385637"><div class="ttname"><a href="libavutil_2internal_8h.html#a3c0fa12fafe59c44d4b16e60d8385637">NULL_IF_CONFIG_SMALL</a></div><div class="ttdeci">#define NULL_IF_CONFIG_SMALL(x)</div><div class="ttdef"><b>Definition:</b> <a href="libavutil_2internal_8h_source.html#l00153">internal.h:153</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af70fbe8560fbddcdf572caea9b674a9e"><div class="ttname"><a href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9e">InputBitDepth</a></div><div class="ttdeci">InputBitDepth</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00476">mlpenc.c:476</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a6931030cf0bd9781dc5d69480abb9b88">PARAM_IIR</a></div><div class="ttdeci">@ PARAM_IIR</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00075">mlpenc.c:75</a></div></div>
<div class="ttc" id="astruct_decoding_params_html_acf07eff741b56207178d8008c9277bfe"><div class="ttname"><a href="struct_decoding_params.html#acf07eff741b56207178d8008c9277bfe">DecodingParams::param_presence_flags</a></div><div class="ttdeci">uint8_t param_presence_flags</div><div class="ttdoc">Bitmask of which parameter sets are conveyed in a decoding parameter block.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00086">mlpenc.c:86</a></div></div>
<div class="ttc" id="alpc_8h_html_a3fccddab58274c32cbd7e3791c442db3"><div class="ttname"><a href="lpc_8h.html#a3fccddab58274c32cbd7e3791c442db3">MAX_LPC_ORDER</a></div><div class="ttdeci">#define MAX_LPC_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="lpc_8h_source.html#l00038">lpc.h:38</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22aade2a06352a6277e2938af740c0f4c6c">PARAM_QUANTSTEP</a></div><div class="ttdeci">@ PARAM_QUANTSTEP</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00073">mlpenc.c:73</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ac5d4bb5b0fb0dc7316fb3c7a73029912">AV_SAMPLE_FMT_NONE</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00059">samplefmt.h:59</a></div></div>
<div class="ttc" id="aflacdsp__template_8c_html_a924f03b9b06f2793262e576df93492db"><div class="ttname"><a href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a></div><div class="ttdeci">#define sample</div><div class="ttdef"><b>Definition:</b> <a href="flacdsp__template_8c_source.html#l00044">flacdsp_template.c:44</a></div></div>
<div class="ttc" id="amlp_8h_html_a05ad0f170f4e5e950829493d231f41b2"><div class="ttname"><a href="mlp_8h.html#a05ad0f170f4e5e950829493d231f41b2">MAX_SUBSTREAMS</a></div><div class="ttdeci">#define MAX_SUBSTREAMS</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00048">mlp.h:48</a></div></div>
<div class="ttc" id="avf__mcdeint_8c_html_acd3879b06d838d18d5675d7993080678"><div class="ttname"><a href="vf__mcdeint_8c.html#acd3879b06d838d18d5675d7993080678">parity</a></div><div class="ttdeci">mcdeint parity</div><div class="ttdef"><b>Definition:</b> <a href="vf__mcdeint_8c_source.html#l00274">vf_mcdeint.c:274</a></div></div>
<div class="ttc" id="amlp_8h_html_a040cf170c954ef6b5ac5035eb795179d"><div class="ttname"><a href="mlp_8h.html#a040cf170c954ef6b5ac5035eb795179d">NUM_FILTERS</a></div><div class="ttdeci">#define NUM_FILTERS</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00061">mlp.h:61</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a4bf2f10aa4e74e31cc746d8f47cca19e"><div class="ttname"><a href="mlpenc_8c.html#a4bf2f10aa4e74e31cc746d8f47cca19e">generate_2_noise_channels</a></div><div class="ttdeci">static void generate_2_noise_channels(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01894">mlpenc.c:1894</a></div></div>
<div class="ttc" id="amlpenc_8c_html_af70fbe8560fbddcdf572caea9b674a9eabb0eee326b181eb02d5c284fc424ffeb"><div class="ttname"><a href="mlpenc_8c.html#af70fbe8560fbddcdf572caea9b674a9eabb0eee326b181eb02d5c284fc424ffeb">BITS_16</a></div><div class="ttdeci">@ BITS_16</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00477">mlpenc.c:477</a></div></div>
<div class="ttc" id="amlpenc_8c_html_adf283efe75a88d83df17b0262662387e"><div class="ttname"><a href="mlpenc_8c.html#adf283efe75a88d83df17b0262662387e">write_access_unit</a></div><div class="ttdeci">static unsigned int write_access_unit(MLPEncodeContext *ctx, uint8_t *buf, int buf_size, int restart_frame)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01184">mlpenc.c:1184</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gae9da5d6069701241a22f3af19b152662"><div class="ttname"><a href="group__channel__mask__c.html#gae9da5d6069701241a22f3af19b152662">AV_CH_LAYOUT_5POINT1_BACK</a></div><div class="ttdeci">#define AV_CH_LAYOUT_5POINT1_BACK</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00103">channel_layout.h:103</a></div></div>
<div class="ttc" id="awriting__filters_8txt_html_ae1df9c886af8e844bb8849d403b76663"><div class="ttname"><a href="writing__filters_8txt.html#ae1df9c886af8e844bb8849d403b76663">offset</a></div><div class="ttdeci">it s the only field you need to keep assuming you have a context There is some magic you don t need to care about around this just let it vf offset</div><div class="ttdef"><b>Definition:</b> <a href="writing__filters_8txt_source.html#l00086">writing_filters.txt:86</a></div></div>
<div class="ttc" id="alpc_8h_html_a1ca3a3b4de34b03f39290e6517d5203d"><div class="ttname"><a href="lpc_8h.html#a1ca3a3b4de34b03f39290e6517d5203d">ORDER_METHOD_EST</a></div><div class="ttdeci">#define ORDER_METHOD_EST</div><div class="ttdef"><b>Definition:</b> <a href="lpc_8h_source.html#l00030">lpc.h:30</a></div></div>
<div class="ttc" id="aaac_8h_html_ac69ee46f4a51ed14f0d68628c2dec71d"><div class="ttname"><a href="aac_8h.html#ac69ee46f4a51ed14f0d68628c2dec71d">MAX_CHANNELS</a></div><div class="ttdeci">#define MAX_CHANNELS</div><div class="ttdef"><b>Definition:</b> <a href="aac_8h_source.html#l00047">aac.h:47</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a1bdba69ea111e2a9d03fdaa7a46a4c45"><div class="ttname"><a href="struct_a_v_codec_context.html#a1bdba69ea111e2a9d03fdaa7a46a4c45">AVCodecContext::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdoc">sample format</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1194</a></div></div>
<div class="ttc" id="astruct_restart_header_html"><div class="ttname"><a href="struct_restart_header.html">RestartHeader</a></div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00040">mlpenc.c:40</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a79c9862ac9afdf80c94abb68382b5943"><div class="ttname"><a href="mlpenc_8c.html#a79c9862ac9afdf80c94abb68382b5943">number_trailing_zeroes</a></div><div class="ttdeci">static int number_trailing_zeroes(int32_t sample)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01308">mlpenc.c:1308</a></div></div>
<div class="ttc" id="astruct_restart_header_html_acd1cc2ff2eca785ac67865d8063a0711"><div class="ttname"><a href="struct_restart_header.html#acd1cc2ff2eca785ac67865d8063a0711">RestartHeader::max_huff_lsbs</a></div><div class="ttdeci">uint8_t max_huff_lsbs</div><div class="ttdoc">largest huff_lsbs</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00052">mlpenc.c:52</a></div></div>
<div class="ttc" id="aintmath_8h_html_a2998e3360a5d1a5763e8c1008b7b2e1d"><div class="ttname"><a href="intmath_8h.html#a2998e3360a5d1a5763e8c1008b7b2e1d">av_log2</a></div><div class="ttdeci">#define av_log2</div><div class="ttdef"><b>Definition:</b> <a href="intmath_8h_source.html#l00083">intmath.h:83</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a9a371bcc72d6998885cffaf64a0ad0d2"><div class="ttname"><a href="mlpenc_8c.html#a9a371bcc72d6998885cffaf64a0ad0d2">input_data</a></div><div class="ttdeci">static void input_data(MLPEncodeContext *ctx, void *samples)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01276">mlpenc.c:1276</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gae3fc8d83d40cfbd4910b16d526beb294"><div class="ttname"><a href="group__channel__mask__c.html#gae3fc8d83d40cfbd4910b16d526beb294">AV_CH_LAYOUT_3POINT1</a></div><div class="ttdeci">#define AV_CH_LAYOUT_3POINT1</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00095">channel_layout.h:95</a></div></div>
<div class="ttc" id="alpc_8c_html_a53639f3988c18573060619c85d134575"><div class="ttname"><a href="lpc_8c.html#a53639f3988c18573060619c85d134575">ff_lpc_end</a></div><div class="ttdeci">av_cold void ff_lpc_end(LPCContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="lpc_8c_source.html#l00322">lpc.c:322</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ac3861755d77e3b51bef8b2052f7182d6"><div class="ttname"><a href="mlpenc_8c.html#ac3861755d77e3b51bef8b2052f7182d6">compare_filter_params</a></div><div class="ttdeci">static int compare_filter_params(const ChannelParams *prev_cp, const ChannelParams *cp, int filter)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00231">mlpenc.c:231</a></div></div>
<div class="ttc" id="astruct_restart_header_html_ae6eea1db40b2af00111f4c28d60f7e04"><div class="ttname"><a href="struct_restart_header.html#ae6eea1db40b2af00111f4c28d60f7e04">RestartHeader::noise_shift</a></div><div class="ttdeci">uint8_t noise_shift</div><div class="ttdoc">The left shift applied to random noise in 0x31ea substreams.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00045">mlpenc.c:45</a></div></div>
<div class="ttc" id="astruct_matrix_params_html_a201d00893b6fae0188a0d80acd8662d4"><div class="ttname"><a href="struct_matrix_params.html#a201d00893b6fae0188a0d80acd8662d4">MatrixParams::forco</a></div><div class="ttdeci">int32_t forco[MAX_MATRICES][MAX_CHANNELS+2]</div><div class="ttdoc">forward coefficients</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00060">mlpenc.c:60</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ae2ba46cb9293621cc994fb0a989d3bd0"><div class="ttname"><a href="mlpenc_8c.html#ae2ba46cb9293621cc994fb0a989d3bd0">FLAGS_DVDA</a></div><div class="ttdeci">#define FLAGS_DVDA</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00215">mlpenc.c:215</a></div></div>
<div class="ttc" id="astruct_best_offset_html_a5d452f774ac4f29df7c15fa79fe5e0b1"><div class="ttname"><a href="struct_best_offset.html#a5d452f774ac4f29df7c15fa79fe5e0b1">BestOffset::max</a></div><div class="ttdeci">int32_t max</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00094">mlpenc.c:94</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ae5a70a371d0ef5ea6fb067341dc64186"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ae5a70a371d0ef5ea6fb067341dc64186">MLPEncodeContext::flags</a></div><div class="ttdeci">int flags</div><div class="ttdoc">major sync info flags</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00115">mlpenc.c:115</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a57c57e21dbbc8777ed8a0a78ba89fc7d"><div class="ttname"><a href="put__bits_8h.html#a57c57e21dbbc8777ed8a0a78ba89fc7d">put_bits_count</a></div><div class="ttdeci">static int put_bits_count(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00083">put_bits.h:83</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga03f59e18b3598aa0cab9ed675c287a36"><div class="ttname"><a href="group__channel__mask__c.html#ga03f59e18b3598aa0cab9ed675c287a36">AV_CH_LAYOUT_2POINT1</a></div><div class="ttdeci">#define AV_CH_LAYOUT_2POINT1</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00092">channel_layout.h:92</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a2585186da3164e3778930f40ed14f3bd"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a2585186da3164e3778930f40ed14f3bd">PARAM_PRESENT</a></div><div class="ttdeci">@ PARAM_PRESENT</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00077">mlpenc.c:77</a></div></div>
<div class="ttc" id="alibavcodec_2internal_8h_html_ab4ca16b0fda02840383d0b6d08a44660"><div class="ttname"><a href="libavcodec_2internal_8h.html#ab4ca16b0fda02840383d0b6d08a44660">FF_CODEC_CAP_INIT_CLEANUP</a></div><div class="ttdeci">#define FF_CODEC_CAP_INIT_CLEANUP</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2internal_8h_source.html#l00048">internal.h:48</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a005e38236084f5660e836af4d76f37b6"><div class="ttname"><a href="mlpenc_8c.html#a005e38236084f5660e836af4d76f37b6">SUBSTREAM_INFO_ALWAYS_SET</a></div><div class="ttdeci">#define SUBSTREAM_INFO_ALWAYS_SET</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00221">mlpenc.c:221</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="astruct_channel_params_html_adcc56a7bcd2e5e07df54a8deb9cf9283"><div class="ttname"><a href="struct_channel_params.html#adcc56a7bcd2e5e07df54a8deb9cf9283">ChannelParams::huff_lsbs</a></div><div class="ttdeci">uint8_t huff_lsbs</div><div class="ttdoc">Size of residual suffix not encoded using VLC.</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00092">mlp.h:92</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a20a35f22ef020f90d8422ddb47c712d0"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a20a35f22ef020f90d8422ddb47c712d0">MLPEncodeContext::prev_channel_params</a></div><div class="ttdeci">ChannelParams * prev_channel_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00193">mlpenc.c:193</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a7aaba87cd747f76d39080abd328255cc"><div class="ttname"><a href="mlpenc_8c.html#a7aaba87cd747f76d39080abd328255cc">restart_decoding_params</a></div><div class="ttdeci">static DecodingParams restart_decoding_params[MAX_SUBSTREAMS]</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00205">mlpenc.c:205</a></div></div>
<div class="ttc" id="astruct_channel_params_html_afe12d50bcc0b7c12162098108282ba44"><div class="ttname"><a href="struct_channel_params.html#afe12d50bcc0b7c12162098108282ba44">ChannelParams::codebook</a></div><div class="ttdeci">uint8_t codebook</div><div class="ttdoc">Which VLC codebook to use to read residuals.</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00091">mlp.h:91</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ab39441a27347996f5c9b9ee235520f65"><div class="ttname"><a href="mlpenc_8c.html#ab39441a27347996f5c9b9ee235520f65">compare_best_offset</a></div><div class="ttdeci">static int compare_best_offset(BestOffset *prev, BestOffset *cur)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01970">mlpenc.c:1970</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_gaf9a51ca15301871723577c730b5865c5"><div class="ttname"><a href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a></div><div class="ttdeci">AVSampleFormat</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00058">samplefmt.h:58</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a4ee3c1db0022c1b921a6f6ca2ee2f8bb"><div class="ttname"><a href="mlpenc_8c.html#a4ee3c1db0022c1b921a6f6ca2ee2f8bb">BestOffset</a></div><div class="ttdeci">struct BestOffset BestOffset</div></div>
<div class="ttc" id="amlpenc_8c_html_a6cf2c9926e18b30818f62b5248ce804b"><div class="ttname"><a href="mlpenc_8c.html#a6cf2c9926e18b30818f62b5248ce804b">restart_best_offset</a></div><div class="ttdeci">static BestOffset restart_best_offset[NUM_CODEBOOKS]</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00206">mlpenc.c:206</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_gacc48c498c05b3b3c2549f715ba4f1d1b"><div class="ttname"><a href="group__channel__mask__c.html#gacc48c498c05b3b3c2549f715ba4f1d1b">AV_CH_LAYOUT_4POINT1</a></div><div class="ttdeci">#define AV_CH_LAYOUT_4POINT1</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00097">channel_layout.h:97</a></div></div>
<div class="ttc" id="aaudio__convert_8c_html_ae1affc9ca37cfb624959c866a73f83c2"><div class="ttname"><a href="audio__convert_8c.html#ae1affc9ca37cfb624959c866a73f83c2">uint8_t</a></div><div class="ttdeci">uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00194">audio_convert.c:194</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_S16</div><div class="ttdoc">signed 16 bits</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00061">samplefmt.h:61</a></div></div>
<div class="ttc" id="astruct_put_bit_context_html"><div class="ttname"><a href="struct_put_bit_context.html">PutBitContext</a></div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00051">put_bits.h:51</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a71036f5870d060959d20867c8997f36c"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a71036f5870d060959d20867c8997f36c">MLPEncodeContext::frame_size</a></div><div class="ttdeci">unsigned int * frame_size</div><div class="ttdoc">Array with number of samples/channel in each access unit.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00142">mlpenc.c:142</a></div></div>
<div class="ttc" id="alibavcodec_2diracdec_8c_html_af8a1d2ed31f7c9a00fec46a798edb61b"><div class="ttname"><a href="libavcodec_2diracdec_8c.html#af8a1d2ed31f7c9a00fec46a798edb61b">MAX_BLOCKSIZE</a></div><div class="ttdeci">#define MAX_BLOCKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="libavcodec_2diracdec_8c_source.html#l00054">diracdec.c:54</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a67c2a68bf2e47e49ffd54fd89853ba3a">PARAM_HUFFOFFSET</a></div><div class="ttdeci">@ PARAM_HUFFOFFSET</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00076">mlpenc.c:76</a></div></div>
<div class="ttc" id="amlp_8c_html_ad002e58196989e7e2275b97cf5f233f0"><div class="ttname"><a href="mlp_8c.html#ad002e58196989e7e2275b97cf5f233f0">ff_mlp_init_crc</a></div><div class="ttdeci">av_cold void ff_mlp_init_crc(void)</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00075">mlp.c:75</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html_ad3daa3e729850b573c139a83be8938ca"><div class="ttname"><a href="struct_a_v_codec.html#ad3daa3e729850b573c139a83be8938ca">AVCodec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00197">codec.h:197</a></div></div>
<div class="ttc" id="astruct_decoding_params_html"><div class="ttname"><a href="struct_decoding_params.html">DecodingParams</a></div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00080">mlpenc.c:80</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1a4e6d404a99ebe461877524fa2a5a2f"><div class="ttname"><a href="mlpenc_8c.html#a1a4e6d404a99ebe461877524fa2a5a2f">MAJOR_SYNC_INFO_SIGNATURE</a></div><div class="ttdeci">#define MAJOR_SYNC_INFO_SIGNATURE</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00209">mlpenc.c:209</a></div></div>
<div class="ttc" id="aavcodec_8h_html"><div class="ttname"><a href="avcodec_8h.html">avcodec.h</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ac28df43a2f1e754da232c7d6a642190f"><div class="ttname"><a href="mlpenc_8c.html#ac28df43a2f1e754da232c7d6a642190f">NUM_CODEBOOKS</a></div><div class="ttdeci">#define NUM_CODEBOOKS</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00101">mlpenc.c:101</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_a48ad71a5b40cdd5f23c601f33665a953"><div class="ttname"><a href="filter__design_8txt.html#a48ad71a5b40cdd5f23c601f33665a953">frame</a></div><div class="ttdeci">these buffered frames must be flushed immediately if a new input produces new the filter must not call request_frame to get more It must just process the frame or queue it The task of requesting more frames is left to the filter s request_frame method or the application If a filter has several the filter must be ready for frames arriving randomly on any input any filter with several inputs will most likely require some kind of queuing mechanism It is perfectly acceptable to have a limited queue and to drop frames when the inputs are too unbalanced request_frame For filters that do not use the this method is called when a frame is wanted on an output For a it should directly call filter_frame on the corresponding output For a if there are queued frames already one of these frames should be pushed If the filter should request a frame on one of its repeatedly until at least one frame has been pushed Return or at least make progress towards producing a frame</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00264">filter_design.txt:264</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a8942a2b6e3dffe75e52e4d61e62579f4"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a8942a2b6e3dffe75e52e4d61e62579f4">MLPEncodeContext::major_filter_state_subblock</a></div><div class="ttdeci">unsigned int major_filter_state_subblock</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00176">mlpenc.c:176</a></div></div>
<div class="ttc" id="agroup__lavu__string_html_ga193877ba459faf314c3d285b6082cf73"><div class="ttname"><a href="group__lavu__string.html#ga193877ba459faf314c3d285b6082cf73">av_strlcat</a></div><div class="ttdeci">size_t av_strlcat(char *dst, const char *src, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="avstring_8c_source.html#l00093">avstring.c:93</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga625aec7f2285dc35e3ed801e91889564"><div class="ttname"><a href="group__channel__mask__c.html#ga625aec7f2285dc35e3ed801e91889564">AV_CH_LAYOUT_SURROUND</a></div><div class="ttdeci">#define AV_CH_LAYOUT_SURROUND</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00094">channel_layout.h:94</a></div></div>
<div class="ttc" id="astruct_path_counter_html_a38f804a2cff17ca189a45687c9d3eab5"><div class="ttname"><a href="struct_path_counter.html#a38f804a2cff17ca189a45687c9d3eab5">PathCounter::path</a></div><div class="ttdeci">char path[MAJOR_HEADER_INTERVAL+3]</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01950">mlpenc.c:1950</a></div></div>
<div class="ttc" id="astruct_channel_information_html_a09a1c9c13b53a367381d38fc03370eaf"><div class="ttname"><a href="struct_channel_information.html#a09a1c9c13b53a367381d38fc03370eaf">ChannelInformation::summary_info</a></div><div class="ttdeci">uint8_t summary_info</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00106">mlp.h:106</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html"><div class="ttname"><a href="struct_a_v_packet.html">AVPacket</a></div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00340">packet.h:340</a></div></div>
<div class="ttc" id="atests_2adler32_8c_html_aa4a4ec4e17257f17b6efac777b468700"><div class="ttname"><a href="tests_2adler32_8c.html#aa4a4ec4e17257f17b6efac777b468700">checksum</a></div><div class="ttdeci">static volatile int checksum</div><div class="ttdef"><b>Definition:</b> <a href="tests_2adler32_8c_source.html#l00030">adler32.c:30</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_ga34e10fdac079a9ca4512b8ccd7f20b8a"><div class="ttname"><a href="group__lavu__mem__funcs.html#ga34e10fdac079a9ca4512b8ccd7f20b8a">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="twinvq__data_8h_source.html#l11134">twinvq_data.h:11134</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a6f650b7cee7b39adcb2ec9d0d54e07e6"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a6f650b7cee7b39adcb2ec9d0d54e07e6">MLPEncodeContext::major_cur_subblock_index</a></div><div class="ttdeci">unsigned int major_cur_subblock_index</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00175">mlpenc.c:175</a></div></div>
<div class="ttc" id="asnow_8txt_html_a7c18a837a38b8c96472a1d0abe1711d1"><div class="ttname"><a href="snow_8txt.html#a7c18a837a38b8c96472a1d0abe1711d1">left</a></div><div class="ttdeci">Tag MUST be and&lt; 10hcoeff half pel interpolation filter coefficients, hcoeff[0] are the 2 middle coefficients[1] are the next outer ones and so on, resulting in a filter like:...eff[2], hcoeff[1], hcoeff[0], hcoeff[0], hcoeff[1], hcoeff[2] ... the sign of the coefficients is not explicitly stored but alternates after each coeff and coeff[0] is positive, so ...,+,-,+,-,+,+,-,+,-,+,... hcoeff[0] is not explicitly stored but found by subtracting the sum of all stored coefficients with signs from 32 hcoeff[0]=32 - hcoeff[1] - hcoeff[2] - ... a good choice for hcoeff and htaps is htaps=6 hcoeff={40,-10, 2} an alternative which requires more computations at both encoder and decoder side and may or may not be better is htaps=8 hcoeff={42,-14, 6,-2}ref_frames minimum of the number of available reference frames and max_ref_frames for example the first frame after a key frame always has ref_frames=1spatial_decomposition_type wavelet type 0 is a 9/7 symmetric compact integer wavelet 1 is a 5/3 symmetric compact integer wavelet others are reserved stored as delta from last, last is reset to 0 if always_reset||keyframeqlog quality(logarithmic quantizer scale) stored as delta from last, last is reset to 0 if always_reset||keyframemv_scale stored as delta from last, last is reset to 0 if always_reset||keyframe FIXME check that everything works fine if this changes between framesqbias dequantization bias stored as delta from last, last is reset to 0 if always_reset||keyframeblock_max_depth maximum depth of the block tree stored as delta from last, last is reset to 0 if always_reset||keyframequant_table quantization tableHighlevel bitstream structure:==============================--------------------------------------------|Header|--------------------------------------------|------------------------------------|||Block0||||split?||||yes no||||......... intra?||||:Block01 :yes no||||:Block02 :....... ..........||||:Block03 ::y DC ::ref index:||||:Block04 ::cb DC ::motion x :||||......... :cr DC ::motion y :||||....... ..........|||------------------------------------||------------------------------------|||Block1|||...|--------------------------------------------|------------ ------------ ------------|||Y subbands||Cb subbands||Cr subbands||||--- ---||--- ---||--- ---|||||LL0||HL0||||LL0||HL0||||LL0||HL0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||LH0||HH0||||LH0||HH0||||LH0||HH0|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HL1||LH1||||HL1||LH1||||HL1||LH1|||||--- ---||--- ---||--- ---||||--- ---||--- ---||--- ---|||||HH1||HL2||||HH1||HL2||||HH1||HL2|||||...||...||...|||------------ ------------ ------------|--------------------------------------------Decoding process:=================------------|||Subbands|------------||||------------|Intra DC||||LL0 subband prediction ------------|\ Dequantization ------------------- \||Reference frames|\ IDWT|------- -------|Motion \|||Frame 0||Frame 1||Compensation . OBMC v -------|------- -------|--------------. \------&gt; Frame n output Frame Frame&lt;----------------------------------/|...|------------------- Range Coder:============Binary Range Coder:------------------- The implemented range coder is an adapted version based upon &quot;Range encoding: an algorithm for removing redundancy from a digitised message.&quot; by G. N. N. Martin. The symbols encoded by the Snow range coder are bits(0|1). The associated probabilities are not fix but change depending on the symbol mix seen so far. bit seen|new state ---------+----------------------------------------------- 0|256 - state_transition_table[256 - old_state];1|state_transition_table[old_state];state_transition_table={ 0, 0, 0, 0, 0, 0, 0, 0, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 190, 191, 192, 194, 194, 195, 196, 197, 198, 199, 200, 201, 202, 202, 204, 205, 206, 207, 208, 209, 209, 210, 211, 212, 213, 215, 215, 216, 217, 218, 219, 220, 220, 222, 223, 224, 225, 226, 227, 227, 229, 229, 230, 231, 232, 234, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 248, 0, 0, 0, 0, 0, 0, 0};FIXME Range Coding of integers:------------------------- FIXME Neighboring Blocks:===================left and top are set to the respective blocks unless they are outside of the image in which case they are set to the Null block top-left is set to the top left block unless it is outside of the image in which case it is set to the left block if this block has no larger parent block or it is at the left side of its parent block and the top right block is not outside of the image then the top right block is used for top-right else the top-left block is used Null block y, cb, cr are 128 level, ref, mx and my are 0 Motion Vector Prediction:=========================1. the motion vectors of all the neighboring blocks are scaled to compensate for the difference of reference frames scaled_mv=(mv *(256 *(current_reference+1)/(mv.reference+1))+128)&gt; the median of the scaled left</div><div class="ttdef"><b>Definition:</b> <a href="snow_8txt_source.html#l00386">snow.txt:386</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a4d0c0ccfe71c8d7d7d14063db680bebd"><div class="ttname"><a href="mlpenc_8c.html#a4d0c0ccfe71c8d7d7d14063db680bebd">best_codebook_path_cost</a></div><div class="ttdeci">static int best_codebook_path_cost(MLPEncodeContext *ctx, unsigned int channel, PathCounter *src, int cur_codebook)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01978">mlpenc.c:1978</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ab489ca191d6a45ed1a07db8d2c008b10"><div class="ttname"><a href="mlpenc_8c.html#ab489ca191d6a45ed1a07db8d2c008b10">no_codebook_bits_offset</a></div><div class="ttdeci">static void no_codebook_bits_offset(MLPEncodeContext *ctx, unsigned int channel, int16_t offset, int32_t min, int32_t max, BestOffset *bo)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01560">mlpenc.c:1560</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a6ef81b53ba7f4448aa1b3486cdbc6120"><div class="ttname"><a href="mlpenc_8c.html#a6ef81b53ba7f4448aa1b3486cdbc6120">compare_decoding_params</a></div><div class="ttdeci">static int compare_decoding_params(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00286">mlpenc.c:286</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a5362e7d64eae9cd9b684410fd26f7d46"><div class="ttname"><a href="mlpenc_8c.html#a5362e7d64eae9cd9b684410fd26f7d46">determine_quant_step_size</a></div><div class="ttdeci">static void determine_quant_step_size(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01325">mlpenc.c:1325</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a4d586856b2db440caf91cd4119c79e5c"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a4d586856b2db440caf91cd4119c79e5c">MLPEncodeContext::summary_info</a></div><div class="ttdeci">int summary_info</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00122">mlpenc.c:122</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aee0fdb96046aff2534d7c5589bbe25fd"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aee0fdb96046aff2534d7c5589bbe25fd">MLPEncodeContext::lossless_check_data</a></div><div class="ttdeci">int32_t * lossless_check_data</div><div class="ttdoc">Array with lossless_check_data for each access unit.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00139">mlpenc.c:139</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a93a3ea5c878ec0d32654d6f203878744">PARAM_FIR</a></div><div class="ttdeci">@ PARAM_FIR</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00074">mlpenc.c:74</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a5af7fd4dcdd4573018ae7b92a88b2b76"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a5af7fd4dcdd4573018ae7b92a88b2b76">MLPEncodeContext::major_inout_buffer</a></div><div class="ttdeci">int32_t * major_inout_buffer</div><div class="ttdoc">Buffer with all in/out data for one entire major frame interval.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00125">mlpenc.c:125</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ae3301e70199668ab616279551a45683b"><div class="ttname"><a href="mlpenc_8c.html#ae3301e70199668ab616279551a45683b">HUFF_OFFSET_MAX</a></div><div class="ttdeci">#define HUFF_OFFSET_MAX</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00098">mlpenc.c:98</a></div></div>
<div class="ttc" id="astructframe__header_html"><div class="ttname"><a href="structframe__header.html">frame_header</a></div><div class="ttdef"><b>Definition:</b> <a href="truemotion1_8c_source.html#l00087">truemotion1.c:87</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a58ece851e05194956d1d650ec5fa9595"><div class="ttname"><a href="mlpenc_8c.html#a58ece851e05194956d1d650ec5fa9595">write_filter_params</a></div><div class="ttdeci">static void write_filter_params(MLPEncodeContext *ctx, PutBitContext *pb, unsigned int channel, unsigned int filter)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00877">mlpenc.c:877</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a9038f74538657b1fc61c91ad232cf753"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a9038f74538657b1fc61c91ad232cf753">MLPEncodeContext::one_sample_buffer_size</a></div><div class="ttdeci">unsigned int one_sample_buffer_size</div><div class="ttdoc">Number of samples*channel for one access unit.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00145">mlpenc.c:145</a></div></div>
<div class="ttc" id="aebur128_8h_html_a1a6b6fb557d8d37d59700faf4e4c9167"><div class="ttname"><a href="ebur128_8h.html#a1a6b6fb557d8d37d59700faf4e4c9167">mode</a></div><div class="ttdeci">mode</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00083">ebur128.h:83</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a4d1ea19f63eb107111fd650ca514d1f4"><div class="ttname"><a href="struct_a_v_packet.html#a4d1ea19f63eb107111fd650ca514d1f4">AVPacket::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00364">packet.h:364</a></div></div>
<div class="ttc" id="astruct_channel_information_html_a95c7d8e65ff1a8f5bfaad8a9143ab698"><div class="ttname"><a href="struct_channel_information.html#a95c7d8e65ff1a8f5bfaad8a9143ab698">ChannelInformation::channel_occupancy</a></div><div class="ttdeci">uint8_t channel_occupancy</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00103">mlp.h:103</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a38265e628e7a134a88f22d49234d381d"><div class="ttname"><a href="mlpenc_8c.html#a38265e628e7a134a88f22d49234d381d">input_data_internal</a></div><div class="ttdeci">static void input_data_internal(MLPEncodeContext *ctx, const uint8_t *samples, int is24)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01232">mlpenc.c:1232</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a12308b3892e048f59ae9ef05b6eb067c"><div class="ttname"><a href="mlpenc_8c.html#a12308b3892e048f59ae9ef05b6eb067c">analyze_sample_buffer</a></div><div class="ttdeci">static void analyze_sample_buffer(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l02146">mlpenc.c:2146</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a01bd3b5c66886b74db03e8671540ab92"><div class="ttname"><a href="mlpenc_8c.html#a01bd3b5c66886b74db03e8671540ab92">HUFF_OFFSET_MIN</a></div><div class="ttdeci">#define HUFF_OFFSET_MIN</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00097">mlpenc.c:97</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_ac53f7e33bdbd6ea3ec96ee0f1292ee84"><div class="ttname"><a href="filter__design_8txt.html#ac53f7e33bdbd6ea3ec96ee0f1292ee84">samples</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio samples</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00008">filter_design.txt:8</a></div></div>
<div class="ttc" id="amlpenc_8c_html_aa787d9580e00413fb0e0fa855e4d987e"><div class="ttname"><a href="mlpenc_8c.html#aa787d9580e00413fb0e0fa855e4d987e">SAMPLE_MIN</a></div><div class="ttdeci">#define SAMPLE_MIN(bitdepth)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01796">mlpenc.c:1796</a></div></div>
<div class="ttc" id="amlp_8h_html_a67004975983f9c99226d63db17ba74c4"><div class="ttname"><a href="mlp_8h.html#a67004975983f9c99226d63db17ba74c4">IIR</a></div><div class="ttdeci">#define IIR</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8h_source.html#l00071">mlp.h:71</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656"><div class="ttname"><a href="mlpenc_8c.html#a2911983e0dc54e95e069d8fc7b632a22a433aa1c895d86df07bbd71860b8c3656">PARAM_BLOCKSIZE</a></div><div class="ttdeci">@ PARAM_BLOCKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00070">mlpenc.c:70</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a828221123790f95ab9a8cf795bfa0506"><div class="ttname"><a href="mlpenc_8c.html#a828221123790f95ab9a8cf795bfa0506">codebook_bits_offset</a></div><div class="ttdeci">static void codebook_bits_offset(MLPEncodeContext *ctx, unsigned int channel, int codebook, int32_t sample_min, int32_t sample_max, int16_t offset, BestOffset *bo)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01629">mlpenc.c:1629</a></div></div>
<div class="ttc" id="astruct_path_counter_html_ac4dd3fb3a705793810026e00fcf4c257"><div class="ttname"><a href="struct_path_counter.html#ac4dd3fb3a705793810026e00fcf4c257">PathCounter::bitcount</a></div><div class="ttdeci">int bitcount</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01951">mlpenc.c:1951</a></div></div>
<div class="ttc" id="astruct_restart_header_html_a36aa2e91a666eb7bcd609f695f26a201"><div class="ttname"><a href="struct_restart_header.html#a36aa2e91a666eb7bcd609f695f26a201">RestartHeader::data_check_present</a></div><div class="ttdeci">int data_check_present</div><div class="ttdoc">Set if the substream contains extra info to check the size of VLC blocks.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00048">mlpenc.c:48</a></div></div>
<div class="ttc" id="asonic_8c_html_aee201839e95f7edeff51ad9c8e072bda"><div class="ttname"><a href="sonic_8c.html#aee201839e95f7edeff51ad9c8e072bda">shift</a></div><div class="ttdeci">static int shift(int a, int b)</div><div class="ttdef"><b>Definition:</b> <a href="sonic_8c_source.html#l00082">sonic.c:82</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a48c02f76d428485e78783357e000df46"><div class="ttname"><a href="mlpenc_8c.html#a48c02f76d428485e78783357e000df46">process_major_frame</a></div><div class="ttdeci">static void process_major_frame(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l02194">mlpenc.c:2194</a></div></div>
<div class="ttc" id="aput__bits_8h_html_a6f7bba5ea37c63f99b266928759fe6f6"><div class="ttname"><a href="put__bits_8h.html#a6f7bba5ea37c63f99b266928759fe6f6">flush_put_bits</a></div><div class="ttdeci">static void flush_put_bits(PutBitContext *s)</div><div class="ttdef"><b>Definition:</b> <a href="put__bits_8h_source.html#l00117">put_bits.h:117</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a996fb265e0043e35fa0a69b29d99526a"><div class="ttname"><a href="mlpenc_8c.html#a996fb265e0043e35fa0a69b29d99526a">MSB_MASK</a></div><div class="ttdeci">#define MSB_MASK(bits)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01798">mlpenc.c:1798</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ad62343931bea10ed8509b70dc0deba70"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ad62343931bea10ed8509b70dc0deba70">MLPEncodeContext::seq_decoding_params</a></div><div class="ttdeci">DecodingParams * seq_decoding_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00197">mlpenc.c:197</a></div></div>
<div class="ttc" id="amlp_8h_html"><div class="ttname"><a href="mlp_8h.html">mlp.h</a></div></div>
<div class="ttc" id="astruct_a_v_codec_html"><div class="ttname"><a href="struct_a_v_codec.html">AVCodec</a></div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00190">codec.h:190</a></div></div>
<div class="ttc" id="avf__palettegen_8c_html_a0fa5abf62b01f8a592bca729cb14390b"><div class="ttname"><a href="vf__palettegen_8c.html#a0fa5abf62b01f8a592bca729cb14390b">diff</a></div><div class="ttdeci">static av_always_inline int diff(const uint32_t a, const uint32_t b)</div><div class="ttdef"><b>Definition:</b> <a href="vf__palettegen_8c_source.html#l00136">vf_palettegen.c:136</a></div></div>
<div class="ttc" id="amlp_8c_html_a0594e83bffe3ae1fce48c34371f9b0e7"><div class="ttname"><a href="mlp_8c.html#a0594e83bffe3ae1fce48c34371f9b0e7">ff_mlp_huffman_tables</a></div><div class="ttdeci">const uint8_t ff_mlp_huffman_tables[3][18][2]</div><div class="ttdef"><b>Definition:</b> <a href="mlp_8c_source.html#l00028">mlp.c:28</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a9aa2838f63989346b3cef049c12016eb"><div class="ttname"><a href="mlpenc_8c.html#a9aa2838f63989346b3cef049c12016eb">mlp_encode_init</a></div><div class="ttdeci">static av_cold int mlp_encode_init(AVCodecContext *avctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00487">mlpenc.c:487</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1649889be7896b9b8084a815e82a098faf920cc629016c528b46989421324e149"><div class="ttname"><a href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098faf920cc629016c528b46989421324e149">MLP_CHMODE_LEFT_SIDE</a></div><div class="ttdeci">@ MLP_CHMODE_LEFT_SIDE</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01443">mlpenc.c:1443</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="astruct_matrix_params_html_a1bba479c5a007165219864ae98c8f275"><div class="ttname"><a href="struct_matrix_params.html#a1bba479c5a007165219864ae98c8f275">MatrixParams::outch</a></div><div class="ttdeci">uint8_t outch[MAX_MATRICES]</div><div class="ttdoc">output channel for each matrix</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00059">mlpenc.c:59</a></div></div>
<div class="ttc" id="astruct_a_v_packet_html_a622e758be29fd500aed0ffdc069550f7"><div class="ttname"><a href="struct_a_v_packet.html#a622e758be29fd500aed0ffdc069550f7">AVPacket::duration</a></div><div class="ttdeci">int64_t duration</div><div class="ttdef"><b>Definition:</b> <a href="packet_8h_source.html#l00381">packet.h:381</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ac096b754ef76569d2b1e5a707b87bdad"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ac096b754ef76569d2b1e5a707b87bdad">MLPEncodeContext::afq</a></div><div class="ttdeci">AudioFrameQueue afq</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00184">mlpenc.c:184</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a93760b2068a5a21f047cc6778e343316"><div class="ttname"><a href="mlpenc_8c.html#a93760b2068a5a21f047cc6778e343316">clear_channel_params</a></div><div class="ttdeci">static void clear_channel_params(MLPEncodeContext *ctx, ChannelParams channel_params[MAX_CHANNELS])</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00422">mlpenc.c:422</a></div></div>
<div class="ttc" id="agroup__channel__mask__c_html_ga0bcbe41f2d3214b0a3fd2698ebe0caf9"><div class="ttname"><a href="group__channel__mask__c.html#ga0bcbe41f2d3214b0a3fd2698ebe0caf9">AV_CH_LAYOUT_4POINT0</a></div><div class="ttdeci">#define AV_CH_LAYOUT_4POINT0</div><div class="ttdef"><b>Definition:</b> <a href="channel__layout_8h_source.html#l00096">channel_layout.h:96</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ab0f9de69c607b3706484d358d56e0384"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ab0f9de69c607b3706484d358d56e0384">MLPEncodeContext::max_restart_interval</a></div><div class="ttdeci">unsigned int max_restart_interval</div><div class="ttdoc">Max interval of access units in between two major frames.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00147">mlpenc.c:147</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a8966e73cf4527128ecf3435cb5a1e19d"><div class="ttname"><a href="mlpenc_8c.html#a8966e73cf4527128ecf3435cb5a1e19d">CODEBOOK_CHANGE_BITS</a></div><div class="ttdeci">#define CODEBOOK_CHANGE_BITS</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01957">mlpenc.c:1957</a></div></div>
<div class="ttc" id="avf__owdenoise_8c_html_a35c8a1e85abdf2de13b1be2fe51f293b"><div class="ttname"><a href="vf__owdenoise_8c.html#a35c8a1e85abdf2de13b1be2fe51f293b">coeff</a></div><div class="ttdeci">static const double coeff[2][5]</div><div class="ttdef"><b>Definition:</b> <a href="vf__owdenoise_8c_source.html#l00072">vf_owdenoise.c:72</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ab676e56d69dbee0bf6c11fd98863d8c2"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ab676e56d69dbee0bf6c11fd98863d8c2">MLPEncodeContext::decoding_params</a></div><div class="ttdeci">DecodingParams * decoding_params</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00168">mlpenc.c:168</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_ac1e6c2cd1269caa7570575725c682a49"><div class="ttname"><a href="struct_a_v_codec_context.html#ac1e6c2cd1269caa7570575725c682a49">AVCodecContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdoc">number of audio channels</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01187">avcodec.h:1187</a></div></div>
<div class="ttc" id="agroup__lavu__error_html_gaa6e5781e75b15ce44b0baea170c98a45"><div class="ttname"><a href="group__lavu__error.html#gaa6e5781e75b15ce44b0baea170c98a45">AVERROR_INVALIDDATA</a></div><div class="ttdeci">#define AVERROR_INVALIDDATA</div><div class="ttdoc">Invalid data found when processing input.</div><div class="ttdef"><b>Definition:</b> <a href="error_8h_source.html#l00059">error.h:59</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a06c8af2ad9394715e9c53c5b45c8be11"><div class="ttname"><a href="mlpenc_8c.html#a06c8af2ad9394715e9c53c5b45c8be11">write_matrix_params</a></div><div class="ttdeci">static void write_matrix_params(MLPEncodeContext *ctx, PutBitContext *pb)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00845">mlpenc.c:845</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a856ed0d4a5d72a4267e232c68382edf4"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a856ed0d4a5d72a4267e232c68382edf4">MLPEncodeContext::next_major_frame_size</a></div><div class="ttdeci">unsigned int next_major_frame_size</div><div class="ttdoc">Counter of number of samples for next major frame.</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00137">mlpenc.c:137</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ad932012d1f50fdfb2d772637c1314d0e"><div class="ttname"><a href="mlpenc_8c.html#ad932012d1f50fdfb2d772637c1314d0e">MLP_MIN_LPC_SHIFT</a></div><div class="ttdeci">#define MLP_MIN_LPC_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00037">mlpenc.c:37</a></div></div>
<div class="ttc" id="aavstring_8h_html"><div class="ttname"><a href="avstring_8h.html">avstring.h</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_ab8c26cd536d066bea01a7fad8db23117"><div class="ttname"><a href="struct_m_l_p_encode_context.html#ab8c26cd536d066bea01a7fad8db23117">MLPEncodeContext::starting_frame_index</a></div><div class="ttdeci">unsigned int starting_frame_index</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00187">mlpenc.c:187</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ad4155f3a4ad78af2660d09a8e7137d93"><div class="ttname"><a href="mlpenc_8c.html#ad4155f3a4ad78af2660d09a8e7137d93">path_counter_codebook</a></div><div class="ttdeci">static const char * path_counter_codebook[]</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01954">mlpenc.c:1954</a></div></div>
<div class="ttc" id="astruct_a_v_frame_html"><div class="ttname"><a href="struct_a_v_frame.html">AVFrame</a></div><div class="ttdef"><b>Definition:</b> <a href="frame_8h_source.html#l00308">frame.h:308</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_gaded181844ec3ab19897704086dc2ee03"><div class="ttname"><a href="group__lavc__core.html#gaded181844ec3ab19897704086dc2ee03">AV_CODEC_CAP_SMALL_LAST_FRAME</a></div><div class="ttdeci">#define AV_CODEC_CAP_SMALL_LAST_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="codec_8h_source.html#l00080">codec.h:80</a></div></div>
<div class="ttc" id="aencode_8c_html_a699df1216e8d9d57959f99508e9aadf6"><div class="ttname"><a href="encode_8c.html#a699df1216e8d9d57959f99508e9aadf6">ff_alloc_packet2</a></div><div class="ttdeci">int ff_alloc_packet2(AVCodecContext *avctx, AVPacket *avpkt, int64_t size, int64_t min_size)</div><div class="ttdef"><b>Definition:</b> <a href="encode_8c_source.html#l00033">encode.c:33</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="ffmpeg__filter_8c.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="aput__bits_8h_html"><div class="ttname"><a href="put__bits_8h.html">put_bits.h</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_aacf0b10c7b2a833098f98a0246ee5ceb"><div class="ttname"><a href="struct_m_l_p_encode_context.html#aacf0b10c7b2a833098f98a0246ee5ceb">MLPEncodeContext::number_of_subblocks</a></div><div class="ttdeci">unsigned int number_of_subblocks</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00190">mlpenc.c:190</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a31cfc66499b51b48cc47149b51f9db7f"><div class="ttname"><a href="mlpenc_8c.html#a31cfc66499b51b48cc47149b51f9db7f">determine_filters</a></div><div class="ttdeci">static void determine_filters(MLPEncodeContext *ctx)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01430">mlpenc.c:1430</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5ab7ae6bb6718c07cd316778783a57a63b"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5ab7ae6bb6718c07cd316778783a57a63b">AV_SAMPLE_FMT_S32</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_S32</div><div class="ttdoc">signed 32 bits</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00062">samplefmt.h:62</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ad4f7d85848db2f6cc7fec7f6ed336cb4"><div class="ttname"><a href="mlpenc_8c.html#ad4f7d85848db2f6cc7fec7f6ed336cb4">MLP_MAX_LPC_SHIFT</a></div><div class="ttdeci">#define MLP_MAX_LPC_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00038">mlpenc.c:38</a></div></div>
<div class="ttc" id="alpc_8h_html_a458f426f89affd4566f158738e5b3089aa83d535208a826f522a84594b6721c8c"><div class="ttname"><a href="lpc_8h.html#a458f426f89affd4566f158738e5b3089aa83d535208a826f522a84594b6721c8c">FF_LPC_TYPE_LEVINSON</a></div><div class="ttdeci">@ FF_LPC_TYPE_LEVINSON</div><div class="ttdoc">Levinson-Durbin recursion.</div><div class="ttdef"><b>Definition:</b> <a href="lpc_8h_source.html#l00047">lpc.h:47</a></div></div>
<div class="ttc" id="astruct_best_offset_html_aa64fc9cace8efa59d8a78bb4251078bf"><div class="ttname"><a href="struct_best_offset.html#aa64fc9cace8efa59d8a78bb4251078bf">BestOffset::bitcount</a></div><div class="ttdeci">int bitcount</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00091">mlpenc.c:91</a></div></div>
<div class="ttc" id="amlpenc_8c_html_a1649889be7896b9b8084a815e82a098fafe65fb47dce77052e08640f37ccd105c"><div class="ttname"><a href="mlpenc_8c.html#a1649889be7896b9b8084a815e82a098fafe65fb47dce77052e08640f37ccd105c">MLP_CHMODE_RIGHT_SIDE</a></div><div class="ttdeci">@ MLP_CHMODE_RIGHT_SIDE</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l01444">mlpenc.c:1444</a></div></div>
<div class="ttc" id="aebur128_8h_html_af4463779bb9b119822c94419a10d31c0"><div class="ttname"><a href="ebur128_8h.html#af4463779bb9b119822c94419a10d31c0">channel</a></div><div class="ttdeci">channel</div><div class="ttdef"><b>Definition:</b> <a href="ebur128_8h_source.html#l00039">ebur128.h:39</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ad5576520034056657355ef8ce023d894"><div class="ttname"><a href="mlpenc_8c.html#ad5576520034056657355ef8ce023d894">MAJOR_HEADER_INTERVAL</a></div><div class="ttdeci">#define MAJOR_HEADER_INTERVAL</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00033">mlpenc.c:33</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_aeb08c575a79eb84fc4155dda88f46c06"><div class="ttname"><a href="struct_a_v_codec_context.html#aeb08c575a79eb84fc4155dda88f46c06">AVCodecContext::channel_layout</a></div><div class="ttdeci">uint64_t channel_layout</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01237">avcodec.h:1237</a></div></div>
<div class="ttc" id="acfhdenc_8c_html_a10b2ef2302ea7c1ef22b811f9d07678a"><div class="ttname"><a href="cfhdenc_8c.html#a10b2ef2302ea7c1ef22b811f9d07678a">codebook</a></div><div class="ttdeci">static const unsigned codebook[256][2]</div><div class="ttdef"><b>Definition:</b> <a href="cfhdenc_8c_source.html#l00041">cfhdenc.c:41</a></div></div>
<div class="ttc" id="agroup__lavc__core_html_ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e"><div class="ttname"><a href="group__lavc__core.html#ggaadca229ad2c20e060a14fec08a5cc7cead7c47629784f27b6747d581fada0392e">AV_CODEC_ID_MLP</a></div><div class="ttdeci">@ AV_CODEC_ID_MLP</div><div class="ttdef"><b>Definition:</b> <a href="codec__id_8h_source.html#l00447">codec_id.h:447</a></div></div>
<div class="ttc" id="alpc_8c_html_afdf45ba5b7f5dfd3fb7d54d1c24d9fb6"><div class="ttname"><a href="lpc_8c.html#afdf45ba5b7f5dfd3fb7d54d1c24d9fb6">ff_lpc_init</a></div><div class="ttdeci">av_cold int ff_lpc_init(LPCContext *s, int blocksize, int max_order, enum FFLPCType lpc_type)</div><div class="ttdef"><b>Definition:</b> <a href="lpc_8c_source.html#l00300">lpc.c:300</a></div></div>
<div class="ttc" id="astruct_a_v_codec_context_html_a8ff0b000c463361e234af48d03aadfc0"><div class="ttname"><a href="struct_a_v_codec_context.html#a8ff0b000c463361e234af48d03aadfc0">AVCodecContext::sample_rate</a></div><div class="ttdeci">int sample_rate</div><div class="ttdoc">samples per second</div><div class="ttdef"><b>Definition:</b> <a href="avcodec_8h_source.html#l01186">avcodec.h:1186</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ad39494079aad3a12ee4a98f5194bcf6a"><div class="ttname"><a href="mlpenc_8c.html#ad39494079aad3a12ee4a98f5194bcf6a">write_restart_header</a></div><div class="ttdeci">static void write_restart_header(MLPEncodeContext *ctx, PutBitContext *pb)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00808">mlpenc.c:808</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_ad2e88d75f808e6d4e78d48bceb10c336"><div class="ttname"><a href="vorbis__enc__data_8h.html#ad2e88d75f808e6d4e78d48bceb10c336">min</a></div><div class="ttdeci">float min</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00456">vorbis_enc_data.h:456</a></div></div>
<div class="ttc" id="amlpenc_8c_html_ac8a43d5b1b486c831ca3365a298b2547"><div class="ttname"><a href="mlpenc_8c.html#ac8a43d5b1b486c831ca3365a298b2547">copy_restart_frame_params</a></div><div class="ttdeci">static void copy_restart_frame_params(MLPEncodeContext *ctx, unsigned int substr)</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00380">mlpenc.c:380</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html"><div class="ttname"><a href="struct_m_l_p_encode_context.html">MLPEncodeContext</a></div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00103">mlpenc.c:103</a></div></div>
<div class="ttc" id="astruct_m_l_p_encode_context_html_a8a26f78d9dc2ea0da0604805c52f765c"><div class="ttname"><a href="struct_m_l_p_encode_context.html#a8a26f78d9dc2ea0da0604805c52f765c">MLPEncodeContext::max_codebook_search</a></div><div class="ttdeci">unsigned int max_codebook_search</div><div class="ttdef"><b>Definition:</b> <a href="mlpenc_8c_source.html#l00199">mlpenc.c:199</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
