<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: E:/github/ffmpeg/libavresample/dither.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_737c44b861ba7ee498141742fb455fa8.html">ffmpeg</a></li><li class="navelem"><a class="el" href="dir_44f81243ddc6d2d43d1b2a4a5cf289b8.html">libavresample</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">dither.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="libavresample_2dither_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2012 Justin Ruggles &lt;justin.ruggles@gmail.com&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Triangular with Noise Shaping is based on opusfile.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Copyright (c) 1994-2012 by the Xiph.Org Foundation and contributors</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * This file is part of FFmpeg.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * FFmpeg is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * FFmpeg is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * License along with FFmpeg; if not, write to the Free Software</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="attributes_8h.html">libavutil/attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">libavutil/common.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="lfg_8h.html">libavutil/lfg.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mem_8h.html">libavutil/mem.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="samplefmt_8h.html">libavutil/samplefmt.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="audio__convert_8h.html">audio_convert.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dither_8h.html">dither.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libavutil_2internal_8h.html">internal.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="struct_dither_state.html">   43</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_dither_state.html">DitherState</a> {</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="struct_dither_state.html#a8331dddbd553a5f6a948dcd5bfaae8ca">   44</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_state.html#a8331dddbd553a5f6a948dcd5bfaae8ca">mute</a>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="struct_dither_state.html#ac17480aebfcb0d5de8ce9115e88ce03c">   45</a></span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="struct_dither_state.html#ac17480aebfcb0d5de8ce9115e88ce03c">seed</a>;</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="struct_dither_state.html#a284307af21f89ffc4bff9f30338bd02e">   46</a></span>&#160;    <a class="code" href="struct_a_v_l_f_g.html">AVLFG</a> <a class="code" href="struct_dither_state.html#a284307af21f89ffc4bff9f30338bd02e">lfg</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="struct_dither_state.html#a070431b6976464cf7a0380f5cbf4a14e">   47</a></span>&#160;    <span class="keywordtype">float</span> *<a class="code" href="struct_dither_state.html#a070431b6976464cf7a0380f5cbf4a14e">noise_buf</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="struct_dither_state.html#abda6fb4ab0952e5b2e0de95f14c5f88d">   48</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_state.html#abda6fb4ab0952e5b2e0de95f14c5f88d">noise_buf_size</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="struct_dither_state.html#a6a05ba6ed89b2d59f8012e849821db00">   49</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_state.html#a6a05ba6ed89b2d59f8012e849821db00">noise_buf_ptr</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="struct_dither_state.html#a83822f1bfafd54fac4690f306160e787">   50</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_dither_state.html#a83822f1bfafd54fac4690f306160e787">dither_a</a>[4];</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="struct_dither_state.html#a81c56d2c00ee058e0b78cec65a667c78">   51</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="struct_dither_state.html#a81c56d2c00ee058e0b78cec65a667c78">dither_b</a>[4];</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a0689c17599661a4ec7254237d2b1d44c">   52</a></span>&#160;} <a class="code" href="libavresample_2dither_8c.html#a0689c17599661a4ec7254237d2b1d44c">DitherState</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="struct_dither_context.html">   54</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_dither_context.html">DitherContext</a> {</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a688e3d34a2fb8183429948fe831f81fa">   55</a></span>&#160;    <a class="code" href="struct_dither_d_s_p_context.html">DitherDSPContext</a>  <a class="code" href="struct_dither_context.html#a7dbd766fc1b1b62a15d108c06d74627b">ddsp</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">enum</span> <a class="code" href="group__lavr.html#ga7aef839537aeecede586219937b90917">AVResampleDitherMethod</a> <a class="code" href="struct_dither_context.html#a688e3d34a2fb8183429948fe831f81fa">method</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a9aead7c39d4443e684f75f7d11079566">   57</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_context.html#a9aead7c39d4443e684f75f7d11079566">apply_map</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="struct_dither_context.html#ad2c46c3b23ab389a50b327831dddc5a7">   58</a></span>&#160;    <a class="code" href="struct_channel_map_info.html">ChannelMapInfo</a> *<a class="code" href="struct_dither_context.html#ad2c46c3b23ab389a50b327831dddc5a7">ch_map_info</a>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a9e1e8d0b434b37fc1b99a1fae761a0ab">   60</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_context.html#a9e1e8d0b434b37fc1b99a1fae761a0ab">mute_dither_threshold</a>;  <span class="comment">// threshold for disabling dither</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a75be60eefdc6f070476b5df6f9059bbf">   61</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_context.html#a75be60eefdc6f070476b5df6f9059bbf">mute_reset_threshold</a>;   <span class="comment">// threshold for resetting noise shaping</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="struct_dither_context.html#aab94a3870a50b5a56c3d7b457f838059">   62</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="struct_dither_context.html#aab94a3870a50b5a56c3d7b457f838059">ns_coef_b</a>;     <span class="comment">// noise shaping coeffs</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a7b414f99216fb6c5548e008c11a354d0">   63</a></span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="struct_dither_context.html#a7b414f99216fb6c5548e008c11a354d0">ns_coef_a</a>;     <span class="comment">// noise shaping coeffs</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_dither_context.html#ad78dfc9cdb8dc9c1bcdab83857f6ef13">   65</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_context.html#ad78dfc9cdb8dc9c1bcdab83857f6ef13">channels</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a8bad88154980a3330c70c3197a45761e">   66</a></span>&#160;    <a class="code" href="struct_dither_state.html">DitherState</a> *<a class="code" href="struct_dither_context.html#a8bad88154980a3330c70c3197a45761e">state</a>;         <span class="comment">// dither states for each channel</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_dither_context.html#aa7c65b4aa3ef4c6e7cf2cb98269e5082">   68</a></span>&#160;    <a class="code" href="struct_audio_data.html">AudioData</a> *<a class="code" href="struct_dither_context.html#aa7c65b4aa3ef4c6e7cf2cb98269e5082">flt_data</a>;        <span class="comment">// input data in fltp</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="struct_dither_context.html#af31be7e3f4678c3c45029921dbec2223">   69</a></span>&#160;    <a class="code" href="struct_audio_data.html">AudioData</a> *<a class="code" href="struct_dither_context.html#af31be7e3f4678c3c45029921dbec2223">s16_data</a>;        <span class="comment">// dithered output in s16p</span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="struct_dither_context.html#ae62205a4f172ef29f723bb8e9588cfc1">   70</a></span>&#160;    <a class="code" href="struct_audio_convert.html">AudioConvert</a> *<a class="code" href="struct_dither_context.html#ae62205a4f172ef29f723bb8e9588cfc1">ac_in</a>;        <span class="comment">// converter for input to fltp</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a7eff1096455be1ca01c080bc32ad65d1">   71</a></span>&#160;    <a class="code" href="struct_audio_convert.html">AudioConvert</a> *<a class="code" href="struct_dither_context.html#a7eff1096455be1ca01c080bc32ad65d1">ac_out</a>;       <span class="comment">// converter for s16p to s16 (if needed)</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="struct_dither_context.html#aa980d6b8ef6e56977ca1e41d5335eb78">   73</a></span>&#160;    <a class="code" href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a> (*<a class="code" href="struct_dither_context.html#aa980d6b8ef6e56977ca1e41d5335eb78">quantize</a>)(int16_t *dst, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">float</span> *dither, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="struct_dither_context.html#a6df40d8f02f86a6c9549620156e7759b">   74</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="struct_dither_context.html#a6df40d8f02f86a6c9549620156e7759b">samples_align</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;};</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/* mute threshold, in seconds */</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#abab33009f6a143b6e5ca29eefc4455cb">   78</a></span>&#160;<span class="preprocessor">#define MUTE_THRESHOLD_SEC 0.000333</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/* scale factor for 16-bit output.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">   The signal is attenuated slightly to avoid clipping */</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a8fbfdd2b7a79160dcca6b4788de48189">   82</a></span>&#160;<span class="preprocessor">#define S16_SCALE 32753.0f</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">/* scale to convert lfg from INT_MIN/INT_MAX to -0.5/0.5 */</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#afc526b1feb2a8b14eac3d04564fd6a37">   85</a></span>&#160;<span class="preprocessor">#define LFG_SCALE (1.0f / (2.0f * INT32_MAX))</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/* noise shaping coefficients */</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#ad78d591c1eeaf41ea6f256a638e45bef">   89</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="libavresample_2dither_8c.html#ad78d591c1eeaf41ea6f256a638e45bef">ns_48_coef_b</a>[4] = {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    2.2374f, -0.7339f, -0.1251f, -0.6033f</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;};</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#afcbd5e6f36d3d11615dfdbd27f5adc5a">   93</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="libavresample_2dither_8c.html#afcbd5e6f36d3d11615dfdbd27f5adc5a">ns_48_coef_a</a>[4] = {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    0.9030f, 0.0116f, -0.5853f, -0.2571f</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;};</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a4d5e2b22ae0025f7a278683e62b6a53d">   97</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="libavresample_2dither_8c.html#a4d5e2b22ae0025f7a278683e62b6a53d">ns_44_coef_b</a>[4] = {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    2.2061f, -0.4707f, -0.2534f, -0.6213f</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;};</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a223e136feca357d3c2598004bf6b5623">  101</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="libavresample_2dither_8c.html#a223e136feca357d3c2598004bf6b5623">ns_44_coef_a</a>[4] = {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    1.0587f, 0.0676f, -0.6054f, -0.2738f</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;};</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#aaffd73b4dc8d0c21cab3794dbc6b91f7">  105</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#aaffd73b4dc8d0c21cab3794dbc6b91f7">dither_int_to_float_rectangular_c</a>(<span class="keywordtype">float</span> *dst, <span class="keywordtype">int</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="libavresample_2dither_8c.html#afc526b1feb2a8b14eac3d04564fd6a37">LFG_SCALE</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;}</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a9784ccba7fadef894a91ae192ec5683e">  112</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#a9784ccba7fadef894a91ae192ec5683e">dither_int_to_float_triangular_c</a>(<span class="keywordtype">float</span> *dst, <span class="keywordtype">int</span> *<a class="code" href="tests_2checkasm_2h264pred_8c.html#ac4457b06e88002c046568fa09e601dd5">src0</a>, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">int</span> *<a class="code" href="tests_2checkasm_2h264pred_8c.html#a631c6befc8ec221896734437f964a631">src1</a>  = <a class="code" href="tests_2checkasm_2h264pred_8c.html#ac4457b06e88002c046568fa09e601dd5">src0</a> + <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a> = <a class="code" href="tests_2checkasm_2h264pred_8c.html#ac4457b06e88002c046568fa09e601dd5">src0</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="libavresample_2dither_8c.html#afc526b1feb2a8b14eac3d04564fd6a37">LFG_SCALE</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>      += <a class="code" href="tests_2checkasm_2h264pred_8c.html#a631c6befc8ec221896734437f964a631">src1</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="libavresample_2dither_8c.html#afc526b1feb2a8b14eac3d04564fd6a37">LFG_SCALE</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]  = <a class="code" href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#af788af7205b96c5e653e2ae0f801c9d8">  124</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#af788af7205b96c5e653e2ae0f801c9d8">quantize_c</a>(int16_t *dst, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">float</span> *dither, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = av_clip_int16(<a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="libavresample_2dither_8c.html#a8fbfdd2b7a79160dcca6b4788de48189">S16_SCALE</a> + dither[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a8a8dab0742dc14d850005350d62e5262">  131</a></span>&#160;<span class="preprocessor">#define SQRT_1_6 0.40824829046386301723f</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#ab75148a3ee4ee71325323926958d717f">  133</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#ab75148a3ee4ee71325323926958d717f">dither_highpass_filter</a>(<span class="keywordtype">float</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <span class="keywordtype">int</span> <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">/* filter is from libswresample in FFmpeg */</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a> - 2; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = (-<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] + 2 * <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1] - <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> + 2]) * <a class="code" href="libavresample_2dither_8c.html#a8a8dab0742dc14d850005350d62e5262">SQRT_1_6</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a8a5921aea7fd2d2fd475323a69ea0f66">  142</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavresample_2dither_8c.html#a8a5921aea7fd2d2fd475323a69ea0f66">generate_dither_noise</a>(<a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_dither_state.html">DitherState</a> *<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                 <span class="keywordtype">int</span> min_samples)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;{</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">int</span> nb_samples  = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(min_samples, 16) + 16;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">int</span> buf_samples = nb_samples *</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                      (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method == <a class="code" href="avresample_8h.html#a412ddc4578ab176cf049237905d1a5f6">AV_RESAMPLE_DITHER_RECTANGULAR</a> ? 1 : 2);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *noise_buf_ui;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(&amp;<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_size = <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_ptr = 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf = <a class="code" href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a>(buf_samples * <span class="keyword">sizeof</span>(*<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf));</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a>(ENOMEM);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_size = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(min_samples, 16);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    noise_buf_ui          = (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *)<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="lfg_8c.html#aa8cc657d3dca15bc50a94730a4346d58">av_lfg_init</a>(&amp;<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;lfg, <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;seed);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; buf_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        noise_buf_ui[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lfg_8h.html#a58feb242e560adee0b7a16e11cce43e9">av_lfg_get</a>(&amp;<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;lfg);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ddsp.dither_int_to_float(<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf, noise_buf_ui, nb_samples);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method == <a class="code" href="avresample_8h.html#a1f064b62fbeadc28512247c7b0635873">AV_RESAMPLE_DITHER_TRIANGULAR_HP</a>)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <a class="code" href="libavresample_2dither_8c.html#ab75148a3ee4ee71325323926958d717f">dither_highpass_filter</a>(<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf, nb_samples);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a5ec72bb6a5da30f732ac1bed05ac2b12">  172</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#a5ec72bb6a5da30f732ac1bed05ac2b12">quantize_triangular_ns</a>(<a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_dither_state.html">DitherState</a> *<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                   int16_t *dst, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                   <span class="keywordtype">int</span> nb_samples)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>, j;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">float</span> *dither = &amp;<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf[<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_ptr];</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;mute &gt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mute_reset_threshold)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        memset(<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_a, 0, <span class="keyword">sizeof</span>(<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_a));</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; nb_samples; <a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordtype">float</span> err = 0;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] * <a class="code" href="libavresample_2dither_8c.html#a8fbfdd2b7a79160dcca6b4788de48189">S16_SCALE</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; 4; j++) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            err += <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ns_coef_b[j] * <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_b[j] -</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                   <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ns_coef_a[j] * <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_a[j];</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">for</span> (j = 3; j &gt; 0; j--) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_a[j] = <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_a[j - 1];</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_b[j] = <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_b[j - 1];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_a[0] = err;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> -= err;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;mute &gt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mute_dither_threshold) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]             = av_clip_int16(<a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_b[0] = 0;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]             = av_clip_int16(<a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(<a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a> + dither[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>]));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;dither_b[0] = av_clipf(dst[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>] - <a class="code" href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a>, -1.5<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>, 1.5<a class="code" href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;mute++;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[<a class="code" href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a>])</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;mute = 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#a54b7e4ece0d6793adc86d157d8ea38ec">  211</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="libavresample_2dither_8c.html#a54b7e4ece0d6793adc86d157d8ea38ec">convert_samples</a>(<a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, int16_t **dst, <span class="keywordtype">float</span> * <span class="keyword">const</span> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                           <span class="keywordtype">int</span> <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, <span class="keywordtype">int</span> nb_samples)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">int</span> ch, <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">int</span> aligned_samples = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(nb_samples, 16);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (ch = 0; ch &lt; <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>; ch++) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="struct_dither_state.html">DitherState</a> *<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a> = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state[ch];</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_size &lt; aligned_samples) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavresample_2dither_8c.html#a8a5921aea7fd2d2fd475323a69ea0f66">generate_dither_noise</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>, nb_samples);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_size - <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_ptr &lt; aligned_samples) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_ptr = 0;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method == <a class="code" href="avresample_8h.html#ae652d5894e1d16aada5bd5f101cc8b7e">AV_RESAMPLE_DITHER_TRIANGULAR_NS</a>) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <a class="code" href="libavresample_2dither_8c.html#a5ec72bb6a5da30f732ac1bed05ac2b12">quantize_triangular_ns</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>, dst[ch], <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[ch], nb_samples);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;quantize(dst[ch], <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>[ch],</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                        &amp;<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf[<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_ptr],</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                        <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(nb_samples, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;samples_align));</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;noise_buf_ptr += aligned_samples;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="dither_8h.html#a92a918a659d495219c85d8460a784791">  242</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="libavresample_2dither_8c.html#a92a918a659d495219c85d8460a784791">ff_convert_dither</a>(<a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="struct_audio_data.html">AudioData</a> *dst, <a class="code" href="struct_audio_data.html">AudioData</a> *<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">int</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="struct_audio_data.html">AudioData</a> *flt_data;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">/* output directly to dst if it is planar */</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_audio_data.html#aa5a4c5116d0f7ddc09758fbb25ef5fdc">sample_fmt</a> == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a35eaaad9da207aa4e63fa02fd67fae68">AV_SAMPLE_FMT_S16P</a>)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data = dst;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">/* make sure s16_data is large enough for the output */</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="audio__data_8c.html#abfb4fab7a613c3c08225486fd5b87627">ff_audio_data_realloc</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;nb_samples);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;sample_fmt != <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a> || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;apply_map) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">/* make sure flt_data is large enough for the input */</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="audio__data_8c.html#abfb4fab7a613c3c08225486fd5b87627">ff_audio_data_realloc</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;flt_data, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;nb_samples);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        flt_data = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;flt_data;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;sample_fmt != <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="comment">/* convert input samples to fltp and scale to s16 range */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="audio__convert_8h.html#aed497e88f80911078498770e3083cb57">ff_audio_convert</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_in, flt_data, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;apply_map) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="audio__data_8c.html#ad484fd884728c054f85d1f5b387e43bd">ff_audio_data_copy</a>(flt_data, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ch_map_info);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        flt_data = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">/* check alignment and padding constraints */</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method != <a class="code" href="avresample_8h.html#ae652d5894e1d16aada5bd5f101cc8b7e">AV_RESAMPLE_DITHER_TRIANGULAR_NS</a>) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordtype">int</span> ptr_align     = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(flt_data-&gt;<a class="code" href="struct_audio_data.html#a4c72f1ef8f017a791f36669f7e9549f8">ptr_align</a>,     <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data-&gt;ptr_align);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="keywordtype">int</span> samples_align = <a class="code" href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a>(flt_data-&gt;<a class="code" href="struct_audio_data.html#aba96fc231e34234ee74ef43b92241f34">samples_align</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data-&gt;samples_align);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordtype">int</span> aligned_len   = <a class="code" href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a>(<a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;nb_samples, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ddsp.samples_align);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">if</span> (!(ptr_align % <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ddsp.ptr_align) &amp;&amp; samples_align &gt;= aligned_len) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;quantize      = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ddsp.quantize;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;samples_align = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ddsp.samples_align;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;quantize      = <a class="code" href="libavresample_2dither_8c.html#af788af7205b96c5e653e2ae0f801c9d8">quantize_c</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;samples_align = 1;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="libavresample_2dither_8c.html#a54b7e4ece0d6793adc86d157d8ea38ec">convert_samples</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, (int16_t **)<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data-&gt;data,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                          (<span class="keywordtype">float</span> * <span class="keyword">const</span> *)flt_data-&gt;<a class="code" href="struct_audio_data.html#ab34a7c07ce0bf26c2a259b6337d90f68">data</a>, <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;channels,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                          <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;nb_samples);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data-&gt;nb_samples = <a class="code" href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a>-&gt;nb_samples;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">/* interleave output to dst if needed */</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (dst-&gt;<a class="code" href="struct_audio_data.html#aa5a4c5116d0f7ddc09758fbb25ef5fdc">sample_fmt</a> == <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a>) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> = <a class="code" href="audio__convert_8h.html#aed497e88f80911078498770e3083cb57">ff_audio_convert</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_out, dst, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a> &lt; 0)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data = <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="dither_8h.html#a4dfc62e8c8dc33b08f82a805e6376523">  312</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#a2c6babee04d890cd0469c5b67762abe5">ff_dither_free</a>(<a class="code" href="struct_dither_context.html">DitherContext</a> **cp)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;{</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = *cp;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordtype">int</span> ch;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="audio__data_8c.html#ae2e6e67dddfa9a50624a0ec9fc325dbc">ff_audio_data_free</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;flt_data);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="audio__data_8c.html#ae2e6e67dddfa9a50624a0ec9fc325dbc">ff_audio_data_free</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="audio__convert_8h.html#aa0cf30aa23e009ef037c643e07f6a1b9">ff_audio_convert_free</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_in);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="audio__convert_8h.html#aa0cf30aa23e009ef037c643e07f6a1b9">ff_audio_convert_free</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_out);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">for</span> (ch = 0; ch &lt; <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels; ch++)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state[ch].noise_buf);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a>(cp);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="libavresample_2dither_8c.html#af2814b26d153161188940b93a223da91">  329</a></span>&#160;<span class="keyword">static</span> <a class="code" href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a> <span class="keywordtype">void</span> <a class="code" href="libavresample_2dither_8c.html#af2814b26d153161188940b93a223da91">dither_init</a>(<a class="code" href="struct_dither_d_s_p_context.html">DitherDSPContext</a> *ddsp,</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                <span class="keyword">enum</span> <a class="code" href="group__lavr.html#ga7aef839537aeecede586219937b90917">AVResampleDitherMethod</a> method)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    ddsp-&gt;<a class="code" href="struct_dither_d_s_p_context.html#af9d3cabd76d3f6aced5a63dc1265c10b">quantize</a>      = <a class="code" href="libavresample_2dither_8c.html#af788af7205b96c5e653e2ae0f801c9d8">quantize_c</a>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    ddsp-&gt;<a class="code" href="struct_dither_d_s_p_context.html#a2c454b48a8f0e86e6f9753d1f1906491">ptr_align</a>     = 1;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    ddsp-&gt;<a class="code" href="struct_dither_d_s_p_context.html#a2fcbaeac9b8334e408ec964d1335a21d">samples_align</a> = 1;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (method == <a class="code" href="avresample_8h.html#a412ddc4578ab176cf049237905d1a5f6">AV_RESAMPLE_DITHER_RECTANGULAR</a>)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        ddsp-&gt;<a class="code" href="struct_dither_d_s_p_context.html#ac3809657ed71f8a52ef6daebcee36873">dither_int_to_float</a> = <a class="code" href="libavresample_2dither_8c.html#aaffd73b4dc8d0c21cab3794dbc6b91f7">dither_int_to_float_rectangular_c</a>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        ddsp-&gt;<a class="code" href="struct_dither_d_s_p_context.html#ac3809657ed71f8a52ef6daebcee36873">dither_int_to_float</a> = <a class="code" href="libavresample_2dither_8c.html#a9784ccba7fadef894a91ae192ec5683e">dither_int_to_float_triangular_c</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (ARCH_X86)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="dither_8h.html#a6975ae8031b4ac8efc0b170635ca3e3d">ff_dither_init_x86</a>(ddsp, method);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="dither_8h.html#abf38a3e1edd51b4938356d389b56f7ea">  345</a></span>&#160;<a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="libavresample_2dither_8c.html#abf38a3e1edd51b4938356d389b56f7ea">ff_dither_alloc</a>(<a class="code" href="struct_a_v_audio_resample_context.html">AVAudioResampleContext</a> *avr,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                               <span class="keyword">enum</span> <a class="code" href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a> out_fmt,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                               <span class="keyword">enum</span> <a class="code" href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a> in_fmt,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                               <span class="keywordtype">int</span> <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, <span class="keywordtype">int</span> <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>, <span class="keywordtype">int</span> apply_map)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <a class="code" href="struct_a_v_l_f_g.html">AVLFG</a> seed_gen;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="struct_dither_context.html">DitherContext</a> *<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">int</span> ch;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__lavu__sampfmts.html#ga7817ec0eff4dc6fc0962f31e6d138bca">av_get_packed_sample_fmt</a>(out_fmt) != <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a> ||</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="group__lavu__sampfmts.html#ga0c3c218e1dd570ad4917c69a35a6c77d">av_get_bytes_per_sample</a>(in_fmt) &lt;= 2) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avr, <a class="code" href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a>, <span class="stringliteral">&quot;dithering %s to %s is not supported\n&quot;</span>,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;               <a class="code" href="group__lavu__sampfmts.html#ga31b9d149b2de9821a65f4f5612970838">av_get_sample_fmt_name</a>(in_fmt), <a class="code" href="group__lavu__sampfmts.html#ga31b9d149b2de9821a65f4f5612970838">av_get_sample_fmt_name</a>(out_fmt));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a> = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>));</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;apply_map = apply_map;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (apply_map)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ch_map_info = &amp;avr-&gt;<a class="code" href="struct_a_v_audio_resample_context.html#a111eab9fb9be9ff7f1c1a4a5672eea28">ch_map_info</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span> (avr-&gt;<a class="code" href="struct_a_v_audio_resample_context.html#a495c5e644deb4a4f72e4b804c847d20c">dither_method</a> == <a class="code" href="avresample_8h.html#ae652d5894e1d16aada5bd5f101cc8b7e">AV_RESAMPLE_DITHER_TRIANGULAR_NS</a> &amp;&amp;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> != 48000 &amp;&amp; <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> != 44100) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <a class="code" href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a>(avr, <a class="code" href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a>, <span class="stringliteral">&quot;sample rate must be 48000 or 44100 Hz &quot;</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;               <span class="stringliteral">&quot;for triangular_ns dither. using triangular_hp instead.\n&quot;</span>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        avr-&gt;<a class="code" href="struct_a_v_audio_resample_context.html#a495c5e644deb4a4f72e4b804c847d20c">dither_method</a> = <a class="code" href="avresample_8h.html#a1f064b62fbeadc28512247c7b0635873">AV_RESAMPLE_DITHER_TRIANGULAR_HP</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method = avr-&gt;<a class="code" href="struct_a_v_audio_resample_context.html#a495c5e644deb4a4f72e4b804c847d20c">dither_method</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="libavresample_2dither_8c.html#af2814b26d153161188940b93a223da91">dither_init</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ddsp, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;method == <a class="code" href="avresample_8h.html#ae652d5894e1d16aada5bd5f101cc8b7e">AV_RESAMPLE_DITHER_TRIANGULAR_NS</a>) {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> == 48000) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ns_coef_b = <a class="code" href="libavresample_2dither_8c.html#ad78d591c1eeaf41ea6f256a638e45bef">ns_48_coef_b</a>;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ns_coef_a = <a class="code" href="libavresample_2dither_8c.html#afcbd5e6f36d3d11615dfdbd27f5adc5a">ns_48_coef_a</a>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ns_coef_b = <a class="code" href="libavresample_2dither_8c.html#a4d5e2b22ae0025f7a278683e62b6a53d">ns_44_coef_b</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ns_coef_a = <a class="code" href="libavresample_2dither_8c.html#a223e136feca357d3c2598004bf6b5623">ns_44_coef_a</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">/* Either s16 or s16p output format is allowed, but s16p is used</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">       internally, so we need to use a temp buffer and interleave if the output</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">       format is s16 */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">if</span> (out_fmt != <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a35eaaad9da207aa4e63fa02fd67fae68">AV_SAMPLE_FMT_S16P</a>) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data = <a class="code" href="audio__data_8c.html#a98215f49d35a777c9152e4aaec3f1b74">ff_audio_data_alloc</a>(<a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, 1024, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a35eaaad9da207aa4e63fa02fd67fae68">AV_SAMPLE_FMT_S16P</a>,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                          <span class="stringliteral">&quot;dither s16 buffer&quot;</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;s16_data)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_out = <a class="code" href="audio__convert_8h.html#ab2b1464b0673892a875b48598018f574">ff_audio_convert_alloc</a>(avr, out_fmt, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a35eaaad9da207aa4e63fa02fd67fae68">AV_SAMPLE_FMT_S16P</a>,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                           <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>, 0);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_out)</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (in_fmt != <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a> || <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;apply_map) {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;flt_data = <a class="code" href="audio__data_8c.html#a98215f49d35a777c9152e4aaec3f1b74">ff_audio_data_alloc</a>(<a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, 1024, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                          <span class="stringliteral">&quot;dither flt buffer&quot;</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;flt_data)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (in_fmt != <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_in = <a class="code" href="audio__convert_8h.html#ab2b1464b0673892a875b48598018f574">ff_audio_convert_alloc</a>(avr, <a class="code" href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a>, in_fmt,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                          <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>, <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a>, <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;apply_map);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;ac_in)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state = <a class="code" href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a>(<a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a> * <span class="keyword">sizeof</span>(*<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state));</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">goto</span> <a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;channels = <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">/* calculate thresholds for turning off dithering during periods of</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">       silence to avoid replacing digital silence with quiet dither noise */</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mute_dither_threshold = <a class="code" href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a>(<a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> * <a class="code" href="libavresample_2dither_8c.html#abab33009f6a143b6e5ca29eefc4455cb">MUTE_THRESHOLD_SEC</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mute_reset_threshold  = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mute_dither_threshold * 4;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">/* initialize dither states */</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="lfg_8c.html#aa8cc657d3dca15bc50a94730a4346d58">av_lfg_init</a>(&amp;seed_gen, 0xC0FFEE);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordflow">for</span> (ch = 0; ch &lt; <a class="code" href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a>; ch++) {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <a class="code" href="struct_dither_state.html">DitherState</a> *<a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a> = &amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;state[ch];</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;mute = <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>-&gt;mute_reset_threshold + 1;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>-&gt;seed = <a class="code" href="lfg_8h.html#a58feb242e560adee0b7a16e11cce43e9">av_lfg_get</a>(&amp;seed_gen);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <a class="code" href="libavresample_2dither_8c.html#a8a5921aea7fd2d2fd475323a69ea0f66">generate_dither_noise</a>(<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>, <a class="code" href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a>, <a class="code" href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a>(32768, <a class="code" href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a> / 2));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<a class="code" href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a>:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <a class="code" href="libavresample_2dither_8c.html#a2c6babee04d890cd0469c5b67762abe5">ff_dither_free</a>(&amp;<a class="code" href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a2d21c520e4ab21100b6440ec2d81ba1b">AV_SAMPLE_FMT_FLTP</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_FLTP</div><div class="ttdoc">float, planar</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00069">samplefmt.h:69</a></div></div>
<div class="ttc" id="astruct_dither_context_html_aab94a3870a50b5a56c3d7b457f838059"><div class="ttname"><a href="struct_dither_context.html#aab94a3870a50b5a56c3d7b457f838059">DitherContext::ns_coef_b</a></div><div class="ttdeci">const float * ns_coef_b</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00062">dither.c:62</a></div></div>
<div class="ttc" id="aaudio__convert_8h_html_aa0cf30aa23e009ef037c643e07f6a1b9"><div class="ttname"><a href="audio__convert_8h.html#aa0cf30aa23e009ef037c643e07f6a1b9">ff_audio_convert_free</a></div><div class="ttdeci">void ff_audio_convert_free(AudioConvert **ac)</div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_ga85b57516ca703cc47d9bbe5f4658c716"><div class="ttname"><a href="group__lavu__log__constants.html#ga85b57516ca703cc47d9bbe5f4658c716">AV_LOG_WARNING</a></div><div class="ttdeci">#define AV_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00200">log.h:200</a></div></div>
<div class="ttc" id="acheckasm_8c_html_afca6369e091fee815954cf526fbb3887"><div class="ttname"><a href="checkasm_8c.html#afca6369e091fee815954cf526fbb3887">state</a></div><div class="ttdeci">static struct @2 state</div></div>
<div class="ttc" id="astruct_dither_context_html_a9aead7c39d4443e684f75f7d11079566"><div class="ttname"><a href="struct_dither_context.html#a9aead7c39d4443e684f75f7d11079566">DitherContext::apply_map</a></div><div class="ttdeci">int apply_map</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00057">dither.c:57</a></div></div>
<div class="ttc" id="avf__curves_8c_html_a33ac7b8ce37a3a60855883424fcf8b62"><div class="ttname"><a href="vf__curves_8c.html#a33ac7b8ce37a3a60855883424fcf8b62">r</a></div><div class="ttdeci">const char * r</div><div class="ttdef"><b>Definition:</b> <a href="vf__curves_8c_source.html#l00114">vf_curves.c:114</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_adf2fb515710d47541f7150ecd2950e76"><div class="ttname"><a href="filter__design_8txt.html#adf2fb515710d47541f7150ecd2950e76">AVERROR</a></div><div class="ttdeci">Filter the word “frame” indicates either a video frame or a group of audio as stored in an AVFrame structure Format for each input and each output the list of supported formats For video that means pixel format For audio that means channel sample they are references to shared objects When the negotiation mechanism computes the intersection of the formats supported at each end of a all references to both lists are replaced with a reference to the intersection And when a single format is eventually chosen for a link amongst the remaining all references to the list are updated That means that if a filter requires that its input and output have the same format amongst a supported all it has to do is use a reference to the same list of formats query_formats can leave some formats unset and return AVERROR(EAGAIN) to cause the negotiation mechanism toagain later. That can be used by filters with complex requirements to use the format negotiated on one link to set the formats supported on another. Frame references ownership and permissions</div></div>
<div class="ttc" id="alfg_8c_html_aa8cc657d3dca15bc50a94730a4346d58"><div class="ttname"><a href="lfg_8c.html#aa8cc657d3dca15bc50a94730a4346d58">av_lfg_init</a></div><div class="ttdeci">av_cold void av_lfg_init(AVLFG *c, unsigned int seed)</div><div class="ttdef"><b>Definition:</b> <a href="lfg_8c_source.html#l00032">lfg.c:32</a></div></div>
<div class="ttc" id="aaudio__data_8c_html_a98215f49d35a777c9152e4aaec3f1b74"><div class="ttname"><a href="audio__data_8c.html#a98215f49d35a777c9152e4aaec3f1b74">ff_audio_data_alloc</a></div><div class="ttdeci">AudioData * ff_audio_data_alloc(int channels, int nb_samples, enum AVSampleFormat sample_fmt, const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8c_source.html#l00119">audio_data.c:119</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_ad78d591c1eeaf41ea6f256a638e45bef"><div class="ttname"><a href="libavresample_2dither_8c.html#ad78d591c1eeaf41ea6f256a638e45bef">ns_48_coef_b</a></div><div class="ttdeci">static const float ns_48_coef_b[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00089">dither.c:89</a></div></div>
<div class="ttc" id="astruct_dither_context_html_ad2c46c3b23ab389a50b327831dddc5a7"><div class="ttname"><a href="struct_dither_context.html#ad2c46c3b23ab389a50b327831dddc5a7">DitherContext::ch_map_info</a></div><div class="ttdeci">ChannelMapInfo * ch_map_info</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00058">dither.c:58</a></div></div>
<div class="ttc" id="aaudio__convert_8h_html"><div class="ttname"><a href="audio__convert_8h.html">audio_convert.h</a></div></div>
<div class="ttc" id="astruct_dither_context_html"><div class="ttname"><a href="struct_dither_context.html">DitherContext</a></div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00054">dither.c:54</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_afc526b1feb2a8b14eac3d04564fd6a37"><div class="ttname"><a href="libavresample_2dither_8c.html#afc526b1feb2a8b14eac3d04564fd6a37">LFG_SCALE</a></div><div class="ttdeci">#define LFG_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00085">dither.c:85</a></div></div>
<div class="ttc" id="astruct_dither_state_html_ac17480aebfcb0d5de8ce9115e88ce03c"><div class="ttname"><a href="struct_dither_state.html#ac17480aebfcb0d5de8ce9115e88ce03c">DitherState::seed</a></div><div class="ttdeci">unsigned int seed</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00045">dither.c:45</a></div></div>
<div class="ttc" id="aaudio__data_8c_html_ae2e6e67dddfa9a50624a0ec9fc325dbc"><div class="ttname"><a href="audio__data_8c.html#ae2e6e67dddfa9a50624a0ec9fc325dbc">ff_audio_data_free</a></div><div class="ttdeci">void ff_audio_data_free(AudioData **a)</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8c_source.html#l00217">audio_data.c:217</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a8a8dab0742dc14d850005350d62e5262"><div class="ttname"><a href="libavresample_2dither_8c.html#a8a8dab0742dc14d850005350d62e5262">SQRT_1_6</a></div><div class="ttdeci">#define SQRT_1_6</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00131">dither.c:131</a></div></div>
<div class="ttc" id="affmpeg__filter_8c_html_a9feef5270e0e54f103868362df0cd27a"><div class="ttname"><a href="ffmpeg__filter_8c.html#a9feef5270e0e54f103868362df0cd27a">sample_rate</a></div><div class="ttdeci">sample_rate</div><div class="ttdef"><b>Definition:</b> <a href="ffmpeg__filter_8c_source.html#l00193">ffmpeg_filter.c:193</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a54b7e4ece0d6793adc86d157d8ea38ec"><div class="ttname"><a href="libavresample_2dither_8c.html#a54b7e4ece0d6793adc86d157d8ea38ec">convert_samples</a></div><div class="ttdeci">static int convert_samples(DitherContext *c, int16_t **dst, float *const *src, int channels, int nb_samples)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00211">dither.c:211</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_ae97db1f58b6b1515ed57a83bea3dd572"><div class="ttname"><a href="tableprint__vlc_8h.html#ae97db1f58b6b1515ed57a83bea3dd572">av_malloc</a></div><div class="ttdeci">#define av_malloc(s)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00031">tableprint_vlc.h:31</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a9e1e8d0b434b37fc1b99a1fae761a0ab"><div class="ttname"><a href="struct_dither_context.html#a9e1e8d0b434b37fc1b99a1fae761a0ab">DitherContext::mute_dither_threshold</a></div><div class="ttdeci">int mute_dither_threshold</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00060">dither.c:60</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_aaffd73b4dc8d0c21cab3794dbc6b91f7"><div class="ttname"><a href="libavresample_2dither_8c.html#aaffd73b4dc8d0c21cab3794dbc6b91f7">dither_int_to_float_rectangular_c</a></div><div class="ttdeci">static void dither_int_to_float_rectangular_c(float *dst, int *src, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00105">dither.c:105</a></div></div>
<div class="ttc" id="astruct_channel_map_info_html"><div class="ttname"><a href="struct_channel_map_info.html">ChannelMapInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2internal_8h_source.html#l00043">internal.h:43</a></div></div>
<div class="ttc" id="astruct_dither_state_html_a8331dddbd553a5f6a948dcd5bfaae8ca"><div class="ttname"><a href="struct_dither_state.html#a8331dddbd553a5f6a948dcd5bfaae8ca">DitherState::mute</a></div><div class="ttdeci">int mute</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00044">dither.c:44</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a7dbd766fc1b1b62a15d108c06d74627b"><div class="ttname"><a href="struct_dither_context.html#a7dbd766fc1b1b62a15d108c06d74627b">DitherContext::ddsp</a></div><div class="ttdeci">DitherDSPContext ddsp</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00055">dither.c:55</a></div></div>
<div class="ttc" id="astruct_a_v_l_f_g_html"><div class="ttname"><a href="struct_a_v_l_f_g.html">AVLFG</a></div><div class="ttdef"><b>Definition:</b> <a href="lfg_8h_source.html#l00033">lfg.h:33</a></div></div>
<div class="ttc" id="astruct_dither_context_html_ad78dfc9cdb8dc9c1bcdab83857f6ef13"><div class="ttname"><a href="struct_dither_context.html#ad78dfc9cdb8dc9c1bcdab83857f6ef13">DitherContext::channels</a></div><div class="ttdeci">int channels</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00065">dither.c:65</a></div></div>
<div class="ttc" id="acheckasm_8h_html_a73a3b169ac8c3419cbe15327e75ffcfd"><div class="ttname"><a href="checkasm_8h.html#a73a3b169ac8c3419cbe15327e75ffcfd">fail</a></div><div class="ttdeci">#define fail()</div><div class="ttdef"><b>Definition:</b> <a href="checkasm_8h_source.html#l00123">checkasm.h:123</a></div></div>
<div class="ttc" id="asamplefmt_8h_html"><div class="ttname"><a href="samplefmt_8h.html">samplefmt.h</a></div></div>
<div class="ttc" id="adither_8h_html_a6975ae8031b4ac8efc0b170635ca3e3d"><div class="ttname"><a href="dither_8h.html#a6975ae8031b4ac8efc0b170635ca3e3d">ff_dither_init_x86</a></div><div class="ttdeci">void ff_dither_init_x86(DitherDSPContext *ddsp, enum AVResampleDitherMethod method)</div><div class="ttdef"><b>Definition:</b> <a href="dither__init_8c_source.html#l00034">dither_init.c:34</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a8fbfdd2b7a79160dcca6b4788de48189"><div class="ttname"><a href="libavresample_2dither_8c.html#a8fbfdd2b7a79160dcca6b4788de48189">S16_SCALE</a></div><div class="ttdeci">#define S16_SCALE</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00082">dither.c:82</a></div></div>
<div class="ttc" id="astruct_dither_d_s_p_context_html_a2fcbaeac9b8334e408ec964d1335a21d"><div class="ttname"><a href="struct_dither_d_s_p_context.html#a2fcbaeac9b8334e408ec964d1335a21d">DitherDSPContext::samples_align</a></div><div class="ttdeci">int samples_align</div><div class="ttdoc">len constraints for quantize()</div><div class="ttdef"><b>Definition:</b> <a href="dither_8h_source.html#l00041">dither.h:41</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a75be60eefdc6f070476b5df6f9059bbf"><div class="ttname"><a href="struct_dither_context.html#a75be60eefdc6f070476b5df6f9059bbf">DitherContext::mute_reset_threshold</a></div><div class="ttdeci">int mute_reset_threshold</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00061">dither.c:61</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_af788af7205b96c5e653e2ae0f801c9d8"><div class="ttname"><a href="libavresample_2dither_8c.html#af788af7205b96c5e653e2ae0f801c9d8">quantize_c</a></div><div class="ttdeci">static void quantize_c(int16_t *dst, const float *src, float *dither, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00124">dither.c:124</a></div></div>
<div class="ttc" id="agroup__lavu__log__constants_html_gaffe151ff4cd8a24b2e77ac8d9616c85c"><div class="ttname"><a href="group__lavu__log__constants.html#gaffe151ff4cd8a24b2e77ac8d9616c85c">AV_LOG_ERROR</a></div><div class="ttdeci">#define AV_LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00194">log.h:194</a></div></div>
<div class="ttc" id="aattributes_8h_html_abeeb324fff79a5335d36774704e2475c"><div class="ttname"><a href="attributes_8h.html#abeeb324fff79a5335d36774704e2475c">av_cold</a></div><div class="ttdeci">#define av_cold</div><div class="ttdef"><b>Definition:</b> <a href="attributes_8h_source.html#l00090">attributes.h:90</a></div></div>
<div class="ttc" id="alfg_8h_html_a58feb242e560adee0b7a16e11cce43e9"><div class="ttname"><a href="lfg_8h.html#a58feb242e560adee0b7a16e11cce43e9">av_lfg_get</a></div><div class="ttdeci">static unsigned int av_lfg_get(AVLFG *c)</div><div class="ttdef"><b>Definition:</b> <a href="lfg_8h_source.html#l00053">lfg.h:53</a></div></div>
<div class="ttc" id="adither_8h_html"><div class="ttname"><a href="dither_8h.html">dither.h</a></div></div>
<div class="ttc" id="alfg_8h_html"><div class="ttname"><a href="lfg_8h.html">lfg.h</a></div></div>
<div class="ttc" id="astruct_a_v_audio_resample_context_html_a111eab9fb9be9ff7f1c1a4a5672eea28"><div class="ttname"><a href="struct_a_v_audio_resample_context.html#a111eab9fb9be9ff7f1c1a4a5672eea28">AVAudioResampleContext::ch_map_info</a></div><div class="ttdeci">ChannelMapInfo ch_map_info</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2internal_8h_source.html#l00107">internal.h:107</a></div></div>
<div class="ttc" id="astruct_dither_context_html_ae62205a4f172ef29f723bb8e9588cfc1"><div class="ttname"><a href="struct_dither_context.html#ae62205a4f172ef29f723bb8e9588cfc1">DitherContext::ac_in</a></div><div class="ttdeci">AudioConvert * ac_in</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00070">dither.c:70</a></div></div>
<div class="ttc" id="aaptx_8h_html_ac9da8d7a4bd192b8a7dccbc024542709"><div class="ttname"><a href="aptx_8h.html#ac9da8d7a4bd192b8a7dccbc024542709">channels</a></div><div class="ttdeci">channels</div><div class="ttdef"><b>Definition:</b> <a href="aptx_8h_source.html#l00033">aptx.h:33</a></div></div>
<div class="ttc" id="astruct_dither_state_html_abda6fb4ab0952e5b2e0de95f14c5f88d"><div class="ttname"><a href="struct_dither_state.html#abda6fb4ab0952e5b2e0de95f14c5f88d">DitherState::noise_buf_size</a></div><div class="ttdeci">int noise_buf_size</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00048">dither.c:48</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ga31b9d149b2de9821a65f4f5612970838"><div class="ttname"><a href="group__lavu__sampfmts.html#ga31b9d149b2de9821a65f4f5612970838">av_get_sample_fmt_name</a></div><div class="ttdeci">const char * av_get_sample_fmt_name(enum AVSampleFormat sample_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8c_source.html#l00049">samplefmt.c:49</a></div></div>
<div class="ttc" id="acbs__vp9_8c_html_a67e4f69aaf2fe15c3d298d0a2de865a3"><div class="ttname"><a href="cbs__vp9_8c.html#a67e4f69aaf2fe15c3d298d0a2de865a3">f</a></div><div class="ttdeci">#define f(width, name)</div><div class="ttdef"><b>Definition:</b> <a href="cbs__vp9_8c_source.html#l00255">cbs_vp9.c:255</a></div></div>
<div class="ttc" id="astruct_dither_context_html_aa7c65b4aa3ef4c6e7cf2cb98269e5082"><div class="ttname"><a href="struct_dither_context.html#aa7c65b4aa3ef4c6e7cf2cb98269e5082">DitherContext::flt_data</a></div><div class="ttdeci">AudioData * flt_data</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00068">dither.c:68</a></div></div>
<div class="ttc" id="astruct_dither_d_s_p_context_html_ac3809657ed71f8a52ef6daebcee36873"><div class="ttname"><a href="struct_dither_d_s_p_context.html#ac3809657ed71f8a52ef6daebcee36873">DitherDSPContext::dither_int_to_float</a></div><div class="ttdeci">void(* dither_int_to_float)(float *dst, int *src0, int len)</div><div class="ttdef"><b>Definition:</b> <a href="dither_8h_source.html#l00054">dither.h:54</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a0689c17599661a4ec7254237d2b1d44c"><div class="ttname"><a href="libavresample_2dither_8c.html#a0689c17599661a4ec7254237d2b1d44c">DitherState</a></div><div class="ttdeci">struct DitherState DitherState</div></div>
<div class="ttc" id="acoverity_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="coverity_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="coverity_8c_source.html#l00032">coverity.c:32</a></div></div>
<div class="ttc" id="aavresample_8h_html_ae652d5894e1d16aada5bd5f101cc8b7e"><div class="ttname"><a href="avresample_8h.html#ae652d5894e1d16aada5bd5f101cc8b7e">AV_RESAMPLE_DITHER_TRIANGULAR_NS</a></div><div class="ttdeci">AV_RESAMPLE_DITHER_TRIANGULAR_NS</div><div class="ttdef"><b>Definition:</b> <a href="avresample_8h_source.html#l00137">avresample.h:137</a></div></div>
<div class="ttc" id="atests_2checkasm_2vp8dsp_8c_html_a858376c0918f93e656c8c0d76c63dbe8"><div class="ttname"><a href="tests_2checkasm_2vp8dsp_8c.html#a858376c0918f93e656c8c0d76c63dbe8">src</a></div><div class="ttdeci">#define src</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2vp8dsp_8c_source.html#l00254">vp8dsp.c:254</a></div></div>
<div class="ttc" id="astruct_dither_state_html_a070431b6976464cf7a0380f5cbf4a14e"><div class="ttname"><a href="struct_dither_state.html#a070431b6976464cf7a0380f5cbf4a14e">DitherState::noise_buf</a></div><div class="ttdeci">float * noise_buf</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00047">dither.c:47</a></div></div>
<div class="ttc" id="astruct_a_v_audio_resample_context_html"><div class="ttname"><a href="struct_a_v_audio_resample_context.html">AVAudioResampleContext</a></div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2internal_8h_source.html#l00053">internal.h:53</a></div></div>
<div class="ttc" id="astruct_audio_data_html_aba96fc231e34234ee74ef43b92241f34"><div class="ttname"><a href="struct_audio_data.html#aba96fc231e34234ee74ef43b92241f34">AudioData::samples_align</a></div><div class="ttdeci">int samples_align</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8h_source.html#l00054">audio_data.h:54</a></div></div>
<div class="ttc" id="aundefined_8txt_html_a12d8853991e25cc8d069554379c29ef6"><div class="ttname"><a href="undefined_8txt.html#a12d8853991e25cc8d069554379c29ef6">c</a></div><div class="ttdeci">Undefined Behavior In the C some operations are like signed integer dereferencing freed accessing outside allocated Undefined Behavior must not occur in a C it is not safe even if the output of undefined operations is unused The unsafety may seem nit picking but Optimizing compilers have in fact optimized code on the assumption that no undefined Behavior occurs Optimizing code based on wrong assumptions can and has in some cases lead to effects beyond the output of computations The signed integer overflow problem in speed critical code Code which is highly optimized and works with signed integers sometimes has the problem that often the output of the computation does not c</div><div class="ttdef"><b>Definition:</b> <a href="undefined_8txt_source.html#l00032">undefined.txt:32</a></div></div>
<div class="ttc" id="astruct_audio_data_html_aa5a4c5116d0f7ddc09758fbb25ef5fdc"><div class="ttname"><a href="struct_audio_data.html#aa5a4c5116d0f7ddc09758fbb25ef5fdc">AudioData::sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat sample_fmt</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8h_source.html#l00043">audio_data.h:44</a></div></div>
<div class="ttc" id="agroup__lavu__mem__funcs_html_gaf143ecab33a3868b57345466c39de7c1"><div class="ttname"><a href="group__lavu__mem__funcs.html#gaf143ecab33a3868b57345466c39de7c1">av_mallocz</a></div><div class="ttdeci">void * av_mallocz(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="mem_8c_source.html#l00237">mem.c:237</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_afcbd5e6f36d3d11615dfdbd27f5adc5a"><div class="ttname"><a href="libavresample_2dither_8c.html#afcbd5e6f36d3d11615dfdbd27f5adc5a">ns_48_coef_a</a></div><div class="ttdeci">static const float ns_48_coef_a[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00093">dither.c:93</a></div></div>
<div class="ttc" id="astruct_a_v_audio_resample_context_html_a495c5e644deb4a4f72e4b804c847d20c"><div class="ttname"><a href="struct_a_v_audio_resample_context.html#a495c5e644deb4a4f72e4b804c847d20c">AVAudioResampleContext::dither_method</a></div><div class="ttdeci">enum AVResampleDitherMethod dither_method</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2internal_8h_source.html#l00074">internal.h:75</a></div></div>
<div class="ttc" id="acommon_8h_html_a9960bd6780a9b16a216a57be1ee04359"><div class="ttname"><a href="common_8h.html#a9960bd6780a9b16a216a57be1ee04359">FFMAX</a></div><div class="ttdeci">#define FFMAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00094">common.h:94</a></div></div>
<div class="ttc" id="aflacdsp__template_8c_html_a924f03b9b06f2793262e576df93492db"><div class="ttname"><a href="flacdsp__template_8c.html#a924f03b9b06f2793262e576df93492db">sample</a></div><div class="ttdeci">#define sample</div><div class="ttdef"><b>Definition:</b> <a href="flacdsp__template_8c_source.html#l00044">flacdsp_template.c:44</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_abf38a3e1edd51b4938356d389b56f7ea"><div class="ttname"><a href="libavresample_2dither_8c.html#abf38a3e1edd51b4938356d389b56f7ea">ff_dither_alloc</a></div><div class="ttdeci">DitherContext * ff_dither_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00345">dither.c:345</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a9784ccba7fadef894a91ae192ec5683e"><div class="ttname"><a href="libavresample_2dither_8c.html#a9784ccba7fadef894a91ae192ec5683e">dither_int_to_float_triangular_c</a></div><div class="ttdeci">static void dither_int_to_float_triangular_c(float *dst, int *src0, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00112">dither.c:112</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a7b414f99216fb6c5548e008c11a354d0"><div class="ttname"><a href="struct_dither_context.html#a7b414f99216fb6c5548e008c11a354d0">DitherContext::ns_coef_a</a></div><div class="ttdeci">const float * ns_coef_a</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00063">dither.c:63</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_ab75148a3ee4ee71325323926958d717f"><div class="ttname"><a href="libavresample_2dither_8c.html#ab75148a3ee4ee71325323926958d717f">dither_highpass_filter</a></div><div class="ttdeci">static void dither_highpass_filter(float *src, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00133">dither.c:133</a></div></div>
<div class="ttc" id="acommon_8h_html_a0f84cbd7fd810cd678157c98cbfad4b0"><div class="ttname"><a href="common_8h.html#a0f84cbd7fd810cd678157c98cbfad4b0">FFMIN</a></div><div class="ttdeci">#define FFMIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="common_8h_source.html#l00096">common.h:96</a></div></div>
<div class="ttc" id="aattributes_8h_html"><div class="ttname"><a href="attributes_8h.html">attributes.h</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a4d5e2b22ae0025f7a278683e62b6a53d"><div class="ttname"><a href="libavresample_2dither_8c.html#a4d5e2b22ae0025f7a278683e62b6a53d">ns_44_coef_b</a></div><div class="ttdeci">static const float ns_44_coef_b[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00097">dither.c:97</a></div></div>
<div class="ttc" id="astruct_audio_data_html"><div class="ttname"><a href="struct_audio_data.html">AudioData</a></div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8h_source.html#l00037">audio_data.h:37</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a5ec72bb6a5da30f732ac1bed05ac2b12"><div class="ttname"><a href="libavresample_2dither_8c.html#a5ec72bb6a5da30f732ac1bed05ac2b12">quantize_triangular_ns</a></div><div class="ttdeci">static void quantize_triangular_ns(DitherContext *c, DitherState *state, int16_t *dst, const float *src, int nb_samples)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00172">dither.c:172</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a92a918a659d495219c85d8460a784791"><div class="ttname"><a href="libavresample_2dither_8c.html#a92a918a659d495219c85d8460a784791">ff_convert_dither</a></div><div class="ttdeci">int ff_convert_dither(DitherContext *c, AudioData *dst, AudioData *src)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00242">dither.c:242</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5a35eaaad9da207aa4e63fa02fd67fae68"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5a35eaaad9da207aa4e63fa02fd67fae68">AV_SAMPLE_FMT_S16P</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_S16P</div><div class="ttdoc">signed 16 bits, planar</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00067">samplefmt.h:67</a></div></div>
<div class="ttc" id="atests_2checkasm_2h264pred_8c_html_ac4457b06e88002c046568fa09e601dd5"><div class="ttname"><a href="tests_2checkasm_2h264pred_8c.html#ac4457b06e88002c046568fa09e601dd5">src0</a></div><div class="ttdeci">#define src0</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2h264pred_8c_source.html#l00138">h264pred.c:138</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_af2814b26d153161188940b93a223da91"><div class="ttname"><a href="libavresample_2dither_8c.html#af2814b26d153161188940b93a223da91">dither_init</a></div><div class="ttdeci">static av_cold void dither_init(DitherDSPContext *ddsp, enum AVResampleDitherMethod method)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00329">dither.c:329</a></div></div>
<div class="ttc" id="atests_2checkasm_2h264pred_8c_html_a631c6befc8ec221896734437f964a631"><div class="ttname"><a href="tests_2checkasm_2h264pred_8c.html#a631c6befc8ec221896734437f964a631">src1</a></div><div class="ttdeci">#define src1</div><div class="ttdef"><b>Definition:</b> <a href="tests_2checkasm_2h264pred_8c_source.html#l00139">h264pred.c:139</a></div></div>
<div class="ttc" id="ainput_8c_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="input_8c.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="input_8c_source.html#l00407">input.c:407</a></div></div>
<div class="ttc" id="astruct_dither_d_s_p_context_html_a2c454b48a8f0e86e6f9753d1f1906491"><div class="ttname"><a href="struct_dither_d_s_p_context.html#a2c454b48a8f0e86e6f9753d1f1906491">DitherDSPContext::ptr_align</a></div><div class="ttdeci">int ptr_align</div><div class="ttdoc">src and dst constraints for quantize()</div><div class="ttdef"><b>Definition:</b> <a href="dither_8h_source.html#l00040">dither.h:40</a></div></div>
<div class="ttc" id="alibm__mips_8h_html_acf57fc15cac2891669e0f0a0be2fb155"><div class="ttname"><a href="libm__mips_8h.html#acf57fc15cac2891669e0f0a0be2fb155">lrintf</a></div><div class="ttdeci">#define lrintf(x)</div><div class="ttdef"><b>Definition:</b> <a href="libm__mips_8h_source.html#l00070">libm_mips.h:70</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ga0c3c218e1dd570ad4917c69a35a6c77d"><div class="ttname"><a href="group__lavu__sampfmts.html#ga0c3c218e1dd570ad4917c69a35a6c77d">av_get_bytes_per_sample</a></div><div class="ttdeci">int av_get_bytes_per_sample(enum AVSampleFormat sample_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8c_source.html#l00106">samplefmt.c:106</a></div></div>
<div class="ttc" id="astruct_dither_state_html_a83822f1bfafd54fac4690f306160e787"><div class="ttname"><a href="struct_dither_state.html#a83822f1bfafd54fac4690f306160e787">DitherState::dither_a</a></div><div class="ttdeci">float dither_a[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00050">dither.c:50</a></div></div>
<div class="ttc" id="alibavutil_2internal_8h_html"><div class="ttname"><a href="libavutil_2internal_8h.html">internal.h</a></div></div>
<div class="ttc" id="acommon_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_gaf9a51ca15301871723577c730b5865c5"><div class="ttname"><a href="group__lavu__sampfmts.html#gaf9a51ca15301871723577c730b5865c5">AVSampleFormat</a></div><div class="ttdeci">AVSampleFormat</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00058">samplefmt.h:58</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af"><div class="ttname"><a href="group__lavu__sampfmts.html#ggaf9a51ca15301871723577c730b5865c5aea6132df57aebc3f76e10665395c46af">AV_SAMPLE_FMT_S16</a></div><div class="ttdeci">@ AV_SAMPLE_FMT_S16</div><div class="ttdoc">signed 16 bits</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8h_source.html#l00061">samplefmt.h:61</a></div></div>
<div class="ttc" id="astruct_audio_convert_html"><div class="ttname"><a href="struct_audio_convert.html">AudioConvert</a></div><div class="ttdef"><b>Definition:</b> <a href="audio__convert_8c_source.html#l00048">audio_convert.c:48</a></div></div>
<div class="ttc" id="avorbis__enc__data_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="vorbis__enc__data_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="vorbis__enc__data_8h_source.html#l00452">vorbis_enc_data.h:452</a></div></div>
<div class="ttc" id="astruct_dither_state_html_a6a05ba6ed89b2d59f8012e849821db00"><div class="ttname"><a href="struct_dither_state.html#a6a05ba6ed89b2d59f8012e849821db00">DitherState::noise_buf_ptr</a></div><div class="ttdeci">int noise_buf_ptr</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00049">dither.c:49</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a6df40d8f02f86a6c9549620156e7759b"><div class="ttname"><a href="struct_dither_context.html#a6df40d8f02f86a6c9549620156e7759b">DitherContext::samples_align</a></div><div class="ttdeci">int samples_align</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00074">dither.c:74</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a688e3d34a2fb8183429948fe831f81fa"><div class="ttname"><a href="struct_dither_context.html#a688e3d34a2fb8183429948fe831f81fa">DitherContext::method</a></div><div class="ttdeci">enum AVResampleDitherMethod method</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00055">dither.c:56</a></div></div>
<div class="ttc" id="afilter__design_8txt_html_af1ec77bdca1b30e8153fc5da88f603db"><div class="ttname"><a href="filter__design_8txt.html#af1ec77bdca1b30e8153fc5da88f603db">ret</a></div><div class="ttdeci">ret</div><div class="ttdef"><b>Definition:</b> <a href="filter__design_8txt_source.html#l00187">filter_design.txt:187</a></div></div>
<div class="ttc" id="aaudio__data_8c_html_abfb4fab7a613c3c08225486fd5b87627"><div class="ttname"><a href="audio__data_8c.html#abfb4fab7a613c3c08225486fd5b87627">ff_audio_data_realloc</a></div><div class="ttdeci">int ff_audio_data_realloc(AudioData *a, int nb_samples)</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8c_source.html#l00162">audio_data.c:162</a></div></div>
<div class="ttc" id="arematrix__template_8c_html_a4dfdfbb7b69470f1152e022432ee2d45"><div class="ttname"><a href="rematrix__template_8c.html#a4dfdfbb7b69470f1152e022432ee2d45">void</a></div><div class="ttdeci">typedef void(RENAME(mix_any_func_type))</div><div class="ttdef"><b>Definition:</b> <a href="rematrix__template_8c_source.html#l00052">rematrix_template.c:52</a></div></div>
<div class="ttc" id="astruct_audio_data_html_a4c72f1ef8f017a791f36669f7e9549f8"><div class="ttname"><a href="struct_audio_data.html#a4c72f1ef8f017a791f36669f7e9549f8">AudioData::ptr_align</a></div><div class="ttdeci">int ptr_align</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8h_source.html#l00053">audio_data.h:53</a></div></div>
<div class="ttc" id="aavresample_8h_html_a412ddc4578ab176cf049237905d1a5f6"><div class="ttname"><a href="avresample_8h.html#a412ddc4578ab176cf049237905d1a5f6">AV_RESAMPLE_DITHER_RECTANGULAR</a></div><div class="ttdeci">AV_RESAMPLE_DITHER_RECTANGULAR</div><div class="ttdef"><b>Definition:</b> <a href="avresample_8h_source.html#l00134">avresample.h:134</a></div></div>
<div class="ttc" id="astruct_dither_context_html_af31be7e3f4678c3c45029921dbec2223"><div class="ttname"><a href="struct_dither_context.html#af31be7e3f4678c3c45029921dbec2223">DitherContext::s16_data</a></div><div class="ttdeci">AudioData * s16_data</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00069">dither.c:69</a></div></div>
<div class="ttc" id="agroup__lavr_html_ga7aef839537aeecede586219937b90917"><div class="ttname"><a href="group__lavr.html#ga7aef839537aeecede586219937b90917">AVResampleDitherMethod</a></div><div class="ttdeci">enum attribute_deprecated AVResampleDitherMethod</div><div class="ttdef"><b>Definition:</b> <a href="avresample_8h_source.html#l00132">avresample.h:132</a></div></div>
<div class="ttc" id="agroup__lavu__sampfmts_html_ga7817ec0eff4dc6fc0962f31e6d138bca"><div class="ttname"><a href="group__lavu__sampfmts.html#ga7817ec0eff4dc6fc0962f31e6d138bca">av_get_packed_sample_fmt</a></div><div class="ttdeci">enum AVSampleFormat av_get_packed_sample_fmt(enum AVSampleFormat sample_fmt)</div><div class="ttdef"><b>Definition:</b> <a href="samplefmt_8c_source.html#l00049">samplefmt.c:75</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a7eff1096455be1ca01c080bc32ad65d1"><div class="ttname"><a href="struct_dither_context.html#a7eff1096455be1ca01c080bc32ad65d1">DitherContext::ac_out</a></div><div class="ttdeci">AudioConvert * ac_out</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00071">dither.c:71</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_abab33009f6a143b6e5ca29eefc4455cb"><div class="ttname"><a href="libavresample_2dither_8c.html#abab33009f6a143b6e5ca29eefc4455cb">MUTE_THRESHOLD_SEC</a></div><div class="ttdeci">#define MUTE_THRESHOLD_SEC</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00078">dither.c:78</a></div></div>
<div class="ttc" id="astruct_dither_d_s_p_context_html"><div class="ttname"><a href="struct_dither_d_s_p_context.html">DitherDSPContext</a></div><div class="ttdef"><b>Definition:</b> <a href="dither_8h_source.html#l00029">dither.h:29</a></div></div>
<div class="ttc" id="aaudio__convert_8h_html_ab2b1464b0673892a875b48598018f574"><div class="ttname"><a href="audio__convert_8h.html#ab2b1464b0673892a875b48598018f574">ff_audio_convert_alloc</a></div><div class="ttdeci">AudioConvert * ff_audio_convert_alloc(AVAudioResampleContext *avr, enum AVSampleFormat out_fmt, enum AVSampleFormat in_fmt, int channels, int sample_rate, int apply_map)</div></div>
<div class="ttc" id="astruct_dither_state_html_a284307af21f89ffc4bff9f30338bd02e"><div class="ttname"><a href="struct_dither_state.html#a284307af21f89ffc4bff9f30338bd02e">DitherState::lfg</a></div><div class="ttdeci">AVLFG lfg</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00046">dither.c:46</a></div></div>
<div class="ttc" id="astruct_dither_state_html"><div class="ttname"><a href="struct_dither_state.html">DitherState</a></div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00043">dither.c:43</a></div></div>
<div class="ttc" id="astruct_dither_d_s_p_context_html_af9d3cabd76d3f6aced5a63dc1265c10b"><div class="ttname"><a href="struct_dither_d_s_p_context.html#af9d3cabd76d3f6aced5a63dc1265c10b">DitherDSPContext::quantize</a></div><div class="ttdeci">void(* quantize)(int16_t *dst, const float *src, float *dither, int len)</div><div class="ttdef"><b>Definition:</b> <a href="dither_8h_source.html#l00038">dither.h:38</a></div></div>
<div class="ttc" id="amem_8h_html"><div class="ttname"><a href="mem_8h.html">mem.h</a></div></div>
<div class="ttc" id="astruct_dither_context_html_a8bad88154980a3330c70c3197a45761e"><div class="ttname"><a href="struct_dither_context.html#a8bad88154980a3330c70c3197a45761e">DitherContext::state</a></div><div class="ttdeci">DitherState * state</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00066">dither.c:66</a></div></div>
<div class="ttc" id="aavresample_8h_html_a1f064b62fbeadc28512247c7b0635873"><div class="ttname"><a href="avresample_8h.html#a1f064b62fbeadc28512247c7b0635873">AV_RESAMPLE_DITHER_TRIANGULAR_HP</a></div><div class="ttdeci">AV_RESAMPLE_DITHER_TRIANGULAR_HP</div><div class="ttdef"><b>Definition:</b> <a href="avresample_8h_source.html#l00136">avresample.h:136</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_a079eab092887563f2bef9106c6120089"><div class="ttname"><a href="tableprint__vlc_8h.html#a079eab092887563f2bef9106c6120089">av_free</a></div><div class="ttdeci">#define av_free(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00034">tableprint_vlc.h:34</a></div></div>
<div class="ttc" id="amacros_8h_html_acae4ba605b3a7d535b7ac058ffe96892"><div class="ttname"><a href="macros_8h.html#acae4ba605b3a7d535b7ac058ffe96892">FFALIGN</a></div><div class="ttdeci">#define FFALIGN(x, a)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00048">macros.h:48</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a2c6babee04d890cd0469c5b67762abe5"><div class="ttname"><a href="libavresample_2dither_8c.html#a2c6babee04d890cd0469c5b67762abe5">ff_dither_free</a></div><div class="ttdeci">void ff_dither_free(DitherContext **cp)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00312">dither.c:312</a></div></div>
<div class="ttc" id="astruct_audio_data_html_ab34a7c07ce0bf26c2a259b6337d90f68"><div class="ttname"><a href="struct_audio_data.html#ab34a7c07ce0bf26c2a259b6337d90f68">AudioData::data</a></div><div class="ttdeci">uint8_t * data[AVRESAMPLE_MAX_CHANNELS]</div><div class="ttdoc">samples buffer</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8h_source.html#l00039">audio_data.h:39</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_adba82e1bcd02de510a858fcbedf79ef1"><div class="ttname"><a href="tableprint__vlc_8h.html#adba82e1bcd02de510a858fcbedf79ef1">av_freep</a></div><div class="ttdeci">#define av_freep(p)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00035">tableprint_vlc.h:35</a></div></div>
<div class="ttc" id="atableprint__vlc_8h_html_af38b91523053c244564a94f1ef862c2c"><div class="ttname"><a href="tableprint__vlc_8h.html#af38b91523053c244564a94f1ef862c2c">av_log</a></div><div class="ttdeci">#define av_log(a,...)</div><div class="ttdef"><b>Definition:</b> <a href="tableprint__vlc_8h_source.html#l00028">tableprint_vlc.h:28</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a8a5921aea7fd2d2fd475323a69ea0f66"><div class="ttname"><a href="libavresample_2dither_8c.html#a8a5921aea7fd2d2fd475323a69ea0f66">generate_dither_noise</a></div><div class="ttdeci">static int generate_dither_noise(DitherContext *c, DitherState *state, int min_samples)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00142">dither.c:142</a></div></div>
<div class="ttc" id="astruct_dither_state_html_a81c56d2c00ee058e0b78cec65a667c78"><div class="ttname"><a href="struct_dither_state.html#a81c56d2c00ee058e0b78cec65a667c78">DitherState::dither_b</a></div><div class="ttdeci">float dither_b[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00051">dither.c:51</a></div></div>
<div class="ttc" id="aaudio__data_8c_html_ad484fd884728c054f85d1f5b387e43bd"><div class="ttname"><a href="audio__data_8c.html#ad484fd884728c054f85d1f5b387e43bd">ff_audio_data_copy</a></div><div class="ttdeci">int ff_audio_data_copy(AudioData *dst, AudioData *src, ChannelMapInfo *map)</div><div class="ttdef"><b>Definition:</b> <a href="audio__data_8c_source.html#l00225">audio_data.c:225</a></div></div>
<div class="ttc" id="aaudio__convert_8h_html_aed497e88f80911078498770e3083cb57"><div class="ttname"><a href="audio__convert_8h.html#aed497e88f80911078498770e3083cb57">ff_audio_convert</a></div><div class="ttdeci">int ff_audio_convert(AudioConvert *ac, AudioData *out, AudioData *in)</div></div>
<div class="ttc" id="astruct_dither_context_html_aa980d6b8ef6e56977ca1e41d5335eb78"><div class="ttname"><a href="struct_dither_context.html#aa980d6b8ef6e56977ca1e41d5335eb78">DitherContext::quantize</a></div><div class="ttdeci">void(* quantize)(int16_t *dst, const float *src, float *dither, int len)</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00073">dither.c:73</a></div></div>
<div class="ttc" id="alibavresample_2dither_8c_html_a223e136feca357d3c2598004bf6b5623"><div class="ttname"><a href="libavresample_2dither_8c.html#a223e136feca357d3c2598004bf6b5623">ns_44_coef_a</a></div><div class="ttdeci">static const float ns_44_coef_a[4]</div><div class="ttdef"><b>Definition:</b> <a href="libavresample_2dither_8c_source.html#l00101">dither.c:101</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
